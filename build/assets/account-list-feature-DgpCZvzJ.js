import{j as t}from"./tanstack-5zV8nv3g.js";import{N as v}from"./reactRouter-rG1Rk0JX.js";import{W as P}from"./index-Dl0q4Ro_.js";import{r as s}from"./jotai-DjeRa5Ps.js";import{u as L,k as E,a as T,Q as I}from"./ReactToastify-CWdncZXd.js";import{C as F,P as k}from"./solanaWeb3-DJ-PYoxv.js";import{E as A}from"./solanaWalletAdapters-Dk4vdYg7.js";import"./react-CxEt3Z_u.js";import"./reactHotToast-FBLoN5fc.js";import"./tabler-RJubXxao.js";function Q(){const{publicKey:l}=A(),u=new F("https://prettiest-flashy-wind.solana-mainnet.quiknode.pro/45fee519abbd5d4cac5f5c12044119d868ae84cb/","processed"),d="https://mcnv3hcykt.us-east-2.awsapprunner.com",[x,h]=s.useState(0),[n,p]=s.useState(0),[f,g]=s.useState(0),[b,w]=L(()=>({number:0,config:{tension:120,friction:14}})),i=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),S=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),j=async()=>{const e=Date.now(),o=30*60*1e3;if(e-f<o&&n>0)return console.log("Using cached SOL price"),n;try{const r=await fetch(`${d}/staking-data/sol-price`);if(!r.ok)throw new Error(`Failed to fetch SOL price. Status: ${r.status}`);const c=(await r.json()).price;return p(c),g(e),console.log("Fetched new SOL price from backend:",c),c}catch(r){return console.error("Error fetching SOL price:",r),n}},N=new k("8KNDibG6RAc1tE2i3UKboiQ1tdf7JuwLWjCTnVNChcP9"),y=async()=>{var e;try{const o=await u.getParsedAccountInfo(N);if(!o||!((e=o.value)!=null&&e.lamports))throw new Error("Stake pool account not found or contains no data");const r=o.value.lamports||0;try{const a=Number(r)/1e9;return h(a),console.log("Total SOL in Pool:",a),a}catch(a){throw console.error("Error parsing stake pool account data:",a),new Error("Unable to parse raw buffer data")}}catch(o){return console.error("Error fetching total SOL in pool:",o),I.error("Failed to fetch total SOL in pool."),0}},m=async()=>{const e=await y(),o=await j(),r=e*o;w({number:r})};return s.useEffect(()=>{m();const e=setInterval(m,3e4);return()=>clearInterval(e)},[]),l?t.jsx(v,{to:`/account/${l.toString()}`,replace:!0}):t.jsxs("div",{className:"bg-gradient-to-b from-purple-900 to-indigo-900 min-h-screen p-6 flex flex-col items-center text-gray-200",children:[t.jsx(E,{}),t.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[t.jsxs("h1",{className:"text-4xl font-bold text-teal-400 mb-4",children:["Earn ",t.jsx("span",{className:"text-white",children:"RAID"})," by Staking! ðŸš€"]}),t.jsxs("p",{className:"text-gray-300 text-lg",children:["Stake your SOL to help secure the network, earn rewards, and receive"," ",t.jsx("span",{className:"text-teal-400 font-semibold",children:"RADEON"})," to earn"," ",t.jsx("span",{className:"text-teal-400 font-semibold",children:"RAID"})," tokens â€” your gateway to affordable high-performance GPU resources; an investment in the futures of both AI & Crypto."]})]}),t.jsxs("div",{className:"max-w-xl w-full bg-indigo-800 shadow-lg rounded-lg p-6 mb-6",children:[t.jsx("h2",{className:"text-3xl font-bold text-teal-400 mb-4 text-center",children:"Vault Metrics"}),t.jsxs("p",{className:"text-gray-300 text-center text-lg",children:[t.jsx("strong",{children:"Total SOL in Pools:"})," ",t.jsxs("span",{className:"text-white",children:[i(x)," SOL"]})]}),t.jsxs("p",{className:"text-gray-300 text-center text-lg",children:[t.jsx("strong",{children:"SOL Price:"})," ",t.jsxs("span",{className:"text-white",children:["$",i(n)," USD"]})]}),t.jsx("p",{className:"text-center text-2xl font-bold text-teal-300 mt-6",children:"Total Value Locked (TVL):"}),t.jsx("div",{className:"flex justify-center mt-4",children:t.jsx("div",{className:"bg-gray-900 text-teal-400 font-mono font-extrabold text-5xl p-6 rounded-lg shadow-lg",children:t.jsx(T.div,{children:b.number.to(e=>`$${S(e)}`)})})})]}),t.jsxs("p",{className:"text-white text-lg",children:["Select your ",t.jsx("span",{className:"text-[#9945FF]",children:"Solana"})," wallet to continue!"]}),t.jsx("br",{}),t.jsx(P,{})]})}export{Q as default};
