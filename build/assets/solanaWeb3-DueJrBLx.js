var ec=Object.defineProperty;var rc=(n,t,e)=>t in n?ec(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ye=(n,t,e)=>rc(n,typeof t!="symbol"?t+"":t,e);import{g as us,c as He,a as di}from"./jotai-BfEc3ju9.js";var ge={},pi={};pi.byteLength=sc;pi.toByteArray=ac;pi.fromByteArray=hc;var Je=[],Fe=[],nc=typeof Uint8Array<"u"?Uint8Array:Array,Ti="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var sn=0,ic=Ti.length;sn<ic;++sn)Je[sn]=Ti[sn],Fe[Ti.charCodeAt(sn)]=sn;Fe[45]=62;Fe[95]=63;function mo(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function sc(n){var t=mo(n),e=t[0],r=t[1];return(e+r)*3/4-r}function oc(n,t,e){return(t+e)*3/4-e}function ac(n){var t,e=mo(n),r=e[0],o=e[1],i=new nc(oc(n,r,o)),u=0,p=o>0?r-4:r,w;for(w=0;w<p;w+=4)t=Fe[n.charCodeAt(w)]<<18|Fe[n.charCodeAt(w+1)]<<12|Fe[n.charCodeAt(w+2)]<<6|Fe[n.charCodeAt(w+3)],i[u++]=t>>16&255,i[u++]=t>>8&255,i[u++]=t&255;return o===2&&(t=Fe[n.charCodeAt(w)]<<2|Fe[n.charCodeAt(w+1)]>>4,i[u++]=t&255),o===1&&(t=Fe[n.charCodeAt(w)]<<10|Fe[n.charCodeAt(w+1)]<<4|Fe[n.charCodeAt(w+2)]>>2,i[u++]=t>>8&255,i[u++]=t&255),i}function cc(n){return Je[n>>18&63]+Je[n>>12&63]+Je[n>>6&63]+Je[n&63]}function uc(n,t,e){for(var r,o=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),o.push(cc(r));return o.join("")}function hc(n){for(var t,e=n.length,r=e%3,o=[],i=16383,u=0,p=e-r;u<p;u+=i)o.push(uc(n,u,u+i>p?p:u+i));return r===1?(t=n[e-1],o.push(Je[t>>2]+Je[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],o.push(Je[t>>10]+Je[t>>4&63]+Je[t<<2&63]+"=")),o.join("")}var hs={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */hs.read=function(n,t,e,r,o){var i,u,p=o*8-r-1,w=(1<<p)-1,_=w>>1,x=-7,E=e?o-1:0,U=e?-1:1,I=n[t+E];for(E+=U,i=I&(1<<-x)-1,I>>=-x,x+=p;x>0;i=i*256+n[t+E],E+=U,x-=8);for(u=i&(1<<-x)-1,i>>=-x,x+=r;x>0;u=u*256+n[t+E],E+=U,x-=8);if(i===0)i=1-_;else{if(i===w)return u?NaN:(I?-1:1)*(1/0);u=u+Math.pow(2,r),i=i-_}return(I?-1:1)*u*Math.pow(2,i-r)};hs.write=function(n,t,e,r,o,i){var u,p,w,_=i*8-o-1,x=(1<<_)-1,E=x>>1,U=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=r?0:i-1,R=r?1:-1,B=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(p=isNaN(t)?1:0,u=x):(u=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-u))<1&&(u--,w*=2),u+E>=1?t+=U/w:t+=U*Math.pow(2,1-E),t*w>=2&&(u++,w/=2),u+E>=x?(p=0,u=x):u+E>=1?(p=(t*w-1)*Math.pow(2,o),u=u+E):(p=t*Math.pow(2,E-1)*Math.pow(2,o),u=0));o>=8;n[e+I]=p&255,I+=R,p/=256,o-=8);for(u=u<<o|p,_+=o;_>0;n[e+I]=u&255,I+=R,u/=256,_-=8);n[e+I-R]|=B*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=pi,e=hs,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=x,n.SlowBuffer=W,n.INSPECT_MAX_BYTES=50;const o=2147483647;n.kMaxLength=o;const{Uint8Array:i,ArrayBuffer:u,SharedArrayBuffer:p}=globalThis;x.TYPED_ARRAY_SUPPORT=w(),!x.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{const S=new i(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,i.prototype),Object.setPrototypeOf(S,f),S.foo()===42}catch{return!1}}Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}});function _(S){if(S>o)throw new RangeError('The value "'+S+'" is invalid for option "size"');const f=new i(S);return Object.setPrototypeOf(f,x.prototype),f}function x(S,f,l){if(typeof S=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(S)}return E(S,f,l)}x.poolSize=8192;function E(S,f,l){if(typeof S=="string")return B(S,f);if(u.isView(S))return C(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(le(S,u)||S&&le(S.buffer,u)||typeof p<"u"&&(le(S,p)||S&&le(S.buffer,p)))return $(S,f,l);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=S.valueOf&&S.valueOf();if(k!=null&&k!==S)return x.from(k,f,l);const L=O(S);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return x.from(S[Symbol.toPrimitive]("string"),f,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}x.from=function(S,f,l){return E(S,f,l)},Object.setPrototypeOf(x.prototype,i.prototype),Object.setPrototypeOf(x,i);function U(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function I(S,f,l){return U(S),S<=0?_(S):f!==void 0?typeof l=="string"?_(S).fill(f,l):_(S).fill(f):_(S)}x.alloc=function(S,f,l){return I(S,f,l)};function R(S){return U(S),_(S<0?0:V(S)|0)}x.allocUnsafe=function(S){return R(S)},x.allocUnsafeSlow=function(S){return R(S)};function B(S,f){if((typeof f!="string"||f==="")&&(f="utf8"),!x.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const l=K(S,f)|0;let k=_(l);const L=k.write(S,f);return L!==l&&(k=k.slice(0,L)),k}function A(S){const f=S.length<0?0:V(S.length)|0,l=_(f);for(let k=0;k<f;k+=1)l[k]=S[k]&255;return l}function C(S){if(le(S,i)){const f=new i(S);return $(f.buffer,f.byteOffset,f.byteLength)}return A(S)}function $(S,f,l){if(f<0||S.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<f+(l||0))throw new RangeError('"length" is outside of buffer bounds');let k;return f===void 0&&l===void 0?k=new i(S):l===void 0?k=new i(S,f):k=new i(S,f,l),Object.setPrototypeOf(k,x.prototype),k}function O(S){if(x.isBuffer(S)){const f=V(S.length)|0,l=_(f);return l.length===0||S.copy(l,0,0,f),l}if(S.length!==void 0)return typeof S.length!="number"||yt(S.length)?_(0):A(S);if(S.type==="Buffer"&&Array.isArray(S.data))return A(S.data)}function V(S){if(S>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return S|0}function W(S){return+S!=S&&(S=0),x.alloc(+S)}x.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==x.prototype},x.compare=function(f,l){if(le(f,i)&&(f=x.from(f,f.offset,f.byteLength)),le(l,i)&&(l=x.from(l,l.offset,l.byteLength)),!x.isBuffer(f)||!x.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===l)return 0;let k=f.length,L=l.length;for(let T=0,N=Math.min(k,L);T<N;++T)if(f[T]!==l[T]){k=f[T],L=l[T];break}return k<L?-1:L<k?1:0},x.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(f,l){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return x.alloc(0);let k;if(l===void 0)for(l=0,k=0;k<f.length;++k)l+=f[k].length;const L=x.allocUnsafe(l);let T=0;for(k=0;k<f.length;++k){let N=f[k];if(le(N,i))T+N.length>L.length?(x.isBuffer(N)||(N=x.from(N)),N.copy(L,T)):i.prototype.set.call(L,N,T);else if(x.isBuffer(N))N.copy(L,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=N.length}return L};function K(S,f){if(x.isBuffer(S))return S.length;if(u.isView(S)||le(S,u))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const l=S.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&l===0)return 0;let L=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return wt(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return bt(S).length;default:if(L)return k?-1:wt(S).length;f=(""+f).toLowerCase(),L=!0}}x.byteLength=K;function G(S,f,l){let k=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,f>>>=0,l<=f))return"";for(S||(S="utf8");;)switch(S){case"hex":return a(this,f,l);case"utf8":case"utf-8":return m(this,f,l);case"ascii":return M(this,f,l);case"latin1":case"binary":return d(this,f,l);case"base64":return h(this,f,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,f,l);default:if(k)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),k=!0}}x.prototype._isBuffer=!0;function Y(S,f,l){const k=S[f];S[f]=S[l],S[l]=k}x.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<f;l+=2)Y(this,l,l+1);return this},x.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<f;l+=4)Y(this,l,l+3),Y(this,l+1,l+2);return this},x.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<f;l+=8)Y(this,l,l+7),Y(this,l+1,l+6),Y(this,l+2,l+5),Y(this,l+3,l+4);return this},x.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?m(this,0,f):G.apply(this,arguments)},x.prototype.toLocaleString=x.prototype.toString,x.prototype.equals=function(f){if(!x.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:x.compare(this,f)===0},x.prototype.inspect=function(){let f="";const l=n.INSPECT_MAX_BYTES;return f=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(f+=" ... "),"<Buffer "+f+">"},r&&(x.prototype[r]=x.prototype.inspect),x.prototype.compare=function(f,l,k,L,T){if(le(f,i)&&(f=x.from(f,f.offset,f.byteLength)),!x.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(l===void 0&&(l=0),k===void 0&&(k=f?f.length:0),L===void 0&&(L=0),T===void 0&&(T=this.length),l<0||k>f.length||L<0||T>this.length)throw new RangeError("out of range index");if(L>=T&&l>=k)return 0;if(L>=T)return-1;if(l>=k)return 1;if(l>>>=0,k>>>=0,L>>>=0,T>>>=0,this===f)return 0;let N=T-L,kt=k-l;const ot=Math.min(N,kt),st=this.slice(L,T),Xt=f.slice(l,k);for(let nt=0;nt<ot;++nt)if(st[nt]!==Xt[nt]){N=st[nt],kt=Xt[nt];break}return N<kt?-1:kt<N?1:0};function Ht(S,f,l,k,L){if(S.length===0)return-1;if(typeof l=="string"?(k=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,yt(l)&&(l=L?0:S.length-1),l<0&&(l=S.length+l),l>=S.length){if(L)return-1;l=S.length-1}else if(l<0)if(L)l=0;else return-1;if(typeof f=="string"&&(f=x.from(f,k)),x.isBuffer(f))return f.length===0?-1:_t(S,f,l,k,L);if(typeof f=="number")return f=f&255,typeof i.prototype.indexOf=="function"?L?i.prototype.indexOf.call(S,f,l):i.prototype.lastIndexOf.call(S,f,l):_t(S,[f],l,k,L);throw new TypeError("val must be string, number or Buffer")}function _t(S,f,l,k,L){let T=1,N=S.length,kt=f.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(S.length<2||f.length<2)return-1;T=2,N/=2,kt/=2,l/=2}function ot(Xt,nt){return T===1?Xt[nt]:Xt.readUInt16BE(nt*T)}let st;if(L){let Xt=-1;for(st=l;st<N;st++)if(ot(S,st)===ot(f,Xt===-1?0:st-Xt)){if(Xt===-1&&(Xt=st),st-Xt+1===kt)return Xt*T}else Xt!==-1&&(st-=st-Xt),Xt=-1}else for(l+kt>N&&(l=N-kt),st=l;st>=0;st--){let Xt=!0;for(let nt=0;nt<kt;nt++)if(ot(S,st+nt)!==ot(f,nt)){Xt=!1;break}if(Xt)return st}return-1}x.prototype.includes=function(f,l,k){return this.indexOf(f,l,k)!==-1},x.prototype.indexOf=function(f,l,k){return Ht(this,f,l,k,!0)},x.prototype.lastIndexOf=function(f,l,k){return Ht(this,f,l,k,!1)};function j(S,f,l,k){l=Number(l)||0;const L=S.length-l;k?(k=Number(k),k>L&&(k=L)):k=L;const T=f.length;k>T/2&&(k=T/2);let N;for(N=0;N<k;++N){const kt=parseInt(f.substr(N*2,2),16);if(yt(kt))return N;S[l+N]=kt}return N}function Wt(S,f,l,k){return gt(wt(f,S.length-l),S,l,k)}function v(S,f,l,k){return gt(Mt(f),S,l,k)}function s(S,f,l,k){return gt(bt(f),S,l,k)}function c(S,f,l,k){return gt(Xe(f,S.length-l),S,l,k)}x.prototype.write=function(f,l,k,L){if(l===void 0)L="utf8",k=this.length,l=0;else if(k===void 0&&typeof l=="string")L=l,k=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(k)?(k=k>>>0,L===void 0&&(L="utf8")):(L=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-l;if((k===void 0||k>T)&&(k=T),f.length>0&&(k<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let N=!1;for(;;)switch(L){case"hex":return j(this,f,l,k);case"utf8":case"utf-8":return Wt(this,f,l,k);case"ascii":case"latin1":case"binary":return v(this,f,l,k);case"base64":return s(this,f,l,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c(this,f,l,k);default:if(N)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),N=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function h(S,f,l){return f===0&&l===S.length?t.fromByteArray(S):t.fromByteArray(S.slice(f,l))}function m(S,f,l){l=Math.min(S.length,l);const k=[];let L=f;for(;L<l;){const T=S[L];let N=null,kt=T>239?4:T>223?3:T>191?2:1;if(L+kt<=l){let ot,st,Xt,nt;switch(kt){case 1:T<128&&(N=T);break;case 2:ot=S[L+1],(ot&192)===128&&(nt=(T&31)<<6|ot&63,nt>127&&(N=nt));break;case 3:ot=S[L+1],st=S[L+2],(ot&192)===128&&(st&192)===128&&(nt=(T&15)<<12|(ot&63)<<6|st&63,nt>2047&&(nt<55296||nt>57343)&&(N=nt));break;case 4:ot=S[L+1],st=S[L+2],Xt=S[L+3],(ot&192)===128&&(st&192)===128&&(Xt&192)===128&&(nt=(T&15)<<18|(ot&63)<<12|(st&63)<<6|Xt&63,nt>65535&&nt<1114112&&(N=nt))}}N===null?(N=65533,kt=1):N>65535&&(N-=65536,k.push(N>>>10&1023|55296),N=56320|N&1023),k.push(N),L+=kt}return b(k)}const g=4096;function b(S){const f=S.length;if(f<=g)return String.fromCharCode.apply(String,S);let l="",k=0;for(;k<f;)l+=String.fromCharCode.apply(String,S.slice(k,k+=g));return l}function M(S,f,l){let k="";l=Math.min(S.length,l);for(let L=f;L<l;++L)k+=String.fromCharCode(S[L]&127);return k}function d(S,f,l){let k="";l=Math.min(S.length,l);for(let L=f;L<l;++L)k+=String.fromCharCode(S[L]);return k}function a(S,f,l){const k=S.length;(!f||f<0)&&(f=0),(!l||l<0||l>k)&&(l=k);let L="";for(let T=f;T<l;++T)L+=vt[S[T]];return L}function y(S,f,l){const k=S.slice(f,l);let L="";for(let T=0;T<k.length-1;T+=2)L+=String.fromCharCode(k[T]+k[T+1]*256);return L}x.prototype.slice=function(f,l){const k=this.length;f=~~f,l=l===void 0?k:~~l,f<0?(f+=k,f<0&&(f=0)):f>k&&(f=k),l<0?(l+=k,l<0&&(l=0)):l>k&&(l=k),l<f&&(l=f);const L=this.subarray(f,l);return Object.setPrototypeOf(L,x.prototype),L};function q(S,f,l){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+f>l)throw new RangeError("Trying to access beyond buffer length")}x.prototype.readUintLE=x.prototype.readUIntLE=function(f,l,k){f=f>>>0,l=l>>>0,k||q(f,l,this.length);let L=this[f],T=1,N=0;for(;++N<l&&(T*=256);)L+=this[f+N]*T;return L},x.prototype.readUintBE=x.prototype.readUIntBE=function(f,l,k){f=f>>>0,l=l>>>0,k||q(f,l,this.length);let L=this[f+--l],T=1;for(;l>0&&(T*=256);)L+=this[f+--l]*T;return L},x.prototype.readUint8=x.prototype.readUInt8=function(f,l){return f=f>>>0,l||q(f,1,this.length),this[f]},x.prototype.readUint16LE=x.prototype.readUInt16LE=function(f,l){return f=f>>>0,l||q(f,2,this.length),this[f]|this[f+1]<<8},x.prototype.readUint16BE=x.prototype.readUInt16BE=function(f,l){return f=f>>>0,l||q(f,2,this.length),this[f]<<8|this[f+1]},x.prototype.readUint32LE=x.prototype.readUInt32LE=function(f,l){return f=f>>>0,l||q(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},x.prototype.readUint32BE=x.prototype.readUInt32BE=function(f,l){return f=f>>>0,l||q(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},x.prototype.readBigUInt64LE=be(function(f){f=f>>>0,me(f,"offset");const l=this[f],k=this[f+7];(l===void 0||k===void 0)&&pt(f,this.length-8);const L=l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,T=this[++f]+this[++f]*2**8+this[++f]*2**16+k*2**24;return BigInt(L)+(BigInt(T)<<BigInt(32))}),x.prototype.readBigUInt64BE=be(function(f){f=f>>>0,me(f,"offset");const l=this[f],k=this[f+7];(l===void 0||k===void 0)&&pt(f,this.length-8);const L=l*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],T=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+k;return(BigInt(L)<<BigInt(32))+BigInt(T)}),x.prototype.readIntLE=function(f,l,k){f=f>>>0,l=l>>>0,k||q(f,l,this.length);let L=this[f],T=1,N=0;for(;++N<l&&(T*=256);)L+=this[f+N]*T;return T*=128,L>=T&&(L-=Math.pow(2,8*l)),L},x.prototype.readIntBE=function(f,l,k){f=f>>>0,l=l>>>0,k||q(f,l,this.length);let L=l,T=1,N=this[f+--L];for(;L>0&&(T*=256);)N+=this[f+--L]*T;return T*=128,N>=T&&(N-=Math.pow(2,8*l)),N},x.prototype.readInt8=function(f,l){return f=f>>>0,l||q(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},x.prototype.readInt16LE=function(f,l){f=f>>>0,l||q(f,2,this.length);const k=this[f]|this[f+1]<<8;return k&32768?k|4294901760:k},x.prototype.readInt16BE=function(f,l){f=f>>>0,l||q(f,2,this.length);const k=this[f+1]|this[f]<<8;return k&32768?k|4294901760:k},x.prototype.readInt32LE=function(f,l){return f=f>>>0,l||q(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},x.prototype.readInt32BE=function(f,l){return f=f>>>0,l||q(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},x.prototype.readBigInt64LE=be(function(f){f=f>>>0,me(f,"offset");const l=this[f],k=this[f+7];(l===void 0||k===void 0)&&pt(f,this.length-8);const L=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(k<<24);return(BigInt(L)<<BigInt(32))+BigInt(l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),x.prototype.readBigInt64BE=be(function(f){f=f>>>0,me(f,"offset");const l=this[f],k=this[f+7];(l===void 0||k===void 0)&&pt(f,this.length-8);const L=(l<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(L)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+k)}),x.prototype.readFloatLE=function(f,l){return f=f>>>0,l||q(f,4,this.length),e.read(this,f,!0,23,4)},x.prototype.readFloatBE=function(f,l){return f=f>>>0,l||q(f,4,this.length),e.read(this,f,!1,23,4)},x.prototype.readDoubleLE=function(f,l){return f=f>>>0,l||q(f,8,this.length),e.read(this,f,!0,52,8)},x.prototype.readDoubleBE=function(f,l){return f=f>>>0,l||q(f,8,this.length),e.read(this,f,!1,52,8)};function D(S,f,l,k,L,T){if(!x.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>L||f<T)throw new RangeError('"value" argument is out of bounds');if(l+k>S.length)throw new RangeError("Index out of range")}x.prototype.writeUintLE=x.prototype.writeUIntLE=function(f,l,k,L){if(f=+f,l=l>>>0,k=k>>>0,!L){const kt=Math.pow(2,8*k)-1;D(this,f,l,k,kt,0)}let T=1,N=0;for(this[l]=f&255;++N<k&&(T*=256);)this[l+N]=f/T&255;return l+k},x.prototype.writeUintBE=x.prototype.writeUIntBE=function(f,l,k,L){if(f=+f,l=l>>>0,k=k>>>0,!L){const kt=Math.pow(2,8*k)-1;D(this,f,l,k,kt,0)}let T=k-1,N=1;for(this[l+T]=f&255;--T>=0&&(N*=256);)this[l+T]=f/N&255;return l+k},x.prototype.writeUint8=x.prototype.writeUInt8=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,1,255,0),this[l]=f&255,l+1},x.prototype.writeUint16LE=x.prototype.writeUInt16LE=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,2,65535,0),this[l]=f&255,this[l+1]=f>>>8,l+2},x.prototype.writeUint16BE=x.prototype.writeUInt16BE=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,2,65535,0),this[l]=f>>>8,this[l+1]=f&255,l+2},x.prototype.writeUint32LE=x.prototype.writeUInt32LE=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,4,4294967295,0),this[l+3]=f>>>24,this[l+2]=f>>>16,this[l+1]=f>>>8,this[l]=f&255,l+4},x.prototype.writeUint32BE=x.prototype.writeUInt32BE=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,4,4294967295,0),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4};function F(S,f,l,k,L){lt(f,k,L,S,l,7);let T=Number(f&BigInt(4294967295));S[l++]=T,T=T>>8,S[l++]=T,T=T>>8,S[l++]=T,T=T>>8,S[l++]=T;let N=Number(f>>BigInt(32)&BigInt(4294967295));return S[l++]=N,N=N>>8,S[l++]=N,N=N>>8,S[l++]=N,N=N>>8,S[l++]=N,l}function rt(S,f,l,k,L){lt(f,k,L,S,l,7);let T=Number(f&BigInt(4294967295));S[l+7]=T,T=T>>8,S[l+6]=T,T=T>>8,S[l+5]=T,T=T>>8,S[l+4]=T;let N=Number(f>>BigInt(32)&BigInt(4294967295));return S[l+3]=N,N=N>>8,S[l+2]=N,N=N>>8,S[l+1]=N,N=N>>8,S[l]=N,l+8}x.prototype.writeBigUInt64LE=be(function(f,l=0){return F(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeBigUInt64BE=be(function(f,l=0){return rt(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeIntLE=function(f,l,k,L){if(f=+f,l=l>>>0,!L){const ot=Math.pow(2,8*k-1);D(this,f,l,k,ot-1,-ot)}let T=0,N=1,kt=0;for(this[l]=f&255;++T<k&&(N*=256);)f<0&&kt===0&&this[l+T-1]!==0&&(kt=1),this[l+T]=(f/N>>0)-kt&255;return l+k},x.prototype.writeIntBE=function(f,l,k,L){if(f=+f,l=l>>>0,!L){const ot=Math.pow(2,8*k-1);D(this,f,l,k,ot-1,-ot)}let T=k-1,N=1,kt=0;for(this[l+T]=f&255;--T>=0&&(N*=256);)f<0&&kt===0&&this[l+T+1]!==0&&(kt=1),this[l+T]=(f/N>>0)-kt&255;return l+k},x.prototype.writeInt8=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,1,127,-128),f<0&&(f=255+f+1),this[l]=f&255,l+1},x.prototype.writeInt16LE=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,2,32767,-32768),this[l]=f&255,this[l+1]=f>>>8,l+2},x.prototype.writeInt16BE=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,2,32767,-32768),this[l]=f>>>8,this[l+1]=f&255,l+2},x.prototype.writeInt32LE=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,4,2147483647,-2147483648),this[l]=f&255,this[l+1]=f>>>8,this[l+2]=f>>>16,this[l+3]=f>>>24,l+4},x.prototype.writeInt32BE=function(f,l,k){return f=+f,l=l>>>0,k||D(this,f,l,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4},x.prototype.writeBigInt64LE=be(function(f,l=0){return F(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeBigInt64BE=be(function(f,l=0){return rt(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function J(S,f,l,k,L,T){if(l+k>S.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function et(S,f,l,k,L){return f=+f,l=l>>>0,L||J(S,f,l,4),e.write(S,f,l,k,23,4),l+4}x.prototype.writeFloatLE=function(f,l,k){return et(this,f,l,!0,k)},x.prototype.writeFloatBE=function(f,l,k){return et(this,f,l,!1,k)};function Qt(S,f,l,k,L){return f=+f,l=l>>>0,L||J(S,f,l,8),e.write(S,f,l,k,52,8),l+8}x.prototype.writeDoubleLE=function(f,l,k){return Qt(this,f,l,!0,k)},x.prototype.writeDoubleBE=function(f,l,k){return Qt(this,f,l,!1,k)},x.prototype.copy=function(f,l,k,L){if(!x.isBuffer(f))throw new TypeError("argument should be a Buffer");if(k||(k=0),!L&&L!==0&&(L=this.length),l>=f.length&&(l=f.length),l||(l=0),L>0&&L<k&&(L=k),L===k||f.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),f.length-l<L-k&&(L=f.length-l+k);const T=L-k;return this===f&&typeof i.prototype.copyWithin=="function"?this.copyWithin(l,k,L):i.prototype.set.call(f,this.subarray(k,L),l),T},x.prototype.fill=function(f,l,k,L){if(typeof f=="string"){if(typeof l=="string"?(L=l,l=0,k=this.length):typeof k=="string"&&(L=k,k=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!x.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(f.length===1){const N=f.charCodeAt(0);(L==="utf8"&&N<128||L==="latin1")&&(f=N)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(l<0||this.length<l||this.length<k)throw new RangeError("Out of range index");if(k<=l)return this;l=l>>>0,k=k===void 0?this.length:k>>>0,f||(f=0);let T;if(typeof f=="number")for(T=l;T<k;++T)this[T]=f;else{const N=x.isBuffer(f)?f:x.from(f,L),kt=N.length;if(kt===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(T=0;T<k-l;++T)this[T+l]=N[T%kt]}return this};const it={};function at(S,f,l){it[S]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}at("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),at("ERR_INVALID_ARG_TYPE",function(S,f){return`The "${S}" argument must be of type number. Received type ${typeof f}`},TypeError),at("ERR_OUT_OF_RANGE",function(S,f,l){let k=`The value of "${S}" is out of range.`,L=l;return Number.isInteger(l)&&Math.abs(l)>2**32?L=jt(String(l)):typeof l=="bigint"&&(L=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(L=jt(L)),L+="n"),k+=` It must be ${f}. Received ${L}`,k},RangeError);function jt(S){let f="",l=S.length;const k=S[0]==="-"?1:0;for(;l>=k+4;l-=3)f=`_${S.slice(l-3,l)}${f}`;return`${S.slice(0,l)}${f}`}function ht(S,f,l){me(f,"offset"),(S[f]===void 0||S[f+l]===void 0)&&pt(f,S.length-(l+1))}function lt(S,f,l,k,L,T){if(S>l||S<f){const N=typeof f=="bigint"?"n":"";let kt;throw f===0||f===BigInt(0)?kt=`>= 0${N} and < 2${N} ** ${(T+1)*8}${N}`:kt=`>= -(2${N} ** ${(T+1)*8-1}${N}) and < 2 ** ${(T+1)*8-1}${N}`,new it.ERR_OUT_OF_RANGE("value",kt,S)}ht(k,L,T)}function me(S,f){if(typeof S!="number")throw new it.ERR_INVALID_ARG_TYPE(f,"number",S)}function pt(S,f,l){throw Math.floor(S)!==S?(me(S,l),new it.ERR_OUT_OF_RANGE("offset","an integer",S)):f<0?new it.ERR_BUFFER_OUT_OF_BOUNDS:new it.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,S)}const St=/[^+/0-9A-Za-z-_]/g;function ir(S){if(S=S.split("=")[0],S=S.trim().replace(St,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function wt(S,f){f=f||1/0;let l;const k=S.length;let L=null;const T=[];for(let N=0;N<k;++N){if(l=S.charCodeAt(N),l>55295&&l<57344){if(!L){if(l>56319){(f-=3)>-1&&T.push(239,191,189);continue}else if(N+1===k){(f-=3)>-1&&T.push(239,191,189);continue}L=l;continue}if(l<56320){(f-=3)>-1&&T.push(239,191,189),L=l;continue}l=(L-55296<<10|l-56320)+65536}else L&&(f-=3)>-1&&T.push(239,191,189);if(L=null,l<128){if((f-=1)<0)break;T.push(l)}else if(l<2048){if((f-=2)<0)break;T.push(l>>6|192,l&63|128)}else if(l<65536){if((f-=3)<0)break;T.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((f-=4)<0)break;T.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return T}function Mt(S){const f=[];for(let l=0;l<S.length;++l)f.push(S.charCodeAt(l)&255);return f}function Xe(S,f){let l,k,L;const T=[];for(let N=0;N<S.length&&!((f-=2)<0);++N)l=S.charCodeAt(N),k=l>>8,L=l%256,T.push(L),T.push(k);return T}function bt(S){return t.toByteArray(ir(S))}function gt(S,f,l,k){let L;for(L=0;L<k&&!(L+l>=f.length||L>=S.length);++L)f[L+l]=S[L];return L}function le(S,f){return S instanceof f||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===f.name}function yt(S){return S!==S}const vt=function(){const S="0123456789abcdef",f=new Array(256);for(let l=0;l<16;++l){const k=l*16;for(let L=0;L<16;++L)f[k+L]=S[l]+S[L]}return f}();function be(S){return typeof BigInt>"u"?xt:S}function xt(){throw new Error("BigInt not supported")}})(ge);const de=ge.Buffer,fc=ge.Blob,lc=ge.BlobOptions,Et=ge.Buffer,dc=ge.File,pc=ge.FileOptions,gc=ge.INSPECT_MAX_BYTES,mc=ge.SlowBuffer,yc=ge.TranscodeEncoding,wc=ge.atob,bc=ge.btoa,vc=ge.constants,xc=ge.isAscii,Sc=ge.isUtf8,Mc=ge.kMaxLength,_c=ge.kStringMaxLength,kc=ge.resolveObjectURL,Ec=ge.transcode,Bc=Object.freeze(Object.defineProperty({__proto__:null,Blob:fc,BlobOptions:lc,Buffer:Et,File:dc,FileOptions:pc,INSPECT_MAX_BYTES:gc,SlowBuffer:mc,TranscodeEncoding:yc,atob:wc,btoa:bc,constants:vc,default:de,isAscii:xc,isUtf8:Sc,kMaxLength:Mc,kStringMaxLength:_c,resolveObjectURL:kc,transcode:Ec},Symbol.toStringTag,{value:"Module"}));function Jn(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function Ac(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function yn(n,...t){if(!Ac(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}function Ic(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Jn(n.outputLen),Jn(n.blockLen)}function ln(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function yo(n,t){yn(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Ci=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rc(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}const Lc=n=>new Uint8Array(n.buffer,n.byteOffset,n.byteLength),wo=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),jn=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ge=(n,t)=>n<<32-t|n>>>t,Tc=(n,t)=>n<<t|n>>>32-t>>>0,Qn=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,fs=n=>n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255,Cc=Qn?n=>n:n=>fs(n);function Yi(n){for(let t=0;t<n.length;t++)n[t]=fs(n[t])}const Uc=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Pc(n){yn(n);let t="";for(let e=0;e<n.length;e++)t+=Uc[n[e]];return t}const sr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function zs(n){if(n>=sr._0&&n<=sr._9)return n-sr._0;if(n>=sr._A&&n<=sr._F)return n-(sr._A-10);if(n>=sr._a&&n<=sr._f)return n-(sr._a-10)}function Nc(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let o=0,i=0;o<e;o++,i+=2){const u=zs(n.charCodeAt(i)),p=zs(n.charCodeAt(i+1));if(u===void 0||p===void 0){const w=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+i)}r[o]=u*16+p}return r}const bo=async()=>{};async function Oc(n,t,e){let r=Date.now();for(let o=0;o<n;o++){e(o);const i=Date.now()-r;i>=0&&i<t||(await bo(),r+=i)}}function vo(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Xr(n){return typeof n=="string"&&(n=vo(n)),yn(n),n}function xo(...n){let t=0;for(let r=0;r<n.length;r++){const o=n[r];yn(o),t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<n.length;r++){const i=n[r];e.set(i,o),o+=i.length}return e}class gi{clone(){return this._cloneInto()}}const qc={}.toString;function zc(n,t){if(t!==void 0&&qc.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,t)}function mi(n){const t=r=>n().update(Xr(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Dc(n){const t=(r,o)=>n(o).update(Xr(r)).digest(),e=n({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=r=>n(r),t}function So(n){const t=(r,o)=>n(o).update(Xr(r)).digest(),e=n({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=r=>n(r),t}function yi(n=32){if(Ci&&typeof Ci.getRandomValues=="function")return Ci.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}const j0=Object.freeze(Object.defineProperty({__proto__:null,Hash:gi,asyncLoop:Oc,byteSwap:fs,byteSwap32:Yi,byteSwapIfBE:Cc,bytesToHex:Pc,checkOpts:zc,concatBytes:xo,createView:jn,hexToBytes:Nc,isBytes:Rc,isLE:Qn,nextTick:bo,randomBytes:yi,rotl:Tc,rotr:Ge,toBytes:Xr,u32:wo,u8:Lc,utf8ToBytes:vo,wrapConstructor:mi,wrapConstructorWithOpts:Dc,wrapXOFConstructorWithOpts:So},Symbol.toStringTag,{value:"Module"}));function $c(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const o=BigInt(32),i=BigInt(4294967295),u=Number(e>>o&i),p=Number(e&i),w=r?4:0,_=r?0:4;n.setUint32(t+w,u,r),n.setUint32(t+_,p,r)}const Fc=(n,t,e)=>n&t^~n&e,Kc=(n,t,e)=>n&t^n&e^t&e;class Mo extends gi{constructor(t,e,r,o){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=jn(this.buffer)}update(t){ln(this);const{view:e,buffer:r,blockLen:o}=this;t=Xr(t);const i=t.length;for(let u=0;u<i;){const p=Math.min(o-this.pos,i-u);if(p===o){const w=jn(t);for(;o<=i-u;u+=o)this.process(w,u);continue}r.set(t.subarray(u,u+p),this.pos),this.pos+=p,u+=p,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ln(this),yo(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:o,isLE:i}=this;let{pos:u}=this;e[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>o-u&&(this.process(r,0),u=0);for(let E=u;E<o;E++)e[E]=0;$c(r,o-8,BigInt(this.length*8),i),this.process(r,0);const p=jn(t),w=this.outputLen;if(w%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const _=w/4,x=this.get();if(_>x.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<_;E++)p.setUint32(4*E,x[E],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:o,finished:i,destroyed:u,pos:p}=this;return t.length=o,t.pos=p,t.finished=i,t.destroyed=u,o%e&&t.buffer.set(r),t}}const Kn=BigInt(2**32-1),Xi=BigInt(32);function _o(n,t=!1){return t?{h:Number(n&Kn),l:Number(n>>Xi&Kn)}:{h:Number(n>>Xi&Kn)|0,l:Number(n&Kn)|0}}function ko(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let o=0;o<n.length;o++){const{h:i,l:u}=_o(n[o],t);[e[o],r[o]]=[i,u]}return[e,r]}const Wc=(n,t)=>BigInt(n>>>0)<<Xi|BigInt(t>>>0),Hc=(n,t,e)=>n>>>e,Vc=(n,t,e)=>n<<32-e|t>>>e,Gc=(n,t,e)=>n>>>e|t<<32-e,Zc=(n,t,e)=>n<<32-e|t>>>e,jc=(n,t,e)=>n<<64-e|t>>>e-32,Yc=(n,t,e)=>n>>>e-32|t<<64-e,Xc=(n,t)=>t,Jc=(n,t)=>n,Eo=(n,t,e)=>n<<e|t>>>32-e,Bo=(n,t,e)=>t<<e|n>>>32-e,Ao=(n,t,e)=>t<<e-32|n>>>64-e,Io=(n,t,e)=>n<<e-32|t>>>64-e;function Qc(n,t,e,r){const o=(t>>>0)+(r>>>0);return{h:n+e+(o/2**32|0)|0,l:o|0}}const tu=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),eu=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,ru=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),nu=(n,t,e,r,o)=>t+e+r+o+(n/2**32|0)|0,iu=(n,t,e,r,o)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),su=(n,t,e,r,o,i)=>t+e+r+o+i+(n/2**32|0)|0,Ft={fromBig:_o,split:ko,toBig:Wc,shrSH:Hc,shrSL:Vc,rotrSH:Gc,rotrSL:Zc,rotrBH:jc,rotrBL:Yc,rotr32H:Xc,rotr32L:Jc,rotlSH:Eo,rotlSL:Bo,rotlBH:Ao,rotlBL:Io,add:Qc,add3L:tu,add3H:eu,add4L:ru,add4H:nu,add5H:su,add5L:iu},[ou,au]=Ft.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),fr=new Uint32Array(80),lr=new Uint32Array(80);class cu extends Mo{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:o,Ch:i,Cl:u,Dh:p,Dl:w,Eh:_,El:x,Fh:E,Fl:U,Gh:I,Gl:R,Hh:B,Hl:A}=this;return[t,e,r,o,i,u,p,w,_,x,E,U,I,R,B,A]}set(t,e,r,o,i,u,p,w,_,x,E,U,I,R,B,A){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=o|0,this.Ch=i|0,this.Cl=u|0,this.Dh=p|0,this.Dl=w|0,this.Eh=_|0,this.El=x|0,this.Fh=E|0,this.Fl=U|0,this.Gh=I|0,this.Gl=R|0,this.Hh=B|0,this.Hl=A|0}process(t,e){for(let O=0;O<16;O++,e+=4)fr[O]=t.getUint32(e),lr[O]=t.getUint32(e+=4);for(let O=16;O<80;O++){const V=fr[O-15]|0,W=lr[O-15]|0,K=Ft.rotrSH(V,W,1)^Ft.rotrSH(V,W,8)^Ft.shrSH(V,W,7),G=Ft.rotrSL(V,W,1)^Ft.rotrSL(V,W,8)^Ft.shrSL(V,W,7),Y=fr[O-2]|0,Ht=lr[O-2]|0,_t=Ft.rotrSH(Y,Ht,19)^Ft.rotrBH(Y,Ht,61)^Ft.shrSH(Y,Ht,6),j=Ft.rotrSL(Y,Ht,19)^Ft.rotrBL(Y,Ht,61)^Ft.shrSL(Y,Ht,6),Wt=Ft.add4L(G,j,lr[O-7],lr[O-16]),v=Ft.add4H(Wt,K,_t,fr[O-7],fr[O-16]);fr[O]=v|0,lr[O]=Wt|0}let{Ah:r,Al:o,Bh:i,Bl:u,Ch:p,Cl:w,Dh:_,Dl:x,Eh:E,El:U,Fh:I,Fl:R,Gh:B,Gl:A,Hh:C,Hl:$}=this;for(let O=0;O<80;O++){const V=Ft.rotrSH(E,U,14)^Ft.rotrSH(E,U,18)^Ft.rotrBH(E,U,41),W=Ft.rotrSL(E,U,14)^Ft.rotrSL(E,U,18)^Ft.rotrBL(E,U,41),K=E&I^~E&B,G=U&R^~U&A,Y=Ft.add5L($,W,G,au[O],lr[O]),Ht=Ft.add5H(Y,C,V,K,ou[O],fr[O]),_t=Y|0,j=Ft.rotrSH(r,o,28)^Ft.rotrBH(r,o,34)^Ft.rotrBH(r,o,39),Wt=Ft.rotrSL(r,o,28)^Ft.rotrBL(r,o,34)^Ft.rotrBL(r,o,39),v=r&i^r&p^i&p,s=o&u^o&w^u&w;C=B|0,$=A|0,B=I|0,A=R|0,I=E|0,R=U|0,{h:E,l:U}=Ft.add(_|0,x|0,Ht|0,_t|0),_=p|0,x=w|0,p=i|0,w=u|0,i=r|0,u=o|0;const c=Ft.add3L(_t,Wt,s);r=Ft.add3H(c,Ht,j,v),o=c|0}({h:r,l:o}=Ft.add(this.Ah|0,this.Al|0,r|0,o|0)),{h:i,l:u}=Ft.add(this.Bh|0,this.Bl|0,i|0,u|0),{h:p,l:w}=Ft.add(this.Ch|0,this.Cl|0,p|0,w|0),{h:_,l:x}=Ft.add(this.Dh|0,this.Dl|0,_|0,x|0),{h:E,l:U}=Ft.add(this.Eh|0,this.El|0,E|0,U|0),{h:I,l:R}=Ft.add(this.Fh|0,this.Fl|0,I|0,R|0),{h:B,l:A}=Ft.add(this.Gh|0,this.Gl|0,B|0,A|0),{h:C,l:$}=Ft.add(this.Hh|0,this.Hl|0,C|0,$|0),this.set(r,o,i,u,p,w,_,x,E,U,I,R,B,A,C,$)}roundClean(){fr.fill(0),lr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const uu=mi(()=>new cu);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ro=BigInt(0),wi=BigInt(1),hu=BigInt(2);function jr(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Qe(n){if(!jr(n))throw new Error("Uint8Array expected")}const fu=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Yr(n){Qe(n);let t="";for(let e=0;e<n.length;e++)t+=fu[n[e]];return t}function Lo(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function ls(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const or={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ds(n){if(n>=or._0&&n<=or._9)return n-or._0;if(n>=or._A&&n<=or._F)return n-(or._A-10);if(n>=or._a&&n<=or._f)return n-(or._a-10)}function dn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let o=0,i=0;o<e;o++,i+=2){const u=Ds(n.charCodeAt(i)),p=Ds(n.charCodeAt(i+1));if(u===void 0||p===void 0){const w=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+i)}r[o]=u*16+p}return r}function Le(n){return ls(Yr(n))}function hn(n){return Qe(n),ls(Yr(Uint8Array.from(n).reverse()))}function Sr(n,t){return dn(n.toString(16).padStart(t*2,"0"))}function Tn(n,t){return Sr(n,t).reverse()}function lu(n){return dn(Lo(n))}function ne(n,t,e){let r;if(typeof t=="string")try{r=dn(t)}catch(i){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${i}`)}else if(jr(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const o=r.length;if(typeof e=="number"&&o!==e)throw new Error(`${n} expected ${e} bytes, got ${o}`);return r}function Ie(...n){let t=0;for(let r=0;r<n.length;r++){const o=n[r];Qe(o),t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<n.length;r++){const i=n[r];e.set(i,o),o+=i.length}return e}function du(n,t){if(n.length!==t.length)return!1;let e=0;for(let r=0;r<n.length;r++)e|=n[r]^t[r];return e===0}function bi(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function pu(n){let t;for(t=0;n>Ro;n>>=wi,t+=1);return t}function gu(n,t){return n>>BigInt(t)&wi}function mu(n,t,e){return n|(e?wi:Ro)<<BigInt(t)}const ds=n=>(hu<<BigInt(n-1))-wi,Ui=n=>new Uint8Array(n),$s=n=>Uint8Array.from(n);function To(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Ui(n),o=Ui(n),i=0;const u=()=>{r.fill(1),o.fill(0),i=0},p=(...E)=>e(o,r,...E),w=(E=Ui())=>{o=p($s([0]),E),r=p(),E.length!==0&&(o=p($s([1]),E),r=p())},_=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let E=0;const U=[];for(;E<t;){r=p();const I=r.slice();U.push(I),E+=r.length}return Ie(...U)};return(E,U)=>{u(),w(E);let I;for(;!(I=U(_()));)w();return u(),I}}const yu={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||jr(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Jr(n,t,e={}){const r=(o,i,u)=>{const p=yu[i];if(typeof p!="function")throw new Error(`Invalid validator "${i}", expected function`);const w=n[o];if(!(u&&w===void 0)&&!p(w,n))throw new Error(`Invalid param ${String(o)}=${w} (${typeof w}), expected ${i}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(e))r(o,i,!0);return n}const wu=Object.freeze(Object.defineProperty({__proto__:null,abytes:Qe,bitGet:gu,bitLen:pu,bitMask:ds,bitSet:mu,bytesToHex:Yr,bytesToNumberBE:Le,bytesToNumberLE:hn,concatBytes:Ie,createHmacDrbg:To,ensureBytes:ne,equalBytes:du,hexToBytes:dn,hexToNumber:ls,isBytes:jr,numberToBytesBE:Sr,numberToBytesLE:Tn,numberToHexUnpadded:Lo,numberToVarBytesBE:lu,utf8ToBytes:bi,validateObject:Jr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const we=BigInt(0),oe=BigInt(1),Wr=BigInt(2),bu=BigInt(3),Ji=BigInt(4),Fs=BigInt(5),Ks=BigInt(8);BigInt(9);BigInt(16);function Jt(n,t){const e=n%t;return e>=we?e:t+e}function vu(n,t,e){if(e<=we||t<we)throw new Error("Expected power/modulo > 0");if(e===oe)return we;let r=oe;for(;t>we;)t&oe&&(r=r*n%e),n=n*n%e,t>>=oe;return r}function ce(n,t,e){let r=n;for(;t-- >we;)r*=r,r%=e;return r}function Qi(n,t){if(n===we||t<=we)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=Jt(n,t),r=t,o=we,i=oe;for(;e!==we;){const p=r/e,w=r%e,_=o-i*p;r=e,e=w,o=i,i=_}if(r!==oe)throw new Error("invert: does not exist");return Jt(o,t)}function xu(n){const t=(n-oe)/Wr;let e,r,o;for(e=n-oe,r=0;e%Wr===we;e/=Wr,r++);for(o=Wr;o<n&&vu(o,t,n)!==n-oe;o++);if(r===1){const u=(n+oe)/Ji;return function(w,_){const x=w.pow(_,u);if(!w.eql(w.sqr(x),_))throw new Error("Cannot find square root");return x}}const i=(e+oe)/Wr;return function(p,w){if(p.pow(w,t)===p.neg(p.ONE))throw new Error("Cannot find square root");let _=r,x=p.pow(p.mul(p.ONE,o),e),E=p.pow(w,i),U=p.pow(w,e);for(;!p.eql(U,p.ONE);){if(p.eql(U,p.ZERO))return p.ZERO;let I=1;for(let B=p.sqr(U);I<_&&!p.eql(B,p.ONE);I++)B=p.sqr(B);const R=p.pow(x,oe<<BigInt(_-I-1));x=p.sqr(R),E=p.mul(E,R),U=p.mul(U,x),_=I}return E}}function Su(n){if(n%Ji===bu){const t=(n+oe)/Ji;return function(r,o){const i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(n%Ks===Fs){const t=(n-Fs)/Ks;return function(r,o){const i=r.mul(o,Wr),u=r.pow(i,t),p=r.mul(o,u),w=r.mul(r.mul(p,Wr),u),_=r.mul(p,r.sub(w,r.ONE));if(!r.eql(r.sqr(_),o))throw new Error("Cannot find square root");return _}}return xu(n)}const Mu=(n,t)=>(Jt(n,t)&oe)===oe,_u=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Co(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=_u.reduce((r,o)=>(r[o]="function",r),t);return Jr(n,e)}function ku(n,t,e){if(e<we)throw new Error("Expected power > 0");if(e===we)return n.ONE;if(e===oe)return t;let r=n.ONE,o=t;for(;e>we;)e&oe&&(r=n.mul(r,o)),o=n.sqr(o),e>>=oe;return r}function Eu(n,t){const e=new Array(t.length),r=t.reduce((i,u,p)=>n.is0(u)?i:(e[p]=i,n.mul(i,u)),n.ONE),o=n.inv(r);return t.reduceRight((i,u,p)=>n.is0(u)?i:(e[p]=n.mul(i,e[p]),n.mul(i,u)),o),e}function Uo(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Po(n,t,e=!1,r={}){if(n<=we)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:o,nByteLength:i}=Uo(n,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=Su(n),p=Object.freeze({ORDER:n,BITS:o,BYTES:i,MASK:ds(o),ZERO:we,ONE:oe,create:w=>Jt(w,n),isValid:w=>{if(typeof w!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof w}`);return we<=w&&w<n},is0:w=>w===we,isOdd:w=>(w&oe)===oe,neg:w=>Jt(-w,n),eql:(w,_)=>w===_,sqr:w=>Jt(w*w,n),add:(w,_)=>Jt(w+_,n),sub:(w,_)=>Jt(w-_,n),mul:(w,_)=>Jt(w*_,n),pow:(w,_)=>ku(p,w,_),div:(w,_)=>Jt(w*Qi(_,n),n),sqrN:w=>w*w,addN:(w,_)=>w+_,subN:(w,_)=>w-_,mulN:(w,_)=>w*_,inv:w=>Qi(w,n),sqrt:r.sqrt||(w=>u(p,w)),invertBatch:w=>Eu(p,w),cmov:(w,_,x)=>x?_:w,toBytes:w=>e?Tn(w,i):Sr(w,i),fromBytes:w=>{if(w.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${w.length}`);return e?hn(w):Le(w)}});return Object.freeze(p)}function No(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Oo(n){const t=No(n);return t+Math.ceil(t/2)}function Bu(n,t,e=!1){const r=n.length,o=No(t),i=Oo(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const u=e?Le(n):hn(n),p=Jt(u,t-oe)+oe;return e?Tn(p,o):Sr(p,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Au=BigInt(0),Pi=BigInt(1);function qo(n,t){const e=(o,i)=>{const u=i.negate();return o?u:i},r=o=>{const i=Math.ceil(t/o)+1,u=2**(o-1);return{windows:i,windowSize:u}};return{constTimeNegate:e,unsafeLadder(o,i){let u=n.ZERO,p=o;for(;i>Au;)i&Pi&&(u=u.add(p)),p=p.double(),i>>=Pi;return u},precomputeWindow(o,i){const{windows:u,windowSize:p}=r(i),w=[];let _=o,x=_;for(let E=0;E<u;E++){x=_,w.push(x);for(let U=1;U<p;U++)x=x.add(_),w.push(x);_=x.double()}return w},wNAF(o,i,u){const{windows:p,windowSize:w}=r(o);let _=n.ZERO,x=n.BASE;const E=BigInt(2**o-1),U=2**o,I=BigInt(o);for(let R=0;R<p;R++){const B=R*w;let A=Number(u&E);u>>=I,A>w&&(A-=U,u+=Pi);const C=B,$=B+Math.abs(A)-1,O=R%2!==0,V=A<0;A===0?x=x.add(e(O,i[C])):_=_.add(e(V,i[$]))}return{p:_,f:x}},wNAFCached(o,i,u,p){const w=o._WINDOW_SIZE||1;let _=i.get(o);return _||(_=this.precomputeWindow(o,w),w!==1&&i.set(o,p(_))),this.wNAF(w,_,u)}}}function ps(n){return Co(n.Fp),Jr(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Uo(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ve=BigInt(0),Ue=BigInt(1),Wn=BigInt(2),Iu=BigInt(8),Ru={zip215:!0};function Lu(n){const t=ps(n);return Jr(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Tu(n){const t=Lu(n),{Fp:e,n:r,prehash:o,hash:i,randomBytes:u,nByteLength:p,h:w}=t,_=Wn<<BigInt(p*8)-Ue,x=e.create,E=t.uvRatio||((g,b)=>{try{return{isValid:!0,value:e.sqrt(g*e.inv(b))}}catch{return{isValid:!1,value:Ve}}}),U=t.adjustScalarBytes||(g=>g),I=t.domain||((g,b,M)=>{if(b.length||M)throw new Error("Contexts/pre-hash are not supported");return g}),R=g=>typeof g=="bigint"&&Ve<g,B=(g,b)=>R(g)&&R(b)&&g<b,A=g=>g===Ve||B(g,_);function C(g,b){if(B(g,b))return g;throw new Error(`Expected valid scalar < ${b}, got ${typeof g} ${g}`)}function $(g){return g===Ve?g:C(g,r)}const O=new Map;function V(g){if(!(g instanceof W))throw new Error("ExtendedPoint expected")}class W{constructor(b,M,d,a){if(this.ex=b,this.ey=M,this.ez=d,this.et=a,!A(b))throw new Error("x required");if(!A(M))throw new Error("y required");if(!A(d))throw new Error("z required");if(!A(a))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof W)throw new Error("extended point not allowed");const{x:M,y:d}=b||{};if(!A(M)||!A(d))throw new Error("invalid affine point");return new W(M,d,Ue,x(M*d))}static normalizeZ(b){const M=e.invertBatch(b.map(d=>d.ez));return b.map((d,a)=>d.toAffine(M[a])).map(W.fromAffine)}_setWindowSize(b){this._WINDOW_SIZE=b,O.delete(this)}assertValidity(){const{a:b,d:M}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:d,ey:a,ez:y,et:q}=this,D=x(d*d),F=x(a*a),rt=x(y*y),J=x(rt*rt),et=x(D*b),Qt=x(rt*x(et+F)),it=x(J+x(M*x(D*F)));if(Qt!==it)throw new Error("bad point: equation left != right (1)");const at=x(d*a),jt=x(y*q);if(at!==jt)throw new Error("bad point: equation left != right (2)")}equals(b){V(b);const{ex:M,ey:d,ez:a}=this,{ex:y,ey:q,ez:D}=b,F=x(M*D),rt=x(y*a),J=x(d*D),et=x(q*a);return F===rt&&J===et}is0(){return this.equals(W.ZERO)}negate(){return new W(x(-this.ex),this.ey,this.ez,x(-this.et))}double(){const{a:b}=t,{ex:M,ey:d,ez:a}=this,y=x(M*M),q=x(d*d),D=x(Wn*x(a*a)),F=x(b*y),rt=M+d,J=x(x(rt*rt)-y-q),et=F+q,Qt=et-D,it=F-q,at=x(J*Qt),jt=x(et*it),ht=x(J*it),lt=x(Qt*et);return new W(at,jt,lt,ht)}add(b){V(b);const{a:M,d}=t,{ex:a,ey:y,ez:q,et:D}=this,{ex:F,ey:rt,ez:J,et}=b;if(M===BigInt(-1)){const Xe=x((y-a)*(rt+F)),bt=x((y+a)*(rt-F)),gt=x(bt-Xe);if(gt===Ve)return this.double();const le=x(q*Wn*et),yt=x(D*Wn*J),vt=yt+le,be=bt+Xe,xt=yt-le,S=x(vt*gt),f=x(be*xt),l=x(vt*xt),k=x(gt*be);return new W(S,f,k,l)}const Qt=x(a*F),it=x(y*rt),at=x(D*d*et),jt=x(q*J),ht=x((a+y)*(F+rt)-Qt-it),lt=jt-at,me=jt+at,pt=x(it-M*Qt),St=x(ht*lt),ir=x(me*pt),wt=x(ht*pt),Mt=x(lt*me);return new W(St,ir,Mt,wt)}subtract(b){return this.add(b.negate())}wNAF(b){return Y.wNAFCached(this,O,b,W.normalizeZ)}multiply(b){const{p:M,f:d}=this.wNAF(C(b,r));return W.normalizeZ([M,d])[0]}multiplyUnsafe(b){let M=$(b);return M===Ve?G:this.equals(G)||M===Ue?this:this.equals(K)?this.wNAF(M).p:Y.unsafeLadder(this,M)}isSmallOrder(){return this.multiplyUnsafe(w).is0()}isTorsionFree(){return Y.unsafeLadder(this,r).is0()}toAffine(b){const{ex:M,ey:d,ez:a}=this,y=this.is0();b==null&&(b=y?Iu:e.inv(a));const q=x(M*b),D=x(d*b),F=x(a*b);if(y)return{x:Ve,y:Ue};if(F!==Ue)throw new Error("invZ was invalid");return{x:q,y:D}}clearCofactor(){const{h:b}=t;return b===Ue?this:this.multiplyUnsafe(b)}static fromHex(b,M=!1){const{d,a}=t,y=e.BYTES;b=ne("pointHex",b,y);const q=b.slice(),D=b[y-1];q[y-1]=D&-129;const F=hn(q);F===Ve||(M?C(F,_):C(F,e.ORDER));const rt=x(F*F),J=x(rt-Ue),et=x(d*rt-a);let{isValid:Qt,value:it}=E(J,et);if(!Qt)throw new Error("Point.fromHex: invalid y coordinate");const at=(it&Ue)===Ue,jt=(D&128)!==0;if(!M&&it===Ve&&jt)throw new Error("Point.fromHex: x=0 and x_0=1");return jt!==at&&(it=x(-it)),W.fromAffine({x:it,y:F})}static fromPrivateKey(b){return j(b).point}toRawBytes(){const{x:b,y:M}=this.toAffine(),d=Tn(M,e.BYTES);return d[d.length-1]|=b&Ue?128:0,d}toHex(){return Yr(this.toRawBytes())}}W.BASE=new W(t.Gx,t.Gy,Ue,x(t.Gx*t.Gy)),W.ZERO=new W(Ve,Ue,Ue,Ve);const{BASE:K,ZERO:G}=W,Y=qo(W,p*8);function Ht(g){return Jt(g,r)}function _t(g){return Ht(hn(g))}function j(g){const b=p;g=ne("private key",g,b);const M=ne("hashed private key",i(g),2*b),d=U(M.slice(0,b)),a=M.slice(b,2*b),y=_t(d),q=K.multiply(y),D=q.toRawBytes();return{head:d,prefix:a,scalar:y,point:q,pointBytes:D}}function Wt(g){return j(g).pointBytes}function v(g=new Uint8Array,...b){const M=Ie(...b);return _t(i(I(M,ne("context",g),!!o)))}function s(g,b,M={}){g=ne("message",g),o&&(g=o(g));const{prefix:d,scalar:a,pointBytes:y}=j(b),q=v(M.context,d,g),D=K.multiply(q).toRawBytes(),F=v(M.context,D,y,g),rt=Ht(q+F*a);$(rt);const J=Ie(D,Tn(rt,e.BYTES));return ne("result",J,p*2)}const c=Ru;function h(g,b,M,d=c){const{context:a,zip215:y}=d,q=e.BYTES;g=ne("signature",g,2*q),b=ne("message",b),o&&(b=o(b));const D=hn(g.slice(q,2*q));let F,rt,J;try{F=W.fromHex(M,y),rt=W.fromHex(g.slice(0,q),y),J=K.multiplyUnsafe(D)}catch{return!1}if(!y&&F.isSmallOrder())return!1;const et=v(a,rt.toRawBytes(),F.toRawBytes(),b);return rt.add(F.multiplyUnsafe(et)).subtract(J).clearCofactor().equals(W.ZERO)}return K._setWindowSize(8),{CURVE:t,getPublicKey:Wt,sign:s,verify:h,ExtendedPoint:W,utils:{getExtendedPublicKey:j,randomPrivateKey:()=>u(e.BYTES),precompute(g=8,b=W.BASE){return b._setWindowSize(g),b.multiply(BigInt(3)),b}}}}const Cu=Le;function wr(n,t){if(n<0||n>=1<<8*t)throw new Error(`bad I2OSP call: value=${n} length=${t}`);const e=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)e[r]=n&255,n>>>=8;return new Uint8Array(e)}function Uu(n,t){const e=new Uint8Array(n.length);for(let r=0;r<n.length;r++)e[r]=n[r]^t[r];return e}function gs(n){if(!Number.isSafeInteger(n))throw new Error("number expected")}function Pu(n,t,e,r){Qe(n),Qe(t),gs(e),t.length>255&&(t=r(Ie(bi("H2C-OVERSIZE-DST-"),t)));const{outputLen:o,blockLen:i}=r,u=Math.ceil(e/o);if(u>255)throw new Error("Invalid xmd length");const p=Ie(t,wr(t.length,1)),w=wr(0,i),_=wr(e,2),x=new Array(u),E=r(Ie(w,n,_,wr(0,1),p));x[0]=r(Ie(E,wr(1,1),p));for(let I=1;I<=u;I++){const R=[Uu(E,x[I-1]),wr(I+1,1),p];x[I]=r(Ie(...R))}return Ie(...x).slice(0,e)}function Nu(n,t,e,r,o){if(Qe(n),Qe(t),gs(e),t.length>255){const i=Math.ceil(2*r/8);t=o.create({dkLen:i}).update(bi("H2C-OVERSIZE-DST-")).update(t).digest()}if(e>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:e}).update(n).update(wr(e,2)).update(t).update(wr(t.length,1)).digest()}function Ws(n,t,e){Jr(e,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:o,m:i,hash:u,expand:p,DST:w}=e;Qe(n),gs(t);const _=typeof w=="string"?bi(w):w,x=r.toString(2).length,E=Math.ceil((x+o)/8),U=t*i*E;let I;if(p==="xmd")I=Pu(n,_,U,u);else if(p==="xof")I=Nu(n,_,U,o,u);else if(p==="_internal_pass")I=n;else throw new Error('expand must be "xmd" or "xof"');const R=new Array(t);for(let B=0;B<t;B++){const A=new Array(i);for(let C=0;C<i;C++){const $=E*(C+B*i),O=I.subarray($,$+E);A[C]=Jt(Cu(O),r)}R[B]=A}return R}function Ou(n,t){const e=t.map(r=>Array.from(r).reverse());return(r,o)=>{const[i,u,p,w]=e.map(_=>_.reduce((x,E)=>n.add(n.mul(x,r),E)));return r=n.div(i,u),o=n.mul(o,n.div(p,w)),{x:r,y:o}}}function qu(n,t,e){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,o){const i=Ws(r,2,{...e,DST:e.DST,...o}),u=n.fromAffine(t(i[0])),p=n.fromAffine(t(i[1])),w=u.add(p).clearCofactor();return w.assertValidity(),w},encodeToCurve(r,o){const i=Ws(r,1,{...e,DST:e.encodeDST,...o}),u=n.fromAffine(t(i[0])).clearCofactor();return u.assertValidity(),u},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const i of r)if(typeof i!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${i} in array`);const o=n.fromAffine(t(r)).clearCofactor();return o.assertValidity(),o}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ms=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Hs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const zu=BigInt(1),Vs=BigInt(2);BigInt(3);const Du=BigInt(5),$u=BigInt(8);function Fu(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),o=BigInt(80),i=ms,p=n*n%i*n%i,w=ce(p,Vs,i)*p%i,_=ce(w,zu,i)*n%i,x=ce(_,Du,i)*_%i,E=ce(x,t,i)*x%i,U=ce(E,e,i)*E%i,I=ce(U,r,i)*U%i,R=ce(I,o,i)*I%i,B=ce(R,o,i)*I%i,A=ce(B,t,i)*x%i;return{pow_p_5_8:ce(A,Vs,i)*n%i,b2:p}}function Ku(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Wu(n,t){const e=ms,r=Jt(t*t*t,e),o=Jt(r*r*t,e),i=Fu(n*o).pow_p_5_8;let u=Jt(n*r*i,e);const p=Jt(t*u*u,e),w=u,_=Jt(u*Hs,e),x=p===n,E=p===Jt(-n,e),U=p===Jt(-n*Hs,e);return x&&(u=w),(E||U)&&(u=_),Mu(u,e)&&(u=Jt(-u,e)),{isValid:x||E,value:u}}const Hu=Po(ms,void 0,!0),Vu={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Hu,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:$u,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:uu,randomBytes:yi,adjustScalarBytes:Ku,uvRatio:Wu},On=Tu(Vu);var ys={exports:{}};const vi=us(Bc);ys.exports;(function(n){(function(t,e){function r(v,s){if(!v)throw new Error(s||"Assertion failed")}function o(v,s){v.super_=s;var c=function(){};c.prototype=s.prototype,v.prototype=new c,v.prototype.constructor=v}function i(v,s,c){if(i.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((s==="le"||s==="be")&&(c=s,s=10),this._init(v||0,s||10,c||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=vi.Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,c){return s.cmp(c)>0?s:c},i.min=function(s,c){return s.cmp(c)<0?s:c},i.prototype._init=function(s,c,h){if(typeof s=="number")return this._initNumber(s,c,h);if(typeof s=="object")return this._initArray(s,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),s=s.toString().replace(/\s+/g,"");var m=0;s[0]==="-"&&(m++,this.negative=1),m<s.length&&(c===16?this._parseHex(s,m,h):(this._parseBase(s,c,m),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(s,c,h){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(s,c,h){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var g,b,M=0;if(h==="be")for(m=s.length-1,g=0;m>=0;m-=3)b=s[m]|s[m-1]<<8|s[m-2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);else if(h==="le")for(m=0,g=0;m<s.length;m+=3)b=s[m]|s[m+1]<<8|s[m+2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);return this._strip()};function p(v,s){var c=v.charCodeAt(s);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+v)}function w(v,s,c){var h=p(v,c);return c-1>=s&&(h|=p(v,c-1)<<4),h}i.prototype._parseHex=function(s,c,h){this.length=Math.ceil((s.length-c)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var g=0,b=0,M;if(h==="be")for(m=s.length-1;m>=c;m-=2)M=w(s,c,m)<<g,this.words[b]|=M&67108863,g>=18?(g-=18,b+=1,this.words[b]|=M>>>26):g+=8;else{var d=s.length-c;for(m=d%2===0?c+1:c;m<s.length;m+=2)M=w(s,c,m)<<g,this.words[b]|=M&67108863,g>=18?(g-=18,b+=1,this.words[b]|=M>>>26):g+=8}this._strip()};function _(v,s,c,h){for(var m=0,g=0,b=Math.min(v.length,c),M=s;M<b;M++){var d=v.charCodeAt(M)-48;m*=h,d>=49?g=d-49+10:d>=17?g=d-17+10:g=d,r(d>=0&&g<h,"Invalid character"),m+=g}return m}i.prototype._parseBase=function(s,c,h){this.words=[0],this.length=1;for(var m=0,g=1;g<=67108863;g*=c)m++;m--,g=g/c|0;for(var b=s.length-h,M=b%m,d=Math.min(b,b-M)+h,a=0,y=h;y<d;y+=m)a=_(s,y,y+m,c),this.imuln(g),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(M!==0){var q=1;for(a=_(s,y,s.length,c),y=0;y<M;y++)q*=c;this.imuln(q),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},i.prototype.copy=function(s){s.words=new Array(this.length);for(var c=0;c<this.length;c++)s.words[c]=this.words[c];s.length=this.length,s.negative=this.negative,s.red=this.red};function x(v,s){v.words=s.words,v.length=s.length,v.negative=s.negative,v.red=s.red}if(i.prototype._move=function(s){x(s,this)},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{i.prototype.inspect=E}else i.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var U=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,c){s=s||10,c=c|0||1;var h;if(s===16||s==="hex"){h="";for(var m=0,g=0,b=0;b<this.length;b++){var M=this.words[b],d=((M<<m|g)&16777215).toString(16);g=M>>>24-m&16777215,m+=2,m>=26&&(m-=26,b--),g!==0||b!==this.length-1?h=U[6-d.length]+d+h:h=d+h}for(g!==0&&(h=g.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(s===(s|0)&&s>=2&&s<=36){var a=I[s],y=R[s];h="";var q=this.clone();for(q.negative=0;!q.isZero();){var D=q.modrn(y).toString(s);q=q.idivn(y),q.isZero()?h=D+h:h=U[a-D.length]+D+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(s,c){return this.toArrayLike(u,s,c)}),i.prototype.toArray=function(s,c){return this.toArrayLike(Array,s,c)};var B=function(s,c){return s.allocUnsafe?s.allocUnsafe(c):new s(c)};i.prototype.toArrayLike=function(s,c,h){this._strip();var m=this.byteLength(),g=h||Math.max(1,m);r(m<=g,"byte array longer than desired length"),r(g>0,"Requested array length <= 0");var b=B(s,g),M=c==="le"?"LE":"BE";return this["_toArrayLike"+M](b,m),b},i.prototype._toArrayLikeLE=function(s,c){for(var h=0,m=0,g=0,b=0;g<this.length;g++){var M=this.words[g]<<b|m;s[h++]=M&255,h<s.length&&(s[h++]=M>>8&255),h<s.length&&(s[h++]=M>>16&255),b===6?(h<s.length&&(s[h++]=M>>24&255),m=0,b=0):(m=M>>>24,b+=2)}if(h<s.length)for(s[h++]=m;h<s.length;)s[h++]=0},i.prototype._toArrayLikeBE=function(s,c){for(var h=s.length-1,m=0,g=0,b=0;g<this.length;g++){var M=this.words[g]<<b|m;s[h--]=M&255,h>=0&&(s[h--]=M>>8&255),h>=0&&(s[h--]=M>>16&255),b===6?(h>=0&&(s[h--]=M>>24&255),m=0,b=0):(m=M>>>24,b+=2)}if(h>=0)for(s[h--]=m;h>=0;)s[h--]=0},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var c=s,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(s){if(s===0)return 26;var c=s,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},i.prototype.bitLength=function(){var s=this.words[this.length-1],c=this._countBits(s);return(this.length-1)*26+c};function A(v){for(var s=new Array(v.bitLength()),c=0;c<s.length;c++){var h=c/26|0,m=c%26;s[c]=v.words[h]>>>m&1}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(s+=h,h!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var c=0;c<s.length;c++)this.words[c]=this.words[c]|s.words[c];return this._strip()},i.prototype.ior=function(s){return r((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var c;this.length>s.length?c=s:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&s.words[h];return this.length=c.length,this._strip()},i.prototype.iand=function(s){return r((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var c,h;this.length>s.length?(c=this,h=s):(c=s,h=this);for(var m=0;m<h.length;m++)this.words[m]=c.words[m]^h.words[m];if(this!==c)for(;m<c.length;m++)this.words[m]=c.words[m];return this.length=c.length,this._strip()},i.prototype.ixor=function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){r(typeof s=="number"&&s>=0);var c=Math.ceil(s/26)|0,h=s%26;this._expand(c),h>0&&c--;for(var m=0;m<c;m++)this.words[m]=~this.words[m]&67108863;return h>0&&(this.words[m]=~this.words[m]&67108863>>26-h),this._strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,c){r(typeof s=="number"&&s>=0);var h=s/26|0,m=s%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<m:this.words[h]=this.words[h]&~(1<<m),this._strip()},i.prototype.iadd=function(s){var c;if(this.negative!==0&&s.negative===0)return this.negative=0,c=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,c=this.isub(s),s.negative=1,c._normSign();var h,m;this.length>s.length?(h=this,m=s):(h=s,m=this);for(var g=0,b=0;b<m.length;b++)c=(h.words[b]|0)+(m.words[b]|0)+g,this.words[b]=c&67108863,g=c>>>26;for(;g!==0&&b<h.length;b++)c=(h.words[b]|0)+g,this.words[b]=c&67108863,g=c>>>26;if(this.length=h.length,g!==0)this.words[this.length]=g,this.length++;else if(h!==this)for(;b<h.length;b++)this.words[b]=h.words[b];return this},i.prototype.add=function(s){var c;return s.negative!==0&&this.negative===0?(s.negative=0,c=this.sub(s),s.negative^=1,c):s.negative===0&&this.negative!==0?(this.negative=0,c=s.sub(this),this.negative=1,c):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var c=this.iadd(s);return s.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var h=this.cmp(s);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,g;h>0?(m=this,g=s):(m=s,g=this);for(var b=0,M=0;M<g.length;M++)c=(m.words[M]|0)-(g.words[M]|0)+b,b=c>>26,this.words[M]=c&67108863;for(;b!==0&&M<m.length;M++)c=(m.words[M]|0)+b,b=c>>26,this.words[M]=c&67108863;if(b===0&&M<m.length&&m!==this)for(;M<m.length;M++)this.words[M]=m.words[M];return this.length=Math.max(this.length,M),m!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function C(v,s,c){c.negative=s.negative^v.negative;var h=v.length+s.length|0;c.length=h,h=h-1|0;var m=v.words[0]|0,g=s.words[0]|0,b=m*g,M=b&67108863,d=b/67108864|0;c.words[0]=M;for(var a=1;a<h;a++){for(var y=d>>>26,q=d&67108863,D=Math.min(a,s.length-1),F=Math.max(0,a-v.length+1);F<=D;F++){var rt=a-F|0;m=v.words[rt]|0,g=s.words[F]|0,b=m*g+q,y+=b/67108864|0,q=b&67108863}c.words[a]=q|0,d=y|0}return d!==0?c.words[a]=d|0:c.length--,c._strip()}var $=function(s,c,h){var m=s.words,g=c.words,b=h.words,M=0,d,a,y,q=m[0]|0,D=q&8191,F=q>>>13,rt=m[1]|0,J=rt&8191,et=rt>>>13,Qt=m[2]|0,it=Qt&8191,at=Qt>>>13,jt=m[3]|0,ht=jt&8191,lt=jt>>>13,me=m[4]|0,pt=me&8191,St=me>>>13,ir=m[5]|0,wt=ir&8191,Mt=ir>>>13,Xe=m[6]|0,bt=Xe&8191,gt=Xe>>>13,le=m[7]|0,yt=le&8191,vt=le>>>13,be=m[8]|0,xt=be&8191,S=be>>>13,f=m[9]|0,l=f&8191,k=f>>>13,L=g[0]|0,T=L&8191,N=L>>>13,kt=g[1]|0,ot=kt&8191,st=kt>>>13,Xt=g[2]|0,nt=Xt&8191,Bt=Xt>>>13,Sn=g[3]|0,At=Sn&8191,It=Sn>>>13,Mn=g[4]|0,Rt=Mn&8191,Lt=Mn>>>13,_n=g[5]|0,Tt=_n&8191,Ct=_n>>>13,kn=g[6]|0,Ut=kn&8191,Pt=kn>>>13,En=g[7]|0,Nt=En&8191,Ot=En>>>13,Bn=g[8]|0,qt=Bn&8191,zt=Bn>>>13,An=g[9]|0,Dt=An&8191,$t=An>>>13;h.negative=s.negative^c.negative,h.length=19,d=Math.imul(D,T),a=Math.imul(D,N),a=a+Math.imul(F,T)|0,y=Math.imul(F,N);var kr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(kr>>>26)|0,kr&=67108863,d=Math.imul(J,T),a=Math.imul(J,N),a=a+Math.imul(et,T)|0,y=Math.imul(et,N),d=d+Math.imul(D,ot)|0,a=a+Math.imul(D,st)|0,a=a+Math.imul(F,ot)|0,y=y+Math.imul(F,st)|0;var Er=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Er>>>26)|0,Er&=67108863,d=Math.imul(it,T),a=Math.imul(it,N),a=a+Math.imul(at,T)|0,y=Math.imul(at,N),d=d+Math.imul(J,ot)|0,a=a+Math.imul(J,st)|0,a=a+Math.imul(et,ot)|0,y=y+Math.imul(et,st)|0,d=d+Math.imul(D,nt)|0,a=a+Math.imul(D,Bt)|0,a=a+Math.imul(F,nt)|0,y=y+Math.imul(F,Bt)|0;var Br=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Br>>>26)|0,Br&=67108863,d=Math.imul(ht,T),a=Math.imul(ht,N),a=a+Math.imul(lt,T)|0,y=Math.imul(lt,N),d=d+Math.imul(it,ot)|0,a=a+Math.imul(it,st)|0,a=a+Math.imul(at,ot)|0,y=y+Math.imul(at,st)|0,d=d+Math.imul(J,nt)|0,a=a+Math.imul(J,Bt)|0,a=a+Math.imul(et,nt)|0,y=y+Math.imul(et,Bt)|0,d=d+Math.imul(D,At)|0,a=a+Math.imul(D,It)|0,a=a+Math.imul(F,At)|0,y=y+Math.imul(F,It)|0;var Ar=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,d=Math.imul(pt,T),a=Math.imul(pt,N),a=a+Math.imul(St,T)|0,y=Math.imul(St,N),d=d+Math.imul(ht,ot)|0,a=a+Math.imul(ht,st)|0,a=a+Math.imul(lt,ot)|0,y=y+Math.imul(lt,st)|0,d=d+Math.imul(it,nt)|0,a=a+Math.imul(it,Bt)|0,a=a+Math.imul(at,nt)|0,y=y+Math.imul(at,Bt)|0,d=d+Math.imul(J,At)|0,a=a+Math.imul(J,It)|0,a=a+Math.imul(et,At)|0,y=y+Math.imul(et,It)|0,d=d+Math.imul(D,Rt)|0,a=a+Math.imul(D,Lt)|0,a=a+Math.imul(F,Rt)|0,y=y+Math.imul(F,Lt)|0;var Ir=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,d=Math.imul(wt,T),a=Math.imul(wt,N),a=a+Math.imul(Mt,T)|0,y=Math.imul(Mt,N),d=d+Math.imul(pt,ot)|0,a=a+Math.imul(pt,st)|0,a=a+Math.imul(St,ot)|0,y=y+Math.imul(St,st)|0,d=d+Math.imul(ht,nt)|0,a=a+Math.imul(ht,Bt)|0,a=a+Math.imul(lt,nt)|0,y=y+Math.imul(lt,Bt)|0,d=d+Math.imul(it,At)|0,a=a+Math.imul(it,It)|0,a=a+Math.imul(at,At)|0,y=y+Math.imul(at,It)|0,d=d+Math.imul(J,Rt)|0,a=a+Math.imul(J,Lt)|0,a=a+Math.imul(et,Rt)|0,y=y+Math.imul(et,Lt)|0,d=d+Math.imul(D,Tt)|0,a=a+Math.imul(D,Ct)|0,a=a+Math.imul(F,Tt)|0,y=y+Math.imul(F,Ct)|0;var Rr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,d=Math.imul(bt,T),a=Math.imul(bt,N),a=a+Math.imul(gt,T)|0,y=Math.imul(gt,N),d=d+Math.imul(wt,ot)|0,a=a+Math.imul(wt,st)|0,a=a+Math.imul(Mt,ot)|0,y=y+Math.imul(Mt,st)|0,d=d+Math.imul(pt,nt)|0,a=a+Math.imul(pt,Bt)|0,a=a+Math.imul(St,nt)|0,y=y+Math.imul(St,Bt)|0,d=d+Math.imul(ht,At)|0,a=a+Math.imul(ht,It)|0,a=a+Math.imul(lt,At)|0,y=y+Math.imul(lt,It)|0,d=d+Math.imul(it,Rt)|0,a=a+Math.imul(it,Lt)|0,a=a+Math.imul(at,Rt)|0,y=y+Math.imul(at,Lt)|0,d=d+Math.imul(J,Tt)|0,a=a+Math.imul(J,Ct)|0,a=a+Math.imul(et,Tt)|0,y=y+Math.imul(et,Ct)|0,d=d+Math.imul(D,Ut)|0,a=a+Math.imul(D,Pt)|0,a=a+Math.imul(F,Ut)|0,y=y+Math.imul(F,Pt)|0;var Lr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,d=Math.imul(yt,T),a=Math.imul(yt,N),a=a+Math.imul(vt,T)|0,y=Math.imul(vt,N),d=d+Math.imul(bt,ot)|0,a=a+Math.imul(bt,st)|0,a=a+Math.imul(gt,ot)|0,y=y+Math.imul(gt,st)|0,d=d+Math.imul(wt,nt)|0,a=a+Math.imul(wt,Bt)|0,a=a+Math.imul(Mt,nt)|0,y=y+Math.imul(Mt,Bt)|0,d=d+Math.imul(pt,At)|0,a=a+Math.imul(pt,It)|0,a=a+Math.imul(St,At)|0,y=y+Math.imul(St,It)|0,d=d+Math.imul(ht,Rt)|0,a=a+Math.imul(ht,Lt)|0,a=a+Math.imul(lt,Rt)|0,y=y+Math.imul(lt,Lt)|0,d=d+Math.imul(it,Tt)|0,a=a+Math.imul(it,Ct)|0,a=a+Math.imul(at,Tt)|0,y=y+Math.imul(at,Ct)|0,d=d+Math.imul(J,Ut)|0,a=a+Math.imul(J,Pt)|0,a=a+Math.imul(et,Ut)|0,y=y+Math.imul(et,Pt)|0,d=d+Math.imul(D,Nt)|0,a=a+Math.imul(D,Ot)|0,a=a+Math.imul(F,Nt)|0,y=y+Math.imul(F,Ot)|0;var Tr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,d=Math.imul(xt,T),a=Math.imul(xt,N),a=a+Math.imul(S,T)|0,y=Math.imul(S,N),d=d+Math.imul(yt,ot)|0,a=a+Math.imul(yt,st)|0,a=a+Math.imul(vt,ot)|0,y=y+Math.imul(vt,st)|0,d=d+Math.imul(bt,nt)|0,a=a+Math.imul(bt,Bt)|0,a=a+Math.imul(gt,nt)|0,y=y+Math.imul(gt,Bt)|0,d=d+Math.imul(wt,At)|0,a=a+Math.imul(wt,It)|0,a=a+Math.imul(Mt,At)|0,y=y+Math.imul(Mt,It)|0,d=d+Math.imul(pt,Rt)|0,a=a+Math.imul(pt,Lt)|0,a=a+Math.imul(St,Rt)|0,y=y+Math.imul(St,Lt)|0,d=d+Math.imul(ht,Tt)|0,a=a+Math.imul(ht,Ct)|0,a=a+Math.imul(lt,Tt)|0,y=y+Math.imul(lt,Ct)|0,d=d+Math.imul(it,Ut)|0,a=a+Math.imul(it,Pt)|0,a=a+Math.imul(at,Ut)|0,y=y+Math.imul(at,Pt)|0,d=d+Math.imul(J,Nt)|0,a=a+Math.imul(J,Ot)|0,a=a+Math.imul(et,Nt)|0,y=y+Math.imul(et,Ot)|0,d=d+Math.imul(D,qt)|0,a=a+Math.imul(D,zt)|0,a=a+Math.imul(F,qt)|0,y=y+Math.imul(F,zt)|0;var Cr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,d=Math.imul(l,T),a=Math.imul(l,N),a=a+Math.imul(k,T)|0,y=Math.imul(k,N),d=d+Math.imul(xt,ot)|0,a=a+Math.imul(xt,st)|0,a=a+Math.imul(S,ot)|0,y=y+Math.imul(S,st)|0,d=d+Math.imul(yt,nt)|0,a=a+Math.imul(yt,Bt)|0,a=a+Math.imul(vt,nt)|0,y=y+Math.imul(vt,Bt)|0,d=d+Math.imul(bt,At)|0,a=a+Math.imul(bt,It)|0,a=a+Math.imul(gt,At)|0,y=y+Math.imul(gt,It)|0,d=d+Math.imul(wt,Rt)|0,a=a+Math.imul(wt,Lt)|0,a=a+Math.imul(Mt,Rt)|0,y=y+Math.imul(Mt,Lt)|0,d=d+Math.imul(pt,Tt)|0,a=a+Math.imul(pt,Ct)|0,a=a+Math.imul(St,Tt)|0,y=y+Math.imul(St,Ct)|0,d=d+Math.imul(ht,Ut)|0,a=a+Math.imul(ht,Pt)|0,a=a+Math.imul(lt,Ut)|0,y=y+Math.imul(lt,Pt)|0,d=d+Math.imul(it,Nt)|0,a=a+Math.imul(it,Ot)|0,a=a+Math.imul(at,Nt)|0,y=y+Math.imul(at,Ot)|0,d=d+Math.imul(J,qt)|0,a=a+Math.imul(J,zt)|0,a=a+Math.imul(et,qt)|0,y=y+Math.imul(et,zt)|0,d=d+Math.imul(D,Dt)|0,a=a+Math.imul(D,$t)|0,a=a+Math.imul(F,Dt)|0,y=y+Math.imul(F,$t)|0;var Ur=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,d=Math.imul(l,ot),a=Math.imul(l,st),a=a+Math.imul(k,ot)|0,y=Math.imul(k,st),d=d+Math.imul(xt,nt)|0,a=a+Math.imul(xt,Bt)|0,a=a+Math.imul(S,nt)|0,y=y+Math.imul(S,Bt)|0,d=d+Math.imul(yt,At)|0,a=a+Math.imul(yt,It)|0,a=a+Math.imul(vt,At)|0,y=y+Math.imul(vt,It)|0,d=d+Math.imul(bt,Rt)|0,a=a+Math.imul(bt,Lt)|0,a=a+Math.imul(gt,Rt)|0,y=y+Math.imul(gt,Lt)|0,d=d+Math.imul(wt,Tt)|0,a=a+Math.imul(wt,Ct)|0,a=a+Math.imul(Mt,Tt)|0,y=y+Math.imul(Mt,Ct)|0,d=d+Math.imul(pt,Ut)|0,a=a+Math.imul(pt,Pt)|0,a=a+Math.imul(St,Ut)|0,y=y+Math.imul(St,Pt)|0,d=d+Math.imul(ht,Nt)|0,a=a+Math.imul(ht,Ot)|0,a=a+Math.imul(lt,Nt)|0,y=y+Math.imul(lt,Ot)|0,d=d+Math.imul(it,qt)|0,a=a+Math.imul(it,zt)|0,a=a+Math.imul(at,qt)|0,y=y+Math.imul(at,zt)|0,d=d+Math.imul(J,Dt)|0,a=a+Math.imul(J,$t)|0,a=a+Math.imul(et,Dt)|0,y=y+Math.imul(et,$t)|0;var Pr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,d=Math.imul(l,nt),a=Math.imul(l,Bt),a=a+Math.imul(k,nt)|0,y=Math.imul(k,Bt),d=d+Math.imul(xt,At)|0,a=a+Math.imul(xt,It)|0,a=a+Math.imul(S,At)|0,y=y+Math.imul(S,It)|0,d=d+Math.imul(yt,Rt)|0,a=a+Math.imul(yt,Lt)|0,a=a+Math.imul(vt,Rt)|0,y=y+Math.imul(vt,Lt)|0,d=d+Math.imul(bt,Tt)|0,a=a+Math.imul(bt,Ct)|0,a=a+Math.imul(gt,Tt)|0,y=y+Math.imul(gt,Ct)|0,d=d+Math.imul(wt,Ut)|0,a=a+Math.imul(wt,Pt)|0,a=a+Math.imul(Mt,Ut)|0,y=y+Math.imul(Mt,Pt)|0,d=d+Math.imul(pt,Nt)|0,a=a+Math.imul(pt,Ot)|0,a=a+Math.imul(St,Nt)|0,y=y+Math.imul(St,Ot)|0,d=d+Math.imul(ht,qt)|0,a=a+Math.imul(ht,zt)|0,a=a+Math.imul(lt,qt)|0,y=y+Math.imul(lt,zt)|0,d=d+Math.imul(it,Dt)|0,a=a+Math.imul(it,$t)|0,a=a+Math.imul(at,Dt)|0,y=y+Math.imul(at,$t)|0;var Nr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,d=Math.imul(l,At),a=Math.imul(l,It),a=a+Math.imul(k,At)|0,y=Math.imul(k,It),d=d+Math.imul(xt,Rt)|0,a=a+Math.imul(xt,Lt)|0,a=a+Math.imul(S,Rt)|0,y=y+Math.imul(S,Lt)|0,d=d+Math.imul(yt,Tt)|0,a=a+Math.imul(yt,Ct)|0,a=a+Math.imul(vt,Tt)|0,y=y+Math.imul(vt,Ct)|0,d=d+Math.imul(bt,Ut)|0,a=a+Math.imul(bt,Pt)|0,a=a+Math.imul(gt,Ut)|0,y=y+Math.imul(gt,Pt)|0,d=d+Math.imul(wt,Nt)|0,a=a+Math.imul(wt,Ot)|0,a=a+Math.imul(Mt,Nt)|0,y=y+Math.imul(Mt,Ot)|0,d=d+Math.imul(pt,qt)|0,a=a+Math.imul(pt,zt)|0,a=a+Math.imul(St,qt)|0,y=y+Math.imul(St,zt)|0,d=d+Math.imul(ht,Dt)|0,a=a+Math.imul(ht,$t)|0,a=a+Math.imul(lt,Dt)|0,y=y+Math.imul(lt,$t)|0;var Or=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Or>>>26)|0,Or&=67108863,d=Math.imul(l,Rt),a=Math.imul(l,Lt),a=a+Math.imul(k,Rt)|0,y=Math.imul(k,Lt),d=d+Math.imul(xt,Tt)|0,a=a+Math.imul(xt,Ct)|0,a=a+Math.imul(S,Tt)|0,y=y+Math.imul(S,Ct)|0,d=d+Math.imul(yt,Ut)|0,a=a+Math.imul(yt,Pt)|0,a=a+Math.imul(vt,Ut)|0,y=y+Math.imul(vt,Pt)|0,d=d+Math.imul(bt,Nt)|0,a=a+Math.imul(bt,Ot)|0,a=a+Math.imul(gt,Nt)|0,y=y+Math.imul(gt,Ot)|0,d=d+Math.imul(wt,qt)|0,a=a+Math.imul(wt,zt)|0,a=a+Math.imul(Mt,qt)|0,y=y+Math.imul(Mt,zt)|0,d=d+Math.imul(pt,Dt)|0,a=a+Math.imul(pt,$t)|0,a=a+Math.imul(St,Dt)|0,y=y+Math.imul(St,$t)|0;var qr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(qr>>>26)|0,qr&=67108863,d=Math.imul(l,Tt),a=Math.imul(l,Ct),a=a+Math.imul(k,Tt)|0,y=Math.imul(k,Ct),d=d+Math.imul(xt,Ut)|0,a=a+Math.imul(xt,Pt)|0,a=a+Math.imul(S,Ut)|0,y=y+Math.imul(S,Pt)|0,d=d+Math.imul(yt,Nt)|0,a=a+Math.imul(yt,Ot)|0,a=a+Math.imul(vt,Nt)|0,y=y+Math.imul(vt,Ot)|0,d=d+Math.imul(bt,qt)|0,a=a+Math.imul(bt,zt)|0,a=a+Math.imul(gt,qt)|0,y=y+Math.imul(gt,zt)|0,d=d+Math.imul(wt,Dt)|0,a=a+Math.imul(wt,$t)|0,a=a+Math.imul(Mt,Dt)|0,y=y+Math.imul(Mt,$t)|0;var zr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(zr>>>26)|0,zr&=67108863,d=Math.imul(l,Ut),a=Math.imul(l,Pt),a=a+Math.imul(k,Ut)|0,y=Math.imul(k,Pt),d=d+Math.imul(xt,Nt)|0,a=a+Math.imul(xt,Ot)|0,a=a+Math.imul(S,Nt)|0,y=y+Math.imul(S,Ot)|0,d=d+Math.imul(yt,qt)|0,a=a+Math.imul(yt,zt)|0,a=a+Math.imul(vt,qt)|0,y=y+Math.imul(vt,zt)|0,d=d+Math.imul(bt,Dt)|0,a=a+Math.imul(bt,$t)|0,a=a+Math.imul(gt,Dt)|0,y=y+Math.imul(gt,$t)|0;var Dr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,d=Math.imul(l,Nt),a=Math.imul(l,Ot),a=a+Math.imul(k,Nt)|0,y=Math.imul(k,Ot),d=d+Math.imul(xt,qt)|0,a=a+Math.imul(xt,zt)|0,a=a+Math.imul(S,qt)|0,y=y+Math.imul(S,zt)|0,d=d+Math.imul(yt,Dt)|0,a=a+Math.imul(yt,$t)|0,a=a+Math.imul(vt,Dt)|0,y=y+Math.imul(vt,$t)|0;var $r=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+($r>>>26)|0,$r&=67108863,d=Math.imul(l,qt),a=Math.imul(l,zt),a=a+Math.imul(k,qt)|0,y=Math.imul(k,zt),d=d+Math.imul(xt,Dt)|0,a=a+Math.imul(xt,$t)|0,a=a+Math.imul(S,Dt)|0,y=y+Math.imul(S,$t)|0;var Fr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,d=Math.imul(l,Dt),a=Math.imul(l,$t),a=a+Math.imul(k,Dt)|0,y=Math.imul(k,$t);var Kr=(M+d|0)+((a&8191)<<13)|0;return M=(y+(a>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,b[0]=kr,b[1]=Er,b[2]=Br,b[3]=Ar,b[4]=Ir,b[5]=Rr,b[6]=Lr,b[7]=Tr,b[8]=Cr,b[9]=Ur,b[10]=Pr,b[11]=Nr,b[12]=Or,b[13]=qr,b[14]=zr,b[15]=Dr,b[16]=$r,b[17]=Fr,b[18]=Kr,M!==0&&(b[19]=M,h.length++),h};Math.imul||($=C);function O(v,s,c){c.negative=s.negative^v.negative,c.length=v.length+s.length;for(var h=0,m=0,g=0;g<c.length-1;g++){var b=m;m=0;for(var M=h&67108863,d=Math.min(g,s.length-1),a=Math.max(0,g-v.length+1);a<=d;a++){var y=g-a,q=v.words[y]|0,D=s.words[a]|0,F=q*D,rt=F&67108863;b=b+(F/67108864|0)|0,rt=rt+M|0,M=rt&67108863,b=b+(rt>>>26)|0,m+=b>>>26,b&=67108863}c.words[g]=M,h=b,b=m}return h!==0?c.words[g]=h:c.length--,c._strip()}function V(v,s,c){return O(v,s,c)}i.prototype.mulTo=function(s,c){var h,m=this.length+s.length;return this.length===10&&s.length===10?h=$(this,s,c):m<63?h=C(this,s,c):m<1024?h=O(this,s,c):h=V(this,s,c),h},i.prototype.mul=function(s){var c=new i(null);return c.words=new Array(this.length+s.length),this.mulTo(s,c)},i.prototype.mulf=function(s){var c=new i(null);return c.words=new Array(this.length+s.length),V(this,s,c)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){var c=s<0;c&&(s=-s),r(typeof s=="number"),r(s<67108864);for(var h=0,m=0;m<this.length;m++){var g=(this.words[m]|0)*s,b=(g&67108863)+(h&67108863);h>>=26,h+=g/67108864|0,h+=b>>>26,this.words[m]=b&67108863}return h!==0&&(this.words[m]=h,this.length++),c?this.ineg():this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var c=A(s);if(c.length===0)return new i(1);for(var h=this,m=0;m<c.length&&c[m]===0;m++,h=h.sqr());if(++m<c.length)for(var g=h.sqr();m<c.length;m++,g=g.sqr())c[m]!==0&&(h=h.mul(g));return h},i.prototype.iushln=function(s){r(typeof s=="number"&&s>=0);var c=s%26,h=(s-c)/26,m=67108863>>>26-c<<26-c,g;if(c!==0){var b=0;for(g=0;g<this.length;g++){var M=this.words[g]&m,d=(this.words[g]|0)-M<<c;this.words[g]=d|b,b=M>>>26-c}b&&(this.words[g]=b,this.length++)}if(h!==0){for(g=this.length-1;g>=0;g--)this.words[g+h]=this.words[g];for(g=0;g<h;g++)this.words[g]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(s){return r(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,c,h){r(typeof s=="number"&&s>=0);var m;c?m=(c-c%26)/26:m=0;var g=s%26,b=Math.min((s-g)/26,this.length),M=67108863^67108863>>>g<<g,d=h;if(m-=b,m=Math.max(0,m),d){for(var a=0;a<b;a++)d.words[a]=this.words[a];d.length=b}if(b!==0)if(this.length>b)for(this.length-=b,a=0;a<this.length;a++)this.words[a]=this.words[a+b];else this.words[0]=0,this.length=1;var y=0;for(a=this.length-1;a>=0&&(y!==0||a>=m);a--){var q=this.words[a]|0;this.words[a]=y<<26-g|q>>>g,y=q&M}return d&&y!==0&&(d.words[d.length++]=y),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(s,c,h){return r(this.negative===0),this.iushrn(s,c,h)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){r(typeof s=="number"&&s>=0);var c=s%26,h=(s-c)/26,m=1<<c;if(this.length<=h)return!1;var g=this.words[h];return!!(g&m)},i.prototype.imaskn=function(s){r(typeof s=="number"&&s>=0);var c=s%26,h=(s-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var m=67108863^67108863>>>c<<c;this.words[this.length-1]&=m}return this._strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<=s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,c,h){var m=s.length+h,g;this._expand(m);var b,M=0;for(g=0;g<s.length;g++){b=(this.words[g+h]|0)+M;var d=(s.words[g]|0)*c;b-=d&67108863,M=(b>>26)-(d/67108864|0),this.words[g+h]=b&67108863}for(;g<this.length-h;g++)b=(this.words[g+h]|0)+M,M=b>>26,this.words[g+h]=b&67108863;if(M===0)return this._strip();for(r(M===-1),M=0,g=0;g<this.length;g++)b=-(this.words[g]|0)+M,M=b>>26,this.words[g]=b&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(s,c){var h=this.length-s.length,m=this.clone(),g=s,b=g.words[g.length-1]|0,M=this._countBits(b);h=26-M,h!==0&&(g=g.ushln(h),m.iushln(h),b=g.words[g.length-1]|0);var d=m.length-g.length,a;if(c!=="mod"){a=new i(null),a.length=d+1,a.words=new Array(a.length);for(var y=0;y<a.length;y++)a.words[y]=0}var q=m.clone()._ishlnsubmul(g,1,d);q.negative===0&&(m=q,a&&(a.words[d]=1));for(var D=d-1;D>=0;D--){var F=(m.words[g.length+D]|0)*67108864+(m.words[g.length+D-1]|0);for(F=Math.min(F/b|0,67108863),m._ishlnsubmul(g,F,D);m.negative!==0;)F--,m.negative=0,m._ishlnsubmul(g,1,D),m.isZero()||(m.negative^=1);a&&(a.words[D]=F)}return a&&a._strip(),m._strip(),c!=="div"&&h!==0&&m.iushrn(h),{div:a||null,mod:m}},i.prototype.divmod=function(s,c,h){if(r(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var m,g,b;return this.negative!==0&&s.negative===0?(b=this.neg().divmod(s,c),c!=="mod"&&(m=b.div.neg()),c!=="div"&&(g=b.mod.neg(),h&&g.negative!==0&&g.iadd(s)),{div:m,mod:g}):this.negative===0&&s.negative!==0?(b=this.divmod(s.neg(),c),c!=="mod"&&(m=b.div.neg()),{div:m,mod:b.mod}):this.negative&s.negative?(b=this.neg().divmod(s.neg(),c),c!=="div"&&(g=b.mod.neg(),h&&g.negative!==0&&g.isub(s)),{div:b.div,mod:g}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?c==="div"?{div:this.divn(s.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modrn(s.words[0]))}:this._wordDiv(s,c)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var c=this.divmod(s);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(s):c.mod,m=s.ushrn(1),g=s.andln(1),b=h.cmp(m);return b<0||g===1&&b===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(s){var c=s<0;c&&(s=-s),r(s<=67108863);for(var h=(1<<26)%s,m=0,g=this.length-1;g>=0;g--)m=(h*m+(this.words[g]|0))%s;return c?-m:m},i.prototype.modn=function(s){return this.modrn(s)},i.prototype.idivn=function(s){var c=s<0;c&&(s=-s),r(s<=67108863);for(var h=0,m=this.length-1;m>=0;m--){var g=(this.words[m]|0)+h*67108864;this.words[m]=g/s|0,h=g%s}return this._strip(),c?this.ineg():this},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){r(s.negative===0),r(!s.isZero());var c=this,h=s.clone();c.negative!==0?c=c.umod(s):c=c.clone();for(var m=new i(1),g=new i(0),b=new i(0),M=new i(1),d=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++d;for(var a=h.clone(),y=c.clone();!c.isZero();){for(var q=0,D=1;!(c.words[0]&D)&&q<26;++q,D<<=1);if(q>0)for(c.iushrn(q);q-- >0;)(m.isOdd()||g.isOdd())&&(m.iadd(a),g.isub(y)),m.iushrn(1),g.iushrn(1);for(var F=0,rt=1;!(h.words[0]&rt)&&F<26;++F,rt<<=1);if(F>0)for(h.iushrn(F);F-- >0;)(b.isOdd()||M.isOdd())&&(b.iadd(a),M.isub(y)),b.iushrn(1),M.iushrn(1);c.cmp(h)>=0?(c.isub(h),m.isub(b),g.isub(M)):(h.isub(c),b.isub(m),M.isub(g))}return{a:b,b:M,gcd:h.iushln(d)}},i.prototype._invmp=function(s){r(s.negative===0),r(!s.isZero());var c=this,h=s.clone();c.negative!==0?c=c.umod(s):c=c.clone();for(var m=new i(1),g=new i(0),b=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var M=0,d=1;!(c.words[0]&d)&&M<26;++M,d<<=1);if(M>0)for(c.iushrn(M);M-- >0;)m.isOdd()&&m.iadd(b),m.iushrn(1);for(var a=0,y=1;!(h.words[0]&y)&&a<26;++a,y<<=1);if(a>0)for(h.iushrn(a);a-- >0;)g.isOdd()&&g.iadd(b),g.iushrn(1);c.cmp(h)>=0?(c.isub(h),m.isub(g)):(h.isub(c),g.isub(m))}var q;return c.cmpn(1)===0?q=m:q=g,q.cmpn(0)<0&&q.iadd(s),q},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var c=this.clone(),h=s.clone();c.negative=0,h.negative=0;for(var m=0;c.isEven()&&h.isEven();m++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var g=c.cmp(h);if(g<0){var b=c;c=h,h=b}else if(g===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(m)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){r(typeof s=="number");var c=s%26,h=(s-c)/26,m=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=m,this;for(var g=m,b=h;g!==0&&b<this.length;b++){var M=this.words[b]|0;M+=g,g=M>>>26,M&=67108863,this.words[b]=M}return g!==0&&(this.words[b]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var c=s<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(s=-s),r(s<=67108863,"Number is too big");var m=this.words[0]|0;h=m===s?0:m<s?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var c=this.ucmp(s);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var m=this.words[h]|0,g=s.words[h]|0;if(m!==g){m<g?c=-1:m>g&&(c=1);break}}return c},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new j(s)},i.prototype.toRed=function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var W={k256:null,p224:null,p192:null,p25519:null};function K(v,s){this.name=v,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},K.prototype.ireduce=function(s){var c=s,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var m=h<this.n?-1:c.ucmp(this.p);return m===0?(c.words[0]=0,c.length=1):m>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},K.prototype.split=function(s,c){s.iushrn(this.n,0,c)},K.prototype.imulK=function(s){return s.imul(this.k)};function G(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(G,K),G.prototype.split=function(s,c){for(var h=4194303,m=Math.min(s.length,9),g=0;g<m;g++)c.words[g]=s.words[g];if(c.length=m,s.length<=9){s.words[0]=0,s.length=1;return}var b=s.words[9];for(c.words[c.length++]=b&h,g=10;g<s.length;g++){var M=s.words[g]|0;s.words[g-10]=(M&h)<<4|b>>>22,b=M}b>>>=22,s.words[g-10]=b,b===0&&s.length>10?s.length-=10:s.length-=9},G.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var c=0,h=0;h<s.length;h++){var m=s.words[h]|0;c+=m*977,s.words[h]=c&67108863,c=m*64+(c/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Y(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(Y,K);function Ht(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Ht,K);function _t(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(_t,K),_t.prototype.imulK=function(s){for(var c=0,h=0;h<s.length;h++){var m=(s.words[h]|0)*19+c,g=m&67108863;m>>>=26,s.words[h]=g,c=m}return c!==0&&(s.words[s.length++]=c),s},i._prime=function(s){if(W[s])return W[s];var c;if(s==="k256")c=new G;else if(s==="p224")c=new Y;else if(s==="p192")c=new Ht;else if(s==="p25519")c=new _t;else throw new Error("Unknown prime "+s);return W[s]=c,c};function j(v){if(typeof v=="string"){var s=i._prime(v);this.m=s.p,this.prime=s}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}j.prototype._verify1=function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},j.prototype._verify2=function(s,c){r((s.negative|c.negative)===0,"red works only with positives"),r(s.red&&s.red===c.red,"red works only with red numbers")},j.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):(x(s,s.umod(this.m)._forceRed(this)),s)},j.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},j.prototype.add=function(s,c){this._verify2(s,c);var h=s.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},j.prototype.iadd=function(s,c){this._verify2(s,c);var h=s.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},j.prototype.sub=function(s,c){this._verify2(s,c);var h=s.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},j.prototype.isub=function(s,c){this._verify2(s,c);var h=s.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},j.prototype.shl=function(s,c){return this._verify1(s),this.imod(s.ushln(c))},j.prototype.imul=function(s,c){return this._verify2(s,c),this.imod(s.imul(c))},j.prototype.mul=function(s,c){return this._verify2(s,c),this.imod(s.mul(c))},j.prototype.isqr=function(s){return this.imul(s,s.clone())},j.prototype.sqr=function(s){return this.mul(s,s)},j.prototype.sqrt=function(s){if(s.isZero())return s.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(s,h)}for(var m=this.m.subn(1),g=0;!m.isZero()&&m.andln(1)===0;)g++,m.iushrn(1);r(!m.isZero());var b=new i(1).toRed(this),M=b.redNeg(),d=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,d).cmp(M)!==0;)a.redIAdd(M);for(var y=this.pow(a,m),q=this.pow(s,m.addn(1).iushrn(1)),D=this.pow(s,m),F=g;D.cmp(b)!==0;){for(var rt=D,J=0;rt.cmp(b)!==0;J++)rt=rt.redSqr();r(J<F);var et=this.pow(y,new i(1).iushln(F-J-1));q=q.redMul(et),y=et.redSqr(),D=D.redMul(y),F=J}return q},j.prototype.invm=function(s){var c=s._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},j.prototype.pow=function(s,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return s.clone();var h=4,m=new Array(1<<h);m[0]=new i(1).toRed(this),m[1]=s;for(var g=2;g<m.length;g++)m[g]=this.mul(m[g-1],s);var b=m[0],M=0,d=0,a=c.bitLength()%26;for(a===0&&(a=26),g=c.length-1;g>=0;g--){for(var y=c.words[g],q=a-1;q>=0;q--){var D=y>>q&1;if(b!==m[0]&&(b=this.sqr(b)),D===0&&M===0){d=0;continue}M<<=1,M|=D,d++,!(d!==h&&(g!==0||q!==0))&&(b=this.mul(b,m[M]),d=0,M=0)}a=26}return b},j.prototype.convertTo=function(s){var c=s.umod(this.m);return c===s?c.clone():c},j.prototype.convertFrom=function(s){var c=s.clone();return c.red=null,c},i.mont=function(s){return new Wt(s)};function Wt(v){j.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(Wt,j),Wt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},Wt.prototype.convertFrom=function(s){var c=this.imod(s.mul(this.rinv));return c.red=null,c},Wt.prototype.imul=function(s,c){if(s.isZero()||c.isZero())return s.words[0]=0,s.length=1,s;var h=s.imul(c),m=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=h.isub(m).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},Wt.prototype.mul=function(s,c){if(s.isZero()||c.isZero())return new i(0)._forceRed(this);var h=s.mul(c),m=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=h.isub(m).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},Wt.prototype.invm=function(s){var c=this.imod(s._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(n,He)})(ys);var Gu=ys.exports;const Gs=di(Gu);var ts={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=vi,r=e.Buffer;function o(u,p){for(var w in u)p[w]=u[w]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(o(e,t),t.Buffer=i);function i(u,p,w){return r(u,p,w)}i.prototype=Object.create(r.prototype),o(r,i),i.from=function(u,p,w){if(typeof u=="number")throw new TypeError("Argument must not be a number");return r(u,p,w)},i.alloc=function(u,p,w){if(typeof u!="number")throw new TypeError("Argument must be a number");var _=r(u);return p!==void 0?typeof w=="string"?_.fill(p,w):_.fill(p):_.fill(0),_},i.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r(u)},i.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(u)}})(ts,ts.exports);var zo=ts.exports,Hn=zo.Buffer;function Zu(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var o=n.charAt(r),i=o.charCodeAt(0);if(t[i]!==255)throw new TypeError(o+" is ambiguous");t[i]=r}var u=n.length,p=n.charAt(0),w=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function x(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=Hn.from(I)),!Hn.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var R=0,B=0,A=0,C=I.length;A!==C&&I[A]===0;)A++,R++;for(var $=(C-A)*_+1>>>0,O=new Uint8Array($);A!==C;){for(var V=I[A],W=0,K=$-1;(V!==0||W<B)&&K!==-1;K--,W++)V+=256*O[K]>>>0,O[K]=V%u>>>0,V=V/u>>>0;if(V!==0)throw new Error("Non-zero carry");B=W,A++}for(var G=$-B;G!==$&&O[G]===0;)G++;for(var Y=p.repeat(R);G<$;++G)Y+=n.charAt(O[G]);return Y}function E(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return Hn.alloc(0);for(var R=0,B=0,A=0;I[R]===p;)B++,R++;for(var C=(I.length-R)*w+1>>>0,$=new Uint8Array(C);R<I.length;){var O=t[I.charCodeAt(R)];if(O===255)return;for(var V=0,W=C-1;(O!==0||V<A)&&W!==-1;W--,V++)O+=u*$[W]>>>0,$[W]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");A=V,R++}for(var K=C-A;K!==C&&$[K]===0;)K++;var G=Hn.allocUnsafe(B+(C-K));G.fill(0,0,B);for(var Y=B;K!==C;)G[Y++]=$[K++];return G}function U(I){var R=E(I);if(R)return R;throw new Error("Non-base"+u+" character")}return{encode:x,decodeUnsafe:E,decode:U}}var ju=Zu,Yu=ju,Xu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ju=Yu(Xu);const Me=di(Ju),Qu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pr=new Uint32Array(64);class th extends Mo{constructor(){super(64,32,8,!1),this.A=dr[0]|0,this.B=dr[1]|0,this.C=dr[2]|0,this.D=dr[3]|0,this.E=dr[4]|0,this.F=dr[5]|0,this.G=dr[6]|0,this.H=dr[7]|0}get(){const{A:t,B:e,C:r,D:o,E:i,F:u,G:p,H:w}=this;return[t,e,r,o,i,u,p,w]}set(t,e,r,o,i,u,p,w){this.A=t|0,this.B=e|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=u|0,this.G=p|0,this.H=w|0}process(t,e){for(let E=0;E<16;E++,e+=4)pr[E]=t.getUint32(e,!1);for(let E=16;E<64;E++){const U=pr[E-15],I=pr[E-2],R=Ge(U,7)^Ge(U,18)^U>>>3,B=Ge(I,17)^Ge(I,19)^I>>>10;pr[E]=B+pr[E-7]+R+pr[E-16]|0}let{A:r,B:o,C:i,D:u,E:p,F:w,G:_,H:x}=this;for(let E=0;E<64;E++){const U=Ge(p,6)^Ge(p,11)^Ge(p,25),I=x+U+Fc(p,w,_)+Qu[E]+pr[E]|0,B=(Ge(r,2)^Ge(r,13)^Ge(r,22))+Kc(r,o,i)|0;x=_,_=w,w=p,p=u+I|0,u=i,i=o,o=r,r=I+B|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,u=u+this.D|0,p=p+this.E|0,w=w+this.F|0,_=_+this.G|0,x=x+this.H|0,this.set(r,o,i,u,p,w,_,x)}roundClean(){pr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const pn=mi(()=>new th);var Se={},ws={exports:{}};ws.exports;(function(n){(function(t,e){function r(v,s){if(!v)throw new Error(s||"Assertion failed")}function o(v,s){v.super_=s;var c=function(){};c.prototype=s.prototype,v.prototype=new c,v.prototype.constructor=v}function i(v,s,c){if(i.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((s==="le"||s==="be")&&(c=s,s=10),this._init(v||0,s||10,c||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=vi.Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,c){return s.cmp(c)>0?s:c},i.min=function(s,c){return s.cmp(c)<0?s:c},i.prototype._init=function(s,c,h){if(typeof s=="number")return this._initNumber(s,c,h);if(typeof s=="object")return this._initArray(s,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),s=s.toString().replace(/\s+/g,"");var m=0;s[0]==="-"&&(m++,this.negative=1),m<s.length&&(c===16?this._parseHex(s,m,h):(this._parseBase(s,c,m),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(s,c,h){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(s,c,h){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var g,b,M=0;if(h==="be")for(m=s.length-1,g=0;m>=0;m-=3)b=s[m]|s[m-1]<<8|s[m-2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);else if(h==="le")for(m=0,g=0;m<s.length;m+=3)b=s[m]|s[m+1]<<8|s[m+2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);return this._strip()};function p(v,s){var c=v.charCodeAt(s);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+v)}function w(v,s,c){var h=p(v,c);return c-1>=s&&(h|=p(v,c-1)<<4),h}i.prototype._parseHex=function(s,c,h){this.length=Math.ceil((s.length-c)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var g=0,b=0,M;if(h==="be")for(m=s.length-1;m>=c;m-=2)M=w(s,c,m)<<g,this.words[b]|=M&67108863,g>=18?(g-=18,b+=1,this.words[b]|=M>>>26):g+=8;else{var d=s.length-c;for(m=d%2===0?c+1:c;m<s.length;m+=2)M=w(s,c,m)<<g,this.words[b]|=M&67108863,g>=18?(g-=18,b+=1,this.words[b]|=M>>>26):g+=8}this._strip()};function _(v,s,c,h){for(var m=0,g=0,b=Math.min(v.length,c),M=s;M<b;M++){var d=v.charCodeAt(M)-48;m*=h,d>=49?g=d-49+10:d>=17?g=d-17+10:g=d,r(d>=0&&g<h,"Invalid character"),m+=g}return m}i.prototype._parseBase=function(s,c,h){this.words=[0],this.length=1;for(var m=0,g=1;g<=67108863;g*=c)m++;m--,g=g/c|0;for(var b=s.length-h,M=b%m,d=Math.min(b,b-M)+h,a=0,y=h;y<d;y+=m)a=_(s,y,y+m,c),this.imuln(g),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(M!==0){var q=1;for(a=_(s,y,s.length,c),y=0;y<M;y++)q*=c;this.imuln(q),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},i.prototype.copy=function(s){s.words=new Array(this.length);for(var c=0;c<this.length;c++)s.words[c]=this.words[c];s.length=this.length,s.negative=this.negative,s.red=this.red};function x(v,s){v.words=s.words,v.length=s.length,v.negative=s.negative,v.red=s.red}if(i.prototype._move=function(s){x(s,this)},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{i.prototype.inspect=E}else i.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var U=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,c){s=s||10,c=c|0||1;var h;if(s===16||s==="hex"){h="";for(var m=0,g=0,b=0;b<this.length;b++){var M=this.words[b],d=((M<<m|g)&16777215).toString(16);g=M>>>24-m&16777215,m+=2,m>=26&&(m-=26,b--),g!==0||b!==this.length-1?h=U[6-d.length]+d+h:h=d+h}for(g!==0&&(h=g.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(s===(s|0)&&s>=2&&s<=36){var a=I[s],y=R[s];h="";var q=this.clone();for(q.negative=0;!q.isZero();){var D=q.modrn(y).toString(s);q=q.idivn(y),q.isZero()?h=D+h:h=U[a-D.length]+D+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(s,c){return this.toArrayLike(u,s,c)}),i.prototype.toArray=function(s,c){return this.toArrayLike(Array,s,c)};var B=function(s,c){return s.allocUnsafe?s.allocUnsafe(c):new s(c)};i.prototype.toArrayLike=function(s,c,h){this._strip();var m=this.byteLength(),g=h||Math.max(1,m);r(m<=g,"byte array longer than desired length"),r(g>0,"Requested array length <= 0");var b=B(s,g),M=c==="le"?"LE":"BE";return this["_toArrayLike"+M](b,m),b},i.prototype._toArrayLikeLE=function(s,c){for(var h=0,m=0,g=0,b=0;g<this.length;g++){var M=this.words[g]<<b|m;s[h++]=M&255,h<s.length&&(s[h++]=M>>8&255),h<s.length&&(s[h++]=M>>16&255),b===6?(h<s.length&&(s[h++]=M>>24&255),m=0,b=0):(m=M>>>24,b+=2)}if(h<s.length)for(s[h++]=m;h<s.length;)s[h++]=0},i.prototype._toArrayLikeBE=function(s,c){for(var h=s.length-1,m=0,g=0,b=0;g<this.length;g++){var M=this.words[g]<<b|m;s[h--]=M&255,h>=0&&(s[h--]=M>>8&255),h>=0&&(s[h--]=M>>16&255),b===6?(h>=0&&(s[h--]=M>>24&255),m=0,b=0):(m=M>>>24,b+=2)}if(h>=0)for(s[h--]=m;h>=0;)s[h--]=0},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var c=s,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(s){if(s===0)return 26;var c=s,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},i.prototype.bitLength=function(){var s=this.words[this.length-1],c=this._countBits(s);return(this.length-1)*26+c};function A(v){for(var s=new Array(v.bitLength()),c=0;c<s.length;c++){var h=c/26|0,m=c%26;s[c]=v.words[h]>>>m&1}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(s+=h,h!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var c=0;c<s.length;c++)this.words[c]=this.words[c]|s.words[c];return this._strip()},i.prototype.ior=function(s){return r((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var c;this.length>s.length?c=s:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&s.words[h];return this.length=c.length,this._strip()},i.prototype.iand=function(s){return r((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var c,h;this.length>s.length?(c=this,h=s):(c=s,h=this);for(var m=0;m<h.length;m++)this.words[m]=c.words[m]^h.words[m];if(this!==c)for(;m<c.length;m++)this.words[m]=c.words[m];return this.length=c.length,this._strip()},i.prototype.ixor=function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){r(typeof s=="number"&&s>=0);var c=Math.ceil(s/26)|0,h=s%26;this._expand(c),h>0&&c--;for(var m=0;m<c;m++)this.words[m]=~this.words[m]&67108863;return h>0&&(this.words[m]=~this.words[m]&67108863>>26-h),this._strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,c){r(typeof s=="number"&&s>=0);var h=s/26|0,m=s%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<m:this.words[h]=this.words[h]&~(1<<m),this._strip()},i.prototype.iadd=function(s){var c;if(this.negative!==0&&s.negative===0)return this.negative=0,c=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,c=this.isub(s),s.negative=1,c._normSign();var h,m;this.length>s.length?(h=this,m=s):(h=s,m=this);for(var g=0,b=0;b<m.length;b++)c=(h.words[b]|0)+(m.words[b]|0)+g,this.words[b]=c&67108863,g=c>>>26;for(;g!==0&&b<h.length;b++)c=(h.words[b]|0)+g,this.words[b]=c&67108863,g=c>>>26;if(this.length=h.length,g!==0)this.words[this.length]=g,this.length++;else if(h!==this)for(;b<h.length;b++)this.words[b]=h.words[b];return this},i.prototype.add=function(s){var c;return s.negative!==0&&this.negative===0?(s.negative=0,c=this.sub(s),s.negative^=1,c):s.negative===0&&this.negative!==0?(this.negative=0,c=s.sub(this),this.negative=1,c):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var c=this.iadd(s);return s.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var h=this.cmp(s);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,g;h>0?(m=this,g=s):(m=s,g=this);for(var b=0,M=0;M<g.length;M++)c=(m.words[M]|0)-(g.words[M]|0)+b,b=c>>26,this.words[M]=c&67108863;for(;b!==0&&M<m.length;M++)c=(m.words[M]|0)+b,b=c>>26,this.words[M]=c&67108863;if(b===0&&M<m.length&&m!==this)for(;M<m.length;M++)this.words[M]=m.words[M];return this.length=Math.max(this.length,M),m!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function C(v,s,c){c.negative=s.negative^v.negative;var h=v.length+s.length|0;c.length=h,h=h-1|0;var m=v.words[0]|0,g=s.words[0]|0,b=m*g,M=b&67108863,d=b/67108864|0;c.words[0]=M;for(var a=1;a<h;a++){for(var y=d>>>26,q=d&67108863,D=Math.min(a,s.length-1),F=Math.max(0,a-v.length+1);F<=D;F++){var rt=a-F|0;m=v.words[rt]|0,g=s.words[F]|0,b=m*g+q,y+=b/67108864|0,q=b&67108863}c.words[a]=q|0,d=y|0}return d!==0?c.words[a]=d|0:c.length--,c._strip()}var $=function(s,c,h){var m=s.words,g=c.words,b=h.words,M=0,d,a,y,q=m[0]|0,D=q&8191,F=q>>>13,rt=m[1]|0,J=rt&8191,et=rt>>>13,Qt=m[2]|0,it=Qt&8191,at=Qt>>>13,jt=m[3]|0,ht=jt&8191,lt=jt>>>13,me=m[4]|0,pt=me&8191,St=me>>>13,ir=m[5]|0,wt=ir&8191,Mt=ir>>>13,Xe=m[6]|0,bt=Xe&8191,gt=Xe>>>13,le=m[7]|0,yt=le&8191,vt=le>>>13,be=m[8]|0,xt=be&8191,S=be>>>13,f=m[9]|0,l=f&8191,k=f>>>13,L=g[0]|0,T=L&8191,N=L>>>13,kt=g[1]|0,ot=kt&8191,st=kt>>>13,Xt=g[2]|0,nt=Xt&8191,Bt=Xt>>>13,Sn=g[3]|0,At=Sn&8191,It=Sn>>>13,Mn=g[4]|0,Rt=Mn&8191,Lt=Mn>>>13,_n=g[5]|0,Tt=_n&8191,Ct=_n>>>13,kn=g[6]|0,Ut=kn&8191,Pt=kn>>>13,En=g[7]|0,Nt=En&8191,Ot=En>>>13,Bn=g[8]|0,qt=Bn&8191,zt=Bn>>>13,An=g[9]|0,Dt=An&8191,$t=An>>>13;h.negative=s.negative^c.negative,h.length=19,d=Math.imul(D,T),a=Math.imul(D,N),a=a+Math.imul(F,T)|0,y=Math.imul(F,N);var kr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(kr>>>26)|0,kr&=67108863,d=Math.imul(J,T),a=Math.imul(J,N),a=a+Math.imul(et,T)|0,y=Math.imul(et,N),d=d+Math.imul(D,ot)|0,a=a+Math.imul(D,st)|0,a=a+Math.imul(F,ot)|0,y=y+Math.imul(F,st)|0;var Er=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Er>>>26)|0,Er&=67108863,d=Math.imul(it,T),a=Math.imul(it,N),a=a+Math.imul(at,T)|0,y=Math.imul(at,N),d=d+Math.imul(J,ot)|0,a=a+Math.imul(J,st)|0,a=a+Math.imul(et,ot)|0,y=y+Math.imul(et,st)|0,d=d+Math.imul(D,nt)|0,a=a+Math.imul(D,Bt)|0,a=a+Math.imul(F,nt)|0,y=y+Math.imul(F,Bt)|0;var Br=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Br>>>26)|0,Br&=67108863,d=Math.imul(ht,T),a=Math.imul(ht,N),a=a+Math.imul(lt,T)|0,y=Math.imul(lt,N),d=d+Math.imul(it,ot)|0,a=a+Math.imul(it,st)|0,a=a+Math.imul(at,ot)|0,y=y+Math.imul(at,st)|0,d=d+Math.imul(J,nt)|0,a=a+Math.imul(J,Bt)|0,a=a+Math.imul(et,nt)|0,y=y+Math.imul(et,Bt)|0,d=d+Math.imul(D,At)|0,a=a+Math.imul(D,It)|0,a=a+Math.imul(F,At)|0,y=y+Math.imul(F,It)|0;var Ar=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,d=Math.imul(pt,T),a=Math.imul(pt,N),a=a+Math.imul(St,T)|0,y=Math.imul(St,N),d=d+Math.imul(ht,ot)|0,a=a+Math.imul(ht,st)|0,a=a+Math.imul(lt,ot)|0,y=y+Math.imul(lt,st)|0,d=d+Math.imul(it,nt)|0,a=a+Math.imul(it,Bt)|0,a=a+Math.imul(at,nt)|0,y=y+Math.imul(at,Bt)|0,d=d+Math.imul(J,At)|0,a=a+Math.imul(J,It)|0,a=a+Math.imul(et,At)|0,y=y+Math.imul(et,It)|0,d=d+Math.imul(D,Rt)|0,a=a+Math.imul(D,Lt)|0,a=a+Math.imul(F,Rt)|0,y=y+Math.imul(F,Lt)|0;var Ir=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,d=Math.imul(wt,T),a=Math.imul(wt,N),a=a+Math.imul(Mt,T)|0,y=Math.imul(Mt,N),d=d+Math.imul(pt,ot)|0,a=a+Math.imul(pt,st)|0,a=a+Math.imul(St,ot)|0,y=y+Math.imul(St,st)|0,d=d+Math.imul(ht,nt)|0,a=a+Math.imul(ht,Bt)|0,a=a+Math.imul(lt,nt)|0,y=y+Math.imul(lt,Bt)|0,d=d+Math.imul(it,At)|0,a=a+Math.imul(it,It)|0,a=a+Math.imul(at,At)|0,y=y+Math.imul(at,It)|0,d=d+Math.imul(J,Rt)|0,a=a+Math.imul(J,Lt)|0,a=a+Math.imul(et,Rt)|0,y=y+Math.imul(et,Lt)|0,d=d+Math.imul(D,Tt)|0,a=a+Math.imul(D,Ct)|0,a=a+Math.imul(F,Tt)|0,y=y+Math.imul(F,Ct)|0;var Rr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,d=Math.imul(bt,T),a=Math.imul(bt,N),a=a+Math.imul(gt,T)|0,y=Math.imul(gt,N),d=d+Math.imul(wt,ot)|0,a=a+Math.imul(wt,st)|0,a=a+Math.imul(Mt,ot)|0,y=y+Math.imul(Mt,st)|0,d=d+Math.imul(pt,nt)|0,a=a+Math.imul(pt,Bt)|0,a=a+Math.imul(St,nt)|0,y=y+Math.imul(St,Bt)|0,d=d+Math.imul(ht,At)|0,a=a+Math.imul(ht,It)|0,a=a+Math.imul(lt,At)|0,y=y+Math.imul(lt,It)|0,d=d+Math.imul(it,Rt)|0,a=a+Math.imul(it,Lt)|0,a=a+Math.imul(at,Rt)|0,y=y+Math.imul(at,Lt)|0,d=d+Math.imul(J,Tt)|0,a=a+Math.imul(J,Ct)|0,a=a+Math.imul(et,Tt)|0,y=y+Math.imul(et,Ct)|0,d=d+Math.imul(D,Ut)|0,a=a+Math.imul(D,Pt)|0,a=a+Math.imul(F,Ut)|0,y=y+Math.imul(F,Pt)|0;var Lr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,d=Math.imul(yt,T),a=Math.imul(yt,N),a=a+Math.imul(vt,T)|0,y=Math.imul(vt,N),d=d+Math.imul(bt,ot)|0,a=a+Math.imul(bt,st)|0,a=a+Math.imul(gt,ot)|0,y=y+Math.imul(gt,st)|0,d=d+Math.imul(wt,nt)|0,a=a+Math.imul(wt,Bt)|0,a=a+Math.imul(Mt,nt)|0,y=y+Math.imul(Mt,Bt)|0,d=d+Math.imul(pt,At)|0,a=a+Math.imul(pt,It)|0,a=a+Math.imul(St,At)|0,y=y+Math.imul(St,It)|0,d=d+Math.imul(ht,Rt)|0,a=a+Math.imul(ht,Lt)|0,a=a+Math.imul(lt,Rt)|0,y=y+Math.imul(lt,Lt)|0,d=d+Math.imul(it,Tt)|0,a=a+Math.imul(it,Ct)|0,a=a+Math.imul(at,Tt)|0,y=y+Math.imul(at,Ct)|0,d=d+Math.imul(J,Ut)|0,a=a+Math.imul(J,Pt)|0,a=a+Math.imul(et,Ut)|0,y=y+Math.imul(et,Pt)|0,d=d+Math.imul(D,Nt)|0,a=a+Math.imul(D,Ot)|0,a=a+Math.imul(F,Nt)|0,y=y+Math.imul(F,Ot)|0;var Tr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,d=Math.imul(xt,T),a=Math.imul(xt,N),a=a+Math.imul(S,T)|0,y=Math.imul(S,N),d=d+Math.imul(yt,ot)|0,a=a+Math.imul(yt,st)|0,a=a+Math.imul(vt,ot)|0,y=y+Math.imul(vt,st)|0,d=d+Math.imul(bt,nt)|0,a=a+Math.imul(bt,Bt)|0,a=a+Math.imul(gt,nt)|0,y=y+Math.imul(gt,Bt)|0,d=d+Math.imul(wt,At)|0,a=a+Math.imul(wt,It)|0,a=a+Math.imul(Mt,At)|0,y=y+Math.imul(Mt,It)|0,d=d+Math.imul(pt,Rt)|0,a=a+Math.imul(pt,Lt)|0,a=a+Math.imul(St,Rt)|0,y=y+Math.imul(St,Lt)|0,d=d+Math.imul(ht,Tt)|0,a=a+Math.imul(ht,Ct)|0,a=a+Math.imul(lt,Tt)|0,y=y+Math.imul(lt,Ct)|0,d=d+Math.imul(it,Ut)|0,a=a+Math.imul(it,Pt)|0,a=a+Math.imul(at,Ut)|0,y=y+Math.imul(at,Pt)|0,d=d+Math.imul(J,Nt)|0,a=a+Math.imul(J,Ot)|0,a=a+Math.imul(et,Nt)|0,y=y+Math.imul(et,Ot)|0,d=d+Math.imul(D,qt)|0,a=a+Math.imul(D,zt)|0,a=a+Math.imul(F,qt)|0,y=y+Math.imul(F,zt)|0;var Cr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,d=Math.imul(l,T),a=Math.imul(l,N),a=a+Math.imul(k,T)|0,y=Math.imul(k,N),d=d+Math.imul(xt,ot)|0,a=a+Math.imul(xt,st)|0,a=a+Math.imul(S,ot)|0,y=y+Math.imul(S,st)|0,d=d+Math.imul(yt,nt)|0,a=a+Math.imul(yt,Bt)|0,a=a+Math.imul(vt,nt)|0,y=y+Math.imul(vt,Bt)|0,d=d+Math.imul(bt,At)|0,a=a+Math.imul(bt,It)|0,a=a+Math.imul(gt,At)|0,y=y+Math.imul(gt,It)|0,d=d+Math.imul(wt,Rt)|0,a=a+Math.imul(wt,Lt)|0,a=a+Math.imul(Mt,Rt)|0,y=y+Math.imul(Mt,Lt)|0,d=d+Math.imul(pt,Tt)|0,a=a+Math.imul(pt,Ct)|0,a=a+Math.imul(St,Tt)|0,y=y+Math.imul(St,Ct)|0,d=d+Math.imul(ht,Ut)|0,a=a+Math.imul(ht,Pt)|0,a=a+Math.imul(lt,Ut)|0,y=y+Math.imul(lt,Pt)|0,d=d+Math.imul(it,Nt)|0,a=a+Math.imul(it,Ot)|0,a=a+Math.imul(at,Nt)|0,y=y+Math.imul(at,Ot)|0,d=d+Math.imul(J,qt)|0,a=a+Math.imul(J,zt)|0,a=a+Math.imul(et,qt)|0,y=y+Math.imul(et,zt)|0,d=d+Math.imul(D,Dt)|0,a=a+Math.imul(D,$t)|0,a=a+Math.imul(F,Dt)|0,y=y+Math.imul(F,$t)|0;var Ur=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,d=Math.imul(l,ot),a=Math.imul(l,st),a=a+Math.imul(k,ot)|0,y=Math.imul(k,st),d=d+Math.imul(xt,nt)|0,a=a+Math.imul(xt,Bt)|0,a=a+Math.imul(S,nt)|0,y=y+Math.imul(S,Bt)|0,d=d+Math.imul(yt,At)|0,a=a+Math.imul(yt,It)|0,a=a+Math.imul(vt,At)|0,y=y+Math.imul(vt,It)|0,d=d+Math.imul(bt,Rt)|0,a=a+Math.imul(bt,Lt)|0,a=a+Math.imul(gt,Rt)|0,y=y+Math.imul(gt,Lt)|0,d=d+Math.imul(wt,Tt)|0,a=a+Math.imul(wt,Ct)|0,a=a+Math.imul(Mt,Tt)|0,y=y+Math.imul(Mt,Ct)|0,d=d+Math.imul(pt,Ut)|0,a=a+Math.imul(pt,Pt)|0,a=a+Math.imul(St,Ut)|0,y=y+Math.imul(St,Pt)|0,d=d+Math.imul(ht,Nt)|0,a=a+Math.imul(ht,Ot)|0,a=a+Math.imul(lt,Nt)|0,y=y+Math.imul(lt,Ot)|0,d=d+Math.imul(it,qt)|0,a=a+Math.imul(it,zt)|0,a=a+Math.imul(at,qt)|0,y=y+Math.imul(at,zt)|0,d=d+Math.imul(J,Dt)|0,a=a+Math.imul(J,$t)|0,a=a+Math.imul(et,Dt)|0,y=y+Math.imul(et,$t)|0;var Pr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,d=Math.imul(l,nt),a=Math.imul(l,Bt),a=a+Math.imul(k,nt)|0,y=Math.imul(k,Bt),d=d+Math.imul(xt,At)|0,a=a+Math.imul(xt,It)|0,a=a+Math.imul(S,At)|0,y=y+Math.imul(S,It)|0,d=d+Math.imul(yt,Rt)|0,a=a+Math.imul(yt,Lt)|0,a=a+Math.imul(vt,Rt)|0,y=y+Math.imul(vt,Lt)|0,d=d+Math.imul(bt,Tt)|0,a=a+Math.imul(bt,Ct)|0,a=a+Math.imul(gt,Tt)|0,y=y+Math.imul(gt,Ct)|0,d=d+Math.imul(wt,Ut)|0,a=a+Math.imul(wt,Pt)|0,a=a+Math.imul(Mt,Ut)|0,y=y+Math.imul(Mt,Pt)|0,d=d+Math.imul(pt,Nt)|0,a=a+Math.imul(pt,Ot)|0,a=a+Math.imul(St,Nt)|0,y=y+Math.imul(St,Ot)|0,d=d+Math.imul(ht,qt)|0,a=a+Math.imul(ht,zt)|0,a=a+Math.imul(lt,qt)|0,y=y+Math.imul(lt,zt)|0,d=d+Math.imul(it,Dt)|0,a=a+Math.imul(it,$t)|0,a=a+Math.imul(at,Dt)|0,y=y+Math.imul(at,$t)|0;var Nr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,d=Math.imul(l,At),a=Math.imul(l,It),a=a+Math.imul(k,At)|0,y=Math.imul(k,It),d=d+Math.imul(xt,Rt)|0,a=a+Math.imul(xt,Lt)|0,a=a+Math.imul(S,Rt)|0,y=y+Math.imul(S,Lt)|0,d=d+Math.imul(yt,Tt)|0,a=a+Math.imul(yt,Ct)|0,a=a+Math.imul(vt,Tt)|0,y=y+Math.imul(vt,Ct)|0,d=d+Math.imul(bt,Ut)|0,a=a+Math.imul(bt,Pt)|0,a=a+Math.imul(gt,Ut)|0,y=y+Math.imul(gt,Pt)|0,d=d+Math.imul(wt,Nt)|0,a=a+Math.imul(wt,Ot)|0,a=a+Math.imul(Mt,Nt)|0,y=y+Math.imul(Mt,Ot)|0,d=d+Math.imul(pt,qt)|0,a=a+Math.imul(pt,zt)|0,a=a+Math.imul(St,qt)|0,y=y+Math.imul(St,zt)|0,d=d+Math.imul(ht,Dt)|0,a=a+Math.imul(ht,$t)|0,a=a+Math.imul(lt,Dt)|0,y=y+Math.imul(lt,$t)|0;var Or=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Or>>>26)|0,Or&=67108863,d=Math.imul(l,Rt),a=Math.imul(l,Lt),a=a+Math.imul(k,Rt)|0,y=Math.imul(k,Lt),d=d+Math.imul(xt,Tt)|0,a=a+Math.imul(xt,Ct)|0,a=a+Math.imul(S,Tt)|0,y=y+Math.imul(S,Ct)|0,d=d+Math.imul(yt,Ut)|0,a=a+Math.imul(yt,Pt)|0,a=a+Math.imul(vt,Ut)|0,y=y+Math.imul(vt,Pt)|0,d=d+Math.imul(bt,Nt)|0,a=a+Math.imul(bt,Ot)|0,a=a+Math.imul(gt,Nt)|0,y=y+Math.imul(gt,Ot)|0,d=d+Math.imul(wt,qt)|0,a=a+Math.imul(wt,zt)|0,a=a+Math.imul(Mt,qt)|0,y=y+Math.imul(Mt,zt)|0,d=d+Math.imul(pt,Dt)|0,a=a+Math.imul(pt,$t)|0,a=a+Math.imul(St,Dt)|0,y=y+Math.imul(St,$t)|0;var qr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(qr>>>26)|0,qr&=67108863,d=Math.imul(l,Tt),a=Math.imul(l,Ct),a=a+Math.imul(k,Tt)|0,y=Math.imul(k,Ct),d=d+Math.imul(xt,Ut)|0,a=a+Math.imul(xt,Pt)|0,a=a+Math.imul(S,Ut)|0,y=y+Math.imul(S,Pt)|0,d=d+Math.imul(yt,Nt)|0,a=a+Math.imul(yt,Ot)|0,a=a+Math.imul(vt,Nt)|0,y=y+Math.imul(vt,Ot)|0,d=d+Math.imul(bt,qt)|0,a=a+Math.imul(bt,zt)|0,a=a+Math.imul(gt,qt)|0,y=y+Math.imul(gt,zt)|0,d=d+Math.imul(wt,Dt)|0,a=a+Math.imul(wt,$t)|0,a=a+Math.imul(Mt,Dt)|0,y=y+Math.imul(Mt,$t)|0;var zr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(zr>>>26)|0,zr&=67108863,d=Math.imul(l,Ut),a=Math.imul(l,Pt),a=a+Math.imul(k,Ut)|0,y=Math.imul(k,Pt),d=d+Math.imul(xt,Nt)|0,a=a+Math.imul(xt,Ot)|0,a=a+Math.imul(S,Nt)|0,y=y+Math.imul(S,Ot)|0,d=d+Math.imul(yt,qt)|0,a=a+Math.imul(yt,zt)|0,a=a+Math.imul(vt,qt)|0,y=y+Math.imul(vt,zt)|0,d=d+Math.imul(bt,Dt)|0,a=a+Math.imul(bt,$t)|0,a=a+Math.imul(gt,Dt)|0,y=y+Math.imul(gt,$t)|0;var Dr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,d=Math.imul(l,Nt),a=Math.imul(l,Ot),a=a+Math.imul(k,Nt)|0,y=Math.imul(k,Ot),d=d+Math.imul(xt,qt)|0,a=a+Math.imul(xt,zt)|0,a=a+Math.imul(S,qt)|0,y=y+Math.imul(S,zt)|0,d=d+Math.imul(yt,Dt)|0,a=a+Math.imul(yt,$t)|0,a=a+Math.imul(vt,Dt)|0,y=y+Math.imul(vt,$t)|0;var $r=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+($r>>>26)|0,$r&=67108863,d=Math.imul(l,qt),a=Math.imul(l,zt),a=a+Math.imul(k,qt)|0,y=Math.imul(k,zt),d=d+Math.imul(xt,Dt)|0,a=a+Math.imul(xt,$t)|0,a=a+Math.imul(S,Dt)|0,y=y+Math.imul(S,$t)|0;var Fr=(M+d|0)+((a&8191)<<13)|0;M=(y+(a>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,d=Math.imul(l,Dt),a=Math.imul(l,$t),a=a+Math.imul(k,Dt)|0,y=Math.imul(k,$t);var Kr=(M+d|0)+((a&8191)<<13)|0;return M=(y+(a>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,b[0]=kr,b[1]=Er,b[2]=Br,b[3]=Ar,b[4]=Ir,b[5]=Rr,b[6]=Lr,b[7]=Tr,b[8]=Cr,b[9]=Ur,b[10]=Pr,b[11]=Nr,b[12]=Or,b[13]=qr,b[14]=zr,b[15]=Dr,b[16]=$r,b[17]=Fr,b[18]=Kr,M!==0&&(b[19]=M,h.length++),h};Math.imul||($=C);function O(v,s,c){c.negative=s.negative^v.negative,c.length=v.length+s.length;for(var h=0,m=0,g=0;g<c.length-1;g++){var b=m;m=0;for(var M=h&67108863,d=Math.min(g,s.length-1),a=Math.max(0,g-v.length+1);a<=d;a++){var y=g-a,q=v.words[y]|0,D=s.words[a]|0,F=q*D,rt=F&67108863;b=b+(F/67108864|0)|0,rt=rt+M|0,M=rt&67108863,b=b+(rt>>>26)|0,m+=b>>>26,b&=67108863}c.words[g]=M,h=b,b=m}return h!==0?c.words[g]=h:c.length--,c._strip()}function V(v,s,c){return O(v,s,c)}i.prototype.mulTo=function(s,c){var h,m=this.length+s.length;return this.length===10&&s.length===10?h=$(this,s,c):m<63?h=C(this,s,c):m<1024?h=O(this,s,c):h=V(this,s,c),h},i.prototype.mul=function(s){var c=new i(null);return c.words=new Array(this.length+s.length),this.mulTo(s,c)},i.prototype.mulf=function(s){var c=new i(null);return c.words=new Array(this.length+s.length),V(this,s,c)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){var c=s<0;c&&(s=-s),r(typeof s=="number"),r(s<67108864);for(var h=0,m=0;m<this.length;m++){var g=(this.words[m]|0)*s,b=(g&67108863)+(h&67108863);h>>=26,h+=g/67108864|0,h+=b>>>26,this.words[m]=b&67108863}return h!==0&&(this.words[m]=h,this.length++),c?this.ineg():this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var c=A(s);if(c.length===0)return new i(1);for(var h=this,m=0;m<c.length&&c[m]===0;m++,h=h.sqr());if(++m<c.length)for(var g=h.sqr();m<c.length;m++,g=g.sqr())c[m]!==0&&(h=h.mul(g));return h},i.prototype.iushln=function(s){r(typeof s=="number"&&s>=0);var c=s%26,h=(s-c)/26,m=67108863>>>26-c<<26-c,g;if(c!==0){var b=0;for(g=0;g<this.length;g++){var M=this.words[g]&m,d=(this.words[g]|0)-M<<c;this.words[g]=d|b,b=M>>>26-c}b&&(this.words[g]=b,this.length++)}if(h!==0){for(g=this.length-1;g>=0;g--)this.words[g+h]=this.words[g];for(g=0;g<h;g++)this.words[g]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(s){return r(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,c,h){r(typeof s=="number"&&s>=0);var m;c?m=(c-c%26)/26:m=0;var g=s%26,b=Math.min((s-g)/26,this.length),M=67108863^67108863>>>g<<g,d=h;if(m-=b,m=Math.max(0,m),d){for(var a=0;a<b;a++)d.words[a]=this.words[a];d.length=b}if(b!==0)if(this.length>b)for(this.length-=b,a=0;a<this.length;a++)this.words[a]=this.words[a+b];else this.words[0]=0,this.length=1;var y=0;for(a=this.length-1;a>=0&&(y!==0||a>=m);a--){var q=this.words[a]|0;this.words[a]=y<<26-g|q>>>g,y=q&M}return d&&y!==0&&(d.words[d.length++]=y),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(s,c,h){return r(this.negative===0),this.iushrn(s,c,h)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){r(typeof s=="number"&&s>=0);var c=s%26,h=(s-c)/26,m=1<<c;if(this.length<=h)return!1;var g=this.words[h];return!!(g&m)},i.prototype.imaskn=function(s){r(typeof s=="number"&&s>=0);var c=s%26,h=(s-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var m=67108863^67108863>>>c<<c;this.words[this.length-1]&=m}return this._strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<=s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,c,h){var m=s.length+h,g;this._expand(m);var b,M=0;for(g=0;g<s.length;g++){b=(this.words[g+h]|0)+M;var d=(s.words[g]|0)*c;b-=d&67108863,M=(b>>26)-(d/67108864|0),this.words[g+h]=b&67108863}for(;g<this.length-h;g++)b=(this.words[g+h]|0)+M,M=b>>26,this.words[g+h]=b&67108863;if(M===0)return this._strip();for(r(M===-1),M=0,g=0;g<this.length;g++)b=-(this.words[g]|0)+M,M=b>>26,this.words[g]=b&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(s,c){var h=this.length-s.length,m=this.clone(),g=s,b=g.words[g.length-1]|0,M=this._countBits(b);h=26-M,h!==0&&(g=g.ushln(h),m.iushln(h),b=g.words[g.length-1]|0);var d=m.length-g.length,a;if(c!=="mod"){a=new i(null),a.length=d+1,a.words=new Array(a.length);for(var y=0;y<a.length;y++)a.words[y]=0}var q=m.clone()._ishlnsubmul(g,1,d);q.negative===0&&(m=q,a&&(a.words[d]=1));for(var D=d-1;D>=0;D--){var F=(m.words[g.length+D]|0)*67108864+(m.words[g.length+D-1]|0);for(F=Math.min(F/b|0,67108863),m._ishlnsubmul(g,F,D);m.negative!==0;)F--,m.negative=0,m._ishlnsubmul(g,1,D),m.isZero()||(m.negative^=1);a&&(a.words[D]=F)}return a&&a._strip(),m._strip(),c!=="div"&&h!==0&&m.iushrn(h),{div:a||null,mod:m}},i.prototype.divmod=function(s,c,h){if(r(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var m,g,b;return this.negative!==0&&s.negative===0?(b=this.neg().divmod(s,c),c!=="mod"&&(m=b.div.neg()),c!=="div"&&(g=b.mod.neg(),h&&g.negative!==0&&g.iadd(s)),{div:m,mod:g}):this.negative===0&&s.negative!==0?(b=this.divmod(s.neg(),c),c!=="mod"&&(m=b.div.neg()),{div:m,mod:b.mod}):this.negative&s.negative?(b=this.neg().divmod(s.neg(),c),c!=="div"&&(g=b.mod.neg(),h&&g.negative!==0&&g.isub(s)),{div:b.div,mod:g}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?c==="div"?{div:this.divn(s.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modrn(s.words[0]))}:this._wordDiv(s,c)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var c=this.divmod(s);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(s):c.mod,m=s.ushrn(1),g=s.andln(1),b=h.cmp(m);return b<0||g===1&&b===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(s){var c=s<0;c&&(s=-s),r(s<=67108863);for(var h=(1<<26)%s,m=0,g=this.length-1;g>=0;g--)m=(h*m+(this.words[g]|0))%s;return c?-m:m},i.prototype.modn=function(s){return this.modrn(s)},i.prototype.idivn=function(s){var c=s<0;c&&(s=-s),r(s<=67108863);for(var h=0,m=this.length-1;m>=0;m--){var g=(this.words[m]|0)+h*67108864;this.words[m]=g/s|0,h=g%s}return this._strip(),c?this.ineg():this},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){r(s.negative===0),r(!s.isZero());var c=this,h=s.clone();c.negative!==0?c=c.umod(s):c=c.clone();for(var m=new i(1),g=new i(0),b=new i(0),M=new i(1),d=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++d;for(var a=h.clone(),y=c.clone();!c.isZero();){for(var q=0,D=1;!(c.words[0]&D)&&q<26;++q,D<<=1);if(q>0)for(c.iushrn(q);q-- >0;)(m.isOdd()||g.isOdd())&&(m.iadd(a),g.isub(y)),m.iushrn(1),g.iushrn(1);for(var F=0,rt=1;!(h.words[0]&rt)&&F<26;++F,rt<<=1);if(F>0)for(h.iushrn(F);F-- >0;)(b.isOdd()||M.isOdd())&&(b.iadd(a),M.isub(y)),b.iushrn(1),M.iushrn(1);c.cmp(h)>=0?(c.isub(h),m.isub(b),g.isub(M)):(h.isub(c),b.isub(m),M.isub(g))}return{a:b,b:M,gcd:h.iushln(d)}},i.prototype._invmp=function(s){r(s.negative===0),r(!s.isZero());var c=this,h=s.clone();c.negative!==0?c=c.umod(s):c=c.clone();for(var m=new i(1),g=new i(0),b=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var M=0,d=1;!(c.words[0]&d)&&M<26;++M,d<<=1);if(M>0)for(c.iushrn(M);M-- >0;)m.isOdd()&&m.iadd(b),m.iushrn(1);for(var a=0,y=1;!(h.words[0]&y)&&a<26;++a,y<<=1);if(a>0)for(h.iushrn(a);a-- >0;)g.isOdd()&&g.iadd(b),g.iushrn(1);c.cmp(h)>=0?(c.isub(h),m.isub(g)):(h.isub(c),g.isub(m))}var q;return c.cmpn(1)===0?q=m:q=g,q.cmpn(0)<0&&q.iadd(s),q},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var c=this.clone(),h=s.clone();c.negative=0,h.negative=0;for(var m=0;c.isEven()&&h.isEven();m++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var g=c.cmp(h);if(g<0){var b=c;c=h,h=b}else if(g===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(m)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){r(typeof s=="number");var c=s%26,h=(s-c)/26,m=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=m,this;for(var g=m,b=h;g!==0&&b<this.length;b++){var M=this.words[b]|0;M+=g,g=M>>>26,M&=67108863,this.words[b]=M}return g!==0&&(this.words[b]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var c=s<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(s=-s),r(s<=67108863,"Number is too big");var m=this.words[0]|0;h=m===s?0:m<s?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var c=this.ucmp(s);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var m=this.words[h]|0,g=s.words[h]|0;if(m!==g){m<g?c=-1:m>g&&(c=1);break}}return c},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new j(s)},i.prototype.toRed=function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var W={k256:null,p224:null,p192:null,p25519:null};function K(v,s){this.name=v,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},K.prototype.ireduce=function(s){var c=s,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var m=h<this.n?-1:c.ucmp(this.p);return m===0?(c.words[0]=0,c.length=1):m>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},K.prototype.split=function(s,c){s.iushrn(this.n,0,c)},K.prototype.imulK=function(s){return s.imul(this.k)};function G(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(G,K),G.prototype.split=function(s,c){for(var h=4194303,m=Math.min(s.length,9),g=0;g<m;g++)c.words[g]=s.words[g];if(c.length=m,s.length<=9){s.words[0]=0,s.length=1;return}var b=s.words[9];for(c.words[c.length++]=b&h,g=10;g<s.length;g++){var M=s.words[g]|0;s.words[g-10]=(M&h)<<4|b>>>22,b=M}b>>>=22,s.words[g-10]=b,b===0&&s.length>10?s.length-=10:s.length-=9},G.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var c=0,h=0;h<s.length;h++){var m=s.words[h]|0;c+=m*977,s.words[h]=c&67108863,c=m*64+(c/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Y(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(Y,K);function Ht(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Ht,K);function _t(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(_t,K),_t.prototype.imulK=function(s){for(var c=0,h=0;h<s.length;h++){var m=(s.words[h]|0)*19+c,g=m&67108863;m>>>=26,s.words[h]=g,c=m}return c!==0&&(s.words[s.length++]=c),s},i._prime=function(s){if(W[s])return W[s];var c;if(s==="k256")c=new G;else if(s==="p224")c=new Y;else if(s==="p192")c=new Ht;else if(s==="p25519")c=new _t;else throw new Error("Unknown prime "+s);return W[s]=c,c};function j(v){if(typeof v=="string"){var s=i._prime(v);this.m=s.p,this.prime=s}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}j.prototype._verify1=function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},j.prototype._verify2=function(s,c){r((s.negative|c.negative)===0,"red works only with positives"),r(s.red&&s.red===c.red,"red works only with red numbers")},j.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):(x(s,s.umod(this.m)._forceRed(this)),s)},j.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},j.prototype.add=function(s,c){this._verify2(s,c);var h=s.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},j.prototype.iadd=function(s,c){this._verify2(s,c);var h=s.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},j.prototype.sub=function(s,c){this._verify2(s,c);var h=s.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},j.prototype.isub=function(s,c){this._verify2(s,c);var h=s.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},j.prototype.shl=function(s,c){return this._verify1(s),this.imod(s.ushln(c))},j.prototype.imul=function(s,c){return this._verify2(s,c),this.imod(s.imul(c))},j.prototype.mul=function(s,c){return this._verify2(s,c),this.imod(s.mul(c))},j.prototype.isqr=function(s){return this.imul(s,s.clone())},j.prototype.sqr=function(s){return this.mul(s,s)},j.prototype.sqrt=function(s){if(s.isZero())return s.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(s,h)}for(var m=this.m.subn(1),g=0;!m.isZero()&&m.andln(1)===0;)g++,m.iushrn(1);r(!m.isZero());var b=new i(1).toRed(this),M=b.redNeg(),d=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,d).cmp(M)!==0;)a.redIAdd(M);for(var y=this.pow(a,m),q=this.pow(s,m.addn(1).iushrn(1)),D=this.pow(s,m),F=g;D.cmp(b)!==0;){for(var rt=D,J=0;rt.cmp(b)!==0;J++)rt=rt.redSqr();r(J<F);var et=this.pow(y,new i(1).iushln(F-J-1));q=q.redMul(et),y=et.redSqr(),D=D.redMul(y),F=J}return q},j.prototype.invm=function(s){var c=s._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},j.prototype.pow=function(s,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return s.clone();var h=4,m=new Array(1<<h);m[0]=new i(1).toRed(this),m[1]=s;for(var g=2;g<m.length;g++)m[g]=this.mul(m[g-1],s);var b=m[0],M=0,d=0,a=c.bitLength()%26;for(a===0&&(a=26),g=c.length-1;g>=0;g--){for(var y=c.words[g],q=a-1;q>=0;q--){var D=y>>q&1;if(b!==m[0]&&(b=this.sqr(b)),D===0&&M===0){d=0;continue}M<<=1,M|=D,d++,!(d!==h&&(g!==0||q!==0))&&(b=this.mul(b,m[M]),d=0,M=0)}a=26}return b},j.prototype.convertTo=function(s){var c=s.umod(this.m);return c===s?c.clone():c},j.prototype.convertFrom=function(s){var c=s.clone();return c.red=null,c},i.mont=function(s){return new Wt(s)};function Wt(v){j.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(Wt,j),Wt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},Wt.prototype.convertFrom=function(s){var c=this.imod(s.mul(this.rinv));return c.red=null,c},Wt.prototype.imul=function(s,c){if(s.isZero()||c.isZero())return s.words[0]=0,s.length=1,s;var h=s.imul(c),m=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=h.isub(m).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},Wt.prototype.mul=function(s,c){if(s.isZero()||c.isZero())return new i(0)._forceRed(this);var h=s.mul(c),m=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=h.isub(m).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},Wt.prototype.invm=function(s){var c=this.imod(s._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(n,He)})(ws);var eh=ws.exports,Vn=zo.Buffer;function rh(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var o=n.charAt(r),i=o.charCodeAt(0);if(t[i]!==255)throw new TypeError(o+" is ambiguous");t[i]=r}var u=n.length,p=n.charAt(0),w=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function x(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=Vn.from(I)),!Vn.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var R=0,B=0,A=0,C=I.length;A!==C&&I[A]===0;)A++,R++;for(var $=(C-A)*_+1>>>0,O=new Uint8Array($);A!==C;){for(var V=I[A],W=0,K=$-1;(V!==0||W<B)&&K!==-1;K--,W++)V+=256*O[K]>>>0,O[K]=V%u>>>0,V=V/u>>>0;if(V!==0)throw new Error("Non-zero carry");B=W,A++}for(var G=$-B;G!==$&&O[G]===0;)G++;for(var Y=p.repeat(R);G<$;++G)Y+=n.charAt(O[G]);return Y}function E(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return Vn.alloc(0);for(var R=0,B=0,A=0;I[R]===p;)B++,R++;for(var C=(I.length-R)*w+1>>>0,$=new Uint8Array(C);R<I.length;){var O=t[I.charCodeAt(R)];if(O===255)return;for(var V=0,W=C-1;(O!==0||V<A)&&W!==-1;W--,V++)O+=u*$[W]>>>0,$[W]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");A=V,R++}for(var K=C-A;K!==C&&$[K]===0;)K++;var G=Vn.allocUnsafe(B+(C-K));G.fill(0,0,B);for(var Y=B;K!==C;)G[Y++]=$[K++];return G}function U(I){var R=E(I);if(R)return R;throw new Error("Non-base"+u+" character")}return{encode:x,decodeUnsafe:E,decode:U}}var nh=rh,ih=nh,sh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",oh=ih(sh);function ar(n,t,e){return t<=n&&n<=e}function xi(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function ah(n){for(var t=String(n),e=t.length,r=0,o=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)o.push(i);else if(56320<=i&&i<=57343)o.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)o.push(65533);else{var u=n.charCodeAt(r+1);if(56320<=u&&u<=57343){var p=i&1023,w=u&1023;o.push(65536+(p<<10)+w),r+=1}else o.push(65533)}r+=1}return o}function ch(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var ti=-1;function bs(n){this.tokens=[].slice.call(n)}bs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ti},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var gn=-1;function Ni(n,t){if(n)throw TypeError("Decoder error");return t||65533}var ei="utf-8";function ri(n,t){if(!(this instanceof ri))return new ri(n,t);if(n=n!==void 0?String(n).toLowerCase():ei,n!==ei)throw new Error("Encoding not supported. Only utf-8 is supported");t=xi(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ri.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=xi(e),this._streaming||(this._decoder=new uh({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var o=new bs(r),i=[],u;!o.endOfStream()&&(u=this._decoder.handler(o,o.read()),u!==gn);)u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u));if(!this._streaming){do{if(u=this._decoder.handler(o,o.read()),u===gn)break;u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u))}while(!o.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),ch(i)}};function ni(n,t){if(!(this instanceof ni))return new ni(n,t);if(n=n!==void 0?String(n).toLowerCase():ei,n!==ei)throw new Error("Encoding not supported. Only utf-8 is supported");t=xi(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ni.prototype={encode:function(t,e){t=t?String(t):"",e=xi(e),this._streaming||(this._encoder=new hh(this._options)),this._streaming=!!e.stream;for(var r=[],o=new bs(ah(t)),i;!o.endOfStream()&&(i=this._encoder.handler(o,o.read()),i!==gn);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(o,o.read()),i!==gn;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function uh(n){var t=n.fatal,e=0,r=0,o=0,i=128,u=191;this.handler=function(p,w){if(w===ti&&o!==0)return o=0,Ni(t);if(w===ti)return gn;if(o===0){if(ar(w,0,127))return w;if(ar(w,194,223))o=1,e=w-192;else if(ar(w,224,239))w===224&&(i=160),w===237&&(u=159),o=2,e=w-224;else if(ar(w,240,244))w===240&&(i=144),w===244&&(u=143),o=3,e=w-240;else return Ni(t);return e=e<<6*o,null}if(!ar(w,i,u))return e=o=r=0,i=128,u=191,p.prepend(w),Ni(t);if(i=128,u=191,r+=1,e+=w-128<<6*(o-r),r!==o)return null;var _=e;return e=o=r=0,_}}function hh(n){n.fatal,this.handler=function(t,e){if(e===ti)return gn;if(ar(e,0,127))return e;var r,o;ar(e,128,2047)?(r=1,o=192):ar(e,2048,65535)?(r=2,o=224):ar(e,65536,1114111)&&(r=3,o=240);for(var i=[(e>>6*r)+o];r>0;){var u=e>>6*(r-1);i.push(128|u&63),r-=1}return i}}const fh=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ri,TextEncoder:ni},Symbol.toStringTag,{value:"Module"})),lh=us(fh);var dh=He&&He.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),ph=He&&He.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),er=He&&He.__decorate||function(n,t,e,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var p=n.length-1;p>=0;p--)(u=n[p])&&(i=(o<3?u(i):o>3?u(t,e,i):u(t,e))||i);return o>3&&i&&Object.defineProperty(t,e,i),i},gh=He&&He.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&dh(t,n,e);return ph(t,n),t},Do=He&&He.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Se,"__esModule",{value:!0});var $o=Se.deserializeUnchecked=Go=Se.deserialize=Vo=Se.serialize=Se.BinaryReader=Se.BinaryWriter=Se.BorshError=Se.baseDecode=Se.baseEncode=void 0;const br=Do(eh),Fo=Do(oh),mh=gh(lh),yh=typeof TextDecoder!="function"?mh.TextDecoder:TextDecoder,wh=new yh("utf-8",{fatal:!0});function bh(n){return typeof n=="string"&&(n=de.from(n,"utf8")),Fo.default.encode(de.from(n))}Se.baseEncode=bh;function vh(n){return de.from(Fo.default.decode(n))}Se.baseDecode=vh;const Oi=1024;class Re extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Se.BorshError=Re;class Ko{constructor(){this.buf=de.alloc(Oi),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=de.concat([this.buf,de.alloc(Oi)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(de.from(new br.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(de.from(new br.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(de.from(new br.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(de.from(new br.default(t).toArray("le",64)))}writeBuffer(t){this.buf=de.concat([de.from(this.buf.subarray(0,this.length)),t,de.alloc(Oi)]),this.length+=t.length}writeString(t){this.maybeResize();const e=de.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(de.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}Se.BinaryWriter=Ko;function rr(n,t,e){const r=e.value;e.value=function(...o){try{return r.apply(this,o)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new Re("Reached the end of buffer when deserializing")}throw i}}}class De{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new br.default(t,"le")}readU128(){const t=this.readBuffer(16);return new br.default(t,"le")}readU256(){const t=this.readBuffer(32);return new br.default(t,"le")}readU512(){const t=this.readBuffer(64);return new br.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Re(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return wh.decode(e)}catch(r){throw new Re(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let o=0;o<e;++o)r.push(t());return r}}er([rr],De.prototype,"readU8",null);er([rr],De.prototype,"readU16",null);er([rr],De.prototype,"readU32",null);er([rr],De.prototype,"readU64",null);er([rr],De.prototype,"readU128",null);er([rr],De.prototype,"readU256",null);er([rr],De.prototype,"readU512",null);er([rr],De.prototype,"readString",null);er([rr],De.prototype,"readFixedArray",null);er([rr],De.prototype,"readArray",null);Se.BinaryReader=De;function Wo(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Hr(n,t,e,r,o){try{if(typeof r=="string")o[`write${Wo(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new Re(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);o.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new Re(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)Hr(n,null,e[i],r[0],o)}else o.writeArray(e,i=>{Hr(n,t,i,r[0],o)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?o.writeU8(0):(o.writeU8(1),Hr(n,t,e,r.type,o));break}case"map":{o.writeU32(e.size),e.forEach((i,u)=>{Hr(n,t,u,r.key,o),Hr(n,t,i,r.value,o)});break}default:throw new Re(`FieldType ${r} unrecognized`)}else Ho(n,e,o)}catch(i){throw i instanceof Re&&i.addToFieldPath(t),i}}function Ho(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new Re(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([o,i])=>{Hr(n,o,t[o],i,e)});else if(r.kind==="enum"){const o=t[r.field];for(let i=0;i<r.values.length;++i){const[u,p]=r.values[i];if(u===o){e.writeU8(i),Hr(n,u,t[u],p,e);break}}}else throw new Re(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function xh(n,t,e=Ko){const r=new e;return Ho(n,t,r),r.toArray()}var Vo=Se.serialize=xh;function Vr(n,t,e,r){try{if(typeof e=="string")return r[`read${Wo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const o=[];for(let i=0;i<e[1];i++)o.push(Vr(n,null,e[0],r));return o}else return r.readArray(()=>Vr(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?Vr(n,t,e.type,r):void 0;if(e.kind==="map"){let o=new Map;const i=r.readU32();for(let u=0;u<i;u++){const p=Vr(n,t,e.key,r),w=Vr(n,t,e.value,r);o.set(p,w)}return o}return vs(n,e,r)}catch(o){throw o instanceof Re&&o.addToFieldPath(t),o}}function vs(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new Re(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const o={};for(const[i,u]of n.get(t).fields)o[i]=Vr(n,i,u,e);return new t(o)}if(r.kind==="enum"){const o=e.readU8();if(o>=r.values.length)throw new Re(`Enum index: ${o} is out of range`);const[i,u]=r.values[o],p=Vr(n,i,u,e);return new t({[i]:p})}throw new Re(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Sh(n,t,e,r=De){const o=new r(e),i=vs(n,t,o);if(o.offset<e.length)throw new Re(`Unexpected ${e.length-o.offset} bytes after deserialized data`);return i}var Go=Se.deserialize=Sh;function Mh(n,t,e,r=De){const o=new r(e);return vs(n,t,o)}$o=Se.deserializeUnchecked=Mh;var z={};Object.defineProperty(z,"__esModule",{value:!0});z.s16=z.s8=z.nu64be=z.u48be=z.u40be=z.u32be=z.u24be=z.u16be=xe=z.nu64=z.u48=z.u40=ft=z.u32=z.u24=Ke=z.u16=Zt=z.u8=Zr=z.offset=z.greedy=z.Constant=z.UTF8=z.CString=z.Blob=z.Boolean=z.BitField=z.BitStructure=z.VariantLayout=z.Union=z.UnionLayoutDiscriminator=z.UnionDiscriminator=z.Structure=z.Sequence=z.DoubleBE=z.Double=z.FloatBE=z.Float=z.NearInt64BE=z.NearInt64=z.NearUInt64BE=z.NearUInt64=z.IntBE=z.Int=z.UIntBE=z.UInt=z.OffsetLayout=z.GreedyCount=z.ExternalLayout=z.bindConstructorLayout=z.nameWithProperty=z.Layout=z.uint8ArrayToBuffer=z.checkUint8Array=void 0;z.constant=z.utf8=z.cstr=ee=z.blob=z.unionLayoutDiscriminator=z.union=Ae=z.seq=z.bits=ct=z.struct=z.f64be=z.f64=z.f32be=z.f32=z.ns64be=z.s48be=z.s40be=z.s32be=z.s24be=z.s16be=Ne=z.ns64=z.s48=z.s40=z.s32=z.s24=void 0;const xs=vi;function wn(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}z.checkUint8Array=wn;function Gt(n){return wn(n),xs.Buffer.from(n.buffer,n.byteOffset,n.length)}z.uint8ArrayToBuffer=Gt;class Yt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}z.Layout=Yt;function Ss(n,t){return t.property?n+"["+t.property+"]":n}z.nameWithProperty=Ss;function _h(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Yt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}z.bindConstructorLayout=_h;class Ce extends Yt{isCount(){throw new Error("ExternalLayout is abstract")}}z.ExternalLayout=Ce;class Zo extends Ce{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){wn(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}z.GreedyCount=Zo;class Ms extends Ce{constructor(t,e=0,r){if(!(t instanceof Yt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof We||this.layout instanceof je}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}z.OffsetLayout=Ms;class We extends Yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Gt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Gt(e).writeUIntLE(t,r,this.span),this.span}}z.UInt=We;class je extends Yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Gt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Gt(e).writeUIntBE(t,r,this.span),this.span}}z.UIntBE=je;class Qr extends Yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Gt(t).readIntLE(e,this.span)}encode(t,e,r=0){return Gt(e).writeIntLE(t,r,this.span),this.span}}z.Int=Qr;class bn extends Yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Gt(t).readIntBE(e,this.span)}encode(t,e,r=0){return Gt(e).writeIntBE(t,r,this.span),this.span}}z.IntBE=bn;const es=Math.pow(2,32);function Si(n){const t=Math.floor(n/es),e=n-t*es;return{hi32:t,lo32:e}}function Mi(n,t){return n*es+t}class jo extends Yt{constructor(t){super(8,t)}decode(t,e=0){const r=Gt(t),o=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Mi(i,o)}encode(t,e,r=0){const o=Si(t),i=Gt(e);return i.writeUInt32LE(o.lo32,r),i.writeUInt32LE(o.hi32,r+4),8}}z.NearUInt64=jo;class Yo extends Yt{constructor(t){super(8,t)}decode(t,e=0){const r=Gt(t),o=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Mi(o,i)}encode(t,e,r=0){const o=Si(t),i=Gt(e);return i.writeUInt32BE(o.hi32,r),i.writeUInt32BE(o.lo32,r+4),8}}z.NearUInt64BE=Yo;class Xo extends Yt{constructor(t){super(8,t)}decode(t,e=0){const r=Gt(t),o=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Mi(i,o)}encode(t,e,r=0){const o=Si(t),i=Gt(e);return i.writeUInt32LE(o.lo32,r),i.writeInt32LE(o.hi32,r+4),8}}z.NearInt64=Xo;class Jo extends Yt{constructor(t){super(8,t)}decode(t,e=0){const r=Gt(t),o=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Mi(o,i)}encode(t,e,r=0){const o=Si(t),i=Gt(e);return i.writeInt32BE(o.hi32,r),i.writeUInt32BE(o.lo32,r+4),8}}z.NearInt64BE=Jo;class Qo extends Yt{constructor(t){super(4,t)}decode(t,e=0){return Gt(t).readFloatLE(e)}encode(t,e,r=0){return Gt(e).writeFloatLE(t,r),4}}z.Float=Qo;class ta extends Yt{constructor(t){super(4,t)}decode(t,e=0){return Gt(t).readFloatBE(e)}encode(t,e,r=0){return Gt(e).writeFloatBE(t,r),4}}z.FloatBE=ta;class ea extends Yt{constructor(t){super(8,t)}decode(t,e=0){return Gt(t).readDoubleLE(e)}encode(t,e,r=0){return Gt(e).writeDoubleLE(t,r),8}}z.Double=ea;class ra extends Yt{constructor(t){super(8,t)}decode(t,e=0){return Gt(t).readDoubleBE(e)}encode(t,e,r=0){return Gt(e).writeDoubleBE(t,r),8}}z.DoubleBE=ra;class na extends Yt{constructor(t,e,r){if(!(t instanceof Yt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Ce&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let o=-1;!(e instanceof Ce)&&0<t.span&&(o=e*t.span),super(o,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,o=this.count;if(o instanceof Ce&&(o=o.decode(t,e)),0<this.elementLayout.span)r=o*this.elementLayout.span;else{let i=0;for(;i<o;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let o=0,i=this.count;for(i instanceof Ce&&(i=i.decode(t,e));o<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),o+=1;return r}encode(t,e,r=0){const o=this.elementLayout,i=t.reduce((u,p)=>u+o.encode(p,e,r+u),0);return this.count instanceof Ce&&this.count.encode(t.length,e,r),i}}z.Sequence=na;class ia extends Yt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,u)=>i&&u instanceof Yt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=t.reduce((i,u)=>i+u.getSpan(),0)}catch{}super(o,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((o,i)=>{const u=i.getSpan(t,e);return e+=u,o+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){wn(t);const r=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(r[o.property]=o.decode(t,e)),e+=o.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const o=r;let i=0,u=0;for(const p of this.fields){let w=p.span;if(u=0<w?w:0,p.property!==void 0){const _=t[p.property];_!==void 0&&(u=p.encode(_,e,r),0>w&&(w=p.getSpan(e,r)))}i=r,r+=w}return i+u-o}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}z.Structure=ia;class _s{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}z.UnionDiscriminator=_s;class ii extends _s{constructor(t,e){if(!(t instanceof Ce&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}z.UnionLayoutDiscriminator=ii;class ks extends Yt{constructor(t,e,r){let o;if(t instanceof We||t instanceof je)o=new ii(new Ms(t));else if(t instanceof Ce&&t.isCount())o=new ii(t);else if(t instanceof _s)o=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Yt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof We||t instanceof je)&&(i+=o.layout.span)),super(i,r),this.discriminator=o,this.usesPrefixDiscriminator=t instanceof We||t instanceof je,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(p){return u(p)},this.configGetSourceVariant=function(p){u=p.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const o=this.discriminator,i=o.decode(t,e),u=this.registry[i];if(u===void 0){const p=this.defaultLayout;let w=0;this.usesPrefixDiscriminator&&(w=o.layout.span),r=this.makeDestinationObject(),r[o.property]=i,r[p.property]=p.decode(t,e+w)}else r=u.decode(t,e);return r}encode(t,e,r=0){const o=this.getSourceVariant(t);if(o===void 0){const i=this.discriminator,u=this.defaultLayout;let p=0;return this.usesPrefixDiscriminator&&(p=i.layout.span),i.encode(t[i.property],e,r),p+u.encode(t[u.property],e,r+p)}return o.encode(t,e,r)}addVariant(t,e,r){const o=new sa(this,t,e,r);return this.registry[t]=o,o}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}z.Union=ks;class sa extends Yt{constructor(t,e,r,o){if(!(t instanceof ks))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&o===void 0&&(o=r,r=null),r){if(!(r instanceof Yt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,o),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let o=0;return this.layout&&(o=this.layout.getSpan(t,e+r)),r+o}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+o):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=o;if(this.layout&&(this.layout.encode(t[this.property],e,r+o),i+=this.layout.getSpan(e,r+o),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}z.VariantLayout=sa;function an(n){return 0>n&&(n+=4294967296),n}class Es extends Yt{constructor(t,e,r){if(!(t instanceof We||t instanceof je))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let o=0;this._packedSetValue=function(i){return o=an(i),this},this._packedGetValue=function(){return o}}decode(t,e=0){const r=this.makeDestinationObject(),o=this.word.decode(t,e);this._packedSetValue(o);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const o=this.word.decode(e,r);this._packedSetValue(o);for(const i of this.fields)if(i.property!==void 0){const u=t[i.property];u!==void 0&&i.encode(u)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Bs(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new oa(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}z.BitStructure=Es;class Bs{constructor(t,e,r){if(!(t instanceof Es))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const o=8*t.span,i=t.fields.reduce((u,p)=>u+p.bits,0);if(e+i>o)throw new Error("bits too long for span remainder ("+(o-i)+" of "+o+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=o-i-e),this.wordMask=an(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return an(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==an(t&this.valueMask))throw new TypeError(Ss("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=an(t<<this.start);this.container._packedSetValue(an(e&~this.wordMask)|r)}}z.BitField=Bs;let oa=class extends Bs{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};z.Boolean=oa;class aa extends Yt{constructor(t,e){if(!(t instanceof Ce&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Ce||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Gt(t).slice(e,e+r)}encode(t,e,r){let o=this.length;if(this.length instanceof Ce&&(o=t.length),!(t instanceof Uint8Array&&o===t.length))throw new TypeError(Ss("Blob.encode",this)+" requires (length "+o+") Uint8Array as src");if(r+o>e.length)throw new RangeError("encoding overruns Uint8Array");const i=Gt(t);return Gt(e).write(i.toString("hex"),r,o,"hex"),this.length instanceof Ce&&this.length.encode(o,e,r),o}}z.Blob=aa;class ca extends Yt{constructor(t){super(-1,t)}getSpan(t,e=0){wn(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Gt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=xs.Buffer.from(t,"utf8"),i=o.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const u=Gt(e);return o.copy(u,r),u[r+i]=0,i+1}}z.CString=ca;class ua extends Yt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return wn(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Gt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=xs.Buffer.from(t,"utf8"),i=o.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return o.copy(Gt(e),r),i}}z.UTF8=ua;class ha extends Yt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}z.Constant=ha;z.greedy=(n,t)=>new Zo(n,t);var Zr=z.offset=(n,t,e)=>new Ms(n,t,e),Zt=z.u8=n=>new We(1,n),Ke=z.u16=n=>new We(2,n);z.u24=n=>new We(3,n);var ft=z.u32=n=>new We(4,n);z.u40=n=>new We(5,n);z.u48=n=>new We(6,n);var xe=z.nu64=n=>new jo(n);z.u16be=n=>new je(2,n);z.u24be=n=>new je(3,n);z.u32be=n=>new je(4,n);z.u40be=n=>new je(5,n);z.u48be=n=>new je(6,n);z.nu64be=n=>new Yo(n);z.s8=n=>new Qr(1,n);z.s16=n=>new Qr(2,n);z.s24=n=>new Qr(3,n);z.s32=n=>new Qr(4,n);z.s40=n=>new Qr(5,n);z.s48=n=>new Qr(6,n);var Ne=z.ns64=n=>new Xo(n);z.s16be=n=>new bn(2,n);z.s24be=n=>new bn(3,n);z.s32be=n=>new bn(4,n);z.s40be=n=>new bn(5,n);z.s48be=n=>new bn(6,n);z.ns64be=n=>new Jo(n);z.f32=n=>new Qo(n);z.f32be=n=>new ta(n);z.f64=n=>new ea(n);z.f64be=n=>new ra(n);var ct=z.struct=(n,t,e)=>new ia(n,t,e);z.bits=(n,t,e)=>new Es(n,t,e);var Ae=z.seq=(n,t,e)=>new na(n,t,e);z.union=(n,t,e)=>new ks(n,t,e);z.unionLayoutDiscriminator=(n,t)=>new ii(n,t);var ee=z.blob=(n,t)=>new aa(n,t);z.cstr=n=>new ca(n);z.utf8=(n,t)=>new ua(n,t);z.constant=(n,t)=>new ha(n,t);var qn={};Object.defineProperty(qn,"__esModule",{value:!0});function kh(n){{const t=de.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var Eh=qn.toBigIntLE=kh;function Bh(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}qn.toBigIntBE=Bh;function Ah(n,t){{const e=n.toString(16),r=de.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var Ih=qn.toBufferLE=Ah;function Rh(n,t){{const e=n.toString(16);return de.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}qn.toBufferBE=Rh;class Lh extends TypeError{constructor(t,e){let r;const{message:o,explanation:i,...u}=t,{path:p}=t,w=p.length===0?o:`At path: ${p.join(".")} -- ${o}`;super(i??w),i!=null&&(this.cause=w),Object.assign(this,u),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Th(n){return zn(n)&&typeof n[Symbol.iterator]=="function"}function zn(n){return typeof n=="object"&&n!=null}function si(n){return zn(n)&&!Array.isArray(n)}function Ye(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Ch(n){const{done:t,value:e}=n.next();return t?void 0:e}function Uh(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:o,branch:i}=t,{type:u}=e,{refinement:p,message:w=`Expected a value of type \`${u}\`${p?` with refinement \`${p}\``:""}, but received: \`${Ye(r)}\``}=n;return{value:r,type:u,refinement:p,key:o[o.length-1],path:o,branch:i,...n,message:w}}function*Zs(n,t,e,r){Th(n)||(n=[n]);for(const o of n){const i=Uh(o,t,e,r);i&&(yield i)}}function*As(n,t,e={}){const{path:r=[],branch:o=[n],coerce:i=!1,mask:u=!1}=e,p={path:r,branch:o,mask:u};i&&(n=t.coercer(n,p));let w="valid";for(const _ of t.validator(n,p))_.explanation=e.message,w="not_valid",yield[_,void 0];for(let[_,x,E]of t.entries(n,p)){const U=As(x,E,{path:_===void 0?r:[...r,_],branch:_===void 0?o:[...o,x],coerce:i,mask:u,message:e.message});for(const I of U)I[0]?(w=I[0].refinement!=null?"not_refined":"not_valid",yield[I[0],void 0]):i&&(x=I[1],_===void 0?n=x:n instanceof Map?n.set(_,x):n instanceof Set?n.add(x):zn(n)&&(x!==void 0||_ in n)&&(n[_]=x))}if(w!=="not_valid")for(const _ of t.refiner(n,p))_.explanation=e.message,w="not_refined",yield[_,void 0];w==="valid"&&(yield[void 0,n])}let nr=class{constructor(t){const{type:e,schema:r,validator:o,refiner:i,coercer:u=w=>w,entries:p=function*(){}}=t;this.type=e,this.schema=r,this.entries=p,this.coercer=u,o?this.validator=(w,_)=>{const x=o(w,_);return Zs(x,_,this,w)}:this.validator=()=>[],i?this.refiner=(w,_)=>{const x=i(w,_);return Zs(x,_,this,w)}:this.refiner=()=>[]}assert(t,e){return Ph(t,this,e)}create(t,e){return X(t,this,e)}is(t){return fa(t,this)}mask(t,e){return Nh(t,this,e)}validate(t,e={}){return Dn(t,this,e)}};function Ph(n,t,e){const r=Dn(n,t,{message:e});if(r[0])throw r[0]}function X(n,t,e){const r=Dn(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Nh(n,t,e){const r=Dn(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function fa(n,t){return!Dn(n,t)[0]}function Dn(n,t,e={}){const r=As(n,t,e),o=Ch(r);return o[0]?[new Lh(o[0],function*(){for(const u of r)u[0]&&(yield u[0])}),void 0]:[void 0,o[1]]}function tn(n,t){return new nr({type:n,schema:null,validator:t})}function Oh(){return tn("any",()=>!0)}function Q(n){return new nr({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ye(t)}`}})}function tr(){return tn("boolean",n=>typeof n=="boolean")}function Is(n){return tn("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ye(t)}`)}function se(n){const t=Ye(n),e=typeof n;return new nr({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Ye(r)}`}})}function qh(){return tn("never",()=>!1)}function tt(n){return new nr({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function P(){return tn("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ye(n)}`)}function dt(n){return new nr({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function la(n,t){return new nr({type:"record",schema:null,*entries(e){if(zn(e))for(const r in e){const o=e[r];yield[r,r,n],yield[r,o,t]}},validator(e){return si(e)||`Expected an object, but received: ${Ye(e)}`},coercer(e){return si(e)?{...e}:e}})}function Z(){return tn("string",n=>typeof n=="string"||`Expected a string, but received: ${Ye(n)}`)}function Rs(n){const t=qh();return new nr({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let o=0;o<r;o++)yield[o,e[o],n[o]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ye(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function H(n){const t=Object.keys(n);return new nr({type:"type",schema:n,*entries(e){if(zn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return si(e)||`Expected an object, but received: ${Ye(e)}`},coercer(e){return si(e)?{...e}:e}})}function Te(n){const t=n.map(e=>e.type).join(" | ");return new nr({type:"union",schema:null,coercer(e,r){for(const o of n){const[i,u]=o.validate(e,{coerce:!0,mask:r.mask});if(!i)return u}return e},validator(e,r){const o=[];for(const i of n){const[...u]=As(e,i,r),[p]=u;if(p[0])for(const[w]of u)w&&o.push(w);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ye(e)}`,...o]}})}function vn(){return tn("unknown",()=>!0)}function $n(n,t,e){return new nr({...n,coercer:(r,o)=>fa(r,t)?n.coercer(e(r,o),o):n.coercer(r,o)})}var Gn,zh=new Uint8Array(16);function da(){if(!Gn&&(Gn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Gn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gn(zh)}const Dh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _i(n){return typeof n=="string"&&Dh.test(n)}var ve=[];for(var qi=0;qi<256;++qi)ve.push((qi+256).toString(16).substr(1));function ki(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ve[n[t+0]]+ve[n[t+1]]+ve[n[t+2]]+ve[n[t+3]]+"-"+ve[n[t+4]]+ve[n[t+5]]+"-"+ve[n[t+6]]+ve[n[t+7]]+"-"+ve[n[t+8]]+ve[n[t+9]]+"-"+ve[n[t+10]]+ve[n[t+11]]+ve[n[t+12]]+ve[n[t+13]]+ve[n[t+14]]+ve[n[t+15]]).toLowerCase();if(!_i(e))throw TypeError("Stringified UUID is invalid");return e}var js,zi,Di=0,$i=0;function $h(n,t,e){var r=t&&e||0,o=t||new Array(16);n=n||{};var i=n.node||js,u=n.clockseq!==void 0?n.clockseq:zi;if(i==null||u==null){var p=n.random||(n.rng||da)();i==null&&(i=js=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),u==null&&(u=zi=(p[6]<<8|p[7])&16383)}var w=n.msecs!==void 0?n.msecs:Date.now(),_=n.nsecs!==void 0?n.nsecs:$i+1,x=w-Di+(_-$i)/1e4;if(x<0&&n.clockseq===void 0&&(u=u+1&16383),(x<0||w>Di)&&n.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Di=w,$i=_,zi=u,w+=122192928e5;var E=((w&268435455)*1e4+_)%4294967296;o[r++]=E>>>24&255,o[r++]=E>>>16&255,o[r++]=E>>>8&255,o[r++]=E&255;var U=w/4294967296*1e4&268435455;o[r++]=U>>>8&255,o[r++]=U&255,o[r++]=U>>>24&15|16,o[r++]=U>>>16&255,o[r++]=u>>>8|128,o[r++]=u&255;for(var I=0;I<6;++I)o[r+I]=i[I];return t||ki(o)}function pa(n){if(!_i(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Fh(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Kh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Wh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ga(n,t,e){function r(o,i,u,p){if(typeof o=="string"&&(o=Fh(o)),typeof i=="string"&&(i=pa(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var w=new Uint8Array(16+o.length);if(w.set(i),w.set(o,i.length),w=e(w),w[6]=w[6]&15|t,w[8]=w[8]&63|128,u){p=p||0;for(var _=0;_<16;++_)u[p+_]=w[_];return u}return ki(w)}try{r.name=n}catch{}return r.DNS=Kh,r.URL=Wh,r}function Hh(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Vh(Gh(Zh(n),n.length*8))}function Vh(n){for(var t=[],e=n.length*32,r="0123456789abcdef",o=0;o<e;o+=8){var i=n[o>>5]>>>o%32&255,u=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(u)}return t}function ma(n){return(n+64>>>9<<4)+14+1}function Gh(n,t){n[t>>5]|=128<<t%32,n[ma(t)-1]=t;for(var e=1732584193,r=-271733879,o=-1732584194,i=271733878,u=0;u<n.length;u+=16){var p=e,w=r,_=o,x=i;e=_e(e,r,o,i,n[u],7,-680876936),i=_e(i,e,r,o,n[u+1],12,-389564586),o=_e(o,i,e,r,n[u+2],17,606105819),r=_e(r,o,i,e,n[u+3],22,-1044525330),e=_e(e,r,o,i,n[u+4],7,-176418897),i=_e(i,e,r,o,n[u+5],12,1200080426),o=_e(o,i,e,r,n[u+6],17,-1473231341),r=_e(r,o,i,e,n[u+7],22,-45705983),e=_e(e,r,o,i,n[u+8],7,1770035416),i=_e(i,e,r,o,n[u+9],12,-1958414417),o=_e(o,i,e,r,n[u+10],17,-42063),r=_e(r,o,i,e,n[u+11],22,-1990404162),e=_e(e,r,o,i,n[u+12],7,1804603682),i=_e(i,e,r,o,n[u+13],12,-40341101),o=_e(o,i,e,r,n[u+14],17,-1502002290),r=_e(r,o,i,e,n[u+15],22,1236535329),e=ke(e,r,o,i,n[u+1],5,-165796510),i=ke(i,e,r,o,n[u+6],9,-1069501632),o=ke(o,i,e,r,n[u+11],14,643717713),r=ke(r,o,i,e,n[u],20,-373897302),e=ke(e,r,o,i,n[u+5],5,-701558691),i=ke(i,e,r,o,n[u+10],9,38016083),o=ke(o,i,e,r,n[u+15],14,-660478335),r=ke(r,o,i,e,n[u+4],20,-405537848),e=ke(e,r,o,i,n[u+9],5,568446438),i=ke(i,e,r,o,n[u+14],9,-1019803690),o=ke(o,i,e,r,n[u+3],14,-187363961),r=ke(r,o,i,e,n[u+8],20,1163531501),e=ke(e,r,o,i,n[u+13],5,-1444681467),i=ke(i,e,r,o,n[u+2],9,-51403784),o=ke(o,i,e,r,n[u+7],14,1735328473),r=ke(r,o,i,e,n[u+12],20,-1926607734),e=Ee(e,r,o,i,n[u+5],4,-378558),i=Ee(i,e,r,o,n[u+8],11,-2022574463),o=Ee(o,i,e,r,n[u+11],16,1839030562),r=Ee(r,o,i,e,n[u+14],23,-35309556),e=Ee(e,r,o,i,n[u+1],4,-1530992060),i=Ee(i,e,r,o,n[u+4],11,1272893353),o=Ee(o,i,e,r,n[u+7],16,-155497632),r=Ee(r,o,i,e,n[u+10],23,-1094730640),e=Ee(e,r,o,i,n[u+13],4,681279174),i=Ee(i,e,r,o,n[u],11,-358537222),o=Ee(o,i,e,r,n[u+3],16,-722521979),r=Ee(r,o,i,e,n[u+6],23,76029189),e=Ee(e,r,o,i,n[u+9],4,-640364487),i=Ee(i,e,r,o,n[u+12],11,-421815835),o=Ee(o,i,e,r,n[u+15],16,530742520),r=Ee(r,o,i,e,n[u+2],23,-995338651),e=Be(e,r,o,i,n[u],6,-198630844),i=Be(i,e,r,o,n[u+7],10,1126891415),o=Be(o,i,e,r,n[u+14],15,-1416354905),r=Be(r,o,i,e,n[u+5],21,-57434055),e=Be(e,r,o,i,n[u+12],6,1700485571),i=Be(i,e,r,o,n[u+3],10,-1894986606),o=Be(o,i,e,r,n[u+10],15,-1051523),r=Be(r,o,i,e,n[u+1],21,-2054922799),e=Be(e,r,o,i,n[u+8],6,1873313359),i=Be(i,e,r,o,n[u+15],10,-30611744),o=Be(o,i,e,r,n[u+6],15,-1560198380),r=Be(r,o,i,e,n[u+13],21,1309151649),e=Be(e,r,o,i,n[u+4],6,-145523070),i=Be(i,e,r,o,n[u+11],10,-1120210379),o=Be(o,i,e,r,n[u+2],15,718787259),r=Be(r,o,i,e,n[u+9],21,-343485551),e=vr(e,p),r=vr(r,w),o=vr(o,_),i=vr(i,x)}return[e,r,o,i]}function Zh(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(ma(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function vr(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function jh(n,t){return n<<t|n>>>32-t}function Ei(n,t,e,r,o,i){return vr(jh(vr(vr(t,n),vr(r,i)),o),e)}function _e(n,t,e,r,o,i,u){return Ei(t&e|~t&r,n,t,o,i,u)}function ke(n,t,e,r,o,i,u){return Ei(t&r|e&~r,n,t,o,i,u)}function Ee(n,t,e,r,o,i,u){return Ei(t^e^r,n,t,o,i,u)}function Be(n,t,e,r,o,i,u){return Ei(e^(t|~r),n,t,o,i,u)}var Yh=ga("v3",48,Hh);function Xh(n,t,e){n=n||{};var r=n.random||(n.rng||da)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=r[o];return t}return ki(r)}function Jh(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Fi(n,t){return n<<t|n>>>32-t}function Qh(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var o=0;o<r.length;++o)n.push(r.charCodeAt(o))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,u=Math.ceil(i/16),p=new Array(u),w=0;w<u;++w){for(var _=new Uint32Array(16),x=0;x<16;++x)_[x]=n[w*64+x*4]<<24|n[w*64+x*4+1]<<16|n[w*64+x*4+2]<<8|n[w*64+x*4+3];p[w]=_}p[u-1][14]=(n.length-1)*8/Math.pow(2,32),p[u-1][14]=Math.floor(p[u-1][14]),p[u-1][15]=(n.length-1)*8&4294967295;for(var E=0;E<u;++E){for(var U=new Uint32Array(80),I=0;I<16;++I)U[I]=p[E][I];for(var R=16;R<80;++R)U[R]=Fi(U[R-3]^U[R-8]^U[R-14]^U[R-16],1);for(var B=e[0],A=e[1],C=e[2],$=e[3],O=e[4],V=0;V<80;++V){var W=Math.floor(V/20),K=Fi(B,5)+Jh(W,A,C,$)+O+t[W]+U[V]>>>0;O=$,$=C,C=Fi(A,30)>>>0,A=B,B=K}e[0]=e[0]+B>>>0,e[1]=e[1]+A>>>0,e[2]=e[2]+C>>>0,e[3]=e[3]+$>>>0,e[4]=e[4]+O>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var tf=ga("v5",80,Qh);const ef="00000000-0000-0000-0000-000000000000";function rf(n){if(!_i(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const nf=Object.freeze(Object.defineProperty({__proto__:null,NIL:ef,parse:pa,stringify:ki,v1:$h,v3:Yh,v4:Xh,v5:tf,validate:_i,version:rf},Symbol.toStringTag,{value:"Module"})),ya=us(nf),sf=ya.v4,of=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const o=typeof r.version=="number"?r.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const i={method:n};if(o===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const u=typeof r.generator=="function"?r.generator:function(){return sf()};i.id=u(i,r)}else o===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var af=of;const cf=ya.v4,uf=af,Cn=function(n,t){if(!(this instanceof Cn))return new Cn(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return cf()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var hf=Cn;Cn.prototype.request=function(n,t,e,r){const o=this;let i=null;const u=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&n&&typeof n=="object"&&typeof t=="function")r=t,i=n;else{typeof e=="function"&&(r=e,e=void 0);const _=typeof r=="function";try{i=uf(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(x){if(_)return r(x);throw x}if(!_)return i}let w;try{w=JSON.stringify(i,this.options.replacer)}catch(_){return r(_)}return this.callServer(w,function(_,x){o._parseResponse(_,x,r)}),i};Cn.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(o){return e(o)}if(e.length===3)if(Array.isArray(r)){const o=function(u){return typeof u.error<"u"},i=function(u){return!o(u)};return e(null,r.filter(o),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const ff=di(hf);var wa={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(w,_,x){this.fn=w,this.context=_,this.once=x||!1}function i(w,_,x,E,U){if(typeof x!="function")throw new TypeError("The listener must be a function");var I=new o(x,E||w,U),R=e?e+_:_;return w._events[R]?w._events[R].fn?w._events[R]=[w._events[R],I]:w._events[R].push(I):(w._events[R]=I,w._eventsCount++),w}function u(w,_){--w._eventsCount===0?w._events=new r:delete w._events[_]}function p(){this._events=new r,this._eventsCount=0}p.prototype.eventNames=function(){var _=[],x,E;if(this._eventsCount===0)return _;for(E in x=this._events)t.call(x,E)&&_.push(e?E.slice(1):E);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(x)):_},p.prototype.listeners=function(_){var x=e?e+_:_,E=this._events[x];if(!E)return[];if(E.fn)return[E.fn];for(var U=0,I=E.length,R=new Array(I);U<I;U++)R[U]=E[U].fn;return R},p.prototype.listenerCount=function(_){var x=e?e+_:_,E=this._events[x];return E?E.fn?1:E.length:0},p.prototype.emit=function(_,x,E,U,I,R){var B=e?e+_:_;if(!this._events[B])return!1;var A=this._events[B],C=arguments.length,$,O;if(A.fn){switch(A.once&&this.removeListener(_,A.fn,void 0,!0),C){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,x),!0;case 3:return A.fn.call(A.context,x,E),!0;case 4:return A.fn.call(A.context,x,E,U),!0;case 5:return A.fn.call(A.context,x,E,U,I),!0;case 6:return A.fn.call(A.context,x,E,U,I,R),!0}for(O=1,$=new Array(C-1);O<C;O++)$[O-1]=arguments[O];A.fn.apply(A.context,$)}else{var V=A.length,W;for(O=0;O<V;O++)switch(A[O].once&&this.removeListener(_,A[O].fn,void 0,!0),C){case 1:A[O].fn.call(A[O].context);break;case 2:A[O].fn.call(A[O].context,x);break;case 3:A[O].fn.call(A[O].context,x,E);break;case 4:A[O].fn.call(A[O].context,x,E,U);break;default:if(!$)for(W=1,$=new Array(C-1);W<C;W++)$[W-1]=arguments[W];A[O].fn.apply(A[O].context,$)}}return!0},p.prototype.on=function(_,x,E){return i(this,_,x,E,!1)},p.prototype.once=function(_,x,E){return i(this,_,x,E,!0)},p.prototype.removeListener=function(_,x,E,U){var I=e?e+_:_;if(!this._events[I])return this;if(!x)return u(this,I),this;var R=this._events[I];if(R.fn)R.fn===x&&(!U||R.once)&&(!E||R.context===E)&&u(this,I);else{for(var B=0,A=[],C=R.length;B<C;B++)(R[B].fn!==x||U&&!R[B].once||E&&R[B].context!==E)&&A.push(R[B]);A.length?this._events[I]=A.length===1?A[0]:A:u(this,I)}return this},p.prototype.removeAllListeners=function(_){var x;return _?(x=e?e+_:_,this._events[x]&&u(this,x)):(this._events=new r,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=e,p.EventEmitter=p,n.exports=p})(wa);var lf=wa.exports;const ba=di(lf);var df=class extends ba{constructor(t,e,r){super();ye(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=o=>this.emit("message",o.data),this.socket.onerror=o=>this.emit("error",o),this.socket.onclose=o=>{this.emit("close",o.code,o.reason)}}send(t,e,r){const o=r||e;try{this.socket.send(t),o()}catch(i){o(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function pf(n,t){return new df(n,t)}var gf=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},mf=class extends ba{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:o=!0,reconnect_interval:i=1e3,max_reconnects:u=5,...p}={},w,_){super();ye(this,"address");ye(this,"rpc_id");ye(this,"queue");ye(this,"options");ye(this,"autoconnect");ye(this,"ready");ye(this,"reconnect");ye(this,"reconnect_timer_id");ye(this,"reconnect_interval");ye(this,"max_reconnects");ye(this,"rest_options");ye(this,"current_reconnects");ye(this,"generate_request_id");ye(this,"socket");ye(this,"webSocketFactory");ye(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=o,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=u,this.rest_options=p,this.current_reconnects=0,this.generate_request_id=w||(()=>++this.rpc_id),_?this.dataPack=_:this.dataPack=new gf,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,o){return!o&&typeof r=="object"&&(o=r,r=null),new Promise((i,u)=>{if(!this.ready)return u(new Error("socket not ready"));const p=this.generate_request_id(t,e),w={jsonrpc:"2.0",method:t,params:e||void 0,id:p};this.socket.send(this.dataPack.encode(w),o,_=>{if(_)return u(_);this.queue[p]={promise:[i,u]},r&&(this.queue[p].timeout=setTimeout(()=>{delete this.queue[p],u(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,o)=>{if(!this.ready)return o(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),u=>{if(u)return o(u);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=Et.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const o=[r.notification];if(r.params.constructor===Object)o.push(r.params);else for(let i=0;i<r.params.length;i++)o.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,o)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:o})=>{this.ready&&setTimeout(()=>this.emit("close",r,o),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};const va=[],xa=[],Sa=[],yf=BigInt(0),In=BigInt(1),wf=BigInt(2),bf=BigInt(7),vf=BigInt(256),xf=BigInt(113);for(let n=0,t=In,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],va.push(2*(5*r+e)),xa.push((n+1)*(n+2)/2%64);let o=yf;for(let i=0;i<7;i++)t=(t<<In^(t>>bf)*xf)%vf,t&wf&&(o^=In<<(In<<BigInt(i))-In);Sa.push(o)}const[Sf,Mf]=ko(Sa,!0),Ys=(n,t,e)=>e>32?Ao(n,t,e):Eo(n,t,e),Xs=(n,t,e)=>e>32?Io(n,t,e):Bo(n,t,e);function Ma(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let u=0;u<10;u++)e[u]=n[u]^n[u+10]^n[u+20]^n[u+30]^n[u+40];for(let u=0;u<10;u+=2){const p=(u+8)%10,w=(u+2)%10,_=e[w],x=e[w+1],E=Ys(_,x,1)^e[p],U=Xs(_,x,1)^e[p+1];for(let I=0;I<50;I+=10)n[u+I]^=E,n[u+I+1]^=U}let o=n[2],i=n[3];for(let u=0;u<24;u++){const p=xa[u],w=Ys(o,i,p),_=Xs(o,i,p),x=va[u];o=n[x],i=n[x+1],n[x]=w,n[x+1]=_}for(let u=0;u<50;u+=10){for(let p=0;p<10;p++)e[p]=n[u+p];for(let p=0;p<10;p++)n[u+p]^=~e[(p+2)%10]&e[(p+4)%10]}n[0]^=Sf[r],n[1]^=Mf[r]}e.fill(0)}class Fn extends gi{constructor(t,e,r,o=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=o,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Jn(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=wo(this.state)}keccak(){Qn||Yi(this.state32),Ma(this.state32,this.rounds),Qn||Yi(this.state32),this.posOut=0,this.pos=0}update(t){ln(this);const{blockLen:e,state:r}=this;t=Xr(t);const o=t.length;for(let i=0;i<o;){const u=Math.min(e-this.pos,o-i);for(let p=0;p<u;p++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:o}=this;t[r]^=e,e&128&&r===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){ln(this,!1),yn(t),this.finish();const e=this.state,{blockLen:r}=this;for(let o=0,i=t.length;o<i;){this.posOut>=r&&this.keccak();const u=Math.min(r-this.posOut,i-o);t.set(e.subarray(this.posOut,this.posOut+u),o),this.posOut+=u,o+=u}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Jn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(yo(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:o,rounds:i,enableXOF:u}=this;return t||(t=new Fn(e,r,o,u,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=o,t.enableXOF=u,t.destroyed=this.destroyed,t}}const _r=(n,t,e)=>mi(()=>new Fn(t,n,e)),_f=_r(6,144,224/8),kf=_r(6,136,256/8),Ef=_r(6,104,384/8),Bf=_r(6,72,512/8),Af=_r(1,144,224/8),If=_r(1,136,256/8),Rf=_r(1,104,384/8),Lf=_r(1,72,512/8),_a=(n,t,e)=>So((r={})=>new Fn(t,n,r.dkLen===void 0?e:r.dkLen,!0)),Tf=_a(31,168,128/8),Cf=_a(31,136,256/8),J0=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Fn,keccakP:Ma,keccak_224:Af,keccak_256:If,keccak_384:Rf,keccak_512:Lf,sha3_224:_f,sha3_256:kf,sha3_384:Ef,sha3_512:Bf,shake128:Tf,shake256:Cf},Symbol.toStringTag,{value:"Module"}));class ka extends gi{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ic(t);const r=Xr(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let u=0;u<i.length;u++)i[u]^=54;this.iHash.update(i),this.oHash=t.create();for(let u=0;u<i.length;u++)i[u]^=106;this.oHash.update(i),i.fill(0)}update(t){return ln(this),this.iHash.update(t),this}digestInto(t){ln(this),yn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:o,destroyed:i,blockLen:u,outputLen:p}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=u,t.outputLen=p,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ea=(n,t,e)=>new ka(n,t).update(e).digest();Ea.create=(n,t)=>new ka(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Uf(n){const t=ps(n);Jr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:o}=t;if(e){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Pf,hexToBytes:Nf}=wu,Gr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=Gr;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Pf(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=Gr,e=typeof n=="string"?Nf(n):n;Qe(e);let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:i}=Gr._parseInt(e.subarray(2)),{d:u,l:p}=Gr._parseInt(i);if(p.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:u}},hexFromSig(n){const t=_=>Number.parseInt(_[0],16)&8?"00"+_:_,e=_=>{const x=_.toString(16);return x.length&1?`0${x}`:x},r=t(e(n.s)),o=t(e(n.r)),i=r.length/2,u=o.length/2,p=e(i),w=e(u);return`30${e(u+i+4)}02${w}${o}02${p}${r}`}},Ze=BigInt(0),ue=BigInt(1),gr=BigInt(2),oi=BigInt(3),Js=BigInt(4);function Of(n){const t=Uf(n),{Fp:e}=t,r=t.toBytes||((R,B,A)=>{const C=B.toAffine();return Ie(Uint8Array.from([4]),e.toBytes(C.x),e.toBytes(C.y))}),o=t.fromBytes||(R=>{const B=R.subarray(1),A=e.fromBytes(B.subarray(0,e.BYTES)),C=e.fromBytes(B.subarray(e.BYTES,2*e.BYTES));return{x:A,y:C}});function i(R){const{a:B,b:A}=t,C=e.sqr(R),$=e.mul(C,R);return e.add(e.add($,e.mul(R,B)),A)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function u(R){return typeof R=="bigint"&&Ze<R&&R<t.n}function p(R){if(!u(R))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function w(R){const{allowedPrivateKeyLengths:B,nByteLength:A,wrapPrivateKey:C,n:$}=t;if(B&&typeof R!="bigint"){if(jr(R)&&(R=Yr(R)),typeof R!="string"||!B.includes(R.length))throw new Error("Invalid key");R=R.padStart(A*2,"0")}let O;try{O=typeof R=="bigint"?R:Le(ne("private key",R,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof R}`)}return C&&(O=Jt(O,$)),p(O),O}const _=new Map;function x(R){if(!(R instanceof E))throw new Error("ProjectivePoint expected")}class E{constructor(B,A,C){if(this.px=B,this.py=A,this.pz=C,B==null||!e.isValid(B))throw new Error("x required");if(A==null||!e.isValid(A))throw new Error("y required");if(C==null||!e.isValid(C))throw new Error("z required")}static fromAffine(B){const{x:A,y:C}=B||{};if(!B||!e.isValid(A)||!e.isValid(C))throw new Error("invalid affine point");if(B instanceof E)throw new Error("projective point not allowed");const $=O=>e.eql(O,e.ZERO);return $(A)&&$(C)?E.ZERO:new E(A,C,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(B){const A=e.invertBatch(B.map(C=>C.pz));return B.map((C,$)=>C.toAffine(A[$])).map(E.fromAffine)}static fromHex(B){const A=E.fromAffine(o(ne("pointHex",B)));return A.assertValidity(),A}static fromPrivateKey(B){return E.BASE.multiply(w(B))}_setWindowSize(B){this._WINDOW_SIZE=B,_.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:B,y:A}=this.toAffine();if(!e.isValid(B)||!e.isValid(A))throw new Error("bad point: x or y not FE");const C=e.sqr(A),$=i(B);if(!e.eql(C,$))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:B}=this.toAffine();if(e.isOdd)return!e.isOdd(B);throw new Error("Field doesn't support isOdd")}equals(B){x(B);const{px:A,py:C,pz:$}=this,{px:O,py:V,pz:W}=B,K=e.eql(e.mul(A,W),e.mul(O,$)),G=e.eql(e.mul(C,W),e.mul(V,$));return K&&G}negate(){return new E(this.px,e.neg(this.py),this.pz)}double(){const{a:B,b:A}=t,C=e.mul(A,oi),{px:$,py:O,pz:V}=this;let W=e.ZERO,K=e.ZERO,G=e.ZERO,Y=e.mul($,$),Ht=e.mul(O,O),_t=e.mul(V,V),j=e.mul($,O);return j=e.add(j,j),G=e.mul($,V),G=e.add(G,G),W=e.mul(B,G),K=e.mul(C,_t),K=e.add(W,K),W=e.sub(Ht,K),K=e.add(Ht,K),K=e.mul(W,K),W=e.mul(j,W),G=e.mul(C,G),_t=e.mul(B,_t),j=e.sub(Y,_t),j=e.mul(B,j),j=e.add(j,G),G=e.add(Y,Y),Y=e.add(G,Y),Y=e.add(Y,_t),Y=e.mul(Y,j),K=e.add(K,Y),_t=e.mul(O,V),_t=e.add(_t,_t),Y=e.mul(_t,j),W=e.sub(W,Y),G=e.mul(_t,Ht),G=e.add(G,G),G=e.add(G,G),new E(W,K,G)}add(B){x(B);const{px:A,py:C,pz:$}=this,{px:O,py:V,pz:W}=B;let K=e.ZERO,G=e.ZERO,Y=e.ZERO;const Ht=t.a,_t=e.mul(t.b,oi);let j=e.mul(A,O),Wt=e.mul(C,V),v=e.mul($,W),s=e.add(A,C),c=e.add(O,V);s=e.mul(s,c),c=e.add(j,Wt),s=e.sub(s,c),c=e.add(A,$);let h=e.add(O,W);return c=e.mul(c,h),h=e.add(j,v),c=e.sub(c,h),h=e.add(C,$),K=e.add(V,W),h=e.mul(h,K),K=e.add(Wt,v),h=e.sub(h,K),Y=e.mul(Ht,c),K=e.mul(_t,v),Y=e.add(K,Y),K=e.sub(Wt,Y),Y=e.add(Wt,Y),G=e.mul(K,Y),Wt=e.add(j,j),Wt=e.add(Wt,j),v=e.mul(Ht,v),c=e.mul(_t,c),Wt=e.add(Wt,v),v=e.sub(j,v),v=e.mul(Ht,v),c=e.add(c,v),j=e.mul(Wt,c),G=e.add(G,j),j=e.mul(h,c),K=e.mul(s,K),K=e.sub(K,j),j=e.mul(s,Wt),Y=e.mul(h,Y),Y=e.add(Y,j),new E(K,G,Y)}subtract(B){return this.add(B.negate())}is0(){return this.equals(E.ZERO)}wNAF(B){return I.wNAFCached(this,_,B,A=>{const C=e.invertBatch(A.map($=>$.pz));return A.map(($,O)=>$.toAffine(C[O])).map(E.fromAffine)})}multiplyUnsafe(B){const A=E.ZERO;if(B===Ze)return A;if(p(B),B===ue)return this;const{endo:C}=t;if(!C)return I.unsafeLadder(this,B);let{k1neg:$,k1:O,k2neg:V,k2:W}=C.splitScalar(B),K=A,G=A,Y=this;for(;O>Ze||W>Ze;)O&ue&&(K=K.add(Y)),W&ue&&(G=G.add(Y)),Y=Y.double(),O>>=ue,W>>=ue;return $&&(K=K.negate()),V&&(G=G.negate()),G=new E(e.mul(G.px,C.beta),G.py,G.pz),K.add(G)}multiply(B){p(B);let A=B,C,$;const{endo:O}=t;if(O){const{k1neg:V,k1:W,k2neg:K,k2:G}=O.splitScalar(A);let{p:Y,f:Ht}=this.wNAF(W),{p:_t,f:j}=this.wNAF(G);Y=I.constTimeNegate(V,Y),_t=I.constTimeNegate(K,_t),_t=new E(e.mul(_t.px,O.beta),_t.py,_t.pz),C=Y.add(_t),$=Ht.add(j)}else{const{p:V,f:W}=this.wNAF(A);C=V,$=W}return E.normalizeZ([C,$])[0]}multiplyAndAddUnsafe(B,A,C){const $=E.BASE,O=(W,K)=>K===Ze||K===ue||!W.equals($)?W.multiplyUnsafe(K):W.multiply(K),V=O(this,A).add(O(B,C));return V.is0()?void 0:V}toAffine(B){const{px:A,py:C,pz:$}=this,O=this.is0();B==null&&(B=O?e.ONE:e.inv($));const V=e.mul(A,B),W=e.mul(C,B),K=e.mul($,B);if(O)return{x:e.ZERO,y:e.ZERO};if(!e.eql(K,e.ONE))throw new Error("invZ was invalid");return{x:V,y:W}}isTorsionFree(){const{h:B,isTorsionFree:A}=t;if(B===ue)return!0;if(A)return A(E,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:B,clearCofactor:A}=t;return B===ue?this:A?A(E,this):this.multiplyUnsafe(t.h)}toRawBytes(B=!0){return this.assertValidity(),r(E,this,B)}toHex(B=!0){return Yr(this.toRawBytes(B))}}E.BASE=new E(t.Gx,t.Gy,e.ONE),E.ZERO=new E(e.ZERO,e.ONE,e.ZERO);const U=t.nBitLength,I=qo(E,t.endo?Math.ceil(U/2):U);return{CURVE:t,ProjectivePoint:E,normPrivateKeyToScalar:w,weierstrassEquation:i,isWithinCurveOrder:u}}function qf(n){const t=ps(n);return Jr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function zf(n){const t=qf(n),{Fp:e,n:r}=t,o=e.BYTES+1,i=2*e.BYTES+1;function u(c){return Ze<c&&c<e.ORDER}function p(c){return Jt(c,r)}function w(c){return Qi(c,r)}const{ProjectivePoint:_,normPrivateKeyToScalar:x,weierstrassEquation:E,isWithinCurveOrder:U}=Of({...t,toBytes(c,h,m){const g=h.toAffine(),b=e.toBytes(g.x),M=Ie;return m?M(Uint8Array.from([h.hasEvenY()?2:3]),b):M(Uint8Array.from([4]),b,e.toBytes(g.y))},fromBytes(c){const h=c.length,m=c[0],g=c.subarray(1);if(h===o&&(m===2||m===3)){const b=Le(g);if(!u(b))throw new Error("Point is not on curve");const M=E(b);let d;try{d=e.sqrt(M)}catch(q){const D=q instanceof Error?": "+q.message:"";throw new Error("Point is not on curve"+D)}const a=(d&ue)===ue;return(m&1)===1!==a&&(d=e.neg(d)),{x:b,y:d}}else if(h===i&&m===4){const b=e.fromBytes(g.subarray(0,e.BYTES)),M=e.fromBytes(g.subarray(e.BYTES,2*e.BYTES));return{x:b,y:M}}else throw new Error(`Point of length ${h} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),I=c=>Yr(Sr(c,t.nByteLength));function R(c){const h=r>>ue;return c>h}function B(c){return R(c)?p(-c):c}const A=(c,h,m)=>Le(c.slice(h,m));class C{constructor(h,m,g){this.r=h,this.s=m,this.recovery=g,this.assertValidity()}static fromCompact(h){const m=t.nByteLength;return h=ne("compactSignature",h,m*2),new C(A(h,0,m),A(h,m,2*m))}static fromDER(h){const{r:m,s:g}=Gr.toSig(ne("DER",h));return new C(m,g)}assertValidity(){if(!U(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!U(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(h){return new C(this.r,this.s,h)}recoverPublicKey(h){const{r:m,s:g,recovery:b}=this,M=G(ne("msgHash",h));if(b==null||![0,1,2,3].includes(b))throw new Error("recovery id invalid");const d=b===2||b===3?m+t.n:m;if(d>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const a=b&1?"03":"02",y=_.fromHex(a+I(d)),q=w(d),D=p(-M*q),F=p(g*q),rt=_.BASE.multiplyAndAddUnsafe(y,D,F);if(!rt)throw new Error("point at infinify");return rt.assertValidity(),rt}hasHighS(){return R(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return dn(this.toDERHex())}toDERHex(){return Gr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return dn(this.toCompactHex())}toCompactHex(){return I(this.r)+I(this.s)}}const $={isValidPrivateKey(c){try{return x(c),!0}catch{return!1}},normPrivateKeyToScalar:x,randomPrivateKey:()=>{const c=Oo(t.n);return Bu(t.randomBytes(c),t.n)},precompute(c=8,h=_.BASE){return h._setWindowSize(c),h.multiply(BigInt(3)),h}};function O(c,h=!0){return _.fromPrivateKey(c).toRawBytes(h)}function V(c){const h=jr(c),m=typeof c=="string",g=(h||m)&&c.length;return h?g===o||g===i:m?g===2*o||g===2*i:c instanceof _}function W(c,h,m=!0){if(V(c))throw new Error("first arg must be private key");if(!V(h))throw new Error("second arg must be public key");return _.fromHex(h).multiply(x(c)).toRawBytes(m)}const K=t.bits2int||function(c){const h=Le(c),m=c.length*8-t.nBitLength;return m>0?h>>BigInt(m):h},G=t.bits2int_modN||function(c){return p(K(c))},Y=ds(t.nBitLength);function Ht(c){if(typeof c!="bigint")throw new Error("bigint expected");if(!(Ze<=c&&c<Y))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Sr(c,t.nByteLength)}function _t(c,h,m=j){if(["recovered","canonical"].some(et=>et in m))throw new Error("sign() legacy options not supported");const{hash:g,randomBytes:b}=t;let{lowS:M,prehash:d,extraEntropy:a}=m;M==null&&(M=!0),c=ne("msgHash",c),d&&(c=ne("prehashed msgHash",g(c)));const y=G(c),q=x(h),D=[Ht(q),Ht(y)];if(a!=null&&a!==!1){const et=a===!0?b(e.BYTES):a;D.push(ne("extraEntropy",et))}const F=Ie(...D),rt=y;function J(et){const Qt=K(et);if(!U(Qt))return;const it=w(Qt),at=_.BASE.multiply(Qt).toAffine(),jt=p(at.x);if(jt===Ze)return;const ht=p(it*p(rt+jt*q));if(ht===Ze)return;let lt=(at.x===jt?0:2)|Number(at.y&ue),me=ht;return M&&R(ht)&&(me=B(ht),lt^=1),new C(jt,me,lt)}return{seed:F,k2sig:J}}const j={lowS:t.lowS,prehash:!1},Wt={lowS:t.lowS,prehash:!1};function v(c,h,m=j){const{seed:g,k2sig:b}=_t(c,h,m),M=t;return To(M.hash.outputLen,M.nByteLength,M.hmac)(g,b)}_.BASE._setWindowSize(8);function s(c,h,m,g=Wt){var at;const b=c;if(h=ne("msgHash",h),m=ne("publicKey",m),"strict"in g)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:d}=g;let a,y;try{if(typeof b=="string"||jr(b))try{a=C.fromDER(b)}catch(jt){if(!(jt instanceof Gr.Err))throw jt;a=C.fromCompact(b)}else if(typeof b=="object"&&typeof b.r=="bigint"&&typeof b.s=="bigint"){const{r:jt,s:ht}=b;a=new C(jt,ht)}else throw new Error("PARSE");y=_.fromHex(m)}catch(jt){if(jt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&a.hasHighS())return!1;d&&(h=t.hash(h));const{r:q,s:D}=a,F=G(h),rt=w(D),J=p(F*rt),et=p(q*rt),Qt=(at=_.BASE.multiplyAndAddUnsafe(y,J,et))==null?void 0:at.toAffine();return Qt?p(Qt.x)===q:!1}return{CURVE:t,getPublicKey:O,getSharedSecret:W,sign:v,verify:s,ProjectivePoint:_,Signature:C,utils:$}}function Df(n,t){const e=n.ORDER;let r=Ze;for(let R=e-ue;R%gr===Ze;R/=gr)r+=ue;const o=r,i=gr<<o-ue-ue,u=i*gr,p=(e-ue)/u,w=(p-ue)/gr,_=u-ue,x=i,E=n.pow(t,p),U=n.pow(t,(p+ue)/gr);let I=(R,B)=>{let A=E,C=n.pow(B,_),$=n.sqr(C);$=n.mul($,B);let O=n.mul(R,$);O=n.pow(O,w),O=n.mul(O,C),C=n.mul(O,B),$=n.mul(O,R);let V=n.mul($,C);O=n.pow(V,x);let W=n.eql(O,n.ONE);C=n.mul($,U),O=n.mul(V,A),$=n.cmov(C,$,W),V=n.cmov(O,V,W);for(let K=o;K>ue;K--){let G=K-gr;G=gr<<G-ue;let Y=n.pow(V,G);const Ht=n.eql(Y,n.ONE);C=n.mul($,A),A=n.mul(A,A),Y=n.mul(V,A),$=n.cmov(C,$,Ht),V=n.cmov(Y,V,Ht)}return{isValid:W,value:$}};if(n.ORDER%Js===oi){const R=(n.ORDER-oi)/Js,B=n.sqrt(n.neg(t));I=(A,C)=>{let $=n.sqr(C);const O=n.mul(A,C);$=n.mul($,O);let V=n.pow($,R);V=n.mul(V,O);const W=n.mul(V,B),K=n.mul(n.sqr(V),C),G=n.eql(K,A);let Y=n.cmov(W,V,G);return{isValid:G,value:Y}}}return I}function $f(n,t){if(Co(n),!n.isValid(t.A)||!n.isValid(t.B)||!n.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const e=Df(n,t.Z);if(!n.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let o,i,u,p,w,_,x,E;o=n.sqr(r),o=n.mul(o,t.Z),i=n.sqr(o),i=n.add(i,o),u=n.add(i,n.ONE),u=n.mul(u,t.B),p=n.cmov(t.Z,n.neg(i),!n.eql(i,n.ZERO)),p=n.mul(p,t.A),i=n.sqr(u),_=n.sqr(p),w=n.mul(_,t.A),i=n.add(i,w),i=n.mul(i,u),_=n.mul(_,p),w=n.mul(_,t.B),i=n.add(i,w),x=n.mul(o,u);const{isValid:U,value:I}=e(i,_);E=n.mul(o,r),E=n.mul(E,I),x=n.cmov(x,u,U),E=n.cmov(E,I,U);const R=n.isOdd(r)===n.isOdd(E);return E=n.cmov(n.neg(E),E,R),x=n.div(x,p),{x,y:E}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ff(n){return{hash:n,hmac:(t,...e)=>Ea(n,t,xo(...e)),randomBytes:yi}}function Kf(n,t){const e=r=>zf({...n,...Ff(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bi=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ai=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ba=BigInt(1),ci=BigInt(2),Qs=(n,t)=>(n+t/ci)/t;function Aa(n){const t=Bi,e=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),u=BigInt(23),p=BigInt(44),w=BigInt(88),_=n*n*n%t,x=_*_*n%t,E=ce(x,e,t)*x%t,U=ce(E,e,t)*x%t,I=ce(U,ci,t)*_%t,R=ce(I,o,t)*I%t,B=ce(R,i,t)*R%t,A=ce(B,p,t)*B%t,C=ce(A,w,t)*A%t,$=ce(C,p,t)*B%t,O=ce($,e,t)*x%t,V=ce(O,u,t)*R%t,W=ce(V,r,t)*_%t,K=ce(W,ci,t);if(!Mr.eql(Mr.sqr(K),n))throw new Error("Cannot find square root");return K}const Mr=Po(Bi,void 0,void 0,{sqrt:Aa}),en=Kf({a:BigInt(0),b:BigInt(7),Fp:Mr,n:ai,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=ai,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ba*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,u=BigInt("0x100000000000000000000000000000000"),p=Qs(i*n,t),w=Qs(-r*n,t);let _=Jt(n-p*e-w*o,t),x=Jt(-p*r-w*i,t);const E=_>u,U=x>u;if(E&&(_=t-_),U&&(x=t-x),_>u||x>u)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:E,k1:_,k2neg:U,k2:x}}}},pn),Ai=BigInt(0),Ia=n=>typeof n=="bigint"&&Ai<n&&n<Bi,Wf=n=>typeof n=="bigint"&&Ai<n&&n<ai,to={};function ui(n,...t){let e=to[n];if(e===void 0){const r=pn(Uint8Array.from(n,o=>o.charCodeAt(0)));e=Ie(r,r),to[n]=e}return pn(Ie(e,...t))}const Ls=n=>n.toRawBytes(!0).slice(1),rs=n=>Sr(n,32),Ki=n=>Jt(n,Bi),Un=n=>Jt(n,ai),Ts=en.ProjectivePoint,Hf=(n,t,e)=>Ts.BASE.multiplyAndAddUnsafe(n,t,e);function ns(n){let t=en.utils.normPrivateKeyToScalar(n),e=Ts.fromPrivateKey(t);return{scalar:e.hasEvenY()?t:Un(-t),bytes:Ls(e)}}function Ra(n){if(!Ia(n))throw new Error("bad x: need 0 < x < p");const t=Ki(n*n),e=Ki(t*n+BigInt(7));let r=Aa(e);r%ci!==Ai&&(r=Ki(-r));const o=new Ts(n,r,Ba);return o.assertValidity(),o}function La(...n){return Un(Le(ui("BIP0340/challenge",...n)))}function Vf(n){return ns(n).bytes}function Gf(n,t,e=yi(32)){const r=ne("message",n),{bytes:o,scalar:i}=ns(t),u=ne("auxRand",e,32),p=rs(i^Le(ui("BIP0340/aux",u))),w=ui("BIP0340/nonce",p,o,r),_=Un(Le(w));if(_===Ai)throw new Error("sign failed: k is zero");const{bytes:x,scalar:E}=ns(_),U=La(x,o,r),I=new Uint8Array(64);if(I.set(x,0),I.set(rs(Un(E+U*i)),32),!Ta(I,r,o))throw new Error("sign: Invalid signature produced");return I}function Ta(n,t,e){const r=ne("signature",n,64),o=ne("message",t),i=ne("publicKey",e,32);try{const u=Ra(Le(i)),p=Le(r.subarray(0,32));if(!Ia(p))return!1;const w=Le(r.subarray(32,64));if(!Wf(w))return!1;const _=La(rs(p),Ls(u),o),x=Hf(u,w,Un(-_));return!(!x||!x.hasEvenY()||x.toAffine().x!==p)}catch{return!1}}const Zf={getPublicKey:Vf,sign:Gf,verify:Ta,utils:{randomPrivateKey:en.utils.randomPrivateKey,lift_x:Ra,pointToBytes:Ls,numberToBytesBE:Sr,bytesToNumberBE:Le,taggedHash:ui,mod:Jt}},jf=Ou(Mr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(n=>n.map(t=>BigInt(t)))),Yf=$f(Mr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Mr.create(BigInt("-11"))}),Ca=qu(en.ProjectivePoint,n=>{const{x:t,y:e}=Yf(Mr.create(n[0]));return jf(t,e)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Mr.ORDER,m:1,k:128,expand:"xmd",hash:pn}),Xf=Ca.hashToCurve,Jf=Ca.encodeToCurve,td=Object.freeze(Object.defineProperty({__proto__:null,encodeToCurve:Jf,hashToCurve:Xf,schnorr:Zf,secp256k1:en},Symbol.toStringTag,{value:"Module"})),eo=()=>{const n=On.utils.randomPrivateKey(),t=is(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},is=On.getPublicKey;function ro(n){try{return On.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Ua=(n,t)=>On.sign(n,t.slice(0,32)),Qf=On.verify,ie=n=>Et.isBuffer(n)?n:n instanceof Uint8Array?Et.from(n.buffer,n.byteOffset,n.byteLength):Et.from(n);class tl{constructor(t){Object.assign(this,t)}encode(){return Et.from(Vo(Yn,this))}static decode(t){return Go(Yn,this,t)}static decodeUnchecked(t){return $o(Yn,this,t)}}const Yn=new Map;var Pa;const el=32,xr=32;function rl(n){return n._bn!==void 0}let no=1;class mt extends tl{constructor(t){if(super({}),this._bn=void 0,rl(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Me.decode(t);if(e.length!=xr)throw new Error("Invalid public key input");this._bn=new Gs(e)}else this._bn=new Gs(t);if(this._bn.byteLength()>xr)throw new Error("Invalid public key input")}}static unique(){const t=new mt(no);return no+=1,new mt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Me.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(Et);if(t.length===xr)return t;const e=Et.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const o=Et.concat([t.toBuffer(),Et.from(e),r.toBuffer()]),i=pn(o);return new mt(i)}static createProgramAddressSync(t,e){let r=Et.alloc(0);t.forEach(function(i){if(i.length>el)throw new TypeError("Max seed length exceeded");r=Et.concat([r,ie(i)])}),r=Et.concat([r,e.toBuffer(),Et.from("ProgramDerivedAddress")]);const o=pn(r);if(ro(o))throw new Error("Invalid seeds, address must fall off the curve");return new mt(o)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,o;for(;r!=0;){try{const i=t.concat(Et.from([r]));o=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[o,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new mt(t);return ro(e.toBytes())}}Pa=mt;mt.default=new Pa("11111111111111111111111111111111");Yn.set(mt,{kind:"struct",fields:[["_bn","u256"]]});new mt("BPFLoader1111111111111111111111111111111111");const fn=1232,Cs=127,hi=64;class Na extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Na.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Oa extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Oa.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Ln extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ln.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class fi{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,u)=>{r.set(i.toBase58(),u)});const o=i=>{const u=r.get(i.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return t.map(i=>({programIdIndex:o(i.programId),accountKeyIndexes:i.keys.map(u=>o(u.pubkey)),data:i.data}))}}const Vt=(n="publicKey")=>ee(32,n),nl=(n="signature")=>ee(64,n),un=(n="string")=>{const t=ct([ft("length"),ft("lengthPadding"),ee(Zr(ft(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),o=t;return o.decode=(i,u)=>e(i,u).chars.toString(),o.encode=(i,u,p)=>{const w={chars:Et.from(i,"utf8")};return r(w,u,p)},o.alloc=i=>ft().span+ft().span+Et.from(i,"utf8").length,o},il=(n="authorized")=>ct([Vt("staker"),Vt("withdrawer")],n),sl=(n="lockup")=>ct([Ne("unixTimestamp"),Ne("epoch"),Vt("custodian")],n),ol=(n="voteInit")=>ct([Vt("nodePubkey"),Vt("authorizedVoter"),Vt("authorizedWithdrawer"),Zt("commission")],n),al=(n="voteAuthorizeWithSeedArgs")=>ct([ft("voteAuthorizationType"),Vt("currentAuthorityDerivedKeyOwnerPubkey"),un("currentAuthorityDerivedKeySeed"),Vt("newAuthorized")],n);function qa(n,t){const e=o=>{if(o.span>=0)return o.span;if(typeof o.alloc=="function")return o.alloc(t[o.property]);if("count"in o&&"elementLayout"in o){const i=t[o.property];if(Array.isArray(i))return i.length*e(o.elementLayout)}else if("fields"in o)return qa({layout:o},t[o.property]);return 0};let r=0;return n.layout.fields.forEach(o=>{r+=e(o)}),r}function Oe(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function qe(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function re(n,t){if(!n)throw new Error(t||"Assertion failed")}class Ii{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,o=u=>{const p=u.toBase58();let w=r.get(p);return w===void 0&&(w={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(p,w)),w},i=o(e);i.isSigner=!0,i.isWritable=!0;for(const u of t){o(u.programId).isInvoked=!0;for(const p of u.keys){const w=o(p.pubkey);w.isSigner||(w.isSigner=p.isSigner),w.isWritable||(w.isWritable=p.isWritable)}}return new Ii(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];re(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,w])=>w.isSigner&&w.isWritable),r=t.filter(([,w])=>w.isSigner&&!w.isWritable),o=t.filter(([,w])=>!w.isSigner&&w.isWritable),i=t.filter(([,w])=>!w.isSigner&&!w.isWritable),u={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{re(e.length>0,"Expected at least one writable signer key");const[w]=e[0];re(w===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const p=[...e.map(([w])=>new mt(w)),...r.map(([w])=>new mt(w)),...o.map(([w])=>new mt(w)),...i.map(([w])=>new mt(w))];return[u,p]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[o,i]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(e.length===0&&o.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:o},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,o=new Array;for(const[i,u]of this.keyMetaMap.entries())if(e(u)){const p=new mt(i),w=t.findIndex(_=>_.equals(p));w>=0&&(re(w<256,"Max lookup table index exceeded"),r.push(w),o.push(p),this.keyMetaMap.delete(i))}return[r,o]}}const za="Reached end of buffer unexpectedly";function cr(n){if(n.length===0)throw new Error(za);return n.shift()}function ze(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(za);return n.splice(...t)}class hr{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new mt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Me.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new fi(this.staticAccountKeys)}static compile(t){const e=Ii.compile(t.instructions,t.payerKey),[r,o]=e.getMessageComponents(),u=new fi(o).compileInstructions(t.instructions).map(p=>({programIdIndex:p.programIdIndex,accounts:p.accountKeyIndexes,data:Me.encode(p.data)}));return new hr({header:r,accountKeys:o,recentBlockhash:t.recentBlockhash,instructions:u})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];qe(e,t);const r=this.instructions.map(E=>{const{accounts:U,programIdIndex:I}=E,R=Array.from(Me.decode(E.data));let B=[];qe(B,U.length);let A=[];return qe(A,R.length),{programIdIndex:I,keyIndicesCount:Et.from(B),keyIndices:U,dataLength:Et.from(A),data:R}});let o=[];qe(o,r.length);let i=Et.alloc(fn);Et.from(o).copy(i);let u=o.length;r.forEach(E=>{const I=ct([Zt("programIdIndex"),ee(E.keyIndicesCount.length,"keyIndicesCount"),Ae(Zt("keyIndex"),E.keyIndices.length,"keyIndices"),ee(E.dataLength.length,"dataLength"),Ae(Zt("userdatum"),E.data.length,"data")]).encode(E,i,u);u+=I}),i=i.slice(0,u);const p=ct([ee(1,"numRequiredSignatures"),ee(1,"numReadonlySignedAccounts"),ee(1,"numReadonlyUnsignedAccounts"),ee(e.length,"keyCount"),Ae(Vt("key"),t,"keys"),Vt("recentBlockhash")]),w={numRequiredSignatures:Et.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Et.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Et.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Et.from(e),keys:this.accountKeys.map(E=>ie(E.toBytes())),recentBlockhash:Me.decode(this.recentBlockhash)};let _=Et.alloc(2048);const x=p.encode(w,_);return i.copy(_,x),_.slice(0,x+i.length)}static from(t){let e=[...t];const r=cr(e);if(r!==(r&Cs))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const o=cr(e),i=cr(e),u=Oe(e);let p=[];for(let U=0;U<u;U++){const I=ze(e,0,xr);p.push(new mt(Et.from(I)))}const w=ze(e,0,xr),_=Oe(e);let x=[];for(let U=0;U<_;U++){const I=cr(e),R=Oe(e),B=ze(e,0,R),A=Oe(e),C=ze(e,0,A),$=Me.encode(Et.from(C));x.push({programIdIndex:I,accounts:B,data:$})}const E={header:{numRequiredSignatures:r,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:i},recentBlockhash:Me.encode(Et.from(w)),accountKeys:p,instructions:x};return new hr(E)}}class Pn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new fi(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const o=t-r,i=this.addressTableLookups.reduce((u,p)=>u+p.writableIndexes.length,0);return o<i}else if(t>=this.header.numRequiredSignatures){const o=t-e,u=r-e-this.header.numReadonlyUnsignedAccounts;return o<u}else{const o=e-this.header.numReadonlySignedAccounts;return t<o}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const o=t.find(i=>i.key.equals(r.accountKey));if(!o)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<o.state.addresses.length)e.writable.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<o.state.addresses.length)e.readonly.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Ii.compile(t.instructions,t.payerKey),r=new Array,o={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const x of i){const E=e.extractTableLookup(x);if(E!==void 0){const[U,{writable:I,readonly:R}]=E;r.push(U),o.writable.push(...I),o.readonly.push(...R)}}const[u,p]=e.getMessageComponents(),_=new fi(p,o).compileInstructions(t.instructions);return new Pn({header:u,staticAccountKeys:p,recentBlockhash:t.recentBlockhash,compiledInstructions:_,addressTableLookups:r})}serialize(){const t=Array();qe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();qe(r,this.compiledInstructions.length);const o=this.serializeAddressTableLookups(),i=Array();qe(i,this.addressTableLookups.length);const u=ct([Zt("prefix"),ct([Zt("numRequiredSignatures"),Zt("numReadonlySignedAccounts"),Zt("numReadonlyUnsignedAccounts")],"header"),ee(t.length,"staticAccountKeysLength"),Ae(Vt(),this.staticAccountKeys.length,"staticAccountKeys"),Vt("recentBlockhash"),ee(r.length,"instructionsLength"),ee(e.length,"serializedInstructions"),ee(i.length,"addressTableLookupsLength"),ee(o.length,"serializedAddressTableLookups")]),p=new Uint8Array(fn),_=u.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(x=>x.toBytes()),recentBlockhash:Me.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:o},p);return p.slice(0,_)}serializeInstructions(){let t=0;const e=new Uint8Array(fn);for(const r of this.compiledInstructions){const o=Array();qe(o,r.accountKeyIndexes.length);const i=Array();qe(i,r.data.length);const u=ct([Zt("programIdIndex"),ee(o.length,"encodedAccountKeyIndexesLength"),Ae(Zt(),r.accountKeyIndexes.length,"accountKeyIndexes"),ee(i.length,"encodedDataLength"),ee(r.data.length,"data")]);t+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(fn);for(const r of this.addressTableLookups){const o=Array();qe(o,r.writableIndexes.length);const i=Array();qe(i,r.readonlyIndexes.length);const u=ct([Vt("accountKey"),ee(o.length,"encodedWritableIndexesLength"),Ae(Zt(),r.writableIndexes.length,"writableIndexes"),ee(i.length,"encodedReadonlyIndexesLength"),Ae(Zt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=cr(e),o=r&Cs;re(r!==o,"Expected versioned message but received legacy message");const i=o;re(i===0,`Expected versioned message with version 0 but found version ${i}`);const u={numRequiredSignatures:cr(e),numReadonlySignedAccounts:cr(e),numReadonlyUnsignedAccounts:cr(e)},p=[],w=Oe(e);for(let R=0;R<w;R++)p.push(new mt(ze(e,0,xr)));const _=Me.encode(ze(e,0,xr)),x=Oe(e),E=[];for(let R=0;R<x;R++){const B=cr(e),A=Oe(e),C=ze(e,0,A),$=Oe(e),O=new Uint8Array(ze(e,0,$));E.push({programIdIndex:B,accountKeyIndexes:C,data:O})}const U=Oe(e),I=[];for(let R=0;R<U;R++){const B=new mt(ze(e,0,xr)),A=Oe(e),C=ze(e,0,A),$=Oe(e),O=ze(e,0,$);I.push({accountKey:B,writableIndexes:C,readonlyIndexes:O})}return new Pn({header:u,staticAccountKeys:p,recentBlockhash:_,compiledInstructions:E,addressTableLookups:I})}}const Da={deserializeMessageVersion(n){const t=n[0],e=t&Cs;return e===t?"legacy":e},deserialize:n=>{const t=Da.deserializeMessageVersion(n);if(t==="legacy")return hr.from(n);if(t===0)return Pn.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let mr=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const cl=Et.alloc(hi).fill(0);class Pe{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Et.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class pe{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Pe(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let B=0;B<e.length;B++)if(e[B].programId===void 0)throw new Error(`Transaction instruction index ${B} has undefined program id`);const o=[],i=[];e.forEach(B=>{B.keys.forEach(C=>{i.push({...C})});const A=B.programId.toString();o.includes(A)||o.push(A)}),o.forEach(B=>{i.push({pubkey:new mt(B),isSigner:!1,isWritable:!1})});const u=[];i.forEach(B=>{const A=B.pubkey.toString(),C=u.findIndex($=>$.pubkey.toString()===A);C>-1?(u[C].isWritable=u[C].isWritable||B.isWritable,u[C].isSigner=u[C].isSigner||B.isSigner):u.push(B)}),u.sort(function(B,A){if(B.isSigner!==A.isSigner)return B.isSigner?-1:1;if(B.isWritable!==A.isWritable)return B.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return B.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",C)});const p=u.findIndex(B=>B.pubkey.equals(r));if(p>-1){const[B]=u.splice(p,1);B.isSigner=!0,B.isWritable=!0,u.unshift(B)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const B of this.signatures){const A=u.findIndex(C=>C.pubkey.equals(B.publicKey));if(A>-1)u[A].isSigner||(u[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${B.publicKey.toString()}`)}let w=0,_=0,x=0;const E=[],U=[];u.forEach(({pubkey:B,isSigner:A,isWritable:C})=>{A?(E.push(B.toString()),w+=1,C||(_+=1)):(U.push(B.toString()),C||(x+=1))});const I=E.concat(U),R=e.map(B=>{const{data:A,programId:C}=B;return{programIdIndex:I.indexOf(C.toString()),accounts:B.keys.map($=>I.indexOf($.pubkey.toString())),data:Me.encode(A)}});return R.forEach(B=>{re(B.programIdIndex>=0),B.accounts.forEach(A=>re(A>=0))}),new hr({header:{numRequiredSignatures:w,numReadonlySignedAccounts:_,numReadonlyUnsignedAccounts:x},accountKeys:I,recentBlockhash:t,instructions:R})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((o,i)=>e[i].equals(o.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const o=r.toString();return e.has(o)?!1:(e.add(o),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const o=this._compile();this._partialSign(o,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}const o=this._compile();this._partialSign(o,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(o=>{const i=Ua(r,o.secretKey);this._addSignature(o.publicKey,ie(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){re(e.length===64);const r=this.signatures.findIndex(o=>t.equals(o.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=Et.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:o,publicKey:i}of this.signatures)o===null?e&&(r.missing||(r.missing=[])).push(i):Qf(o,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),o=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(o,e);if(i){let u="Signature verification failed.";throw i.invalid&&(u+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(p=>p.toBase58()).join("`, `")}\`].`),i.missing&&(u+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(p=>p.toBase58()).join("`, `")}\`].`),new Error(u)}}return this._serialize(o)}_serialize(t){const{signatures:e}=this,r=[];qe(r,e.length);const o=r.length+e.length*64+t.length,i=Et.alloc(o);return re(e.length<256),Et.from(r).copy(i,0),e.forEach(({signature:u},p)=>{u!==null&&(re(u.length===64,"signature has invalid length"),Et.from(u).copy(i,r.length+p*64))}),t.copy(i,r.length+e.length*64),re(i.length<=fn,`Transaction too large: ${i.length} > ${fn}`),i}get keys(){return re(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return re(this.instructions.length===1),this.instructions[0].programId}get data(){return re(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Oe(e);let o=[];for(let i=0;i<r;i++){const u=ze(e,0,hi);o.push(Me.encode(Et.from(u)))}return pe.populate(hr.from(e),o)}static populate(t,e=[]){const r=new pe;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((o,i)=>{const u={signature:o==Me.encode(cl)?null:Me.decode(o),publicKey:t.accountKeys[i]};r.signatures.push(u)}),t.instructions.forEach(o=>{const i=o.accounts.map(u=>{const p=t.accountKeys[u];return{pubkey:p,isSigner:r.signatures.some(w=>w.publicKey.toString()===p.toString())||t.isAccountSigner(u),isWritable:t.isAccountWritable(u)}});r.instructions.push(new Pe({keys:i,programId:t.accountKeys[o.programIdIndex],data:Me.decode(o.data)}))}),r._message=t,r._json=r.toJSON(),r}}class $a{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)re(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let o=0;o<t.header.numRequiredSignatures;o++)r.push(new Uint8Array(hi));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();qe(e,this.signatures.length);const r=ct([ee(e.length,"encodedSignaturesLength"),Ae(nl(),this.signatures.length,"signatures"),ee(t.length,"serializedMessage")]),o=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},o);return o.slice(0,i)}static deserialize(t){let e=[...t];const r=[],o=Oe(e);for(let u=0;u<o;u++)r.push(new Uint8Array(ze(e,0,hi)));const i=Da.deserialize(new Uint8Array(e));return new $a(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const o of t){const i=r.findIndex(u=>u.equals(o.publicKey));re(i>=0,`Cannot sign with non signer key ${o.publicKey.toBase58()}`),this.signatures[i]=Ua(e,o.secretKey)}}addSignature(t,e){re(e.byteLength===64,"Signature must be 64 bytes long");const o=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));re(o>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[o]=e}}const ul=160,hl=64,fl=ul/hl,ll=1e3/fl,on=new mt("SysvarC1ock11111111111111111111111111111111");new mt("SysvarEpochSchedu1e111111111111111111111111");new mt("Sysvar1nstructions1111111111111111111111111");const Wi=new mt("SysvarRecentB1ockHashes11111111111111111111"),ss=new mt("SysvarRent111111111111111111111111111111111");new mt("SysvarRewards111111111111111111111111111111");new mt("SysvarS1otHashes111111111111111111111111111");new mt("SysvarS1otHistory11111111111111111111111111");const Hi=new mt("SysvarStakeHistory1111111111111111111111111");class io extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:o}){const i=o?`Logs: 
${JSON.stringify(o.slice(-10),null,2)}. `:"",u="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let p;switch(t){case"send":p=`Transaction ${e} resulted in an error. 
${r}. `+i+u;break;case"simulate":p=`Simulation failed. 
Message: ${r}. 
`+i+u;break;default:p=`Unknown action '${(w=>w)(t)}'`}super(p),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=o||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(o=>{if(o&&o.meta&&o.meta.logMessages){const i=o.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class ut extends Error{constructor({code:t,message:e,data:r},o){super(o!=null?`${o}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function cn(n){return new Promise(t=>setTimeout(t,n))}function fe(n,t){const e=n.layout.span>=0?n.layout.span:qa(n,t),r=Et.alloc(e),o=Object.assign({instruction:n.index},t);return n.layout.encode(o,r),r}const dl=xe("lamportsPerSignature"),Fa=ct([ft("version"),ft("state"),Vt("authorizedPubkey"),Vt("nonce"),ct([dl],"feeCalculator")]),so=Fa.span;class Us{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Fa.decode(ie(t),0);return new Us({authorizedPubkey:new mt(e.authorizedPubkey),nonce:new mt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const pl=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},gl=n=>t=>{const e=ee(n,t),{encode:r,decode:o}=pl(e),i=e;return i.decode=(u,p)=>{const w=o(u,p);return Eh(Et.from(w))},i.encode=(u,p,w)=>{const _=Ih(u,n);return r(_,p,w)},i},mn=gl(8),$e=Object.freeze({Create:{index:0,layout:ct([ft("instruction"),Ne("lamports"),Ne("space"),Vt("programId")])},Assign:{index:1,layout:ct([ft("instruction"),Vt("programId")])},Transfer:{index:2,layout:ct([ft("instruction"),mn("lamports")])},CreateWithSeed:{index:3,layout:ct([ft("instruction"),Vt("base"),un("seed"),Ne("lamports"),Ne("space"),Vt("programId")])},AdvanceNonceAccount:{index:4,layout:ct([ft("instruction")])},WithdrawNonceAccount:{index:5,layout:ct([ft("instruction"),Ne("lamports")])},InitializeNonceAccount:{index:6,layout:ct([ft("instruction"),Vt("authorized")])},AuthorizeNonceAccount:{index:7,layout:ct([ft("instruction"),Vt("authorized")])},Allocate:{index:8,layout:ct([ft("instruction"),Ne("space")])},AllocateWithSeed:{index:9,layout:ct([ft("instruction"),Vt("base"),un("seed"),Ne("space"),Vt("programId")])},AssignWithSeed:{index:10,layout:ct([ft("instruction"),Vt("base"),un("seed"),Vt("programId")])},TransferWithSeed:{index:11,layout:ct([ft("instruction"),mn("lamports"),un("seed"),Vt("programId")])},UpgradeNonceAccount:{index:12,layout:ct([ft("instruction")])}});class ur{constructor(){}static createAccount(t){const e=$e.Create,r=fe(e,{lamports:t.lamports,space:t.space,programId:ie(t.programId.toBuffer())});return new Pe({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const o=$e.TransferWithSeed;e=fe(o,{lamports:BigInt(t.lamports),seed:t.seed,programId:ie(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const o=$e.Transfer;e=fe(o,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Pe({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const o=$e.AssignWithSeed;e=fe(o,{base:ie(t.basePubkey.toBuffer()),seed:t.seed,programId:ie(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=$e.Assign;e=fe(o,{programId:ie(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Pe({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=$e.CreateWithSeed,r=fe(e,{base:ie(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:ie(t.programId.toBuffer())});let o=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||o.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Pe({keys:o,programId:this.programId,data:r})}static createNonceAccount(t){const e=new pe;"basePubkey"in t&&"seed"in t?e.add(ur.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:so,programId:this.programId})):e.add(ur.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:so,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=$e.InitializeNonceAccount,r=fe(e,{authorized:ie(t.authorizedPubkey.toBuffer())}),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Wi,isSigner:!1,isWritable:!1},{pubkey:ss,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Pe(o)}static nonceAdvance(t){const e=$e.AdvanceNonceAccount,r=fe(e),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Wi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Pe(o)}static nonceWithdraw(t){const e=$e.WithdrawNonceAccount,r=fe(e,{lamports:t.lamports});return new Pe({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Wi,isSigner:!1,isWritable:!1},{pubkey:ss,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=$e.AuthorizeNonceAccount,r=fe(e,{authorized:ie(t.newAuthorizedPubkey.toBuffer())});return new Pe({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const o=$e.AllocateWithSeed;e=fe(o,{base:ie(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:ie(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=$e.Allocate;e=fe(o,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Pe({keys:r,programId:this.programId,data:e})}}ur.programId=new mt("11111111111111111111111111111111");new mt("BPFLoader2111111111111111111111111111111111");function ml(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vi,oo;function yl(){if(oo)return Vi;oo=1;var n=Object.prototype.toString,t=Object.keys||function(r){var o=[];for(var i in r)o.push(i);return o};function e(r,o){var i,u,p,w,_,x,E;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),o);if(E=n.call(r),E==="[object Array]"){for(p="[",u=r.length-1,i=0;i<u;i++)p+=e(r[i],!0)+",";return u>-1&&(p+=e(r[i],!0)),p+"]"}else if(E==="[object Object]"){for(w=t(r).sort(),u=w.length,p="",i=0;i<u;)_=w[i],x=e(r[_],!1),x!==void 0&&(p&&(p+=","),p+=JSON.stringify(_)+":"+x),i++;return"{"+p+"}"}else return JSON.stringify(r);case"function":case"undefined":return o?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Vi=function(r){var o=e(r,!1);if(o!==void 0)return""+o},Vi}var wl=yl(),ao=ml(wl);const Rn=32;function Gi(n){let t=0;for(;n>1;)n/=2,t++;return t}function bl(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class vl{constructor(t,e,r,o,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=o,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Gi(bl(t+Rn+1))-Gi(Rn)-1,r=this.getSlotsInEpoch(e),o=t-(r-Rn);return[e,o]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),o=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[o,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Rn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Gi(Rn)):this.slotsPerEpoch}}var xl=globalThis.fetch;class Sl extends mf{constructor(t,e,r){const o=i=>{const u=pf(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in u?this.underlyingSocket=u.socket:this.underlyingSocket=u,u};super(o,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Ml(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const co=56;class uo{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Ml(_l,t),r=t.length-co;re(r>=0,"lookup table is invalid"),re(r%32===0,"lookup table is invalid");const o=r/32,{addresses:i}=ct([Ae(Vt(),o,"addresses")]).decode(t.slice(co));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new mt(e.authority[0]):void 0,addresses:i.map(u=>new mt(u))}}}const _l={index:1,layout:ct([ft("typeIndex"),mn("deactivationSlot"),xe("lastExtendedSlot"),Zt("lastExtendedStartIndex"),Zt(),Ae(Vt(),Zr(Zt(),-1),"authority")])},kl=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function El(n){const t=n.match(kl);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,o,i]=t,u=n.startsWith("https:")?"wss:":"ws:",p=o==null?null:parseInt(o.slice(1),10),w=p==null?"":`:${p+1}`;return`${u}//${r}${w}${i}`}const ae=$n(Is(mt),Z(),n=>new mt(n)),Ka=Rs([Z(),se("base64")]),Ps=$n(Is(Et),Ka,n=>Et.from(n[0],"base64")),Bl=30*1e3;function Al(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function te(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...o}=n;t=r,e=o}return{commitment:t,config:e}}function ho(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Wa(n){return Te([H({jsonrpc:se("2.0"),id:Z(),result:n}),H({jsonrpc:se("2.0"),id:Z(),error:H({code:vn(),message:Z(),data:dt(Oh())})})])}const Il=Wa(vn());function Kt(n){return $n(Wa(n),Il,t=>"error"in t?t:{...t,result:X(t.result,n)})}function he(n){return Kt(H({context:H({slot:P()}),value:n}))}function Ri(n){return H({context:H({slot:P()}),value:n})}function Zi(n,t){return n===0?new Pn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new mt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Me.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new hr(t)}const Rl=H({foundation:P(),foundationTerm:P(),initial:P(),taper:P(),terminal:P()}),Ll=Kt(Q(tt(H({epoch:P(),effectiveSlot:P(),amount:P(),postBalance:P(),commission:dt(tt(P()))})))),Tl=Q(H({slot:P(),prioritizationFee:P()})),Cl=H({total:P(),validator:P(),foundation:P(),epoch:P()}),Ul=H({epoch:P(),slotIndex:P(),slotsInEpoch:P(),absoluteSlot:P(),blockHeight:dt(P()),transactionCount:dt(P())}),Pl=H({slotsPerEpoch:P(),leaderScheduleSlotOffset:P(),warmup:tr(),firstNormalEpoch:P(),firstNormalSlot:P()}),Nl=la(Z(),Q(P())),rn=tt(Te([H({}),Z()])),Ol=H({err:rn}),ql=se("receivedSignature"),zl=H({"solana-core":Z(),"feature-set":dt(P())}),Dl=H({program:Z(),programId:ae,parsed:vn()}),$l=H({programId:ae,accounts:Q(ae),data:Z()}),fo=he(H({err:tt(Te([H({}),Z()])),logs:tt(Q(Z())),accounts:dt(tt(Q(tt(H({executable:tr(),owner:Z(),lamports:P(),data:Q(Z()),rentEpoch:dt(P())}))))),unitsConsumed:dt(P()),returnData:dt(tt(H({programId:Z(),data:Rs([Z(),se("base64")])}))),innerInstructions:dt(tt(Q(H({index:P(),instructions:Q(Te([Dl,$l]))}))))})),Fl=he(H({byIdentity:la(Z(),Q(P())),range:H({firstSlot:P(),lastSlot:P()})}));function Kl(n,t,e,r,o,i){const u=e||xl;let p;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let w;return r&&(w=async(x,E)=>{const U=await new Promise((I,R)=>{try{r(x,E,(B,A)=>I([B,A]))}catch(B){R(B)}});return await u(...U)}),new ff(async(x,E)=>{const U={method:"POST",body:x,agent:p,headers:Object.assign({"Content-Type":"application/json"},t||{},W0)};try{let I=5,R,B=500;for(;w?R=await w(n,U):R=await u(n,U),!(R.status!==429||o===!0||(I-=1,I===0));)console.error(`Server responded with ${R.status} ${R.statusText}.  Retrying after ${B}ms delay...`),await cn(B),B*=2;const A=await R.text();R.ok?E(null,A):E(new Error(`${R.status} ${R.statusText}: ${A}`))}catch(I){I instanceof Error&&E(I)}},{})}function Wl(n){return(t,e)=>new Promise((r,o)=>{n.request(t,e,(i,u)=>{if(i){o(i);return}r(u)})})}function Hl(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const o=t.map(i=>n.request(i.methodName,i.args));n.request(o,(i,u)=>{if(i){r(i);return}e(u)})})}const Vl=Kt(Rl),Gl=Kt(Cl),Zl=Kt(Tl),jl=Kt(Ul),Yl=Kt(Pl),Xl=Kt(Nl),Jl=Kt(P()),Ql=he(H({total:P(),circulating:P(),nonCirculating:P(),nonCirculatingAccounts:Q(ae)})),os=H({amount:Z(),uiAmount:tt(P()),decimals:P(),uiAmountString:dt(Z())}),t0=he(Q(H({address:ae,amount:Z(),uiAmount:tt(P()),decimals:P(),uiAmountString:dt(Z())}))),e0=he(Q(H({pubkey:ae,account:H({executable:tr(),owner:ae,lamports:P(),data:Ps,rentEpoch:P()})}))),as=H({program:Z(),parsed:vn(),space:P()}),r0=he(Q(H({pubkey:ae,account:H({executable:tr(),owner:ae,lamports:P(),data:as,rentEpoch:P()})}))),n0=he(Q(H({lamports:P(),address:ae}))),Nn=H({executable:tr(),owner:ae,lamports:P(),data:Ps,rentEpoch:P()}),i0=H({pubkey:ae,account:Nn}),s0=$n(Te([Is(Et),as]),Te([Ka,as]),n=>Array.isArray(n)?X(n,Ps):n),cs=H({executable:tr(),owner:ae,lamports:P(),data:s0,rentEpoch:P()}),o0=H({pubkey:ae,account:cs}),a0=H({state:Te([se("active"),se("inactive"),se("activating"),se("deactivating")]),active:P(),inactive:P()}),c0=Kt(Q(H({signature:Z(),slot:P(),err:rn,memo:tt(Z()),blockTime:dt(tt(P()))}))),u0=Kt(Q(H({signature:Z(),slot:P(),err:rn,memo:tt(Z()),blockTime:dt(tt(P()))}))),h0=H({subscription:P(),result:Ri(Nn)}),f0=H({pubkey:ae,account:Nn}),l0=H({subscription:P(),result:Ri(f0)}),d0=H({parent:P(),slot:P(),root:P()}),p0=H({subscription:P(),result:d0}),g0=Te([H({type:Te([se("firstShredReceived"),se("completed"),se("optimisticConfirmation"),se("root")]),slot:P(),timestamp:P()}),H({type:se("createdBank"),parent:P(),slot:P(),timestamp:P()}),H({type:se("frozen"),slot:P(),timestamp:P(),stats:H({numTransactionEntries:P(),numSuccessfulTransactions:P(),numFailedTransactions:P(),maxTransactionsPerEntry:P()})}),H({type:se("dead"),slot:P(),timestamp:P(),err:Z()})]),m0=H({subscription:P(),result:g0}),y0=H({subscription:P(),result:Ri(Te([Ol,ql]))}),w0=H({subscription:P(),result:P()}),b0=H({pubkey:Z(),gossip:tt(Z()),tpu:tt(Z()),rpc:tt(Z()),version:tt(Z())}),lo=H({votePubkey:Z(),nodePubkey:Z(),activatedStake:P(),epochVoteAccount:tr(),epochCredits:Q(Rs([P(),P(),P()])),commission:P(),lastVote:P(),rootSlot:tt(P())}),v0=Kt(H({current:Q(lo),delinquent:Q(lo)})),x0=Te([se("processed"),se("confirmed"),se("finalized")]),S0=H({slot:P(),confirmations:tt(P()),err:rn,confirmationStatus:dt(x0)}),M0=he(Q(tt(S0))),_0=Kt(P()),Ha=H({accountKey:ae,writableIndexes:Q(P()),readonlyIndexes:Q(P())}),Ns=H({signatures:Q(Z()),message:H({accountKeys:Q(Z()),header:H({numRequiredSignatures:P(),numReadonlySignedAccounts:P(),numReadonlyUnsignedAccounts:P()}),instructions:Q(H({accounts:Q(P()),data:Z(),programIdIndex:P()})),recentBlockhash:Z(),addressTableLookups:dt(Q(Ha))})}),Va=H({pubkey:ae,signer:tr(),writable:tr(),source:dt(Te([se("transaction"),se("lookupTable")]))}),Ga=H({accountKeys:Q(Va),signatures:Q(Z())}),Za=H({parsed:vn(),program:Z(),programId:ae}),ja=H({accounts:Q(ae),data:Z(),programId:ae}),k0=Te([ja,Za]),E0=Te([H({parsed:vn(),program:Z(),programId:Z()}),H({accounts:Q(Z()),data:Z(),programId:Z()})]),Ya=$n(k0,E0,n=>"accounts"in n?X(n,ja):X(n,Za)),Xa=H({signatures:Q(Z()),message:H({accountKeys:Q(Va),instructions:Q(Ya),recentBlockhash:Z(),addressTableLookups:dt(tt(Q(Ha)))})}),li=H({accountIndex:P(),mint:Z(),owner:dt(Z()),uiTokenAmount:os}),Ja=H({writable:Q(ae),readonly:Q(ae)}),Li=H({err:rn,fee:P(),innerInstructions:dt(tt(Q(H({index:P(),instructions:Q(H({accounts:Q(P()),data:Z(),programIdIndex:P()}))})))),preBalances:Q(P()),postBalances:Q(P()),logMessages:dt(tt(Q(Z()))),preTokenBalances:dt(tt(Q(li))),postTokenBalances:dt(tt(Q(li))),loadedAddresses:dt(Ja),computeUnitsConsumed:dt(P())}),Os=H({err:rn,fee:P(),innerInstructions:dt(tt(Q(H({index:P(),instructions:Q(Ya)})))),preBalances:Q(P()),postBalances:Q(P()),logMessages:dt(tt(Q(Z()))),preTokenBalances:dt(tt(Q(li))),postTokenBalances:dt(tt(Q(li))),loadedAddresses:dt(Ja),computeUnitsConsumed:dt(P())}),xn=Te([se(0),se("legacy")]),nn=H({pubkey:Z(),lamports:P(),postBalance:tt(P()),rewardType:tt(Z()),commission:dt(tt(P()))}),B0=Kt(tt(H({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:Q(H({transaction:Ns,meta:tt(Li),version:dt(xn)})),rewards:dt(Q(nn)),blockTime:tt(P()),blockHeight:tt(P())}))),A0=Kt(tt(H({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),rewards:dt(Q(nn)),blockTime:tt(P()),blockHeight:tt(P())}))),I0=Kt(tt(H({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:Q(H({transaction:Ga,meta:tt(Li),version:dt(xn)})),rewards:dt(Q(nn)),blockTime:tt(P()),blockHeight:tt(P())}))),R0=Kt(tt(H({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:Q(H({transaction:Xa,meta:tt(Os),version:dt(xn)})),rewards:dt(Q(nn)),blockTime:tt(P()),blockHeight:tt(P())}))),L0=Kt(tt(H({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:Q(H({transaction:Ga,meta:tt(Os),version:dt(xn)})),rewards:dt(Q(nn)),blockTime:tt(P()),blockHeight:tt(P())}))),T0=Kt(tt(H({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),rewards:dt(Q(nn)),blockTime:tt(P()),blockHeight:tt(P())}))),C0=Kt(tt(H({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:Q(H({transaction:Ns,meta:tt(Li)})),rewards:dt(Q(nn)),blockTime:tt(P())}))),po=Kt(tt(H({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),signatures:Q(Z()),blockTime:tt(P())}))),ji=Kt(tt(H({slot:P(),meta:tt(Li),blockTime:dt(tt(P())),transaction:Ns,version:dt(xn)}))),Zn=Kt(tt(H({slot:P(),transaction:Xa,meta:tt(Os),blockTime:dt(tt(P())),version:dt(xn)}))),U0=he(H({blockhash:Z(),feeCalculator:H({lamportsPerSignature:P()})})),P0=he(H({blockhash:Z(),lastValidBlockHeight:P()})),N0=he(tr()),O0=H({slot:P(),numTransactions:P(),numSlots:P(),samplePeriodSecs:P()}),q0=Kt(Q(O0)),z0=he(tt(H({feeCalculator:H({lamportsPerSignature:P()})}))),D0=Kt(Z()),$0=Kt(Z()),F0=H({err:rn,logs:Q(Z()),signature:Z()}),K0=H({result:Ri(F0),subscription:P()}),W0={"solana-client":"js/1.0.0-maintenance"};class ed{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const _={};return async x=>{const{commitment:E,config:U}=te(x),I=this._buildArgs([],E,void 0,U),R=ao(I);return _[R]=_[R]??(async()=>{try{const B=await this._rpcRequest("getBlockHeight",I),A=X(B,Kt(P()));if("error"in A)throw new ut(A.error,"failed to get block height information");return A.result}finally{delete _[R]}})(),await _[R]}})();let r,o,i,u,p,w;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,o=e.httpHeaders,i=e.fetch,u=e.fetchMiddleware,p=e.disableRetryOnRateLimit,w=e.httpAgent),this._rpcEndpoint=Al(t),this._rpcWsEndpoint=r||El(t),this._rpcClient=Kl(t,o,i,u,p,w),this._rpcRequest=Wl(this._rpcClient),this._rpcBatchRequest=Hl(this._rpcClient),this._rpcWebSocket=new Sl(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:o}=te(e),i=this._buildArgs([t.toBase58()],r,void 0,o),u=await this._rpcRequest("getBalance",i),p=X(u,he(P()));if("error"in p)throw new ut(p.error,`failed to get balance for ${t.toBase58()}`);return p.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=X(e,Kt(tt(P())));if("error"in r)throw new ut(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=X(t,Kt(P()));if("error"in e)throw new ut(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=X(t,Jl);if("error"in e)throw new ut(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),o=X(r,Ql);if("error"in o)throw new ut(o.error,"failed to get supply");return o.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenSupply",r),i=X(o,he(os));if("error"in i)throw new ut(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenAccountBalance",r),i=X(o,he(os));if("error"in i)throw new ut(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:o,config:i}=te(r);let u=[t.toBase58()];"mint"in e?u.push({mint:e.mint.toBase58()}):u.push({programId:e.programId.toBase58()});const p=this._buildArgs(u,o,"base64",i),w=await this._rpcRequest("getTokenAccountsByOwner",p),_=X(w,e0);if("error"in _)throw new ut(_.error,`failed to get token accounts owned by account ${t.toBase58()}`);return _.result}async getParsedTokenAccountsByOwner(t,e,r){let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const i=this._buildArgs(o,r,"jsonParsed"),u=await this._rpcRequest("getTokenAccountsByOwner",i),p=X(u,r0);if("error"in p)throw new ut(p.error,`failed to get token accounts owned by account ${t.toBase58()}`);return p.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],o=await this._rpcRequest("getLargestAccounts",r),i=X(o,n0);if("error"in i)throw new ut(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenLargestAccounts",r),i=X(o,t0);if("error"in i)throw new ut(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:o}=te(e),i=this._buildArgs([t.toBase58()],r,"base64",o),u=await this._rpcRequest("getAccountInfo",i),p=X(u,he(tt(Nn)));if("error"in p)throw new ut(p.error,`failed to get info about account ${t.toBase58()}`);return p.result}async getParsedAccountInfo(t,e){const{commitment:r,config:o}=te(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),u=await this._rpcRequest("getAccountInfo",i),p=X(u,he(tt(cs)));if("error"in p)throw new ut(p.error,`failed to get info about account ${t.toBase58()}`);return p.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:o}=te(e),i=t.map(_=>_.toBase58()),u=this._buildArgs([i],r,"jsonParsed",o),p=await this._rpcRequest("getMultipleAccounts",u),w=X(p,he(Q(tt(cs))));if("error"in w)throw new ut(w.error,`failed to get info for accounts ${i}`);return w.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:o}=te(e),i=t.map(_=>_.toBase58()),u=this._buildArgs([i],r,"base64",o),p=await this._rpcRequest("getMultipleAccounts",u),w=X(p,he(Q(tt(Nn))));if("error"in w)throw new ut(w.error,`failed to get info for accounts ${i}`);return w.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:o,config:i}=te(e),u=this._buildArgs([t.toBase58()],o,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),p=await this._rpcRequest("getStakeActivation",u),w=X(p,Kt(a0));if("error"in w)throw new ut(w.error,`failed to get Stake Activation ${t.toBase58()}`);return w.result}async getProgramAccounts(t,e){const{commitment:r,config:o}=te(e),{encoding:i,...u}=o||{},p=this._buildArgs([t.toBase58()],r,i||"base64",{...u,...u.filters?{filters:ho(u.filters)}:null}),w=await this._rpcRequest("getProgramAccounts",p),_=Q(i0),x=u.withContext===!0?X(w,he(_)):X(w,Kt(_));if("error"in x)throw new ut(x.error,`failed to get accounts owned by program ${t.toBase58()}`);return x.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:o}=te(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),u=await this._rpcRequest("getProgramAccounts",i),p=X(u,Kt(Q(o0)));if("error"in p)throw new ut(p.error,`failed to get accounts owned by program ${t.toBase58()}`);return p.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const u=t;if((i=u.abortSignal)!=null&&i.aborted)return Promise.reject(u.abortSignal.reason);r=u.signature}let o;try{o=Me.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return re(o.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,o,i=!1;const u=new Promise((w,_)=>{try{r=this.onSignature(e,(E,U)=>{r=void 0;const I={context:U,value:E};w({__type:mr.PROCESSED,response:I})},t);const x=new Promise(E=>{r==null?E():o=this._onSubscriptionStateChange(r,U=>{U==="subscribed"&&E()})});(async()=>{if(await x,i)return;const E=await this.getSignatureStatus(e);if(i||E==null)return;const{context:U,value:I}=E;if(I!=null)if(I!=null&&I.err)_(I.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(I.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(I.confirmationStatus==="processed"||I.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,w({__type:mr.PROCESSED,response:{context:U,value:I}})}})()}catch(x){_(x)}});return{abortConfirmation:()=>{o&&(o(),o=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:u}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:o}}){let i=!1;const u=new Promise(E=>{const U=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let I=await U();if(!i){for(;I<=r;)if(await cn(1e3),i||(I=await U(),i))return;E({__type:mr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:p,confirmationPromise:w}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),_=this.getCancellationPromise(e);let x;try{const E=await Promise.race([_,w,u]);if(E.__type===mr.PROCESSED)x=E.response;else throw new Na(o)}finally{i=!0,p()}return x}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:o,nonceValue:i,signature:u}}){let p=!1;const w=new Promise(I=>{let R=i,B=null;const A=async()=>{try{const{context:C,value:$}=await this.getNonceAndContext(o,{commitment:t,minContextSlot:r});return B=C.slot,$==null?void 0:$.nonce}catch{return R}};(async()=>{if(R=await A(),!p)for(;;){if(i!==R){I({__type:mr.NONCE_INVALID,slotInWhichNonceDidAdvance:B});return}if(await cn(2e3),p||(R=await A(),p))return}})()}),{abortConfirmation:_,confirmationPromise:x}=this.getTransactionConfirmationPromise({commitment:t,signature:u}),E=this.getCancellationPromise(e);let U;try{const I=await Promise.race([E,x,w]);if(I.__type===mr.PROCESSED)U=I.response;else{let R;for(;;){const B=await this.getSignatureStatus(u);if(B==null)break;if(B.context.slot<(I.slotInWhichNonceDidAdvance??r)){await cn(400);continue}R=B;break}if(R!=null&&R.value){const B=t||"finalized",{confirmationStatus:A}=R.value;switch(B){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new Ln(u);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new Ln(u);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new Ln(u);break;default:}U={context:R.context,value:{err:R.value.err}}}else throw new Ln(u)}}finally{p=!0,_()}return U}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const o=new Promise(w=>{let _=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{_=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>w({__type:mr.TIMED_OUT,timeoutMs:_}),_)}),{abortConfirmation:i,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let p;try{const w=await Promise.race([u,o]);if(w.__type===mr.PROCESSED)p=w.response;else throw new Oa(e,w.timeoutMs/1e3)}finally{clearTimeout(r),i()}return p}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=X(t,Kt(Q(b0)));if("error"in e)throw new ut(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),o=X(r,v0);if("error"in o)throw new ut(o.error,"failed to get vote accounts");return o.result}async getSlot(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",o),u=X(i,Kt(P()));if("error"in u)throw new ut(u.error,"failed to get slot");return u.result}async getSlotLeader(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",o),u=X(i,Kt(Z()));if("error"in u)throw new ut(u.error,"failed to get slot leader");return u.result}async getSlotLeaders(t,e){const r=[t,e],o=await this._rpcRequest("getSlotLeaders",r),i=X(o,Kt(Q(ae)));if("error"in i)throw new ut(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:o}=await this.getSignatureStatuses([t],e);re(o.length===1);const i=o[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const o=await this._rpcRequest("getSignatureStatuses",r),i=X(o,M0);if("error"in i)throw new ut(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",o),u=X(i,Kt(P()));if("error"in u)throw new ut(u.error,"failed to get transaction count");return u.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),o=X(r,Vl);if("error"in o)throw new ut(o.error,"failed to get inflation");return o.result}async getInflationReward(t,e,r){const{commitment:o,config:i}=te(r),u=this._buildArgs([t.map(_=>_.toBase58())],o,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),p=await this._rpcRequest("getInflationReward",u),w=X(p,Ll);if("error"in w)throw new ut(w.error,"failed to get inflation reward");return w.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=X(t,Gl);if("error"in e)throw new ut(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",o),u=X(i,jl);if("error"in u)throw new ut(u.error,"failed to get epoch info");return u.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=X(t,Yl);if("error"in e)throw new ut(e.error,"failed to get epoch schedule");const r=e.result;return new vl(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=X(t,Xl);if("error"in e)throw new ut(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=X(o,_0);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),o=X(r,U0);if("error"in o)throw new ut(o.error,"failed to get recent blockhash");return o.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=X(e,q0);if("error"in r)throw new ut(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=X(o,z0);if("error"in i)throw new ut(i.error,"failed to get fee calculator");const{context:u,value:p}=i.result;return{context:u,value:p!==null?p.feeCalculator:null}}async getFeeForMessage(t,e){const r=ie(t.serialize()).toString("base64"),o=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",o),u=X(i,he(tt(P())));if("error"in u)throw new ut(u.error,"failed to get fee for message");if(u.result===null)throw new Error("invalid blockhash");return u.result}async getRecentPrioritizationFees(t){var u;const e=(u=t==null?void 0:t.lockedWritableAccounts)==null?void 0:u.map(p=>p.toBase58()),r=e!=null&&e.length?[e]:[],o=await this._rpcRequest("getRecentPrioritizationFees",r),i=X(o,Zl);if("error"in i)throw new ut(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",o),u=X(i,P0);if("error"in u)throw new ut(u.error,"failed to get latest blockhash");return u.result}async isBlockhashValid(t,e){const{commitment:r,config:o}=te(e),i=this._buildArgs([t],r,void 0,o),u=await this._rpcRequest("isBlockhashValid",i),p=X(u,N0);if("error"in p)throw new ut(p.error,"failed to determine if the blockhash `"+t+"`is valid");return p.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=X(t,Kt(zl));if("error"in e)throw new ut(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=X(t,Kt(Z()));if("error"in e)throw new ut(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:o}=te(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),u=await this._rpcRequest("getBlock",i);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const p=X(u,I0);if("error"in p)throw p.error;return p.result}case"none":{const p=X(u,A0);if("error"in p)throw p.error;return p.result}default:{const p=X(u,B0);if("error"in p)throw p.error;const{result:w}=p;return w?{...w,transactions:w.transactions.map(({transaction:_,meta:x,version:E})=>({meta:x,transaction:{..._,message:Zi(E,_.message)},version:E}))}:null}}}catch(p){throw new ut(p,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:o}=te(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),u=await this._rpcRequest("getBlock",i);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const p=X(u,L0);if("error"in p)throw p.error;return p.result}case"none":{const p=X(u,T0);if("error"in p)throw p.error;return p.result}default:{const p=X(u,R0);if("error"in p)throw p.error;return p.result}}}catch(p){throw new ut(p,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:p,...w}=t;r=p,e=w}const o=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",o),u=X(i,Fl);if("error"in u)throw new ut(u.error,"failed to get block production information");return u.result}async getTransaction(t,e){const{commitment:r,config:o}=te(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),u=await this._rpcRequest("getTransaction",i),p=X(u,ji);if("error"in p)throw new ut(p.error,"failed to get transaction");const w=p.result;return w&&{...w,transaction:{...w.transaction,message:Zi(w.version,w.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:o}=te(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),u=await this._rpcRequest("getTransaction",i),p=X(u,Zn);if("error"in p)throw new ut(p.error,"failed to get transaction");return p.result}async getParsedTransactions(t,e){const{commitment:r,config:o}=te(e),i=t.map(w=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([w],r,"jsonParsed",o)}));return(await this._rpcBatchRequest(i)).map(w=>{const _=X(w,Zn);if("error"in _)throw new ut(_.error,"failed to get transactions");return _.result})}async getTransactions(t,e){const{commitment:r,config:o}=te(e),i=t.map(w=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([w],r,void 0,o)}));return(await this._rpcBatchRequest(i)).map(w=>{const _=X(w,ji);if("error"in _)throw new ut(_.error,"failed to get transactions");const x=_.result;return x&&{...x,transaction:{...x.transaction,message:Zi(x.version,x.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedBlock",r),i=X(o,C0);if("error"in i)throw new ut(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");const p={...u,transactions:u.transactions.map(({transaction:w,meta:_})=>{const x=new hr(w.message);return{meta:_,transaction:{...w,message:x}}})};return{...p,transactions:p.transactions.map(({transaction:w,meta:_})=>({meta:_,transaction:pe.populate(w.message,w.signatures)}))}}async getBlocks(t,e,r){const o=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",o),u=X(i,Kt(Q(P())));if("error"in u)throw new ut(u.error,"failed to get blocks");return u.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",r),i=X(o,po);if("error"in i)throw new ut(i.error,"failed to get block");const u=i.result;if(!u)throw new Error("Block "+t+" not found");return u}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getConfirmedBlock",r),i=X(o,po);if("error"in i)throw new ut(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");return u}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedTransaction",r),i=X(o,ji);if("error"in i)throw new ut(i.error,"failed to get transaction");const u=i.result;if(!u)return u;const p=new hr(u.transaction.message),w=u.transaction.signatures;return{...u,transaction:pe.populate(p,w)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),o=await this._rpcRequest("getConfirmedTransaction",r),i=X(o,Zn);if("error"in i)throw new ut(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(u=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([u],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(u=>{const p=X(u,Zn);if("error"in p)throw new ut(p.error,"failed to get confirmed transactions");return p.result})}async getConfirmedSignaturesForAddress(t,e,r){let o={},i=await this.getFirstAvailableBlock();for(;!("until"in o)&&(e--,!(e<=0||e<i));)try{const w=await this.getConfirmedBlockSignatures(e,"finalized");w.signatures.length>0&&(o.until=w.signatures[w.signatures.length-1].toString())}catch(w){if(w instanceof Error&&w.message.includes("skipped"))continue;throw w}let u=await this.getSlot("finalized");for(;!("before"in o)&&(r++,!(r>u));)try{const w=await this.getConfirmedBlockSignatures(r);w.signatures.length>0&&(o.before=w.signatures[w.signatures.length-1].toString())}catch(w){if(w instanceof Error&&w.message.includes("skipped"))continue;throw w}return(await this.getConfirmedSignaturesForAddress2(t,o)).map(w=>w.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",o),u=X(i,c0);if("error"in u)throw new ut(u.error,"failed to get confirmed signatures for address");return u.result}async getSignaturesForAddress(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",o),u=X(i,u0);if("error"in u)throw new ut(u.error,"failed to get signatures for address");return u.result}async getAddressLookupTable(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=new uo({key:t,state:uo.deserialize(o.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=Us.fromAccountData(o.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),o=X(r,D0);if("error"in o)throw new ut(o.error,`airdrop to ${t.toBase58()} failed`);return o.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await cn(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Bl;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let o=0;o<50;o++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await cn(ll/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",o),u=X(i,he(P()));if("error"in u)throw new ut(u.error,"failed to get stake minimum delegation");return u.result}async simulateTransaction(t,e,r){if("message"in t){const B=t.serialize(),A=Et.from(B).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const C=e||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(C.innerInstructions=e.innerInstructions);const $=[A,C],O=await this._rpcRequest("simulateTransaction",$),V=X(O,fo);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let o;if(t instanceof pe){let R=t;o=new pe,o.feePayer=R.feePayer,o.instructions=t.instructions,o.nonceInfo=R.nonceInfo,o.signatures=R.signatures}else o=pe.populate(t),o._message=o._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(o.nonceInfo&&i)o.sign(...i);else{let R=this._disableBlockhashCaching;for(;;){const B=await this._blockhashWithExpiryBlockHeight(R);if(o.lastValidBlockHeight=B.lastValidBlockHeight,o.recentBlockhash=B.blockhash,!i)break;if(o.sign(...i),!o.signature)throw new Error("!signature");const A=o.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else R=!0}}const u=o._compile(),p=u.serialize(),_=o._serialize(p).toString("base64"),x={encoding:"base64",commitment:this.commitment};if(r){const R=(Array.isArray(r)?r:u.nonProgramIds()).map(B=>B.toBase58());x.accounts={encoding:"base64",addresses:R}}i&&(x.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(x.innerInstructions=e.innerInstructions);const E=[_,x],U=await this._rpcRequest("simulateTransaction",E),I=X(U,fo);if("error"in I){let R;if("data"in I.error&&(R=I.error.data.logs,R&&Array.isArray(R))){const B=`
    `,A=B+R.join(B);console.error(I.error.message,A)}throw new io({action:"simulate",signature:"",transactionMessage:I.error.message,logs:R})}return I.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const u=t.serialize();return await this.sendRawTransaction(u,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const o=e;if(t.nonceInfo)t.sign(...o);else{let u=this._disableBlockhashCaching;for(;;){const p=await this._blockhashWithExpiryBlockHeight(u);if(t.lastValidBlockHeight=p.lastValidBlockHeight,t.recentBlockhash=p.blockhash,t.sign(...o),!t.signature)throw new Error("!signature");const w=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(w))u=!0;else{this._blockhashInfo.transactionSignatures.push(w);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=ie(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},o=e&&e.skipPreflight,i=o===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),o&&(r.skipPreflight=o),i&&(r.preflightCommitment=i);const u=[t,r],p=await this._rpcRequest("sendTransaction",u),w=X(p,$0);if("error"in w){let _;throw"data"in w.error&&(_=w.error.data.logs),new io({action:o?"send":"simulate",signature:"",transactionMessage:w.error.message,logs:_})}return w.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var o;const r=(o=this._subscriptionsByHash[t])==null?void 0:o.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(u=>{try{u(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const o=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return o.add(e),()=>{o.delete(e),o.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const o=this._subscriptionsByHash[r];if(o!==void 0)switch(o.state){case"pending":case"unsubscribed":if(o.callbacks.size===0){delete this._subscriptionsByHash[r],o.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[o.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:u}=o;try{this._setSubscription(r,{...o,state:"subscribing"});const p=await this._rpcWebSocket.call(u,i);this._setSubscription(r,{...o,serverSubscriptionId:p,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[p]=o.callbacks,await this._updateSubscriptions()}catch(p){if(console.error(`Received ${p instanceof Error?"":"JSON-RPC "}error calling \`${u}\``,{args:i,error:p}),!e())return;this._setSubscription(r,{...o,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":o.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:u}=o;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...o,state:"unsubscribing"}),this._setSubscription(r,{...o,state:"unsubscribing"});try{await this._rpcWebSocket.call(u,[i])}catch(p){if(p instanceof Error&&console.error(`${u} error:`,p.message),!e())return;this._setSubscription(r,{...o,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...o,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(o=>{try{o(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=X(t,h0);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,o=ao([t.method,e]),i=this._subscriptionsByHash[o];return i===void 0?this._subscriptionsByHash[o]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=o,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const u=this._subscriptionsByHash[o];re(u!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),u.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:o,config:i}=te(r),u=this._buildArgs([t.toBase58()],o||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},u)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=X(t,l0);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,o){const{commitment:i,config:u}=te(r),p=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",u||(o?{filters:ho(o)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},p)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const o=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},o)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=X(t,K0);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=X(t,p0);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=X(t,m0);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,o){const i=e||this._commitment;if(i||r||o){let u={};r&&(u.encoding=r),i&&(u.commitment=i),o&&(u=Object.assign(u,o)),t.push(u)}return t}_buildArgsAtLeastConfirmed(t,e,r,o){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,o)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=X(t,y0);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const o=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(u,p)=>{if(u.type==="status"){e(u.result,p);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return i}onSignatureWithOptions(t,e,r){const{commitment:o,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},u=this._buildArgs([t],o,void 0,i),p=this._makeSubscription({callback:(w,_)=>{e(w,_);try{this.removeSignatureListener(p)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return p}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=X(t,w0);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Xn{constructor(t){this._keypair=void 0,this._keypair=t??eo()}static generate(){return new Xn(eo())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const o=t.slice(0,32),i=is(o);for(let u=0;u<32;u++)if(r[u]!==i[u])throw new Error("provided secretKey is invalid")}return new Xn({publicKey:r,secretKey:t})}static fromSeed(t){const e=is(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Xn({publicKey:e,secretKey:r})}get publicKey(){return new mt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ct([ft("instruction"),mn("recentSlot"),Zt("bumpSeed")])},FreezeLookupTable:{index:1,layout:ct([ft("instruction")])},ExtendLookupTable:{index:2,layout:ct([ft("instruction"),mn(),Ae(Vt(),Zr(ft(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ct([ft("instruction")])},CloseLookupTable:{index:4,layout:ct([ft("instruction")])}});new mt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ct([Zt("instruction"),ft("units"),ft("additionalFee")])},RequestHeapFrame:{index:1,layout:ct([Zt("instruction"),ft("bytes")])},SetComputeUnitLimit:{index:2,layout:ct([Zt("instruction"),ft("units")])},SetComputeUnitPrice:{index:3,layout:ct([Zt("instruction"),mn("microLamports")])}});new mt("ComputeBudget111111111111111111111111111111");ct([Zt("numSignatures"),Zt("padding"),Ke("signatureOffset"),Ke("signatureInstructionIndex"),Ke("publicKeyOffset"),Ke("publicKeyInstructionIndex"),Ke("messageDataOffset"),Ke("messageDataSize"),Ke("messageInstructionIndex")]);new mt("Ed25519SigVerify111111111111111111111111111");en.utils.isValidPrivateKey;en.getPublicKey;ct([Zt("numSignatures"),Ke("signatureOffset"),Zt("signatureInstructionIndex"),Ke("ethAddressOffset"),Zt("ethAddressInstructionIndex"),Ke("messageDataOffset"),Ke("messageDataSize"),Zt("messageInstructionIndex"),ee(20,"ethAddress"),ee(64,"signature"),Zt("recoveryId")]);new mt("KeccakSecp256k11111111111111111111111111111");var Qa;const H0=new mt("StakeConfig11111111111111111111111111111111");class qs{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Qa=qs;qs.default=new Qa(0,0,mt.default);const yr=Object.freeze({Initialize:{index:0,layout:ct([ft("instruction"),il(),sl()])},Authorize:{index:1,layout:ct([ft("instruction"),Vt("newAuthorized"),ft("stakeAuthorizationType")])},Delegate:{index:2,layout:ct([ft("instruction")])},Split:{index:3,layout:ct([ft("instruction"),Ne("lamports")])},Withdraw:{index:4,layout:ct([ft("instruction"),Ne("lamports")])},Deactivate:{index:5,layout:ct([ft("instruction")])},Merge:{index:7,layout:ct([ft("instruction")])},AuthorizeWithSeed:{index:8,layout:ct([ft("instruction"),Vt("newAuthorized"),ft("stakeAuthorizationType"),un("authoritySeed"),Vt("authorityOwner")])}});class tc{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:o}=t,i=o||qs.default,u=yr.Initialize,p=fe(u,{authorized:{staker:ie(r.staker.toBuffer()),withdrawer:ie(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:ie(i.custodian.toBuffer())}}),w={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ss,isSigner:!1,isWritable:!1}],programId:this.programId,data:p};return new Pe(w)}static createAccountWithSeed(t){const e=new pe;e.add(ur.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:i}))}static createAccount(t){const e=new pe;e.add(ur.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:o}=t,i=yr.Delegate,u=fe(i);return new pe().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:on,isSigner:!1,isWritable:!1},{pubkey:Hi,isSigner:!1,isWritable:!1},{pubkey:H0,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:o,stakeAuthorizationType:i,custodianPubkey:u}=t,p=yr.Authorize,w=fe(p,{newAuthorized:ie(o.toBuffer()),stakeAuthorizationType:i.index}),_=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:on,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&_.push({pubkey:u,isSigner:!0,isWritable:!1}),new pe().add({keys:_,programId:this.programId,data:w})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:o,authorityOwner:i,newAuthorizedPubkey:u,stakeAuthorizationType:p,custodianPubkey:w}=t,_=yr.AuthorizeWithSeed,x=fe(_,{newAuthorized:ie(u.toBuffer()),stakeAuthorizationType:p.index,authoritySeed:o,authorityOwner:ie(i.toBuffer())}),E=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:on,isSigner:!1,isWritable:!1}];return w&&E.push({pubkey:w,isSigner:!0,isWritable:!1}),new pe().add({keys:E,programId:this.programId,data:x})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:o,lamports:i}=t,u=yr.Split,p=fe(u,{lamports:i});return new Pe({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:p})}static split(t,e){const r=new pe;return r.add(ur.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:o,splitStakePubkey:i,basePubkey:u,seed:p,lamports:w}=t,_=new pe;return _.add(ur.allocate({accountPubkey:i,basePubkey:u,seed:p,space:this.space,programId:this.programId})),e&&e>0&&_.add(ur.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),_.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:o,splitStakePubkey:i,lamports:w}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:o}=t,i=yr.Merge,u=fe(i);return new pe().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:on,isSigner:!1,isWritable:!1},{pubkey:Hi,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:o,lamports:i,custodianPubkey:u}=t,p=yr.Withdraw,w=fe(p,{lamports:i}),_=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:on,isSigner:!1,isWritable:!1},{pubkey:Hi,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&_.push({pubkey:u,isSigner:!0,isWritable:!1}),new pe().add({keys:_,programId:this.programId,data:w})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,o=yr.Deactivate,i=fe(o);return new pe().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:on,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}tc.programId=new mt("Stake11111111111111111111111111111111111111");tc.space=200;Object.freeze({InitializeAccount:{index:0,layout:ct([ft("instruction"),ol()])},Authorize:{index:1,layout:ct([ft("instruction"),Vt("newAuthorized"),ft("voteAuthorizationType")])},Withdraw:{index:3,layout:ct([ft("instruction"),Ne("lamports")])},UpdateValidatorIdentity:{index:4,layout:ct([ft("instruction")])},AuthorizeWithSeed:{index:10,layout:ct([ft("instruction"),al()])}});new mt("Vote111111111111111111111111111111111111111");new mt("Va1idator1nfo111111111111111111111111111111");H({name:Z(),website:dt(Z()),details:dt(Z()),iconUrl:dt(Z()),keybaseUsername:dt(Z())});new mt("Vote111111111111111111111111111111111111111");ct([Vt("nodePubkey"),Vt("authorizedWithdrawer"),Zt("commission"),xe(),Ae(ct([xe("slot"),ft("confirmationCount")]),Zr(ft(),-8),"votes"),Zt("rootSlotValid"),xe("rootSlot"),xe(),Ae(ct([xe("epoch"),Vt("authorizedVoter")]),Zr(ft(),-8),"authorizedVoters"),ct([Ae(ct([Vt("authorizedPubkey"),xe("epochOfLastAuthorizedSwitch"),xe("targetEpoch")]),32,"buf"),xe("idx"),Zt("isEmpty")],"priorVoters"),xe(),Ae(ct([xe("epoch"),xe("credits"),xe("prevCredits")]),Zr(ft(),-8),"epochCredits"),ct([xe("slot"),xe("timestamp")],"lastTimestamp")]);const go={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function rd(n,t){const e="https";if(!n)return go[e].devnet;const r=go[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}const nd=1e9;export{de as B,ed as C,Xn as K,nd as L,mt as P,hi as S,pe as T,Da as V,$a as a,ct as b,rd as c,Pe as d,ur as e,ft as f,Et as g,on as h,Hi as i,tc as j,ee as k,ss as l,H0 as m,Ne as n,Ih as o,td as p,J0 as q,vi as r,zo as s,Eh as t,Zt as u,j0 as v};
