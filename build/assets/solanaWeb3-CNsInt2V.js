var oa=Object.defineProperty;var aa=(s,t,e)=>t in s?oa(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var me=(s,t,e)=>aa(s,typeof t!="symbol"?t+"":t,e);import{g as Fi,c as Ke,a as Zn}from"./jotai-BQKov7P-.js";var pe={},jn={};jn.byteLength=ha;jn.toByteArray=la;jn.fromByteArray=ga;var je=[],Fe=[],ca=typeof Uint8Array<"u"?Uint8Array:Array,ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Zr=0,ua=ci.length;Zr<ua;++Zr)je[Zr]=ci[Zr],Fe[ci.charCodeAt(Zr)]=Zr;Fe[45]=62;Fe[95]=63;function zs(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=s.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function ha(s){var t=zs(s),e=t[0],r=t[1];return(e+r)*3/4-r}function fa(s,t,e){return(t+e)*3/4-e}function la(s){var t,e=zs(s),r=e[0],o=e[1],n=new ca(fa(s,r,o)),u=0,y=o>0?r-4:r,b;for(b=0;b<y;b+=4)t=Fe[s.charCodeAt(b)]<<18|Fe[s.charCodeAt(b+1)]<<12|Fe[s.charCodeAt(b+2)]<<6|Fe[s.charCodeAt(b+3)],n[u++]=t>>16&255,n[u++]=t>>8&255,n[u++]=t&255;return o===2&&(t=Fe[s.charCodeAt(b)]<<2|Fe[s.charCodeAt(b+1)]>>4,n[u++]=t&255),o===1&&(t=Fe[s.charCodeAt(b)]<<10|Fe[s.charCodeAt(b+1)]<<4|Fe[s.charCodeAt(b+2)]>>2,n[u++]=t>>8&255,n[u++]=t&255),n}function da(s){return je[s>>18&63]+je[s>>12&63]+je[s>>6&63]+je[s&63]}function pa(s,t,e){for(var r,o=[],n=t;n<e;n+=3)r=(s[n]<<16&16711680)+(s[n+1]<<8&65280)+(s[n+2]&255),o.push(da(r));return o.join("")}function ga(s){for(var t,e=s.length,r=e%3,o=[],n=16383,u=0,y=e-r;u<y;u+=n)o.push(pa(s,u,u+n>y?y:u+n));return r===1?(t=s[e-1],o.push(je[t>>2]+je[t<<4&63]+"==")):r===2&&(t=(s[e-2]<<8)+s[e-1],o.push(je[t>>10]+je[t>>4&63]+je[t<<2&63]+"=")),o.join("")}var zi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */zi.read=function(s,t,e,r,o){var n,u,y=o*8-r-1,b=(1<<y)-1,k=b>>1,x=-7,E=e?o-1:0,q=e?-1:1,R=s[t+E];for(E+=q,n=R&(1<<-x)-1,R>>=-x,x+=y;x>0;n=n*256+s[t+E],E+=q,x-=8);for(u=n&(1<<-x)-1,n>>=-x,x+=r;x>0;u=u*256+s[t+E],E+=q,x-=8);if(n===0)n=1-k;else{if(n===b)return u?NaN:(R?-1:1)*(1/0);u=u+Math.pow(2,r),n=n-k}return(R?-1:1)*u*Math.pow(2,n-r)};zi.write=function(s,t,e,r,o,n){var u,y,b,k=n*8-o-1,x=(1<<k)-1,E=x>>1,q=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=r?0:n-1,I=r?1:-1,B=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(y=isNaN(t)?1:0,u=x):(u=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-u))<1&&(u--,b*=2),u+E>=1?t+=q/b:t+=q*Math.pow(2,1-E),t*b>=2&&(u++,b/=2),u+E>=x?(y=0,u=x):u+E>=1?(y=(t*b-1)*Math.pow(2,o),u=u+E):(y=t*Math.pow(2,E-1)*Math.pow(2,o),u=0));o>=8;s[e+R]=y&255,R+=I,y/=256,o-=8);for(u=u<<o|y,k+=o;k>0;s[e+R]=u&255,R+=I,u/=256,k-=8);s[e+R-I]|=B*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(s){const t=jn,e=zi,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=x,s.SlowBuffer=W,s.INSPECT_MAX_BYTES=50;const o=2147483647;s.kMaxLength=o;const{Uint8Array:n,ArrayBuffer:u,SharedArrayBuffer:y}=globalThis;x.TYPED_ARRAY_SUPPORT=b(),!x.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function b(){try{const S=new n(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,n.prototype),Object.setPrototypeOf(S,f),S.foo()===42}catch{return!1}}Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}});function k(S){if(S>o)throw new RangeError('The value "'+S+'" is invalid for option "size"');const f=new n(S);return Object.setPrototypeOf(f,x.prototype),f}function x(S,f,l){if(typeof S=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(S)}return E(S,f,l)}x.poolSize=8192;function E(S,f,l){if(typeof S=="string")return B(S,f);if(u.isView(S))return P(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(he(S,u)||S&&he(S.buffer,u)||typeof y<"u"&&(he(S,y)||S&&he(S.buffer,y)))return $(S,f,l);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=S.valueOf&&S.valueOf();if(_!=null&&_!==S)return x.from(_,f,l);const L=z(S);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return x.from(S[Symbol.toPrimitive]("string"),f,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}x.from=function(S,f,l){return E(S,f,l)},Object.setPrototypeOf(x.prototype,n.prototype),Object.setPrototypeOf(x,n);function q(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function R(S,f,l){return q(S),S<=0?k(S):f!==void 0?typeof l=="string"?k(S).fill(f,l):k(S).fill(f):k(S)}x.alloc=function(S,f,l){return R(S,f,l)};function I(S){return q(S),k(S<0?0:V(S)|0)}x.allocUnsafe=function(S){return I(S)},x.allocUnsafeSlow=function(S){return I(S)};function B(S,f){if((typeof f!="string"||f==="")&&(f="utf8"),!x.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const l=K(S,f)|0;let _=k(l);const L=_.write(S,f);return L!==l&&(_=_.slice(0,L)),_}function A(S){const f=S.length<0?0:V(S.length)|0,l=k(f);for(let _=0;_<f;_+=1)l[_]=S[_]&255;return l}function P(S){if(he(S,n)){const f=new n(S);return $(f.buffer,f.byteOffset,f.byteLength)}return A(S)}function $(S,f,l){if(f<0||S.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<f+(l||0))throw new RangeError('"length" is outside of buffer bounds');let _;return f===void 0&&l===void 0?_=new n(S):l===void 0?_=new n(S,f):_=new n(S,f,l),Object.setPrototypeOf(_,x.prototype),_}function z(S){if(x.isBuffer(S)){const f=V(S.length)|0,l=k(f);return l.length===0||S.copy(l,0,0,f),l}if(S.length!==void 0)return typeof S.length!="number"||yt(S.length)?k(0):A(S);if(S.type==="Buffer"&&Array.isArray(S.data))return A(S.data)}function V(S){if(S>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return S|0}function W(S){return+S!=S&&(S=0),x.alloc(+S)}x.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==x.prototype},x.compare=function(f,l){if(he(f,n)&&(f=x.from(f,f.offset,f.byteLength)),he(l,n)&&(l=x.from(l,l.offset,l.byteLength)),!x.isBuffer(f)||!x.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===l)return 0;let _=f.length,L=l.length;for(let T=0,U=Math.min(_,L);T<U;++T)if(f[T]!==l[T]){_=f[T],L=l[T];break}return _<L?-1:L<_?1:0},x.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(f,l){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return x.alloc(0);let _;if(l===void 0)for(l=0,_=0;_<f.length;++_)l+=f[_].length;const L=x.allocUnsafe(l);let T=0;for(_=0;_<f.length;++_){let U=f[_];if(he(U,n))T+U.length>L.length?(x.isBuffer(U)||(U=x.from(U)),U.copy(L,T)):n.prototype.set.call(L,U,T);else if(x.isBuffer(U))U.copy(L,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=U.length}return L};function K(S,f){if(x.isBuffer(S))return S.length;if(u.isView(S)||he(S,u))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const l=S.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&l===0)return 0;let L=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return wt(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return bt(S).length;default:if(L)return _?-1:wt(S).length;f=(""+f).toLowerCase(),L=!0}}x.byteLength=K;function j(S,f,l){let _=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,f>>>=0,l<=f))return"";for(S||(S="utf8");;)switch(S){case"hex":return a(this,f,l);case"utf8":case"utf-8":return g(this,f,l);case"ascii":return M(this,f,l);case"latin1":case"binary":return d(this,f,l);case"base64":return h(this,f,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,f,l);default:if(_)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),_=!0}}x.prototype._isBuffer=!0;function Q(S,f,l){const _=S[f];S[f]=S[l],S[l]=_}x.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<f;l+=2)Q(this,l,l+1);return this},x.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<f;l+=4)Q(this,l,l+3),Q(this,l+1,l+2);return this},x.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<f;l+=8)Q(this,l,l+7),Q(this,l+1,l+6),Q(this,l+2,l+5),Q(this,l+3,l+4);return this},x.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?g(this,0,f):j.apply(this,arguments)},x.prototype.toLocaleString=x.prototype.toString,x.prototype.equals=function(f){if(!x.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:x.compare(this,f)===0},x.prototype.inspect=function(){let f="";const l=s.INSPECT_MAX_BYTES;return f=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(f+=" ... "),"<Buffer "+f+">"},r&&(x.prototype[r]=x.prototype.inspect),x.prototype.compare=function(f,l,_,L,T){if(he(f,n)&&(f=x.from(f,f.offset,f.byteLength)),!x.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(l===void 0&&(l=0),_===void 0&&(_=f?f.length:0),L===void 0&&(L=0),T===void 0&&(T=this.length),l<0||_>f.length||L<0||T>this.length)throw new RangeError("out of range index");if(L>=T&&l>=_)return 0;if(L>=T)return-1;if(l>=_)return 1;if(l>>>=0,_>>>=0,L>>>=0,T>>>=0,this===f)return 0;let U=T-L,_t=_-l;const ot=Math.min(U,_t),st=this.slice(L,T),Jt=f.slice(l,_);for(let nt=0;nt<ot;++nt)if(st[nt]!==Jt[nt]){U=st[nt],_t=Jt[nt];break}return U<_t?-1:_t<U?1:0};function Gt(S,f,l,_,L){if(S.length===0)return-1;if(typeof l=="string"?(_=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,yt(l)&&(l=L?0:S.length-1),l<0&&(l=S.length+l),l>=S.length){if(L)return-1;l=S.length-1}else if(l<0)if(L)l=0;else return-1;if(typeof f=="string"&&(f=x.from(f,_)),x.isBuffer(f))return f.length===0?-1:kt(S,f,l,_,L);if(typeof f=="number")return f=f&255,typeof n.prototype.indexOf=="function"?L?n.prototype.indexOf.call(S,f,l):n.prototype.lastIndexOf.call(S,f,l):kt(S,[f],l,_,L);throw new TypeError("val must be string, number or Buffer")}function kt(S,f,l,_,L){let T=1,U=S.length,_t=f.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(S.length<2||f.length<2)return-1;T=2,U/=2,_t/=2,l/=2}function ot(Jt,nt){return T===1?Jt[nt]:Jt.readUInt16BE(nt*T)}let st;if(L){let Jt=-1;for(st=l;st<U;st++)if(ot(S,st)===ot(f,Jt===-1?0:st-Jt)){if(Jt===-1&&(Jt=st),st-Jt+1===_t)return Jt*T}else Jt!==-1&&(st-=st-Jt),Jt=-1}else for(l+_t>U&&(l=U-_t),st=l;st>=0;st--){let Jt=!0;for(let nt=0;nt<_t;nt++)if(ot(S,st+nt)!==ot(f,nt)){Jt=!1;break}if(Jt)return st}return-1}x.prototype.includes=function(f,l,_){return this.indexOf(f,l,_)!==-1},x.prototype.indexOf=function(f,l,_){return Gt(this,f,l,_,!0)},x.prototype.lastIndexOf=function(f,l,_){return Gt(this,f,l,_,!1)};function Z(S,f,l,_){l=Number(l)||0;const L=S.length-l;_?(_=Number(_),_>L&&(_=L)):_=L;const T=f.length;_>T/2&&(_=T/2);let U;for(U=0;U<_;++U){const _t=parseInt(f.substr(U*2,2),16);if(yt(_t))return U;S[l+U]=_t}return U}function Wt(S,f,l,_){return gt(wt(f,S.length-l),S,l,_)}function v(S,f,l,_){return gt(Mt(f),S,l,_)}function i(S,f,l,_){return gt(bt(f),S,l,_)}function c(S,f,l,_){return gt(Ve(f,S.length-l),S,l,_)}x.prototype.write=function(f,l,_,L){if(l===void 0)L="utf8",_=this.length,l=0;else if(_===void 0&&typeof l=="string")L=l,_=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(_)?(_=_>>>0,L===void 0&&(L="utf8")):(L=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-l;if((_===void 0||_>T)&&(_=T),f.length>0&&(_<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let U=!1;for(;;)switch(L){case"hex":return Z(this,f,l,_);case"utf8":case"utf-8":return Wt(this,f,l,_);case"ascii":case"latin1":case"binary":return v(this,f,l,_);case"base64":return i(this,f,l,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c(this,f,l,_);default:if(U)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),U=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function h(S,f,l){return f===0&&l===S.length?t.fromByteArray(S):t.fromByteArray(S.slice(f,l))}function g(S,f,l){l=Math.min(S.length,l);const _=[];let L=f;for(;L<l;){const T=S[L];let U=null,_t=T>239?4:T>223?3:T>191?2:1;if(L+_t<=l){let ot,st,Jt,nt;switch(_t){case 1:T<128&&(U=T);break;case 2:ot=S[L+1],(ot&192)===128&&(nt=(T&31)<<6|ot&63,nt>127&&(U=nt));break;case 3:ot=S[L+1],st=S[L+2],(ot&192)===128&&(st&192)===128&&(nt=(T&15)<<12|(ot&63)<<6|st&63,nt>2047&&(nt<55296||nt>57343)&&(U=nt));break;case 4:ot=S[L+1],st=S[L+2],Jt=S[L+3],(ot&192)===128&&(st&192)===128&&(Jt&192)===128&&(nt=(T&15)<<18|(ot&63)<<12|(st&63)<<6|Jt&63,nt>65535&&nt<1114112&&(U=nt))}}U===null?(U=65533,_t=1):U>65535&&(U-=65536,_.push(U>>>10&1023|55296),U=56320|U&1023),_.push(U),L+=_t}return w(_)}const p=4096;function w(S){const f=S.length;if(f<=p)return String.fromCharCode.apply(String,S);let l="",_=0;for(;_<f;)l+=String.fromCharCode.apply(String,S.slice(_,_+=p));return l}function M(S,f,l){let _="";l=Math.min(S.length,l);for(let L=f;L<l;++L)_+=String.fromCharCode(S[L]&127);return _}function d(S,f,l){let _="";l=Math.min(S.length,l);for(let L=f;L<l;++L)_+=String.fromCharCode(S[L]);return _}function a(S,f,l){const _=S.length;(!f||f<0)&&(f=0),(!l||l<0||l>_)&&(l=_);let L="";for(let T=f;T<l;++T)L+=vt[S[T]];return L}function m(S,f,l){const _=S.slice(f,l);let L="";for(let T=0;T<_.length-1;T+=2)L+=String.fromCharCode(_[T]+_[T+1]*256);return L}x.prototype.slice=function(f,l){const _=this.length;f=~~f,l=l===void 0?_:~~l,f<0?(f+=_,f<0&&(f=0)):f>_&&(f=_),l<0?(l+=_,l<0&&(l=0)):l>_&&(l=_),l<f&&(l=f);const L=this.subarray(f,l);return Object.setPrototypeOf(L,x.prototype),L};function N(S,f,l){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+f>l)throw new RangeError("Trying to access beyond buffer length")}x.prototype.readUintLE=x.prototype.readUIntLE=function(f,l,_){f=f>>>0,l=l>>>0,_||N(f,l,this.length);let L=this[f],T=1,U=0;for(;++U<l&&(T*=256);)L+=this[f+U]*T;return L},x.prototype.readUintBE=x.prototype.readUIntBE=function(f,l,_){f=f>>>0,l=l>>>0,_||N(f,l,this.length);let L=this[f+--l],T=1;for(;l>0&&(T*=256);)L+=this[f+--l]*T;return L},x.prototype.readUint8=x.prototype.readUInt8=function(f,l){return f=f>>>0,l||N(f,1,this.length),this[f]},x.prototype.readUint16LE=x.prototype.readUInt16LE=function(f,l){return f=f>>>0,l||N(f,2,this.length),this[f]|this[f+1]<<8},x.prototype.readUint16BE=x.prototype.readUInt16BE=function(f,l){return f=f>>>0,l||N(f,2,this.length),this[f]<<8|this[f+1]},x.prototype.readUint32LE=x.prototype.readUInt32LE=function(f,l){return f=f>>>0,l||N(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},x.prototype.readUint32BE=x.prototype.readUInt32BE=function(f,l){return f=f>>>0,l||N(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},x.prototype.readBigUInt64LE=we(function(f){f=f>>>0,ge(f,"offset");const l=this[f],_=this[f+7];(l===void 0||_===void 0)&&pt(f,this.length-8);const L=l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,T=this[++f]+this[++f]*2**8+this[++f]*2**16+_*2**24;return BigInt(L)+(BigInt(T)<<BigInt(32))}),x.prototype.readBigUInt64BE=we(function(f){f=f>>>0,ge(f,"offset");const l=this[f],_=this[f+7];(l===void 0||_===void 0)&&pt(f,this.length-8);const L=l*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],T=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+_;return(BigInt(L)<<BigInt(32))+BigInt(T)}),x.prototype.readIntLE=function(f,l,_){f=f>>>0,l=l>>>0,_||N(f,l,this.length);let L=this[f],T=1,U=0;for(;++U<l&&(T*=256);)L+=this[f+U]*T;return T*=128,L>=T&&(L-=Math.pow(2,8*l)),L},x.prototype.readIntBE=function(f,l,_){f=f>>>0,l=l>>>0,_||N(f,l,this.length);let L=l,T=1,U=this[f+--L];for(;L>0&&(T*=256);)U+=this[f+--L]*T;return T*=128,U>=T&&(U-=Math.pow(2,8*l)),U},x.prototype.readInt8=function(f,l){return f=f>>>0,l||N(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},x.prototype.readInt16LE=function(f,l){f=f>>>0,l||N(f,2,this.length);const _=this[f]|this[f+1]<<8;return _&32768?_|4294901760:_},x.prototype.readInt16BE=function(f,l){f=f>>>0,l||N(f,2,this.length);const _=this[f+1]|this[f]<<8;return _&32768?_|4294901760:_},x.prototype.readInt32LE=function(f,l){return f=f>>>0,l||N(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},x.prototype.readInt32BE=function(f,l){return f=f>>>0,l||N(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},x.prototype.readBigInt64LE=we(function(f){f=f>>>0,ge(f,"offset");const l=this[f],_=this[f+7];(l===void 0||_===void 0)&&pt(f,this.length-8);const L=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(_<<24);return(BigInt(L)<<BigInt(32))+BigInt(l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),x.prototype.readBigInt64BE=we(function(f){f=f>>>0,ge(f,"offset");const l=this[f],_=this[f+7];(l===void 0||_===void 0)&&pt(f,this.length-8);const L=(l<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(L)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+_)}),x.prototype.readFloatLE=function(f,l){return f=f>>>0,l||N(f,4,this.length),e.read(this,f,!0,23,4)},x.prototype.readFloatBE=function(f,l){return f=f>>>0,l||N(f,4,this.length),e.read(this,f,!1,23,4)},x.prototype.readDoubleLE=function(f,l){return f=f>>>0,l||N(f,8,this.length),e.read(this,f,!0,52,8)},x.prototype.readDoubleBE=function(f,l){return f=f>>>0,l||N(f,8,this.length),e.read(this,f,!1,52,8)};function F(S,f,l,_,L,T){if(!x.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>L||f<T)throw new RangeError('"value" argument is out of bounds');if(l+_>S.length)throw new RangeError("Index out of range")}x.prototype.writeUintLE=x.prototype.writeUIntLE=function(f,l,_,L){if(f=+f,l=l>>>0,_=_>>>0,!L){const _t=Math.pow(2,8*_)-1;F(this,f,l,_,_t,0)}let T=1,U=0;for(this[l]=f&255;++U<_&&(T*=256);)this[l+U]=f/T&255;return l+_},x.prototype.writeUintBE=x.prototype.writeUIntBE=function(f,l,_,L){if(f=+f,l=l>>>0,_=_>>>0,!L){const _t=Math.pow(2,8*_)-1;F(this,f,l,_,_t,0)}let T=_-1,U=1;for(this[l+T]=f&255;--T>=0&&(U*=256);)this[l+T]=f/U&255;return l+_},x.prototype.writeUint8=x.prototype.writeUInt8=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,1,255,0),this[l]=f&255,l+1},x.prototype.writeUint16LE=x.prototype.writeUInt16LE=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,2,65535,0),this[l]=f&255,this[l+1]=f>>>8,l+2},x.prototype.writeUint16BE=x.prototype.writeUInt16BE=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,2,65535,0),this[l]=f>>>8,this[l+1]=f&255,l+2},x.prototype.writeUint32LE=x.prototype.writeUInt32LE=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,4,4294967295,0),this[l+3]=f>>>24,this[l+2]=f>>>16,this[l+1]=f>>>8,this[l]=f&255,l+4},x.prototype.writeUint32BE=x.prototype.writeUInt32BE=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,4,4294967295,0),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4};function D(S,f,l,_,L){lt(f,_,L,S,l,7);let T=Number(f&BigInt(4294967295));S[l++]=T,T=T>>8,S[l++]=T,T=T>>8,S[l++]=T,T=T>>8,S[l++]=T;let U=Number(f>>BigInt(32)&BigInt(4294967295));return S[l++]=U,U=U>>8,S[l++]=U,U=U>>8,S[l++]=U,U=U>>8,S[l++]=U,l}function rt(S,f,l,_,L){lt(f,_,L,S,l,7);let T=Number(f&BigInt(4294967295));S[l+7]=T,T=T>>8,S[l+6]=T,T=T>>8,S[l+5]=T,T=T>>8,S[l+4]=T;let U=Number(f>>BigInt(32)&BigInt(4294967295));return S[l+3]=U,U=U>>8,S[l+2]=U,U=U>>8,S[l+1]=U,U=U>>8,S[l]=U,l+8}x.prototype.writeBigUInt64LE=we(function(f,l=0){return D(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeBigUInt64BE=we(function(f,l=0){return rt(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeIntLE=function(f,l,_,L){if(f=+f,l=l>>>0,!L){const ot=Math.pow(2,8*_-1);F(this,f,l,_,ot-1,-ot)}let T=0,U=1,_t=0;for(this[l]=f&255;++T<_&&(U*=256);)f<0&&_t===0&&this[l+T-1]!==0&&(_t=1),this[l+T]=(f/U>>0)-_t&255;return l+_},x.prototype.writeIntBE=function(f,l,_,L){if(f=+f,l=l>>>0,!L){const ot=Math.pow(2,8*_-1);F(this,f,l,_,ot-1,-ot)}let T=_-1,U=1,_t=0;for(this[l+T]=f&255;--T>=0&&(U*=256);)f<0&&_t===0&&this[l+T+1]!==0&&(_t=1),this[l+T]=(f/U>>0)-_t&255;return l+_},x.prototype.writeInt8=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,1,127,-128),f<0&&(f=255+f+1),this[l]=f&255,l+1},x.prototype.writeInt16LE=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,2,32767,-32768),this[l]=f&255,this[l+1]=f>>>8,l+2},x.prototype.writeInt16BE=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,2,32767,-32768),this[l]=f>>>8,this[l+1]=f&255,l+2},x.prototype.writeInt32LE=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,4,2147483647,-2147483648),this[l]=f&255,this[l+1]=f>>>8,this[l+2]=f>>>16,this[l+3]=f>>>24,l+4},x.prototype.writeInt32BE=function(f,l,_){return f=+f,l=l>>>0,_||F(this,f,l,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4},x.prototype.writeBigInt64LE=we(function(f,l=0){return D(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeBigInt64BE=we(function(f,l=0){return rt(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function J(S,f,l,_,L,T){if(l+_>S.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function et(S,f,l,_,L){return f=+f,l=l>>>0,L||J(S,f,l,4),e.write(S,f,l,_,23,4),l+4}x.prototype.writeFloatLE=function(f,l,_){return et(this,f,l,!0,_)},x.prototype.writeFloatBE=function(f,l,_){return et(this,f,l,!1,_)};function Xt(S,f,l,_,L){return f=+f,l=l>>>0,L||J(S,f,l,8),e.write(S,f,l,_,52,8),l+8}x.prototype.writeDoubleLE=function(f,l,_){return Xt(this,f,l,!0,_)},x.prototype.writeDoubleBE=function(f,l,_){return Xt(this,f,l,!1,_)},x.prototype.copy=function(f,l,_,L){if(!x.isBuffer(f))throw new TypeError("argument should be a Buffer");if(_||(_=0),!L&&L!==0&&(L=this.length),l>=f.length&&(l=f.length),l||(l=0),L>0&&L<_&&(L=_),L===_||f.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),f.length-l<L-_&&(L=f.length-l+_);const T=L-_;return this===f&&typeof n.prototype.copyWithin=="function"?this.copyWithin(l,_,L):n.prototype.set.call(f,this.subarray(_,L),l),T},x.prototype.fill=function(f,l,_,L){if(typeof f=="string"){if(typeof l=="string"?(L=l,l=0,_=this.length):typeof _=="string"&&(L=_,_=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!x.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(f.length===1){const U=f.charCodeAt(0);(L==="utf8"&&U<128||L==="latin1")&&(f=U)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(l<0||this.length<l||this.length<_)throw new RangeError("Out of range index");if(_<=l)return this;l=l>>>0,_=_===void 0?this.length:_>>>0,f||(f=0);let T;if(typeof f=="number")for(T=l;T<_;++T)this[T]=f;else{const U=x.isBuffer(f)?f:x.from(f,L),_t=U.length;if(_t===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(T=0;T<_-l;++T)this[T+l]=U[T%_t]}return this};const it={};function at(S,f,l){it[S]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}at("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),at("ERR_INVALID_ARG_TYPE",function(S,f){return`The "${S}" argument must be of type number. Received type ${typeof f}`},TypeError),at("ERR_OUT_OF_RANGE",function(S,f,l){let _=`The value of "${S}" is out of range.`,L=l;return Number.isInteger(l)&&Math.abs(l)>2**32?L=jt(String(l)):typeof l=="bigint"&&(L=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(L=jt(L)),L+="n"),_+=` It must be ${f}. Received ${L}`,_},RangeError);function jt(S){let f="",l=S.length;const _=S[0]==="-"?1:0;for(;l>=_+4;l-=3)f=`_${S.slice(l-3,l)}${f}`;return`${S.slice(0,l)}${f}`}function ht(S,f,l){ge(f,"offset"),(S[f]===void 0||S[f+l]===void 0)&&pt(f,S.length-(l+1))}function lt(S,f,l,_,L,T){if(S>l||S<f){const U=typeof f=="bigint"?"n":"";let _t;throw f===0||f===BigInt(0)?_t=`>= 0${U} and < 2${U} ** ${(T+1)*8}${U}`:_t=`>= -(2${U} ** ${(T+1)*8-1}${U}) and < 2 ** ${(T+1)*8-1}${U}`,new it.ERR_OUT_OF_RANGE("value",_t,S)}ht(_,L,T)}function ge(S,f){if(typeof S!="number")throw new it.ERR_INVALID_ARG_TYPE(f,"number",S)}function pt(S,f,l){throw Math.floor(S)!==S?(ge(S,l),new it.ERR_OUT_OF_RANGE("offset","an integer",S)):f<0?new it.ERR_BUFFER_OUT_OF_BOUNDS:new it.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,S)}const St=/[^+/0-9A-Za-z-_]/g;function tr(S){if(S=S.split("=")[0],S=S.trim().replace(St,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function wt(S,f){f=f||1/0;let l;const _=S.length;let L=null;const T=[];for(let U=0;U<_;++U){if(l=S.charCodeAt(U),l>55295&&l<57344){if(!L){if(l>56319){(f-=3)>-1&&T.push(239,191,189);continue}else if(U+1===_){(f-=3)>-1&&T.push(239,191,189);continue}L=l;continue}if(l<56320){(f-=3)>-1&&T.push(239,191,189),L=l;continue}l=(L-55296<<10|l-56320)+65536}else L&&(f-=3)>-1&&T.push(239,191,189);if(L=null,l<128){if((f-=1)<0)break;T.push(l)}else if(l<2048){if((f-=2)<0)break;T.push(l>>6|192,l&63|128)}else if(l<65536){if((f-=3)<0)break;T.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((f-=4)<0)break;T.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return T}function Mt(S){const f=[];for(let l=0;l<S.length;++l)f.push(S.charCodeAt(l)&255);return f}function Ve(S,f){let l,_,L;const T=[];for(let U=0;U<S.length&&!((f-=2)<0);++U)l=S.charCodeAt(U),_=l>>8,L=l%256,T.push(L),T.push(_);return T}function bt(S){return t.toByteArray(tr(S))}function gt(S,f,l,_){let L;for(L=0;L<_&&!(L+l>=f.length||L>=S.length);++L)f[L+l]=S[L];return L}function he(S,f){return S instanceof f||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===f.name}function yt(S){return S!==S}const vt=function(){const S="0123456789abcdef",f=new Array(256);for(let l=0;l<16;++l){const _=l*16;for(let L=0;L<16;++L)f[_+L]=S[l]+S[L]}return f}();function we(S){return typeof BigInt>"u"?xt:S}function xt(){throw new Error("BigInt not supported")}})(pe);const fe=pe.Buffer,ma=pe.Blob,ya=pe.BlobOptions,Et=pe.Buffer,wa=pe.File,ba=pe.FileOptions,va=pe.INSPECT_MAX_BYTES,xa=pe.SlowBuffer,Sa=pe.TranscodeEncoding,Ma=pe.atob,ka=pe.btoa,_a=pe.constants,Ea=pe.isAscii,Ba=pe.isUtf8,Aa=pe.kMaxLength,Ia=pe.kStringMaxLength,Ra=pe.resolveObjectURL,La=pe.transcode,Ta=Object.freeze(Object.defineProperty({__proto__:null,Blob:ma,BlobOptions:ya,Buffer:Et,File:wa,FileOptions:ba,INSPECT_MAX_BYTES:va,SlowBuffer:xa,TranscodeEncoding:Sa,atob:Ma,btoa:ka,constants:_a,default:fe,isAscii:Ea,isUtf8:Ba,kMaxLength:Aa,kStringMaxLength:Ia,resolveObjectURL:Ra,transcode:La},Symbol.toStringTag,{value:"Module"}));function ds(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`positive integer expected, not ${s}`)}function Ca(s){return s instanceof Uint8Array||s!=null&&typeof s=="object"&&s.constructor.name==="Uint8Array"}function Yn(s,...t){if(!Ca(s))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(s.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${s.length}`)}function Ua(s){if(typeof s!="function"||typeof s.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ds(s.outputLen),ds(s.blockLen)}function qn(s,t=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(t&&s.finished)throw new Error("Hash#digest() has already been called")}function Pa(s,t){Yn(s);const e=t.outputLen;if(s.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const ui=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hi=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),Ze=(s,t)=>s<<32-t|s>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Na(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function Di(s){return typeof s=="string"&&(s=Na(s)),Yn(s),s}function Oa(...s){let t=0;for(let r=0;r<s.length;r++){const o=s[r];Yn(o),t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<s.length;r++){const n=s[r];e.set(n,o),o+=n.length}return e}class Ds{clone(){return this._cloneInto()}}function $s(s){const t=r=>s().update(Di(r)).digest(),e=s();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>s(),t}function Ks(s=32){if(ui&&typeof ui.getRandomValues=="function")return ui.getRandomValues(new Uint8Array(s));throw new Error("crypto.getRandomValues must be defined")}function qa(s,t,e,r){if(typeof s.setBigUint64=="function")return s.setBigUint64(t,e,r);const o=BigInt(32),n=BigInt(4294967295),u=Number(e>>o&n),y=Number(e&n),b=r?4:0,k=r?0:4;s.setUint32(t+b,u,r),s.setUint32(t+k,y,r)}const Fa=(s,t,e)=>s&t^~s&e,za=(s,t,e)=>s&t^s&e^t&e;class Ws extends Ds{constructor(t,e,r,o){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=hi(this.buffer)}update(t){qn(this);const{view:e,buffer:r,blockLen:o}=this;t=Di(t);const n=t.length;for(let u=0;u<n;){const y=Math.min(o-this.pos,n-u);if(y===o){const b=hi(t);for(;o<=n-u;u+=o)this.process(b,u);continue}r.set(t.subarray(u,u+y),this.pos),this.pos+=y,u+=y,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){qn(this),Pa(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:o,isLE:n}=this;let{pos:u}=this;e[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>o-u&&(this.process(r,0),u=0);for(let E=u;E<o;E++)e[E]=0;qa(r,o-8,BigInt(this.length*8),n),this.process(r,0);const y=hi(t),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const k=b/4,x=this.get();if(k>x.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<k;E++)y.setUint32(4*E,x[E],n)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:o,finished:n,destroyed:u,pos:y}=this;return t.length=o,t.pos=y,t.finished=n,t.destroyed=u,o%e&&t.buffer.set(r),t}}const Rn=BigInt(2**32-1),Ei=BigInt(32);function Hs(s,t=!1){return t?{h:Number(s&Rn),l:Number(s>>Ei&Rn)}:{h:Number(s>>Ei&Rn)|0,l:Number(s&Rn)|0}}function Da(s,t=!1){let e=new Uint32Array(s.length),r=new Uint32Array(s.length);for(let o=0;o<s.length;o++){const{h:n,l:u}=Hs(s[o],t);[e[o],r[o]]=[n,u]}return[e,r]}const $a=(s,t)=>BigInt(s>>>0)<<Ei|BigInt(t>>>0),Ka=(s,t,e)=>s>>>e,Wa=(s,t,e)=>s<<32-e|t>>>e,Ha=(s,t,e)=>s>>>e|t<<32-e,Ga=(s,t,e)=>s<<32-e|t>>>e,Va=(s,t,e)=>s<<64-e|t>>>e-32,Za=(s,t,e)=>s>>>e-32|t<<64-e,ja=(s,t)=>t,Ya=(s,t)=>s,Ja=(s,t,e)=>s<<e|t>>>32-e,Xa=(s,t,e)=>t<<e|s>>>32-e,Qa=(s,t,e)=>t<<e-32|s>>>64-e,tc=(s,t,e)=>s<<e-32|t>>>64-e;function ec(s,t,e,r){const o=(t>>>0)+(r>>>0);return{h:s+e+(o/2**32|0)|0,l:o|0}}const rc=(s,t,e)=>(s>>>0)+(t>>>0)+(e>>>0),nc=(s,t,e,r)=>t+e+r+(s/2**32|0)|0,ic=(s,t,e,r)=>(s>>>0)+(t>>>0)+(e>>>0)+(r>>>0),sc=(s,t,e,r,o)=>t+e+r+o+(s/2**32|0)|0,oc=(s,t,e,r,o)=>(s>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),ac=(s,t,e,r,o,n)=>t+e+r+o+n+(s/2**32|0)|0,$t={fromBig:Hs,split:Da,toBig:$a,shrSH:Ka,shrSL:Wa,rotrSH:Ha,rotrSL:Ga,rotrBH:Va,rotrBL:Za,rotr32H:ja,rotr32L:Ya,rotlSH:Ja,rotlSL:Xa,rotlBH:Qa,rotlBL:tc,add:ec,add3L:rc,add3H:nc,add4L:ic,add4H:sc,add5H:ac,add5L:oc},[cc,uc]=$t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(s=>BigInt(s))),ar=new Uint32Array(80),cr=new Uint32Array(80);class hc extends Ws{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:o,Ch:n,Cl:u,Dh:y,Dl:b,Eh:k,El:x,Fh:E,Fl:q,Gh:R,Gl:I,Hh:B,Hl:A}=this;return[t,e,r,o,n,u,y,b,k,x,E,q,R,I,B,A]}set(t,e,r,o,n,u,y,b,k,x,E,q,R,I,B,A){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=o|0,this.Ch=n|0,this.Cl=u|0,this.Dh=y|0,this.Dl=b|0,this.Eh=k|0,this.El=x|0,this.Fh=E|0,this.Fl=q|0,this.Gh=R|0,this.Gl=I|0,this.Hh=B|0,this.Hl=A|0}process(t,e){for(let z=0;z<16;z++,e+=4)ar[z]=t.getUint32(e),cr[z]=t.getUint32(e+=4);for(let z=16;z<80;z++){const V=ar[z-15]|0,W=cr[z-15]|0,K=$t.rotrSH(V,W,1)^$t.rotrSH(V,W,8)^$t.shrSH(V,W,7),j=$t.rotrSL(V,W,1)^$t.rotrSL(V,W,8)^$t.shrSL(V,W,7),Q=ar[z-2]|0,Gt=cr[z-2]|0,kt=$t.rotrSH(Q,Gt,19)^$t.rotrBH(Q,Gt,61)^$t.shrSH(Q,Gt,6),Z=$t.rotrSL(Q,Gt,19)^$t.rotrBL(Q,Gt,61)^$t.shrSL(Q,Gt,6),Wt=$t.add4L(j,Z,cr[z-7],cr[z-16]),v=$t.add4H(Wt,K,kt,ar[z-7],ar[z-16]);ar[z]=v|0,cr[z]=Wt|0}let{Ah:r,Al:o,Bh:n,Bl:u,Ch:y,Cl:b,Dh:k,Dl:x,Eh:E,El:q,Fh:R,Fl:I,Gh:B,Gl:A,Hh:P,Hl:$}=this;for(let z=0;z<80;z++){const V=$t.rotrSH(E,q,14)^$t.rotrSH(E,q,18)^$t.rotrBH(E,q,41),W=$t.rotrSL(E,q,14)^$t.rotrSL(E,q,18)^$t.rotrBL(E,q,41),K=E&R^~E&B,j=q&I^~q&A,Q=$t.add5L($,W,j,uc[z],cr[z]),Gt=$t.add5H(Q,P,V,K,cc[z],ar[z]),kt=Q|0,Z=$t.rotrSH(r,o,28)^$t.rotrBH(r,o,34)^$t.rotrBH(r,o,39),Wt=$t.rotrSL(r,o,28)^$t.rotrBL(r,o,34)^$t.rotrBL(r,o,39),v=r&n^r&y^n&y,i=o&u^o&b^u&b;P=B|0,$=A|0,B=R|0,A=I|0,R=E|0,I=q|0,{h:E,l:q}=$t.add(k|0,x|0,Gt|0,kt|0),k=y|0,x=b|0,y=n|0,b=u|0,n=r|0,u=o|0;const c=$t.add3L(kt,Wt,i);r=$t.add3H(c,Gt,Z,v),o=c|0}({h:r,l:o}=$t.add(this.Ah|0,this.Al|0,r|0,o|0)),{h:n,l:u}=$t.add(this.Bh|0,this.Bl|0,n|0,u|0),{h:y,l:b}=$t.add(this.Ch|0,this.Cl|0,y|0,b|0),{h:k,l:x}=$t.add(this.Dh|0,this.Dl|0,k|0,x|0),{h:E,l:q}=$t.add(this.Eh|0,this.El|0,E|0,q|0),{h:R,l:I}=$t.add(this.Fh|0,this.Fl|0,R|0,I|0),{h:B,l:A}=$t.add(this.Gh|0,this.Gl|0,B|0,A|0),{h:P,l:$}=$t.add(this.Hh|0,this.Hl|0,P|0,$|0),this.set(r,o,n,u,y,b,k,x,E,q,R,I,B,A,P,$)}roundClean(){ar.fill(0),cr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const fc=$s(()=>new hc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gs=BigInt(0),Jn=BigInt(1),lc=BigInt(2);function Dr(s){return s instanceof Uint8Array||s!=null&&typeof s=="object"&&s.constructor.name==="Uint8Array"}function kn(s){if(!Dr(s))throw new Error("Uint8Array expected")}const dc=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function $r(s){kn(s);let t="";for(let e=0;e<s.length;e++)t+=dc[s[e]];return t}function Vs(s){const t=s.toString(16);return t.length&1?`0${t}`:t}function $i(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);return BigInt(s===""?"0":`0x${s}`)}const er={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ps(s){if(s>=er._0&&s<=er._9)return s-er._0;if(s>=er._A&&s<=er._F)return s-(er._A-10);if(s>=er._a&&s<=er._f)return s-(er._a-10)}function en(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);const t=s.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let o=0,n=0;o<e;o++,n+=2){const u=ps(s.charCodeAt(n)),y=ps(s.charCodeAt(n+1));if(u===void 0||y===void 0){const b=s[n]+s[n+1];throw new Error('hex string expected, got non-hex character "'+b+'" at index '+n)}r[o]=u*16+y}return r}function Fr(s){return $i($r(s))}function Qr(s){return kn(s),$i($r(Uint8Array.from(s).reverse()))}function rn(s,t){return en(s.toString(16).padStart(t*2,"0"))}function vn(s,t){return rn(s,t).reverse()}function pc(s){return en(Vs(s))}function de(s,t,e){let r;if(typeof t=="string")try{r=en(t)}catch(n){throw new Error(`${s} must be valid hex string, got "${t}". Cause: ${n}`)}else if(Dr(t))r=Uint8Array.from(t);else throw new Error(`${s} must be hex string or Uint8Array`);const o=r.length;if(typeof e=="number"&&o!==e)throw new Error(`${s} expected ${e} bytes, got ${o}`);return r}function Kr(...s){let t=0;for(let r=0;r<s.length;r++){const o=s[r];kn(o),t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<s.length;r++){const n=s[r];e.set(n,o),o+=n.length}return e}function gc(s,t){if(s.length!==t.length)return!1;let e=0;for(let r=0;r<s.length;r++)e|=s[r]^t[r];return e===0}function mc(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function yc(s){let t;for(t=0;s>Gs;s>>=Jn,t+=1);return t}function wc(s,t){return s>>BigInt(t)&Jn}function bc(s,t,e){return s|(e?Jn:Gs)<<BigInt(t)}const Ki=s=>(lc<<BigInt(s-1))-Jn,fi=s=>new Uint8Array(s),gs=s=>Uint8Array.from(s);function Zs(s,t,e){if(typeof s!="number"||s<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=fi(s),o=fi(s),n=0;const u=()=>{r.fill(1),o.fill(0),n=0},y=(...E)=>e(o,r,...E),b=(E=fi())=>{o=y(gs([0]),E),r=y(),E.length!==0&&(o=y(gs([1]),E),r=y())},k=()=>{if(n++>=1e3)throw new Error("drbg: tried 1000 values");let E=0;const q=[];for(;E<t;){r=y();const R=r.slice();q.push(R),E+=r.length}return Kr(...q)};return(E,q)=>{u(),b(E);let R;for(;!(R=q(k()));)b();return u(),R}}const vc={bigint:s=>typeof s=="bigint",function:s=>typeof s=="function",boolean:s=>typeof s=="boolean",string:s=>typeof s=="string",stringOrUint8Array:s=>typeof s=="string"||Dr(s),isSafeInteger:s=>Number.isSafeInteger(s),array:s=>Array.isArray(s),field:(s,t)=>t.Fp.isValid(s),hash:s=>typeof s=="function"&&Number.isSafeInteger(s.outputLen)};function on(s,t,e={}){const r=(o,n,u)=>{const y=vc[n];if(typeof y!="function")throw new Error(`Invalid validator "${n}", expected function`);const b=s[o];if(!(u&&b===void 0)&&!y(b,s))throw new Error(`Invalid param ${String(o)}=${b} (${typeof b}), expected ${n}`)};for(const[o,n]of Object.entries(t))r(o,n,!1);for(const[o,n]of Object.entries(e))r(o,n,!0);return s}const xc=Object.freeze(Object.defineProperty({__proto__:null,abytes:kn,bitGet:wc,bitLen:yc,bitMask:Ki,bitSet:bc,bytesToHex:$r,bytesToNumberBE:Fr,bytesToNumberLE:Qr,concatBytes:Kr,createHmacDrbg:Zs,ensureBytes:de,equalBytes:gc,hexToBytes:en,hexToNumber:$i,isBytes:Dr,numberToBytesBE:rn,numberToBytesLE:vn,numberToHexUnpadded:Vs,numberToVarBytesBE:pc,utf8ToBytes:mc,validateObject:on},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ye=BigInt(0),se=BigInt(1),Pr=BigInt(2),Sc=BigInt(3),Bi=BigInt(4),ms=BigInt(5),ys=BigInt(8);BigInt(9);BigInt(16);function re(s,t){const e=s%t;return e>=ye?e:t+e}function Mc(s,t,e){if(e<=ye||t<ye)throw new Error("Expected power/modulo > 0");if(e===se)return ye;let r=se;for(;t>ye;)t&se&&(r=r*s%e),s=s*s%e,t>>=se;return r}function ae(s,t,e){let r=s;for(;t-- >ye;)r*=r,r%=e;return r}function Ai(s,t){if(s===ye||t<=ye)throw new Error(`invert: expected positive integers, got n=${s} mod=${t}`);let e=re(s,t),r=t,o=ye,n=se;for(;e!==ye;){const y=r/e,b=r%e,k=o-n*y;r=e,e=b,o=n,n=k}if(r!==se)throw new Error("invert: does not exist");return re(o,t)}function kc(s){const t=(s-se)/Pr;let e,r,o;for(e=s-se,r=0;e%Pr===ye;e/=Pr,r++);for(o=Pr;o<s&&Mc(o,t,s)!==s-se;o++);if(r===1){const u=(s+se)/Bi;return function(b,k){const x=b.pow(k,u);if(!b.eql(b.sqr(x),k))throw new Error("Cannot find square root");return x}}const n=(e+se)/Pr;return function(y,b){if(y.pow(b,t)===y.neg(y.ONE))throw new Error("Cannot find square root");let k=r,x=y.pow(y.mul(y.ONE,o),e),E=y.pow(b,n),q=y.pow(b,e);for(;!y.eql(q,y.ONE);){if(y.eql(q,y.ZERO))return y.ZERO;let R=1;for(let B=y.sqr(q);R<k&&!y.eql(B,y.ONE);R++)B=y.sqr(B);const I=y.pow(x,se<<BigInt(k-R-1));x=y.sqr(I),E=y.mul(E,I),q=y.mul(q,x),k=R}return E}}function _c(s){if(s%Bi===Sc){const t=(s+se)/Bi;return function(r,o){const n=r.pow(o,t);if(!r.eql(r.sqr(n),o))throw new Error("Cannot find square root");return n}}if(s%ys===ms){const t=(s-ms)/ys;return function(r,o){const n=r.mul(o,Pr),u=r.pow(n,t),y=r.mul(o,u),b=r.mul(r.mul(y,Pr),u),k=r.mul(y,r.sub(b,r.ONE));if(!r.eql(r.sqr(k),o))throw new Error("Cannot find square root");return k}}return kc(s)}const Ec=(s,t)=>(re(s,t)&se)===se,Bc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ac(s){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Bc.reduce((r,o)=>(r[o]="function",r),t);return on(s,e)}function Ic(s,t,e){if(e<ye)throw new Error("Expected power > 0");if(e===ye)return s.ONE;if(e===se)return t;let r=s.ONE,o=t;for(;e>ye;)e&se&&(r=s.mul(r,o)),o=s.sqr(o),e>>=se;return r}function Rc(s,t){const e=new Array(t.length),r=t.reduce((n,u,y)=>s.is0(u)?n:(e[y]=n,s.mul(n,u)),s.ONE),o=s.inv(r);return t.reduceRight((n,u,y)=>s.is0(u)?n:(e[y]=s.mul(n,e[y]),s.mul(n,u)),o),e}function js(s,t){const e=t!==void 0?t:s.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Ys(s,t,e=!1,r={}){if(s<=ye)throw new Error(`Expected Field ORDER > 0, got ${s}`);const{nBitLength:o,nByteLength:n}=js(s,t);if(n>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=_c(s),y=Object.freeze({ORDER:s,BITS:o,BYTES:n,MASK:Ki(o),ZERO:ye,ONE:se,create:b=>re(b,s),isValid:b=>{if(typeof b!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof b}`);return ye<=b&&b<s},is0:b=>b===ye,isOdd:b=>(b&se)===se,neg:b=>re(-b,s),eql:(b,k)=>b===k,sqr:b=>re(b*b,s),add:(b,k)=>re(b+k,s),sub:(b,k)=>re(b-k,s),mul:(b,k)=>re(b*k,s),pow:(b,k)=>Ic(y,b,k),div:(b,k)=>re(b*Ai(k,s),s),sqrN:b=>b*b,addN:(b,k)=>b+k,subN:(b,k)=>b-k,mulN:(b,k)=>b*k,inv:b=>Ai(b,s),sqrt:r.sqrt||(b=>u(y,b)),invertBatch:b=>Rc(y,b),cmov:(b,k,x)=>x?k:b,toBytes:b=>e?vn(b,n):rn(b,n),fromBytes:b=>{if(b.length!==n)throw new Error(`Fp.fromBytes: expected ${n}, got ${b.length}`);return e?Qr(b):Fr(b)}});return Object.freeze(y)}function Js(s){if(typeof s!="bigint")throw new Error("field order must be bigint");const t=s.toString(2).length;return Math.ceil(t/8)}function Xs(s){const t=Js(s);return t+Math.ceil(t/2)}function Lc(s,t,e=!1){const r=s.length,o=Js(t),n=Xs(t);if(r<16||r<n||r>1024)throw new Error(`expected ${n}-1024 bytes of input, got ${r}`);const u=e?Fr(s):Qr(s),y=re(u,t-se)+se;return e?vn(y,o):rn(y,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tc=BigInt(0),li=BigInt(1);function Qs(s,t){const e=(o,n)=>{const u=n.negate();return o?u:n},r=o=>{const n=Math.ceil(t/o)+1,u=2**(o-1);return{windows:n,windowSize:u}};return{constTimeNegate:e,unsafeLadder(o,n){let u=s.ZERO,y=o;for(;n>Tc;)n&li&&(u=u.add(y)),y=y.double(),n>>=li;return u},precomputeWindow(o,n){const{windows:u,windowSize:y}=r(n),b=[];let k=o,x=k;for(let E=0;E<u;E++){x=k,b.push(x);for(let q=1;q<y;q++)x=x.add(k),b.push(x);k=x.double()}return b},wNAF(o,n,u){const{windows:y,windowSize:b}=r(o);let k=s.ZERO,x=s.BASE;const E=BigInt(2**o-1),q=2**o,R=BigInt(o);for(let I=0;I<y;I++){const B=I*b;let A=Number(u&E);u>>=R,A>b&&(A-=q,u+=li);const P=B,$=B+Math.abs(A)-1,z=I%2!==0,V=A<0;A===0?x=x.add(e(z,n[P])):k=k.add(e(V,n[$]))}return{p:k,f:x}},wNAFCached(o,n,u,y){const b=o._WINDOW_SIZE||1;let k=n.get(o);return k||(k=this.precomputeWindow(o,b),b!==1&&n.set(o,y(k))),this.wNAF(b,k,u)}}}function Wi(s){return Ac(s.Fp),on(s,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...js(s.n,s.nBitLength),...s,p:s.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const We=BigInt(0),Le=BigInt(1),Ln=BigInt(2),Cc=BigInt(8),Uc={zip215:!0};function Pc(s){const t=Wi(s);return on(s,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Nc(s){const t=Pc(s),{Fp:e,n:r,prehash:o,hash:n,randomBytes:u,nByteLength:y,h:b}=t,k=Ln<<BigInt(y*8)-Le,x=e.create,E=t.uvRatio||((p,w)=>{try{return{isValid:!0,value:e.sqrt(p*e.inv(w))}}catch{return{isValid:!1,value:We}}}),q=t.adjustScalarBytes||(p=>p),R=t.domain||((p,w,M)=>{if(w.length||M)throw new Error("Contexts/pre-hash are not supported");return p}),I=p=>typeof p=="bigint"&&We<p,B=(p,w)=>I(p)&&I(w)&&p<w,A=p=>p===We||B(p,k);function P(p,w){if(B(p,w))return p;throw new Error(`Expected valid scalar < ${w}, got ${typeof p} ${p}`)}function $(p){return p===We?p:P(p,r)}const z=new Map;function V(p){if(!(p instanceof W))throw new Error("ExtendedPoint expected")}class W{constructor(w,M,d,a){if(this.ex=w,this.ey=M,this.ez=d,this.et=a,!A(w))throw new Error("x required");if(!A(M))throw new Error("y required");if(!A(d))throw new Error("z required");if(!A(a))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof W)throw new Error("extended point not allowed");const{x:M,y:d}=w||{};if(!A(M)||!A(d))throw new Error("invalid affine point");return new W(M,d,Le,x(M*d))}static normalizeZ(w){const M=e.invertBatch(w.map(d=>d.ez));return w.map((d,a)=>d.toAffine(M[a])).map(W.fromAffine)}_setWindowSize(w){this._WINDOW_SIZE=w,z.delete(this)}assertValidity(){const{a:w,d:M}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:d,ey:a,ez:m,et:N}=this,F=x(d*d),D=x(a*a),rt=x(m*m),J=x(rt*rt),et=x(F*w),Xt=x(rt*x(et+D)),it=x(J+x(M*x(F*D)));if(Xt!==it)throw new Error("bad point: equation left != right (1)");const at=x(d*a),jt=x(m*N);if(at!==jt)throw new Error("bad point: equation left != right (2)")}equals(w){V(w);const{ex:M,ey:d,ez:a}=this,{ex:m,ey:N,ez:F}=w,D=x(M*F),rt=x(m*a),J=x(d*F),et=x(N*a);return D===rt&&J===et}is0(){return this.equals(W.ZERO)}negate(){return new W(x(-this.ex),this.ey,this.ez,x(-this.et))}double(){const{a:w}=t,{ex:M,ey:d,ez:a}=this,m=x(M*M),N=x(d*d),F=x(Ln*x(a*a)),D=x(w*m),rt=M+d,J=x(x(rt*rt)-m-N),et=D+N,Xt=et-F,it=D-N,at=x(J*Xt),jt=x(et*it),ht=x(J*it),lt=x(Xt*et);return new W(at,jt,lt,ht)}add(w){V(w);const{a:M,d}=t,{ex:a,ey:m,ez:N,et:F}=this,{ex:D,ey:rt,ez:J,et}=w;if(M===BigInt(-1)){const Ve=x((m-a)*(rt+D)),bt=x((m+a)*(rt-D)),gt=x(bt-Ve);if(gt===We)return this.double();const he=x(N*Ln*et),yt=x(F*Ln*J),vt=yt+he,we=bt+Ve,xt=yt-he,S=x(vt*gt),f=x(we*xt),l=x(vt*xt),_=x(gt*we);return new W(S,f,_,l)}const Xt=x(a*D),it=x(m*rt),at=x(F*d*et),jt=x(N*J),ht=x((a+m)*(D+rt)-Xt-it),lt=jt-at,ge=jt+at,pt=x(it-M*Xt),St=x(ht*lt),tr=x(ge*pt),wt=x(ht*pt),Mt=x(lt*ge);return new W(St,tr,Mt,wt)}subtract(w){return this.add(w.negate())}wNAF(w){return Q.wNAFCached(this,z,w,W.normalizeZ)}multiply(w){const{p:M,f:d}=this.wNAF(P(w,r));return W.normalizeZ([M,d])[0]}multiplyUnsafe(w){let M=$(w);return M===We?j:this.equals(j)||M===Le?this:this.equals(K)?this.wNAF(M).p:Q.unsafeLadder(this,M)}isSmallOrder(){return this.multiplyUnsafe(b).is0()}isTorsionFree(){return Q.unsafeLadder(this,r).is0()}toAffine(w){const{ex:M,ey:d,ez:a}=this,m=this.is0();w==null&&(w=m?Cc:e.inv(a));const N=x(M*w),F=x(d*w),D=x(a*w);if(m)return{x:We,y:Le};if(D!==Le)throw new Error("invZ was invalid");return{x:N,y:F}}clearCofactor(){const{h:w}=t;return w===Le?this:this.multiplyUnsafe(w)}static fromHex(w,M=!1){const{d,a}=t,m=e.BYTES;w=de("pointHex",w,m);const N=w.slice(),F=w[m-1];N[m-1]=F&-129;const D=Qr(N);D===We||(M?P(D,k):P(D,e.ORDER));const rt=x(D*D),J=x(rt-Le),et=x(d*rt-a);let{isValid:Xt,value:it}=E(J,et);if(!Xt)throw new Error("Point.fromHex: invalid y coordinate");const at=(it&Le)===Le,jt=(F&128)!==0;if(!M&&it===We&&jt)throw new Error("Point.fromHex: x=0 and x_0=1");return jt!==at&&(it=x(-it)),W.fromAffine({x:it,y:D})}static fromPrivateKey(w){return Z(w).point}toRawBytes(){const{x:w,y:M}=this.toAffine(),d=vn(M,e.BYTES);return d[d.length-1]|=w&Le?128:0,d}toHex(){return $r(this.toRawBytes())}}W.BASE=new W(t.Gx,t.Gy,Le,x(t.Gx*t.Gy)),W.ZERO=new W(We,Le,Le,We);const{BASE:K,ZERO:j}=W,Q=Qs(W,y*8);function Gt(p){return re(p,r)}function kt(p){return Gt(Qr(p))}function Z(p){const w=y;p=de("private key",p,w);const M=de("hashed private key",n(p),2*w),d=q(M.slice(0,w)),a=M.slice(w,2*w),m=kt(d),N=K.multiply(m),F=N.toRawBytes();return{head:d,prefix:a,scalar:m,point:N,pointBytes:F}}function Wt(p){return Z(p).pointBytes}function v(p=new Uint8Array,...w){const M=Kr(...w);return kt(n(R(M,de("context",p),!!o)))}function i(p,w,M={}){p=de("message",p),o&&(p=o(p));const{prefix:d,scalar:a,pointBytes:m}=Z(w),N=v(M.context,d,p),F=K.multiply(N).toRawBytes(),D=v(M.context,F,m,p),rt=Gt(N+D*a);$(rt);const J=Kr(F,vn(rt,e.BYTES));return de("result",J,y*2)}const c=Uc;function h(p,w,M,d=c){const{context:a,zip215:m}=d,N=e.BYTES;p=de("signature",p,2*N),w=de("message",w),o&&(w=o(w));const F=Qr(p.slice(N,2*N));let D,rt,J;try{D=W.fromHex(M,m),rt=W.fromHex(p.slice(0,N),m),J=K.multiplyUnsafe(F)}catch{return!1}if(!m&&D.isSmallOrder())return!1;const et=v(a,rt.toRawBytes(),D.toRawBytes(),w);return rt.add(D.multiplyUnsafe(et)).subtract(J).clearCofactor().equals(W.ZERO)}return K._setWindowSize(8),{CURVE:t,getPublicKey:Wt,sign:i,verify:h,ExtendedPoint:W,utils:{getExtendedPublicKey:Z,randomPrivateKey:()=>u(e.BYTES),precompute(p=8,w=W.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ws=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Oc=BigInt(1),bs=BigInt(2);BigInt(3);const qc=BigInt(5),Fc=BigInt(8);function zc(s){const t=BigInt(10),e=BigInt(20),r=BigInt(40),o=BigInt(80),n=Hi,y=s*s%n*s%n,b=ae(y,bs,n)*y%n,k=ae(b,Oc,n)*s%n,x=ae(k,qc,n)*k%n,E=ae(x,t,n)*x%n,q=ae(E,e,n)*E%n,R=ae(q,r,n)*q%n,I=ae(R,o,n)*R%n,B=ae(I,o,n)*R%n,A=ae(B,t,n)*x%n;return{pow_p_5_8:ae(A,bs,n)*s%n,b2:y}}function Dc(s){return s[0]&=248,s[31]&=127,s[31]|=64,s}function $c(s,t){const e=Hi,r=re(t*t*t,e),o=re(r*r*t,e),n=zc(s*o).pow_p_5_8;let u=re(s*r*n,e);const y=re(t*u*u,e),b=u,k=re(u*ws,e),x=y===s,E=y===re(-s,e),q=y===re(-s*ws,e);return x&&(u=b),(E||q)&&(u=k),Ec(u,e)&&(u=re(-u,e)),{isValid:x||E,value:u}}const Kc=Ys(Hi,void 0,!0),Wc={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Kc,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Fc,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:fc,randomBytes:Ks,adjustScalarBytes:Dc,uvRatio:$c},_n=Nc(Wc);var Gi={exports:{}};const Xn=Fi(Ta);Gi.exports;(function(s){(function(t,e){function r(v,i){if(!v)throw new Error(i||"Assertion failed")}function o(v,i){v.super_=i;var c=function(){};c.prototype=i.prototype,v.prototype=new c,v.prototype.constructor=v}function n(v,i,c){if(n.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((i==="le"||i==="be")&&(c=i,i=10),this._init(v||0,i||10,c||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=Xn.Buffer}catch{}n.isBN=function(i){return i instanceof n?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===n.wordSize&&Array.isArray(i.words)},n.max=function(i,c){return i.cmp(c)>0?i:c},n.min=function(i,c){return i.cmp(c)<0?i:c},n.prototype._init=function(i,c,h){if(typeof i=="number")return this._initNumber(i,c,h);if(typeof i=="object")return this._initArray(i,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),i=i.toString().replace(/\s+/g,"");var g=0;i[0]==="-"&&(g++,this.negative=1),g<i.length&&(c===16?this._parseHex(i,g,h):(this._parseBase(i,c,g),h==="le"&&this._initArray(this.toArray(),c,h)))},n.prototype._initNumber=function(i,c,h){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(r(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},n.prototype._initArray=function(i,c,h){if(r(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var p,w,M=0;if(h==="be")for(g=i.length-1,p=0;g>=0;g-=3)w=i[g]|i[g-1]<<8|i[g-2]<<16,this.words[p]|=w<<M&67108863,this.words[p+1]=w>>>26-M&67108863,M+=24,M>=26&&(M-=26,p++);else if(h==="le")for(g=0,p=0;g<i.length;g+=3)w=i[g]|i[g+1]<<8|i[g+2]<<16,this.words[p]|=w<<M&67108863,this.words[p+1]=w>>>26-M&67108863,M+=24,M>=26&&(M-=26,p++);return this._strip()};function y(v,i){var c=v.charCodeAt(i);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+v)}function b(v,i,c){var h=y(v,c);return c-1>=i&&(h|=y(v,c-1)<<4),h}n.prototype._parseHex=function(i,c,h){this.length=Math.ceil((i.length-c)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var p=0,w=0,M;if(h==="be")for(g=i.length-1;g>=c;g-=2)M=b(i,c,g)<<p,this.words[w]|=M&67108863,p>=18?(p-=18,w+=1,this.words[w]|=M>>>26):p+=8;else{var d=i.length-c;for(g=d%2===0?c+1:c;g<i.length;g+=2)M=b(i,c,g)<<p,this.words[w]|=M&67108863,p>=18?(p-=18,w+=1,this.words[w]|=M>>>26):p+=8}this._strip()};function k(v,i,c,h){for(var g=0,p=0,w=Math.min(v.length,c),M=i;M<w;M++){var d=v.charCodeAt(M)-48;g*=h,d>=49?p=d-49+10:d>=17?p=d-17+10:p=d,r(d>=0&&p<h,"Invalid character"),g+=p}return g}n.prototype._parseBase=function(i,c,h){this.words=[0],this.length=1;for(var g=0,p=1;p<=67108863;p*=c)g++;g--,p=p/c|0;for(var w=i.length-h,M=w%g,d=Math.min(w,w-M)+h,a=0,m=h;m<d;m+=g)a=k(i,m,m+g,c),this.imuln(p),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(M!==0){var N=1;for(a=k(i,m,i.length,c),m=0;m<M;m++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},n.prototype.copy=function(i){i.words=new Array(this.length);for(var c=0;c<this.length;c++)i.words[c]=this.words[c];i.length=this.length,i.negative=this.negative,i.red=this.red};function x(v,i){v.words=i.words,v.length=i.length,v.negative=i.negative,v.red=i.red}if(n.prototype._move=function(i){x(i,this)},n.prototype.clone=function(){var i=new n(null);return this.copy(i),i},n.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{n.prototype.inspect=E}else n.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var q=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(i,c){i=i||10,c=c|0||1;var h;if(i===16||i==="hex"){h="";for(var g=0,p=0,w=0;w<this.length;w++){var M=this.words[w],d=((M<<g|p)&16777215).toString(16);p=M>>>24-g&16777215,g+=2,g>=26&&(g-=26,w--),p!==0||w!==this.length-1?h=q[6-d.length]+d+h:h=d+h}for(p!==0&&(h=p.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(i===(i|0)&&i>=2&&i<=36){var a=R[i],m=I[i];h="";var N=this.clone();for(N.negative=0;!N.isZero();){var F=N.modrn(m).toString(i);N=N.idivn(m),N.isZero()?h=F+h:h=q[a-F.length]+F+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},n.prototype.toJSON=function(){return this.toString(16,2)},u&&(n.prototype.toBuffer=function(i,c){return this.toArrayLike(u,i,c)}),n.prototype.toArray=function(i,c){return this.toArrayLike(Array,i,c)};var B=function(i,c){return i.allocUnsafe?i.allocUnsafe(c):new i(c)};n.prototype.toArrayLike=function(i,c,h){this._strip();var g=this.byteLength(),p=h||Math.max(1,g);r(g<=p,"byte array longer than desired length"),r(p>0,"Requested array length <= 0");var w=B(i,p),M=c==="le"?"LE":"BE";return this["_toArrayLike"+M](w,g),w},n.prototype._toArrayLikeLE=function(i,c){for(var h=0,g=0,p=0,w=0;p<this.length;p++){var M=this.words[p]<<w|g;i[h++]=M&255,h<i.length&&(i[h++]=M>>8&255),h<i.length&&(i[h++]=M>>16&255),w===6?(h<i.length&&(i[h++]=M>>24&255),g=0,w=0):(g=M>>>24,w+=2)}if(h<i.length)for(i[h++]=g;h<i.length;)i[h++]=0},n.prototype._toArrayLikeBE=function(i,c){for(var h=i.length-1,g=0,p=0,w=0;p<this.length;p++){var M=this.words[p]<<w|g;i[h--]=M&255,h>=0&&(i[h--]=M>>8&255),h>=0&&(i[h--]=M>>16&255),w===6?(h>=0&&(i[h--]=M>>24&255),g=0,w=0):(g=M>>>24,w+=2)}if(h>=0)for(i[h--]=g;h>=0;)i[h--]=0},Math.clz32?n.prototype._countBits=function(i){return 32-Math.clz32(i)}:n.prototype._countBits=function(i){var c=i,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},n.prototype._zeroBits=function(i){if(i===0)return 26;var c=i,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},n.prototype.bitLength=function(){var i=this.words[this.length-1],c=this._countBits(i);return(this.length-1)*26+c};function A(v){for(var i=new Array(v.bitLength()),c=0;c<i.length;c++){var h=c/26|0,g=c%26;i[c]=v.words[h]>>>g&1}return i}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(i+=h,h!==26)break}return i},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},n.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var c=0;c<i.length;c++)this.words[c]=this.words[c]|i.words[c];return this._strip()},n.prototype.ior=function(i){return r((this.negative|i.negative)===0),this.iuor(i)},n.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},n.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},n.prototype.iuand=function(i){var c;this.length>i.length?c=i:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&i.words[h];return this.length=c.length,this._strip()},n.prototype.iand=function(i){return r((this.negative|i.negative)===0),this.iuand(i)},n.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},n.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},n.prototype.iuxor=function(i){var c,h;this.length>i.length?(c=this,h=i):(c=i,h=this);for(var g=0;g<h.length;g++)this.words[g]=c.words[g]^h.words[g];if(this!==c)for(;g<c.length;g++)this.words[g]=c.words[g];return this.length=c.length,this._strip()},n.prototype.ixor=function(i){return r((this.negative|i.negative)===0),this.iuxor(i)},n.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},n.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},n.prototype.inotn=function(i){r(typeof i=="number"&&i>=0);var c=Math.ceil(i/26)|0,h=i%26;this._expand(c),h>0&&c--;for(var g=0;g<c;g++)this.words[g]=~this.words[g]&67108863;return h>0&&(this.words[g]=~this.words[g]&67108863>>26-h),this._strip()},n.prototype.notn=function(i){return this.clone().inotn(i)},n.prototype.setn=function(i,c){r(typeof i=="number"&&i>=0);var h=i/26|0,g=i%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<g:this.words[h]=this.words[h]&~(1<<g),this._strip()},n.prototype.iadd=function(i){var c;if(this.negative!==0&&i.negative===0)return this.negative=0,c=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,c=this.isub(i),i.negative=1,c._normSign();var h,g;this.length>i.length?(h=this,g=i):(h=i,g=this);for(var p=0,w=0;w<g.length;w++)c=(h.words[w]|0)+(g.words[w]|0)+p,this.words[w]=c&67108863,p=c>>>26;for(;p!==0&&w<h.length;w++)c=(h.words[w]|0)+p,this.words[w]=c&67108863,p=c>>>26;if(this.length=h.length,p!==0)this.words[this.length]=p,this.length++;else if(h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this},n.prototype.add=function(i){var c;return i.negative!==0&&this.negative===0?(i.negative=0,c=this.sub(i),i.negative^=1,c):i.negative===0&&this.negative!==0?(this.negative=0,c=i.sub(this),this.negative=1,c):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},n.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var c=this.iadd(i);return i.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var h=this.cmp(i);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,p;h>0?(g=this,p=i):(g=i,p=this);for(var w=0,M=0;M<p.length;M++)c=(g.words[M]|0)-(p.words[M]|0)+w,w=c>>26,this.words[M]=c&67108863;for(;w!==0&&M<g.length;M++)c=(g.words[M]|0)+w,w=c>>26,this.words[M]=c&67108863;if(w===0&&M<g.length&&g!==this)for(;M<g.length;M++)this.words[M]=g.words[M];return this.length=Math.max(this.length,M),g!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(i){return this.clone().isub(i)};function P(v,i,c){c.negative=i.negative^v.negative;var h=v.length+i.length|0;c.length=h,h=h-1|0;var g=v.words[0]|0,p=i.words[0]|0,w=g*p,M=w&67108863,d=w/67108864|0;c.words[0]=M;for(var a=1;a<h;a++){for(var m=d>>>26,N=d&67108863,F=Math.min(a,i.length-1),D=Math.max(0,a-v.length+1);D<=F;D++){var rt=a-D|0;g=v.words[rt]|0,p=i.words[D]|0,w=g*p+N,m+=w/67108864|0,N=w&67108863}c.words[a]=N|0,d=m|0}return d!==0?c.words[a]=d|0:c.length--,c._strip()}var $=function(i,c,h){var g=i.words,p=c.words,w=h.words,M=0,d,a,m,N=g[0]|0,F=N&8191,D=N>>>13,rt=g[1]|0,J=rt&8191,et=rt>>>13,Xt=g[2]|0,it=Xt&8191,at=Xt>>>13,jt=g[3]|0,ht=jt&8191,lt=jt>>>13,ge=g[4]|0,pt=ge&8191,St=ge>>>13,tr=g[5]|0,wt=tr&8191,Mt=tr>>>13,Ve=g[6]|0,bt=Ve&8191,gt=Ve>>>13,he=g[7]|0,yt=he&8191,vt=he>>>13,we=g[8]|0,xt=we&8191,S=we>>>13,f=g[9]|0,l=f&8191,_=f>>>13,L=p[0]|0,T=L&8191,U=L>>>13,_t=p[1]|0,ot=_t&8191,st=_t>>>13,Jt=p[2]|0,nt=Jt&8191,Bt=Jt>>>13,fn=p[3]|0,At=fn&8191,It=fn>>>13,ln=p[4]|0,Rt=ln&8191,Lt=ln>>>13,dn=p[5]|0,Tt=dn&8191,Ct=dn>>>13,pn=p[6]|0,Ut=pn&8191,Pt=pn>>>13,gn=p[7]|0,Nt=gn&8191,Ot=gn>>>13,mn=p[8]|0,qt=mn&8191,Ft=mn>>>13,yn=p[9]|0,zt=yn&8191,Dt=yn>>>13;h.negative=i.negative^c.negative,h.length=19,d=Math.imul(F,T),a=Math.imul(F,U),a=a+Math.imul(D,T)|0,m=Math.imul(D,U);var mr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(mr>>>26)|0,mr&=67108863,d=Math.imul(J,T),a=Math.imul(J,U),a=a+Math.imul(et,T)|0,m=Math.imul(et,U),d=d+Math.imul(F,ot)|0,a=a+Math.imul(F,st)|0,a=a+Math.imul(D,ot)|0,m=m+Math.imul(D,st)|0;var yr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(yr>>>26)|0,yr&=67108863,d=Math.imul(it,T),a=Math.imul(it,U),a=a+Math.imul(at,T)|0,m=Math.imul(at,U),d=d+Math.imul(J,ot)|0,a=a+Math.imul(J,st)|0,a=a+Math.imul(et,ot)|0,m=m+Math.imul(et,st)|0,d=d+Math.imul(F,nt)|0,a=a+Math.imul(F,Bt)|0,a=a+Math.imul(D,nt)|0,m=m+Math.imul(D,Bt)|0;var wr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(wr>>>26)|0,wr&=67108863,d=Math.imul(ht,T),a=Math.imul(ht,U),a=a+Math.imul(lt,T)|0,m=Math.imul(lt,U),d=d+Math.imul(it,ot)|0,a=a+Math.imul(it,st)|0,a=a+Math.imul(at,ot)|0,m=m+Math.imul(at,st)|0,d=d+Math.imul(J,nt)|0,a=a+Math.imul(J,Bt)|0,a=a+Math.imul(et,nt)|0,m=m+Math.imul(et,Bt)|0,d=d+Math.imul(F,At)|0,a=a+Math.imul(F,It)|0,a=a+Math.imul(D,At)|0,m=m+Math.imul(D,It)|0;var br=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(br>>>26)|0,br&=67108863,d=Math.imul(pt,T),a=Math.imul(pt,U),a=a+Math.imul(St,T)|0,m=Math.imul(St,U),d=d+Math.imul(ht,ot)|0,a=a+Math.imul(ht,st)|0,a=a+Math.imul(lt,ot)|0,m=m+Math.imul(lt,st)|0,d=d+Math.imul(it,nt)|0,a=a+Math.imul(it,Bt)|0,a=a+Math.imul(at,nt)|0,m=m+Math.imul(at,Bt)|0,d=d+Math.imul(J,At)|0,a=a+Math.imul(J,It)|0,a=a+Math.imul(et,At)|0,m=m+Math.imul(et,It)|0,d=d+Math.imul(F,Rt)|0,a=a+Math.imul(F,Lt)|0,a=a+Math.imul(D,Rt)|0,m=m+Math.imul(D,Lt)|0;var vr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(vr>>>26)|0,vr&=67108863,d=Math.imul(wt,T),a=Math.imul(wt,U),a=a+Math.imul(Mt,T)|0,m=Math.imul(Mt,U),d=d+Math.imul(pt,ot)|0,a=a+Math.imul(pt,st)|0,a=a+Math.imul(St,ot)|0,m=m+Math.imul(St,st)|0,d=d+Math.imul(ht,nt)|0,a=a+Math.imul(ht,Bt)|0,a=a+Math.imul(lt,nt)|0,m=m+Math.imul(lt,Bt)|0,d=d+Math.imul(it,At)|0,a=a+Math.imul(it,It)|0,a=a+Math.imul(at,At)|0,m=m+Math.imul(at,It)|0,d=d+Math.imul(J,Rt)|0,a=a+Math.imul(J,Lt)|0,a=a+Math.imul(et,Rt)|0,m=m+Math.imul(et,Lt)|0,d=d+Math.imul(F,Tt)|0,a=a+Math.imul(F,Ct)|0,a=a+Math.imul(D,Tt)|0,m=m+Math.imul(D,Ct)|0;var xr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(xr>>>26)|0,xr&=67108863,d=Math.imul(bt,T),a=Math.imul(bt,U),a=a+Math.imul(gt,T)|0,m=Math.imul(gt,U),d=d+Math.imul(wt,ot)|0,a=a+Math.imul(wt,st)|0,a=a+Math.imul(Mt,ot)|0,m=m+Math.imul(Mt,st)|0,d=d+Math.imul(pt,nt)|0,a=a+Math.imul(pt,Bt)|0,a=a+Math.imul(St,nt)|0,m=m+Math.imul(St,Bt)|0,d=d+Math.imul(ht,At)|0,a=a+Math.imul(ht,It)|0,a=a+Math.imul(lt,At)|0,m=m+Math.imul(lt,It)|0,d=d+Math.imul(it,Rt)|0,a=a+Math.imul(it,Lt)|0,a=a+Math.imul(at,Rt)|0,m=m+Math.imul(at,Lt)|0,d=d+Math.imul(J,Tt)|0,a=a+Math.imul(J,Ct)|0,a=a+Math.imul(et,Tt)|0,m=m+Math.imul(et,Ct)|0,d=d+Math.imul(F,Ut)|0,a=a+Math.imul(F,Pt)|0,a=a+Math.imul(D,Ut)|0,m=m+Math.imul(D,Pt)|0;var Sr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,d=Math.imul(yt,T),a=Math.imul(yt,U),a=a+Math.imul(vt,T)|0,m=Math.imul(vt,U),d=d+Math.imul(bt,ot)|0,a=a+Math.imul(bt,st)|0,a=a+Math.imul(gt,ot)|0,m=m+Math.imul(gt,st)|0,d=d+Math.imul(wt,nt)|0,a=a+Math.imul(wt,Bt)|0,a=a+Math.imul(Mt,nt)|0,m=m+Math.imul(Mt,Bt)|0,d=d+Math.imul(pt,At)|0,a=a+Math.imul(pt,It)|0,a=a+Math.imul(St,At)|0,m=m+Math.imul(St,It)|0,d=d+Math.imul(ht,Rt)|0,a=a+Math.imul(ht,Lt)|0,a=a+Math.imul(lt,Rt)|0,m=m+Math.imul(lt,Lt)|0,d=d+Math.imul(it,Tt)|0,a=a+Math.imul(it,Ct)|0,a=a+Math.imul(at,Tt)|0,m=m+Math.imul(at,Ct)|0,d=d+Math.imul(J,Ut)|0,a=a+Math.imul(J,Pt)|0,a=a+Math.imul(et,Ut)|0,m=m+Math.imul(et,Pt)|0,d=d+Math.imul(F,Nt)|0,a=a+Math.imul(F,Ot)|0,a=a+Math.imul(D,Nt)|0,m=m+Math.imul(D,Ot)|0;var Mr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,d=Math.imul(xt,T),a=Math.imul(xt,U),a=a+Math.imul(S,T)|0,m=Math.imul(S,U),d=d+Math.imul(yt,ot)|0,a=a+Math.imul(yt,st)|0,a=a+Math.imul(vt,ot)|0,m=m+Math.imul(vt,st)|0,d=d+Math.imul(bt,nt)|0,a=a+Math.imul(bt,Bt)|0,a=a+Math.imul(gt,nt)|0,m=m+Math.imul(gt,Bt)|0,d=d+Math.imul(wt,At)|0,a=a+Math.imul(wt,It)|0,a=a+Math.imul(Mt,At)|0,m=m+Math.imul(Mt,It)|0,d=d+Math.imul(pt,Rt)|0,a=a+Math.imul(pt,Lt)|0,a=a+Math.imul(St,Rt)|0,m=m+Math.imul(St,Lt)|0,d=d+Math.imul(ht,Tt)|0,a=a+Math.imul(ht,Ct)|0,a=a+Math.imul(lt,Tt)|0,m=m+Math.imul(lt,Ct)|0,d=d+Math.imul(it,Ut)|0,a=a+Math.imul(it,Pt)|0,a=a+Math.imul(at,Ut)|0,m=m+Math.imul(at,Pt)|0,d=d+Math.imul(J,Nt)|0,a=a+Math.imul(J,Ot)|0,a=a+Math.imul(et,Nt)|0,m=m+Math.imul(et,Ot)|0,d=d+Math.imul(F,qt)|0,a=a+Math.imul(F,Ft)|0,a=a+Math.imul(D,qt)|0,m=m+Math.imul(D,Ft)|0;var kr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(kr>>>26)|0,kr&=67108863,d=Math.imul(l,T),a=Math.imul(l,U),a=a+Math.imul(_,T)|0,m=Math.imul(_,U),d=d+Math.imul(xt,ot)|0,a=a+Math.imul(xt,st)|0,a=a+Math.imul(S,ot)|0,m=m+Math.imul(S,st)|0,d=d+Math.imul(yt,nt)|0,a=a+Math.imul(yt,Bt)|0,a=a+Math.imul(vt,nt)|0,m=m+Math.imul(vt,Bt)|0,d=d+Math.imul(bt,At)|0,a=a+Math.imul(bt,It)|0,a=a+Math.imul(gt,At)|0,m=m+Math.imul(gt,It)|0,d=d+Math.imul(wt,Rt)|0,a=a+Math.imul(wt,Lt)|0,a=a+Math.imul(Mt,Rt)|0,m=m+Math.imul(Mt,Lt)|0,d=d+Math.imul(pt,Tt)|0,a=a+Math.imul(pt,Ct)|0,a=a+Math.imul(St,Tt)|0,m=m+Math.imul(St,Ct)|0,d=d+Math.imul(ht,Ut)|0,a=a+Math.imul(ht,Pt)|0,a=a+Math.imul(lt,Ut)|0,m=m+Math.imul(lt,Pt)|0,d=d+Math.imul(it,Nt)|0,a=a+Math.imul(it,Ot)|0,a=a+Math.imul(at,Nt)|0,m=m+Math.imul(at,Ot)|0,d=d+Math.imul(J,qt)|0,a=a+Math.imul(J,Ft)|0,a=a+Math.imul(et,qt)|0,m=m+Math.imul(et,Ft)|0,d=d+Math.imul(F,zt)|0,a=a+Math.imul(F,Dt)|0,a=a+Math.imul(D,zt)|0,m=m+Math.imul(D,Dt)|0;var _r=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(_r>>>26)|0,_r&=67108863,d=Math.imul(l,ot),a=Math.imul(l,st),a=a+Math.imul(_,ot)|0,m=Math.imul(_,st),d=d+Math.imul(xt,nt)|0,a=a+Math.imul(xt,Bt)|0,a=a+Math.imul(S,nt)|0,m=m+Math.imul(S,Bt)|0,d=d+Math.imul(yt,At)|0,a=a+Math.imul(yt,It)|0,a=a+Math.imul(vt,At)|0,m=m+Math.imul(vt,It)|0,d=d+Math.imul(bt,Rt)|0,a=a+Math.imul(bt,Lt)|0,a=a+Math.imul(gt,Rt)|0,m=m+Math.imul(gt,Lt)|0,d=d+Math.imul(wt,Tt)|0,a=a+Math.imul(wt,Ct)|0,a=a+Math.imul(Mt,Tt)|0,m=m+Math.imul(Mt,Ct)|0,d=d+Math.imul(pt,Ut)|0,a=a+Math.imul(pt,Pt)|0,a=a+Math.imul(St,Ut)|0,m=m+Math.imul(St,Pt)|0,d=d+Math.imul(ht,Nt)|0,a=a+Math.imul(ht,Ot)|0,a=a+Math.imul(lt,Nt)|0,m=m+Math.imul(lt,Ot)|0,d=d+Math.imul(it,qt)|0,a=a+Math.imul(it,Ft)|0,a=a+Math.imul(at,qt)|0,m=m+Math.imul(at,Ft)|0,d=d+Math.imul(J,zt)|0,a=a+Math.imul(J,Dt)|0,a=a+Math.imul(et,zt)|0,m=m+Math.imul(et,Dt)|0;var Er=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Er>>>26)|0,Er&=67108863,d=Math.imul(l,nt),a=Math.imul(l,Bt),a=a+Math.imul(_,nt)|0,m=Math.imul(_,Bt),d=d+Math.imul(xt,At)|0,a=a+Math.imul(xt,It)|0,a=a+Math.imul(S,At)|0,m=m+Math.imul(S,It)|0,d=d+Math.imul(yt,Rt)|0,a=a+Math.imul(yt,Lt)|0,a=a+Math.imul(vt,Rt)|0,m=m+Math.imul(vt,Lt)|0,d=d+Math.imul(bt,Tt)|0,a=a+Math.imul(bt,Ct)|0,a=a+Math.imul(gt,Tt)|0,m=m+Math.imul(gt,Ct)|0,d=d+Math.imul(wt,Ut)|0,a=a+Math.imul(wt,Pt)|0,a=a+Math.imul(Mt,Ut)|0,m=m+Math.imul(Mt,Pt)|0,d=d+Math.imul(pt,Nt)|0,a=a+Math.imul(pt,Ot)|0,a=a+Math.imul(St,Nt)|0,m=m+Math.imul(St,Ot)|0,d=d+Math.imul(ht,qt)|0,a=a+Math.imul(ht,Ft)|0,a=a+Math.imul(lt,qt)|0,m=m+Math.imul(lt,Ft)|0,d=d+Math.imul(it,zt)|0,a=a+Math.imul(it,Dt)|0,a=a+Math.imul(at,zt)|0,m=m+Math.imul(at,Dt)|0;var Br=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Br>>>26)|0,Br&=67108863,d=Math.imul(l,At),a=Math.imul(l,It),a=a+Math.imul(_,At)|0,m=Math.imul(_,It),d=d+Math.imul(xt,Rt)|0,a=a+Math.imul(xt,Lt)|0,a=a+Math.imul(S,Rt)|0,m=m+Math.imul(S,Lt)|0,d=d+Math.imul(yt,Tt)|0,a=a+Math.imul(yt,Ct)|0,a=a+Math.imul(vt,Tt)|0,m=m+Math.imul(vt,Ct)|0,d=d+Math.imul(bt,Ut)|0,a=a+Math.imul(bt,Pt)|0,a=a+Math.imul(gt,Ut)|0,m=m+Math.imul(gt,Pt)|0,d=d+Math.imul(wt,Nt)|0,a=a+Math.imul(wt,Ot)|0,a=a+Math.imul(Mt,Nt)|0,m=m+Math.imul(Mt,Ot)|0,d=d+Math.imul(pt,qt)|0,a=a+Math.imul(pt,Ft)|0,a=a+Math.imul(St,qt)|0,m=m+Math.imul(St,Ft)|0,d=d+Math.imul(ht,zt)|0,a=a+Math.imul(ht,Dt)|0,a=a+Math.imul(lt,zt)|0,m=m+Math.imul(lt,Dt)|0;var Ar=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,d=Math.imul(l,Rt),a=Math.imul(l,Lt),a=a+Math.imul(_,Rt)|0,m=Math.imul(_,Lt),d=d+Math.imul(xt,Tt)|0,a=a+Math.imul(xt,Ct)|0,a=a+Math.imul(S,Tt)|0,m=m+Math.imul(S,Ct)|0,d=d+Math.imul(yt,Ut)|0,a=a+Math.imul(yt,Pt)|0,a=a+Math.imul(vt,Ut)|0,m=m+Math.imul(vt,Pt)|0,d=d+Math.imul(bt,Nt)|0,a=a+Math.imul(bt,Ot)|0,a=a+Math.imul(gt,Nt)|0,m=m+Math.imul(gt,Ot)|0,d=d+Math.imul(wt,qt)|0,a=a+Math.imul(wt,Ft)|0,a=a+Math.imul(Mt,qt)|0,m=m+Math.imul(Mt,Ft)|0,d=d+Math.imul(pt,zt)|0,a=a+Math.imul(pt,Dt)|0,a=a+Math.imul(St,zt)|0,m=m+Math.imul(St,Dt)|0;var Ir=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,d=Math.imul(l,Tt),a=Math.imul(l,Ct),a=a+Math.imul(_,Tt)|0,m=Math.imul(_,Ct),d=d+Math.imul(xt,Ut)|0,a=a+Math.imul(xt,Pt)|0,a=a+Math.imul(S,Ut)|0,m=m+Math.imul(S,Pt)|0,d=d+Math.imul(yt,Nt)|0,a=a+Math.imul(yt,Ot)|0,a=a+Math.imul(vt,Nt)|0,m=m+Math.imul(vt,Ot)|0,d=d+Math.imul(bt,qt)|0,a=a+Math.imul(bt,Ft)|0,a=a+Math.imul(gt,qt)|0,m=m+Math.imul(gt,Ft)|0,d=d+Math.imul(wt,zt)|0,a=a+Math.imul(wt,Dt)|0,a=a+Math.imul(Mt,zt)|0,m=m+Math.imul(Mt,Dt)|0;var Rr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,d=Math.imul(l,Ut),a=Math.imul(l,Pt),a=a+Math.imul(_,Ut)|0,m=Math.imul(_,Pt),d=d+Math.imul(xt,Nt)|0,a=a+Math.imul(xt,Ot)|0,a=a+Math.imul(S,Nt)|0,m=m+Math.imul(S,Ot)|0,d=d+Math.imul(yt,qt)|0,a=a+Math.imul(yt,Ft)|0,a=a+Math.imul(vt,qt)|0,m=m+Math.imul(vt,Ft)|0,d=d+Math.imul(bt,zt)|0,a=a+Math.imul(bt,Dt)|0,a=a+Math.imul(gt,zt)|0,m=m+Math.imul(gt,Dt)|0;var Lr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,d=Math.imul(l,Nt),a=Math.imul(l,Ot),a=a+Math.imul(_,Nt)|0,m=Math.imul(_,Ot),d=d+Math.imul(xt,qt)|0,a=a+Math.imul(xt,Ft)|0,a=a+Math.imul(S,qt)|0,m=m+Math.imul(S,Ft)|0,d=d+Math.imul(yt,zt)|0,a=a+Math.imul(yt,Dt)|0,a=a+Math.imul(vt,zt)|0,m=m+Math.imul(vt,Dt)|0;var Tr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,d=Math.imul(l,qt),a=Math.imul(l,Ft),a=a+Math.imul(_,qt)|0,m=Math.imul(_,Ft),d=d+Math.imul(xt,zt)|0,a=a+Math.imul(xt,Dt)|0,a=a+Math.imul(S,zt)|0,m=m+Math.imul(S,Dt)|0;var Cr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,d=Math.imul(l,zt),a=Math.imul(l,Dt),a=a+Math.imul(_,zt)|0,m=Math.imul(_,Dt);var Ur=(M+d|0)+((a&8191)<<13)|0;return M=(m+(a>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,w[0]=mr,w[1]=yr,w[2]=wr,w[3]=br,w[4]=vr,w[5]=xr,w[6]=Sr,w[7]=Mr,w[8]=kr,w[9]=_r,w[10]=Er,w[11]=Br,w[12]=Ar,w[13]=Ir,w[14]=Rr,w[15]=Lr,w[16]=Tr,w[17]=Cr,w[18]=Ur,M!==0&&(w[19]=M,h.length++),h};Math.imul||($=P);function z(v,i,c){c.negative=i.negative^v.negative,c.length=v.length+i.length;for(var h=0,g=0,p=0;p<c.length-1;p++){var w=g;g=0;for(var M=h&67108863,d=Math.min(p,i.length-1),a=Math.max(0,p-v.length+1);a<=d;a++){var m=p-a,N=v.words[m]|0,F=i.words[a]|0,D=N*F,rt=D&67108863;w=w+(D/67108864|0)|0,rt=rt+M|0,M=rt&67108863,w=w+(rt>>>26)|0,g+=w>>>26,w&=67108863}c.words[p]=M,h=w,w=g}return h!==0?c.words[p]=h:c.length--,c._strip()}function V(v,i,c){return z(v,i,c)}n.prototype.mulTo=function(i,c){var h,g=this.length+i.length;return this.length===10&&i.length===10?h=$(this,i,c):g<63?h=P(this,i,c):g<1024?h=z(this,i,c):h=V(this,i,c),h},n.prototype.mul=function(i){var c=new n(null);return c.words=new Array(this.length+i.length),this.mulTo(i,c)},n.prototype.mulf=function(i){var c=new n(null);return c.words=new Array(this.length+i.length),V(this,i,c)},n.prototype.imul=function(i){return this.clone().mulTo(i,this)},n.prototype.imuln=function(i){var c=i<0;c&&(i=-i),r(typeof i=="number"),r(i<67108864);for(var h=0,g=0;g<this.length;g++){var p=(this.words[g]|0)*i,w=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=w>>>26,this.words[g]=w&67108863}return h!==0&&(this.words[g]=h,this.length++),c?this.ineg():this},n.prototype.muln=function(i){return this.clone().imuln(i)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(i){var c=A(i);if(c.length===0)return new n(1);for(var h=this,g=0;g<c.length&&c[g]===0;g++,h=h.sqr());if(++g<c.length)for(var p=h.sqr();g<c.length;g++,p=p.sqr())c[g]!==0&&(h=h.mul(p));return h},n.prototype.iushln=function(i){r(typeof i=="number"&&i>=0);var c=i%26,h=(i-c)/26,g=67108863>>>26-c<<26-c,p;if(c!==0){var w=0;for(p=0;p<this.length;p++){var M=this.words[p]&g,d=(this.words[p]|0)-M<<c;this.words[p]=d|w,w=M>>>26-c}w&&(this.words[p]=w,this.length++)}if(h!==0){for(p=this.length-1;p>=0;p--)this.words[p+h]=this.words[p];for(p=0;p<h;p++)this.words[p]=0;this.length+=h}return this._strip()},n.prototype.ishln=function(i){return r(this.negative===0),this.iushln(i)},n.prototype.iushrn=function(i,c,h){r(typeof i=="number"&&i>=0);var g;c?g=(c-c%26)/26:g=0;var p=i%26,w=Math.min((i-p)/26,this.length),M=67108863^67108863>>>p<<p,d=h;if(g-=w,g=Math.max(0,g),d){for(var a=0;a<w;a++)d.words[a]=this.words[a];d.length=w}if(w!==0)if(this.length>w)for(this.length-=w,a=0;a<this.length;a++)this.words[a]=this.words[a+w];else this.words[0]=0,this.length=1;var m=0;for(a=this.length-1;a>=0&&(m!==0||a>=g);a--){var N=this.words[a]|0;this.words[a]=m<<26-p|N>>>p,m=N&M}return d&&m!==0&&(d.words[d.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(i,c,h){return r(this.negative===0),this.iushrn(i,c,h)},n.prototype.shln=function(i){return this.clone().ishln(i)},n.prototype.ushln=function(i){return this.clone().iushln(i)},n.prototype.shrn=function(i){return this.clone().ishrn(i)},n.prototype.ushrn=function(i){return this.clone().iushrn(i)},n.prototype.testn=function(i){r(typeof i=="number"&&i>=0);var c=i%26,h=(i-c)/26,g=1<<c;if(this.length<=h)return!1;var p=this.words[h];return!!(p&g)},n.prototype.imaskn=function(i){r(typeof i=="number"&&i>=0);var c=i%26,h=(i-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var g=67108863^67108863>>>c<<c;this.words[this.length-1]&=g}return this._strip()},n.prototype.maskn=function(i){return this.clone().imaskn(i)},n.prototype.iaddn=function(i){return r(typeof i=="number"),r(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},n.prototype._iaddn=function(i){this.words[0]+=i;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},n.prototype.isubn=function(i){if(r(typeof i=="number"),r(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},n.prototype.addn=function(i){return this.clone().iaddn(i)},n.prototype.subn=function(i){return this.clone().isubn(i)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(i,c,h){var g=i.length+h,p;this._expand(g);var w,M=0;for(p=0;p<i.length;p++){w=(this.words[p+h]|0)+M;var d=(i.words[p]|0)*c;w-=d&67108863,M=(w>>26)-(d/67108864|0),this.words[p+h]=w&67108863}for(;p<this.length-h;p++)w=(this.words[p+h]|0)+M,M=w>>26,this.words[p+h]=w&67108863;if(M===0)return this._strip();for(r(M===-1),M=0,p=0;p<this.length;p++)w=-(this.words[p]|0)+M,M=w>>26,this.words[p]=w&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(i,c){var h=this.length-i.length,g=this.clone(),p=i,w=p.words[p.length-1]|0,M=this._countBits(w);h=26-M,h!==0&&(p=p.ushln(h),g.iushln(h),w=p.words[p.length-1]|0);var d=g.length-p.length,a;if(c!=="mod"){a=new n(null),a.length=d+1,a.words=new Array(a.length);for(var m=0;m<a.length;m++)a.words[m]=0}var N=g.clone()._ishlnsubmul(p,1,d);N.negative===0&&(g=N,a&&(a.words[d]=1));for(var F=d-1;F>=0;F--){var D=(g.words[p.length+F]|0)*67108864+(g.words[p.length+F-1]|0);for(D=Math.min(D/w|0,67108863),g._ishlnsubmul(p,D,F);g.negative!==0;)D--,g.negative=0,g._ishlnsubmul(p,1,F),g.isZero()||(g.negative^=1);a&&(a.words[F]=D)}return a&&a._strip(),g._strip(),c!=="div"&&h!==0&&g.iushrn(h),{div:a||null,mod:g}},n.prototype.divmod=function(i,c,h){if(r(!i.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var g,p,w;return this.negative!==0&&i.negative===0?(w=this.neg().divmod(i,c),c!=="mod"&&(g=w.div.neg()),c!=="div"&&(p=w.mod.neg(),h&&p.negative!==0&&p.iadd(i)),{div:g,mod:p}):this.negative===0&&i.negative!==0?(w=this.divmod(i.neg(),c),c!=="mod"&&(g=w.div.neg()),{div:g,mod:w.mod}):this.negative&i.negative?(w=this.neg().divmod(i.neg(),c),c!=="div"&&(p=w.mod.neg(),h&&p.negative!==0&&p.isub(i)),{div:w.div,mod:p}):i.length>this.length||this.cmp(i)<0?{div:new n(0),mod:this}:i.length===1?c==="div"?{div:this.divn(i.words[0]),mod:null}:c==="mod"?{div:null,mod:new n(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new n(this.modrn(i.words[0]))}:this._wordDiv(i,c)},n.prototype.div=function(i){return this.divmod(i,"div",!1).div},n.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},n.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},n.prototype.divRound=function(i){var c=this.divmod(i);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(i):c.mod,g=i.ushrn(1),p=i.andln(1),w=h.cmp(g);return w<0||p===1&&w===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},n.prototype.modrn=function(i){var c=i<0;c&&(i=-i),r(i<=67108863);for(var h=(1<<26)%i,g=0,p=this.length-1;p>=0;p--)g=(h*g+(this.words[p]|0))%i;return c?-g:g},n.prototype.modn=function(i){return this.modrn(i)},n.prototype.idivn=function(i){var c=i<0;c&&(i=-i),r(i<=67108863);for(var h=0,g=this.length-1;g>=0;g--){var p=(this.words[g]|0)+h*67108864;this.words[g]=p/i|0,h=p%i}return this._strip(),c?this.ineg():this},n.prototype.divn=function(i){return this.clone().idivn(i)},n.prototype.egcd=function(i){r(i.negative===0),r(!i.isZero());var c=this,h=i.clone();c.negative!==0?c=c.umod(i):c=c.clone();for(var g=new n(1),p=new n(0),w=new n(0),M=new n(1),d=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++d;for(var a=h.clone(),m=c.clone();!c.isZero();){for(var N=0,F=1;!(c.words[0]&F)&&N<26;++N,F<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(g.isOdd()||p.isOdd())&&(g.iadd(a),p.isub(m)),g.iushrn(1),p.iushrn(1);for(var D=0,rt=1;!(h.words[0]&rt)&&D<26;++D,rt<<=1);if(D>0)for(h.iushrn(D);D-- >0;)(w.isOdd()||M.isOdd())&&(w.iadd(a),M.isub(m)),w.iushrn(1),M.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(w),p.isub(M)):(h.isub(c),w.isub(g),M.isub(p))}return{a:w,b:M,gcd:h.iushln(d)}},n.prototype._invmp=function(i){r(i.negative===0),r(!i.isZero());var c=this,h=i.clone();c.negative!==0?c=c.umod(i):c=c.clone();for(var g=new n(1),p=new n(0),w=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var M=0,d=1;!(c.words[0]&d)&&M<26;++M,d<<=1);if(M>0)for(c.iushrn(M);M-- >0;)g.isOdd()&&g.iadd(w),g.iushrn(1);for(var a=0,m=1;!(h.words[0]&m)&&a<26;++a,m<<=1);if(a>0)for(h.iushrn(a);a-- >0;)p.isOdd()&&p.iadd(w),p.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(p)):(h.isub(c),p.isub(g))}var N;return c.cmpn(1)===0?N=g:N=p,N.cmpn(0)<0&&N.iadd(i),N},n.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var c=this.clone(),h=i.clone();c.negative=0,h.negative=0;for(var g=0;c.isEven()&&h.isEven();g++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var p=c.cmp(h);if(p<0){var w=c;c=h,h=w}else if(p===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(g)},n.prototype.invm=function(i){return this.egcd(i).a.umod(i)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(i){return this.words[0]&i},n.prototype.bincn=function(i){r(typeof i=="number");var c=i%26,h=(i-c)/26,g=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=g,this;for(var p=g,w=h;p!==0&&w<this.length;w++){var M=this.words[w]|0;M+=p,p=M>>>26,M&=67108863,this.words[w]=M}return p!==0&&(this.words[w]=p,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(i){var c=i<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(i=-i),r(i<=67108863,"Number is too big");var g=this.words[0]|0;h=g===i?0:g<i?-1:1}return this.negative!==0?-h|0:h},n.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var c=this.ucmp(i);return this.negative!==0?-c|0:c},n.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var g=this.words[h]|0,p=i.words[h]|0;if(g!==p){g<p?c=-1:g>p&&(c=1);break}}return c},n.prototype.gtn=function(i){return this.cmpn(i)===1},n.prototype.gt=function(i){return this.cmp(i)===1},n.prototype.gten=function(i){return this.cmpn(i)>=0},n.prototype.gte=function(i){return this.cmp(i)>=0},n.prototype.ltn=function(i){return this.cmpn(i)===-1},n.prototype.lt=function(i){return this.cmp(i)===-1},n.prototype.lten=function(i){return this.cmpn(i)<=0},n.prototype.lte=function(i){return this.cmp(i)<=0},n.prototype.eqn=function(i){return this.cmpn(i)===0},n.prototype.eq=function(i){return this.cmp(i)===0},n.red=function(i){return new Z(i)},n.prototype.toRed=function(i){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(i){return this.red=i,this},n.prototype.forceRed=function(i){return r(!this.red,"Already a number in reduction context"),this._forceRed(i)},n.prototype.redAdd=function(i){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},n.prototype.redIAdd=function(i){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},n.prototype.redSub=function(i){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},n.prototype.redISub=function(i){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},n.prototype.redShl=function(i){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},n.prototype.redMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},n.prototype.redIMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(i){return r(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var W={k256:null,p224:null,p192:null,p25519:null};function K(v,i){this.name=v,this.p=new n(i,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var i=new n(null);return i.words=new Array(Math.ceil(this.n/13)),i},K.prototype.ireduce=function(i){var c=i,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var g=h<this.n?-1:c.ucmp(this.p);return g===0?(c.words[0]=0,c.length=1):g>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},K.prototype.split=function(i,c){i.iushrn(this.n,0,c)},K.prototype.imulK=function(i){return i.imul(this.k)};function j(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(j,K),j.prototype.split=function(i,c){for(var h=4194303,g=Math.min(i.length,9),p=0;p<g;p++)c.words[p]=i.words[p];if(c.length=g,i.length<=9){i.words[0]=0,i.length=1;return}var w=i.words[9];for(c.words[c.length++]=w&h,p=10;p<i.length;p++){var M=i.words[p]|0;i.words[p-10]=(M&h)<<4|w>>>22,w=M}w>>>=22,i.words[p-10]=w,w===0&&i.length>10?i.length-=10:i.length-=9},j.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var c=0,h=0;h<i.length;h++){var g=i.words[h]|0;c+=g*977,i.words[h]=c&67108863,c=g*64+(c/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function Q(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(Q,K);function Gt(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Gt,K);function kt(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(kt,K),kt.prototype.imulK=function(i){for(var c=0,h=0;h<i.length;h++){var g=(i.words[h]|0)*19+c,p=g&67108863;g>>>=26,i.words[h]=p,c=g}return c!==0&&(i.words[i.length++]=c),i},n._prime=function(i){if(W[i])return W[i];var c;if(i==="k256")c=new j;else if(i==="p224")c=new Q;else if(i==="p192")c=new Gt;else if(i==="p25519")c=new kt;else throw new Error("Unknown prime "+i);return W[i]=c,c};function Z(v){if(typeof v=="string"){var i=n._prime(v);this.m=i.p,this.prime=i}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}Z.prototype._verify1=function(i){r(i.negative===0,"red works only with positives"),r(i.red,"red works only with red numbers")},Z.prototype._verify2=function(i,c){r((i.negative|c.negative)===0,"red works only with positives"),r(i.red&&i.red===c.red,"red works only with red numbers")},Z.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(x(i,i.umod(this.m)._forceRed(this)),i)},Z.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},Z.prototype.add=function(i,c){this._verify2(i,c);var h=i.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},Z.prototype.iadd=function(i,c){this._verify2(i,c);var h=i.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},Z.prototype.sub=function(i,c){this._verify2(i,c);var h=i.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},Z.prototype.isub=function(i,c){this._verify2(i,c);var h=i.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},Z.prototype.shl=function(i,c){return this._verify1(i),this.imod(i.ushln(c))},Z.prototype.imul=function(i,c){return this._verify2(i,c),this.imod(i.imul(c))},Z.prototype.mul=function(i,c){return this._verify2(i,c),this.imod(i.mul(c))},Z.prototype.isqr=function(i){return this.imul(i,i.clone())},Z.prototype.sqr=function(i){return this.mul(i,i)},Z.prototype.sqrt=function(i){if(i.isZero())return i.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new n(1)).iushrn(2);return this.pow(i,h)}for(var g=this.m.subn(1),p=0;!g.isZero()&&g.andln(1)===0;)p++,g.iushrn(1);r(!g.isZero());var w=new n(1).toRed(this),M=w.redNeg(),d=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new n(2*a*a).toRed(this);this.pow(a,d).cmp(M)!==0;)a.redIAdd(M);for(var m=this.pow(a,g),N=this.pow(i,g.addn(1).iushrn(1)),F=this.pow(i,g),D=p;F.cmp(w)!==0;){for(var rt=F,J=0;rt.cmp(w)!==0;J++)rt=rt.redSqr();r(J<D);var et=this.pow(m,new n(1).iushln(D-J-1));N=N.redMul(et),m=et.redSqr(),F=F.redMul(m),D=J}return N},Z.prototype.invm=function(i){var c=i._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},Z.prototype.pow=function(i,c){if(c.isZero())return new n(1).toRed(this);if(c.cmpn(1)===0)return i.clone();var h=4,g=new Array(1<<h);g[0]=new n(1).toRed(this),g[1]=i;for(var p=2;p<g.length;p++)g[p]=this.mul(g[p-1],i);var w=g[0],M=0,d=0,a=c.bitLength()%26;for(a===0&&(a=26),p=c.length-1;p>=0;p--){for(var m=c.words[p],N=a-1;N>=0;N--){var F=m>>N&1;if(w!==g[0]&&(w=this.sqr(w)),F===0&&M===0){d=0;continue}M<<=1,M|=F,d++,!(d!==h&&(p!==0||N!==0))&&(w=this.mul(w,g[M]),d=0,M=0)}a=26}return w},Z.prototype.convertTo=function(i){var c=i.umod(this.m);return c===i?c.clone():c},Z.prototype.convertFrom=function(i){var c=i.clone();return c.red=null,c},n.mont=function(i){return new Wt(i)};function Wt(v){Z.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(Wt,Z),Wt.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},Wt.prototype.convertFrom=function(i){var c=this.imod(i.mul(this.rinv));return c.red=null,c},Wt.prototype.imul=function(i,c){if(i.isZero()||c.isZero())return i.words[0]=0,i.length=1,i;var h=i.imul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(g).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},Wt.prototype.mul=function(i,c){if(i.isZero()||c.isZero())return new n(0)._forceRed(this);var h=i.mul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(g).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},Wt.prototype.invm=function(i){var c=this.imod(i._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(s,Ke)})(Gi);var Hc=Gi.exports;const vs=Zn(Hc);var Ii={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(s,t){var e=Xn,r=e.Buffer;function o(u,y){for(var b in u)y[b]=u[b]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?s.exports=e:(o(e,t),t.Buffer=n);function n(u,y,b){return r(u,y,b)}n.prototype=Object.create(r.prototype),o(r,n),n.from=function(u,y,b){if(typeof u=="number")throw new TypeError("Argument must not be a number");return r(u,y,b)},n.alloc=function(u,y,b){if(typeof u!="number")throw new TypeError("Argument must be a number");var k=r(u);return y!==void 0?typeof b=="string"?k.fill(y,b):k.fill(y):k.fill(0),k},n.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r(u)},n.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(u)}})(Ii,Ii.exports);var to=Ii.exports,Tn=to.Buffer;function Gc(s){if(s.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<s.length;r++){var o=s.charAt(r),n=o.charCodeAt(0);if(t[n]!==255)throw new TypeError(o+" is ambiguous");t[n]=r}var u=s.length,y=s.charAt(0),b=Math.log(u)/Math.log(256),k=Math.log(256)/Math.log(u);function x(R){if((Array.isArray(R)||R instanceof Uint8Array)&&(R=Tn.from(R)),!Tn.isBuffer(R))throw new TypeError("Expected Buffer");if(R.length===0)return"";for(var I=0,B=0,A=0,P=R.length;A!==P&&R[A]===0;)A++,I++;for(var $=(P-A)*k+1>>>0,z=new Uint8Array($);A!==P;){for(var V=R[A],W=0,K=$-1;(V!==0||W<B)&&K!==-1;K--,W++)V+=256*z[K]>>>0,z[K]=V%u>>>0,V=V/u>>>0;if(V!==0)throw new Error("Non-zero carry");B=W,A++}for(var j=$-B;j!==$&&z[j]===0;)j++;for(var Q=y.repeat(I);j<$;++j)Q+=s.charAt(z[j]);return Q}function E(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return Tn.alloc(0);for(var I=0,B=0,A=0;R[I]===y;)B++,I++;for(var P=(R.length-I)*b+1>>>0,$=new Uint8Array(P);I<R.length;){var z=t[R.charCodeAt(I)];if(z===255)return;for(var V=0,W=P-1;(z!==0||V<A)&&W!==-1;W--,V++)z+=u*$[W]>>>0,$[W]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");A=V,I++}for(var K=P-A;K!==P&&$[K]===0;)K++;var j=Tn.allocUnsafe(B+(P-K));j.fill(0,0,B);for(var Q=B;K!==P;)j[Q++]=$[K++];return j}function q(R){var I=E(R);if(I)return I;throw new Error("Non-base"+u+" character")}return{encode:x,decodeUnsafe:E,decode:q}}var Vc=Gc,Zc=Vc,jc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Yc=Zc(jc);const Se=Zn(Yc),Jc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ur=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hr=new Uint32Array(64);class Xc extends Ws{constructor(){super(64,32,8,!1),this.A=ur[0]|0,this.B=ur[1]|0,this.C=ur[2]|0,this.D=ur[3]|0,this.E=ur[4]|0,this.F=ur[5]|0,this.G=ur[6]|0,this.H=ur[7]|0}get(){const{A:t,B:e,C:r,D:o,E:n,F:u,G:y,H:b}=this;return[t,e,r,o,n,u,y,b]}set(t,e,r,o,n,u,y,b){this.A=t|0,this.B=e|0,this.C=r|0,this.D=o|0,this.E=n|0,this.F=u|0,this.G=y|0,this.H=b|0}process(t,e){for(let E=0;E<16;E++,e+=4)hr[E]=t.getUint32(e,!1);for(let E=16;E<64;E++){const q=hr[E-15],R=hr[E-2],I=Ze(q,7)^Ze(q,18)^q>>>3,B=Ze(R,17)^Ze(R,19)^R>>>10;hr[E]=B+hr[E-7]+I+hr[E-16]|0}let{A:r,B:o,C:n,D:u,E:y,F:b,G:k,H:x}=this;for(let E=0;E<64;E++){const q=Ze(y,6)^Ze(y,11)^Ze(y,25),R=x+q+Fa(y,b,k)+Jc[E]+hr[E]|0,B=(Ze(r,2)^Ze(r,13)^Ze(r,22))+za(r,o,n)|0;x=k,k=b,b=y,y=u+R|0,u=n,n=o,o=r,r=R+B|0}r=r+this.A|0,o=o+this.B|0,n=n+this.C|0,u=u+this.D|0,y=y+this.E|0,b=b+this.F|0,k=k+this.G|0,x=x+this.H|0,this.set(r,o,n,u,y,b,k,x)}roundClean(){hr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ri=$s(()=>new Xc);var xe={},Vi={exports:{}};Vi.exports;(function(s){(function(t,e){function r(v,i){if(!v)throw new Error(i||"Assertion failed")}function o(v,i){v.super_=i;var c=function(){};c.prototype=i.prototype,v.prototype=new c,v.prototype.constructor=v}function n(v,i,c){if(n.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((i==="le"||i==="be")&&(c=i,i=10),this._init(v||0,i||10,c||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=Xn.Buffer}catch{}n.isBN=function(i){return i instanceof n?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===n.wordSize&&Array.isArray(i.words)},n.max=function(i,c){return i.cmp(c)>0?i:c},n.min=function(i,c){return i.cmp(c)<0?i:c},n.prototype._init=function(i,c,h){if(typeof i=="number")return this._initNumber(i,c,h);if(typeof i=="object")return this._initArray(i,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),i=i.toString().replace(/\s+/g,"");var g=0;i[0]==="-"&&(g++,this.negative=1),g<i.length&&(c===16?this._parseHex(i,g,h):(this._parseBase(i,c,g),h==="le"&&this._initArray(this.toArray(),c,h)))},n.prototype._initNumber=function(i,c,h){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(r(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},n.prototype._initArray=function(i,c,h){if(r(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var p,w,M=0;if(h==="be")for(g=i.length-1,p=0;g>=0;g-=3)w=i[g]|i[g-1]<<8|i[g-2]<<16,this.words[p]|=w<<M&67108863,this.words[p+1]=w>>>26-M&67108863,M+=24,M>=26&&(M-=26,p++);else if(h==="le")for(g=0,p=0;g<i.length;g+=3)w=i[g]|i[g+1]<<8|i[g+2]<<16,this.words[p]|=w<<M&67108863,this.words[p+1]=w>>>26-M&67108863,M+=24,M>=26&&(M-=26,p++);return this._strip()};function y(v,i){var c=v.charCodeAt(i);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+v)}function b(v,i,c){var h=y(v,c);return c-1>=i&&(h|=y(v,c-1)<<4),h}n.prototype._parseHex=function(i,c,h){this.length=Math.ceil((i.length-c)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var p=0,w=0,M;if(h==="be")for(g=i.length-1;g>=c;g-=2)M=b(i,c,g)<<p,this.words[w]|=M&67108863,p>=18?(p-=18,w+=1,this.words[w]|=M>>>26):p+=8;else{var d=i.length-c;for(g=d%2===0?c+1:c;g<i.length;g+=2)M=b(i,c,g)<<p,this.words[w]|=M&67108863,p>=18?(p-=18,w+=1,this.words[w]|=M>>>26):p+=8}this._strip()};function k(v,i,c,h){for(var g=0,p=0,w=Math.min(v.length,c),M=i;M<w;M++){var d=v.charCodeAt(M)-48;g*=h,d>=49?p=d-49+10:d>=17?p=d-17+10:p=d,r(d>=0&&p<h,"Invalid character"),g+=p}return g}n.prototype._parseBase=function(i,c,h){this.words=[0],this.length=1;for(var g=0,p=1;p<=67108863;p*=c)g++;g--,p=p/c|0;for(var w=i.length-h,M=w%g,d=Math.min(w,w-M)+h,a=0,m=h;m<d;m+=g)a=k(i,m,m+g,c),this.imuln(p),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(M!==0){var N=1;for(a=k(i,m,i.length,c),m=0;m<M;m++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},n.prototype.copy=function(i){i.words=new Array(this.length);for(var c=0;c<this.length;c++)i.words[c]=this.words[c];i.length=this.length,i.negative=this.negative,i.red=this.red};function x(v,i){v.words=i.words,v.length=i.length,v.negative=i.negative,v.red=i.red}if(n.prototype._move=function(i){x(i,this)},n.prototype.clone=function(){var i=new n(null);return this.copy(i),i},n.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{n.prototype.inspect=E}else n.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var q=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(i,c){i=i||10,c=c|0||1;var h;if(i===16||i==="hex"){h="";for(var g=0,p=0,w=0;w<this.length;w++){var M=this.words[w],d=((M<<g|p)&16777215).toString(16);p=M>>>24-g&16777215,g+=2,g>=26&&(g-=26,w--),p!==0||w!==this.length-1?h=q[6-d.length]+d+h:h=d+h}for(p!==0&&(h=p.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(i===(i|0)&&i>=2&&i<=36){var a=R[i],m=I[i];h="";var N=this.clone();for(N.negative=0;!N.isZero();){var F=N.modrn(m).toString(i);N=N.idivn(m),N.isZero()?h=F+h:h=q[a-F.length]+F+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},n.prototype.toJSON=function(){return this.toString(16,2)},u&&(n.prototype.toBuffer=function(i,c){return this.toArrayLike(u,i,c)}),n.prototype.toArray=function(i,c){return this.toArrayLike(Array,i,c)};var B=function(i,c){return i.allocUnsafe?i.allocUnsafe(c):new i(c)};n.prototype.toArrayLike=function(i,c,h){this._strip();var g=this.byteLength(),p=h||Math.max(1,g);r(g<=p,"byte array longer than desired length"),r(p>0,"Requested array length <= 0");var w=B(i,p),M=c==="le"?"LE":"BE";return this["_toArrayLike"+M](w,g),w},n.prototype._toArrayLikeLE=function(i,c){for(var h=0,g=0,p=0,w=0;p<this.length;p++){var M=this.words[p]<<w|g;i[h++]=M&255,h<i.length&&(i[h++]=M>>8&255),h<i.length&&(i[h++]=M>>16&255),w===6?(h<i.length&&(i[h++]=M>>24&255),g=0,w=0):(g=M>>>24,w+=2)}if(h<i.length)for(i[h++]=g;h<i.length;)i[h++]=0},n.prototype._toArrayLikeBE=function(i,c){for(var h=i.length-1,g=0,p=0,w=0;p<this.length;p++){var M=this.words[p]<<w|g;i[h--]=M&255,h>=0&&(i[h--]=M>>8&255),h>=0&&(i[h--]=M>>16&255),w===6?(h>=0&&(i[h--]=M>>24&255),g=0,w=0):(g=M>>>24,w+=2)}if(h>=0)for(i[h--]=g;h>=0;)i[h--]=0},Math.clz32?n.prototype._countBits=function(i){return 32-Math.clz32(i)}:n.prototype._countBits=function(i){var c=i,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},n.prototype._zeroBits=function(i){if(i===0)return 26;var c=i,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},n.prototype.bitLength=function(){var i=this.words[this.length-1],c=this._countBits(i);return(this.length-1)*26+c};function A(v){for(var i=new Array(v.bitLength()),c=0;c<i.length;c++){var h=c/26|0,g=c%26;i[c]=v.words[h]>>>g&1}return i}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(i+=h,h!==26)break}return i},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},n.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var c=0;c<i.length;c++)this.words[c]=this.words[c]|i.words[c];return this._strip()},n.prototype.ior=function(i){return r((this.negative|i.negative)===0),this.iuor(i)},n.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},n.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},n.prototype.iuand=function(i){var c;this.length>i.length?c=i:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&i.words[h];return this.length=c.length,this._strip()},n.prototype.iand=function(i){return r((this.negative|i.negative)===0),this.iuand(i)},n.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},n.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},n.prototype.iuxor=function(i){var c,h;this.length>i.length?(c=this,h=i):(c=i,h=this);for(var g=0;g<h.length;g++)this.words[g]=c.words[g]^h.words[g];if(this!==c)for(;g<c.length;g++)this.words[g]=c.words[g];return this.length=c.length,this._strip()},n.prototype.ixor=function(i){return r((this.negative|i.negative)===0),this.iuxor(i)},n.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},n.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},n.prototype.inotn=function(i){r(typeof i=="number"&&i>=0);var c=Math.ceil(i/26)|0,h=i%26;this._expand(c),h>0&&c--;for(var g=0;g<c;g++)this.words[g]=~this.words[g]&67108863;return h>0&&(this.words[g]=~this.words[g]&67108863>>26-h),this._strip()},n.prototype.notn=function(i){return this.clone().inotn(i)},n.prototype.setn=function(i,c){r(typeof i=="number"&&i>=0);var h=i/26|0,g=i%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<g:this.words[h]=this.words[h]&~(1<<g),this._strip()},n.prototype.iadd=function(i){var c;if(this.negative!==0&&i.negative===0)return this.negative=0,c=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,c=this.isub(i),i.negative=1,c._normSign();var h,g;this.length>i.length?(h=this,g=i):(h=i,g=this);for(var p=0,w=0;w<g.length;w++)c=(h.words[w]|0)+(g.words[w]|0)+p,this.words[w]=c&67108863,p=c>>>26;for(;p!==0&&w<h.length;w++)c=(h.words[w]|0)+p,this.words[w]=c&67108863,p=c>>>26;if(this.length=h.length,p!==0)this.words[this.length]=p,this.length++;else if(h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this},n.prototype.add=function(i){var c;return i.negative!==0&&this.negative===0?(i.negative=0,c=this.sub(i),i.negative^=1,c):i.negative===0&&this.negative!==0?(this.negative=0,c=i.sub(this),this.negative=1,c):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},n.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var c=this.iadd(i);return i.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var h=this.cmp(i);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,p;h>0?(g=this,p=i):(g=i,p=this);for(var w=0,M=0;M<p.length;M++)c=(g.words[M]|0)-(p.words[M]|0)+w,w=c>>26,this.words[M]=c&67108863;for(;w!==0&&M<g.length;M++)c=(g.words[M]|0)+w,w=c>>26,this.words[M]=c&67108863;if(w===0&&M<g.length&&g!==this)for(;M<g.length;M++)this.words[M]=g.words[M];return this.length=Math.max(this.length,M),g!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(i){return this.clone().isub(i)};function P(v,i,c){c.negative=i.negative^v.negative;var h=v.length+i.length|0;c.length=h,h=h-1|0;var g=v.words[0]|0,p=i.words[0]|0,w=g*p,M=w&67108863,d=w/67108864|0;c.words[0]=M;for(var a=1;a<h;a++){for(var m=d>>>26,N=d&67108863,F=Math.min(a,i.length-1),D=Math.max(0,a-v.length+1);D<=F;D++){var rt=a-D|0;g=v.words[rt]|0,p=i.words[D]|0,w=g*p+N,m+=w/67108864|0,N=w&67108863}c.words[a]=N|0,d=m|0}return d!==0?c.words[a]=d|0:c.length--,c._strip()}var $=function(i,c,h){var g=i.words,p=c.words,w=h.words,M=0,d,a,m,N=g[0]|0,F=N&8191,D=N>>>13,rt=g[1]|0,J=rt&8191,et=rt>>>13,Xt=g[2]|0,it=Xt&8191,at=Xt>>>13,jt=g[3]|0,ht=jt&8191,lt=jt>>>13,ge=g[4]|0,pt=ge&8191,St=ge>>>13,tr=g[5]|0,wt=tr&8191,Mt=tr>>>13,Ve=g[6]|0,bt=Ve&8191,gt=Ve>>>13,he=g[7]|0,yt=he&8191,vt=he>>>13,we=g[8]|0,xt=we&8191,S=we>>>13,f=g[9]|0,l=f&8191,_=f>>>13,L=p[0]|0,T=L&8191,U=L>>>13,_t=p[1]|0,ot=_t&8191,st=_t>>>13,Jt=p[2]|0,nt=Jt&8191,Bt=Jt>>>13,fn=p[3]|0,At=fn&8191,It=fn>>>13,ln=p[4]|0,Rt=ln&8191,Lt=ln>>>13,dn=p[5]|0,Tt=dn&8191,Ct=dn>>>13,pn=p[6]|0,Ut=pn&8191,Pt=pn>>>13,gn=p[7]|0,Nt=gn&8191,Ot=gn>>>13,mn=p[8]|0,qt=mn&8191,Ft=mn>>>13,yn=p[9]|0,zt=yn&8191,Dt=yn>>>13;h.negative=i.negative^c.negative,h.length=19,d=Math.imul(F,T),a=Math.imul(F,U),a=a+Math.imul(D,T)|0,m=Math.imul(D,U);var mr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(mr>>>26)|0,mr&=67108863,d=Math.imul(J,T),a=Math.imul(J,U),a=a+Math.imul(et,T)|0,m=Math.imul(et,U),d=d+Math.imul(F,ot)|0,a=a+Math.imul(F,st)|0,a=a+Math.imul(D,ot)|0,m=m+Math.imul(D,st)|0;var yr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(yr>>>26)|0,yr&=67108863,d=Math.imul(it,T),a=Math.imul(it,U),a=a+Math.imul(at,T)|0,m=Math.imul(at,U),d=d+Math.imul(J,ot)|0,a=a+Math.imul(J,st)|0,a=a+Math.imul(et,ot)|0,m=m+Math.imul(et,st)|0,d=d+Math.imul(F,nt)|0,a=a+Math.imul(F,Bt)|0,a=a+Math.imul(D,nt)|0,m=m+Math.imul(D,Bt)|0;var wr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(wr>>>26)|0,wr&=67108863,d=Math.imul(ht,T),a=Math.imul(ht,U),a=a+Math.imul(lt,T)|0,m=Math.imul(lt,U),d=d+Math.imul(it,ot)|0,a=a+Math.imul(it,st)|0,a=a+Math.imul(at,ot)|0,m=m+Math.imul(at,st)|0,d=d+Math.imul(J,nt)|0,a=a+Math.imul(J,Bt)|0,a=a+Math.imul(et,nt)|0,m=m+Math.imul(et,Bt)|0,d=d+Math.imul(F,At)|0,a=a+Math.imul(F,It)|0,a=a+Math.imul(D,At)|0,m=m+Math.imul(D,It)|0;var br=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(br>>>26)|0,br&=67108863,d=Math.imul(pt,T),a=Math.imul(pt,U),a=a+Math.imul(St,T)|0,m=Math.imul(St,U),d=d+Math.imul(ht,ot)|0,a=a+Math.imul(ht,st)|0,a=a+Math.imul(lt,ot)|0,m=m+Math.imul(lt,st)|0,d=d+Math.imul(it,nt)|0,a=a+Math.imul(it,Bt)|0,a=a+Math.imul(at,nt)|0,m=m+Math.imul(at,Bt)|0,d=d+Math.imul(J,At)|0,a=a+Math.imul(J,It)|0,a=a+Math.imul(et,At)|0,m=m+Math.imul(et,It)|0,d=d+Math.imul(F,Rt)|0,a=a+Math.imul(F,Lt)|0,a=a+Math.imul(D,Rt)|0,m=m+Math.imul(D,Lt)|0;var vr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(vr>>>26)|0,vr&=67108863,d=Math.imul(wt,T),a=Math.imul(wt,U),a=a+Math.imul(Mt,T)|0,m=Math.imul(Mt,U),d=d+Math.imul(pt,ot)|0,a=a+Math.imul(pt,st)|0,a=a+Math.imul(St,ot)|0,m=m+Math.imul(St,st)|0,d=d+Math.imul(ht,nt)|0,a=a+Math.imul(ht,Bt)|0,a=a+Math.imul(lt,nt)|0,m=m+Math.imul(lt,Bt)|0,d=d+Math.imul(it,At)|0,a=a+Math.imul(it,It)|0,a=a+Math.imul(at,At)|0,m=m+Math.imul(at,It)|0,d=d+Math.imul(J,Rt)|0,a=a+Math.imul(J,Lt)|0,a=a+Math.imul(et,Rt)|0,m=m+Math.imul(et,Lt)|0,d=d+Math.imul(F,Tt)|0,a=a+Math.imul(F,Ct)|0,a=a+Math.imul(D,Tt)|0,m=m+Math.imul(D,Ct)|0;var xr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(xr>>>26)|0,xr&=67108863,d=Math.imul(bt,T),a=Math.imul(bt,U),a=a+Math.imul(gt,T)|0,m=Math.imul(gt,U),d=d+Math.imul(wt,ot)|0,a=a+Math.imul(wt,st)|0,a=a+Math.imul(Mt,ot)|0,m=m+Math.imul(Mt,st)|0,d=d+Math.imul(pt,nt)|0,a=a+Math.imul(pt,Bt)|0,a=a+Math.imul(St,nt)|0,m=m+Math.imul(St,Bt)|0,d=d+Math.imul(ht,At)|0,a=a+Math.imul(ht,It)|0,a=a+Math.imul(lt,At)|0,m=m+Math.imul(lt,It)|0,d=d+Math.imul(it,Rt)|0,a=a+Math.imul(it,Lt)|0,a=a+Math.imul(at,Rt)|0,m=m+Math.imul(at,Lt)|0,d=d+Math.imul(J,Tt)|0,a=a+Math.imul(J,Ct)|0,a=a+Math.imul(et,Tt)|0,m=m+Math.imul(et,Ct)|0,d=d+Math.imul(F,Ut)|0,a=a+Math.imul(F,Pt)|0,a=a+Math.imul(D,Ut)|0,m=m+Math.imul(D,Pt)|0;var Sr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,d=Math.imul(yt,T),a=Math.imul(yt,U),a=a+Math.imul(vt,T)|0,m=Math.imul(vt,U),d=d+Math.imul(bt,ot)|0,a=a+Math.imul(bt,st)|0,a=a+Math.imul(gt,ot)|0,m=m+Math.imul(gt,st)|0,d=d+Math.imul(wt,nt)|0,a=a+Math.imul(wt,Bt)|0,a=a+Math.imul(Mt,nt)|0,m=m+Math.imul(Mt,Bt)|0,d=d+Math.imul(pt,At)|0,a=a+Math.imul(pt,It)|0,a=a+Math.imul(St,At)|0,m=m+Math.imul(St,It)|0,d=d+Math.imul(ht,Rt)|0,a=a+Math.imul(ht,Lt)|0,a=a+Math.imul(lt,Rt)|0,m=m+Math.imul(lt,Lt)|0,d=d+Math.imul(it,Tt)|0,a=a+Math.imul(it,Ct)|0,a=a+Math.imul(at,Tt)|0,m=m+Math.imul(at,Ct)|0,d=d+Math.imul(J,Ut)|0,a=a+Math.imul(J,Pt)|0,a=a+Math.imul(et,Ut)|0,m=m+Math.imul(et,Pt)|0,d=d+Math.imul(F,Nt)|0,a=a+Math.imul(F,Ot)|0,a=a+Math.imul(D,Nt)|0,m=m+Math.imul(D,Ot)|0;var Mr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,d=Math.imul(xt,T),a=Math.imul(xt,U),a=a+Math.imul(S,T)|0,m=Math.imul(S,U),d=d+Math.imul(yt,ot)|0,a=a+Math.imul(yt,st)|0,a=a+Math.imul(vt,ot)|0,m=m+Math.imul(vt,st)|0,d=d+Math.imul(bt,nt)|0,a=a+Math.imul(bt,Bt)|0,a=a+Math.imul(gt,nt)|0,m=m+Math.imul(gt,Bt)|0,d=d+Math.imul(wt,At)|0,a=a+Math.imul(wt,It)|0,a=a+Math.imul(Mt,At)|0,m=m+Math.imul(Mt,It)|0,d=d+Math.imul(pt,Rt)|0,a=a+Math.imul(pt,Lt)|0,a=a+Math.imul(St,Rt)|0,m=m+Math.imul(St,Lt)|0,d=d+Math.imul(ht,Tt)|0,a=a+Math.imul(ht,Ct)|0,a=a+Math.imul(lt,Tt)|0,m=m+Math.imul(lt,Ct)|0,d=d+Math.imul(it,Ut)|0,a=a+Math.imul(it,Pt)|0,a=a+Math.imul(at,Ut)|0,m=m+Math.imul(at,Pt)|0,d=d+Math.imul(J,Nt)|0,a=a+Math.imul(J,Ot)|0,a=a+Math.imul(et,Nt)|0,m=m+Math.imul(et,Ot)|0,d=d+Math.imul(F,qt)|0,a=a+Math.imul(F,Ft)|0,a=a+Math.imul(D,qt)|0,m=m+Math.imul(D,Ft)|0;var kr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(kr>>>26)|0,kr&=67108863,d=Math.imul(l,T),a=Math.imul(l,U),a=a+Math.imul(_,T)|0,m=Math.imul(_,U),d=d+Math.imul(xt,ot)|0,a=a+Math.imul(xt,st)|0,a=a+Math.imul(S,ot)|0,m=m+Math.imul(S,st)|0,d=d+Math.imul(yt,nt)|0,a=a+Math.imul(yt,Bt)|0,a=a+Math.imul(vt,nt)|0,m=m+Math.imul(vt,Bt)|0,d=d+Math.imul(bt,At)|0,a=a+Math.imul(bt,It)|0,a=a+Math.imul(gt,At)|0,m=m+Math.imul(gt,It)|0,d=d+Math.imul(wt,Rt)|0,a=a+Math.imul(wt,Lt)|0,a=a+Math.imul(Mt,Rt)|0,m=m+Math.imul(Mt,Lt)|0,d=d+Math.imul(pt,Tt)|0,a=a+Math.imul(pt,Ct)|0,a=a+Math.imul(St,Tt)|0,m=m+Math.imul(St,Ct)|0,d=d+Math.imul(ht,Ut)|0,a=a+Math.imul(ht,Pt)|0,a=a+Math.imul(lt,Ut)|0,m=m+Math.imul(lt,Pt)|0,d=d+Math.imul(it,Nt)|0,a=a+Math.imul(it,Ot)|0,a=a+Math.imul(at,Nt)|0,m=m+Math.imul(at,Ot)|0,d=d+Math.imul(J,qt)|0,a=a+Math.imul(J,Ft)|0,a=a+Math.imul(et,qt)|0,m=m+Math.imul(et,Ft)|0,d=d+Math.imul(F,zt)|0,a=a+Math.imul(F,Dt)|0,a=a+Math.imul(D,zt)|0,m=m+Math.imul(D,Dt)|0;var _r=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(_r>>>26)|0,_r&=67108863,d=Math.imul(l,ot),a=Math.imul(l,st),a=a+Math.imul(_,ot)|0,m=Math.imul(_,st),d=d+Math.imul(xt,nt)|0,a=a+Math.imul(xt,Bt)|0,a=a+Math.imul(S,nt)|0,m=m+Math.imul(S,Bt)|0,d=d+Math.imul(yt,At)|0,a=a+Math.imul(yt,It)|0,a=a+Math.imul(vt,At)|0,m=m+Math.imul(vt,It)|0,d=d+Math.imul(bt,Rt)|0,a=a+Math.imul(bt,Lt)|0,a=a+Math.imul(gt,Rt)|0,m=m+Math.imul(gt,Lt)|0,d=d+Math.imul(wt,Tt)|0,a=a+Math.imul(wt,Ct)|0,a=a+Math.imul(Mt,Tt)|0,m=m+Math.imul(Mt,Ct)|0,d=d+Math.imul(pt,Ut)|0,a=a+Math.imul(pt,Pt)|0,a=a+Math.imul(St,Ut)|0,m=m+Math.imul(St,Pt)|0,d=d+Math.imul(ht,Nt)|0,a=a+Math.imul(ht,Ot)|0,a=a+Math.imul(lt,Nt)|0,m=m+Math.imul(lt,Ot)|0,d=d+Math.imul(it,qt)|0,a=a+Math.imul(it,Ft)|0,a=a+Math.imul(at,qt)|0,m=m+Math.imul(at,Ft)|0,d=d+Math.imul(J,zt)|0,a=a+Math.imul(J,Dt)|0,a=a+Math.imul(et,zt)|0,m=m+Math.imul(et,Dt)|0;var Er=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Er>>>26)|0,Er&=67108863,d=Math.imul(l,nt),a=Math.imul(l,Bt),a=a+Math.imul(_,nt)|0,m=Math.imul(_,Bt),d=d+Math.imul(xt,At)|0,a=a+Math.imul(xt,It)|0,a=a+Math.imul(S,At)|0,m=m+Math.imul(S,It)|0,d=d+Math.imul(yt,Rt)|0,a=a+Math.imul(yt,Lt)|0,a=a+Math.imul(vt,Rt)|0,m=m+Math.imul(vt,Lt)|0,d=d+Math.imul(bt,Tt)|0,a=a+Math.imul(bt,Ct)|0,a=a+Math.imul(gt,Tt)|0,m=m+Math.imul(gt,Ct)|0,d=d+Math.imul(wt,Ut)|0,a=a+Math.imul(wt,Pt)|0,a=a+Math.imul(Mt,Ut)|0,m=m+Math.imul(Mt,Pt)|0,d=d+Math.imul(pt,Nt)|0,a=a+Math.imul(pt,Ot)|0,a=a+Math.imul(St,Nt)|0,m=m+Math.imul(St,Ot)|0,d=d+Math.imul(ht,qt)|0,a=a+Math.imul(ht,Ft)|0,a=a+Math.imul(lt,qt)|0,m=m+Math.imul(lt,Ft)|0,d=d+Math.imul(it,zt)|0,a=a+Math.imul(it,Dt)|0,a=a+Math.imul(at,zt)|0,m=m+Math.imul(at,Dt)|0;var Br=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Br>>>26)|0,Br&=67108863,d=Math.imul(l,At),a=Math.imul(l,It),a=a+Math.imul(_,At)|0,m=Math.imul(_,It),d=d+Math.imul(xt,Rt)|0,a=a+Math.imul(xt,Lt)|0,a=a+Math.imul(S,Rt)|0,m=m+Math.imul(S,Lt)|0,d=d+Math.imul(yt,Tt)|0,a=a+Math.imul(yt,Ct)|0,a=a+Math.imul(vt,Tt)|0,m=m+Math.imul(vt,Ct)|0,d=d+Math.imul(bt,Ut)|0,a=a+Math.imul(bt,Pt)|0,a=a+Math.imul(gt,Ut)|0,m=m+Math.imul(gt,Pt)|0,d=d+Math.imul(wt,Nt)|0,a=a+Math.imul(wt,Ot)|0,a=a+Math.imul(Mt,Nt)|0,m=m+Math.imul(Mt,Ot)|0,d=d+Math.imul(pt,qt)|0,a=a+Math.imul(pt,Ft)|0,a=a+Math.imul(St,qt)|0,m=m+Math.imul(St,Ft)|0,d=d+Math.imul(ht,zt)|0,a=a+Math.imul(ht,Dt)|0,a=a+Math.imul(lt,zt)|0,m=m+Math.imul(lt,Dt)|0;var Ar=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,d=Math.imul(l,Rt),a=Math.imul(l,Lt),a=a+Math.imul(_,Rt)|0,m=Math.imul(_,Lt),d=d+Math.imul(xt,Tt)|0,a=a+Math.imul(xt,Ct)|0,a=a+Math.imul(S,Tt)|0,m=m+Math.imul(S,Ct)|0,d=d+Math.imul(yt,Ut)|0,a=a+Math.imul(yt,Pt)|0,a=a+Math.imul(vt,Ut)|0,m=m+Math.imul(vt,Pt)|0,d=d+Math.imul(bt,Nt)|0,a=a+Math.imul(bt,Ot)|0,a=a+Math.imul(gt,Nt)|0,m=m+Math.imul(gt,Ot)|0,d=d+Math.imul(wt,qt)|0,a=a+Math.imul(wt,Ft)|0,a=a+Math.imul(Mt,qt)|0,m=m+Math.imul(Mt,Ft)|0,d=d+Math.imul(pt,zt)|0,a=a+Math.imul(pt,Dt)|0,a=a+Math.imul(St,zt)|0,m=m+Math.imul(St,Dt)|0;var Ir=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,d=Math.imul(l,Tt),a=Math.imul(l,Ct),a=a+Math.imul(_,Tt)|0,m=Math.imul(_,Ct),d=d+Math.imul(xt,Ut)|0,a=a+Math.imul(xt,Pt)|0,a=a+Math.imul(S,Ut)|0,m=m+Math.imul(S,Pt)|0,d=d+Math.imul(yt,Nt)|0,a=a+Math.imul(yt,Ot)|0,a=a+Math.imul(vt,Nt)|0,m=m+Math.imul(vt,Ot)|0,d=d+Math.imul(bt,qt)|0,a=a+Math.imul(bt,Ft)|0,a=a+Math.imul(gt,qt)|0,m=m+Math.imul(gt,Ft)|0,d=d+Math.imul(wt,zt)|0,a=a+Math.imul(wt,Dt)|0,a=a+Math.imul(Mt,zt)|0,m=m+Math.imul(Mt,Dt)|0;var Rr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,d=Math.imul(l,Ut),a=Math.imul(l,Pt),a=a+Math.imul(_,Ut)|0,m=Math.imul(_,Pt),d=d+Math.imul(xt,Nt)|0,a=a+Math.imul(xt,Ot)|0,a=a+Math.imul(S,Nt)|0,m=m+Math.imul(S,Ot)|0,d=d+Math.imul(yt,qt)|0,a=a+Math.imul(yt,Ft)|0,a=a+Math.imul(vt,qt)|0,m=m+Math.imul(vt,Ft)|0,d=d+Math.imul(bt,zt)|0,a=a+Math.imul(bt,Dt)|0,a=a+Math.imul(gt,zt)|0,m=m+Math.imul(gt,Dt)|0;var Lr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,d=Math.imul(l,Nt),a=Math.imul(l,Ot),a=a+Math.imul(_,Nt)|0,m=Math.imul(_,Ot),d=d+Math.imul(xt,qt)|0,a=a+Math.imul(xt,Ft)|0,a=a+Math.imul(S,qt)|0,m=m+Math.imul(S,Ft)|0,d=d+Math.imul(yt,zt)|0,a=a+Math.imul(yt,Dt)|0,a=a+Math.imul(vt,zt)|0,m=m+Math.imul(vt,Dt)|0;var Tr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,d=Math.imul(l,qt),a=Math.imul(l,Ft),a=a+Math.imul(_,qt)|0,m=Math.imul(_,Ft),d=d+Math.imul(xt,zt)|0,a=a+Math.imul(xt,Dt)|0,a=a+Math.imul(S,zt)|0,m=m+Math.imul(S,Dt)|0;var Cr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,d=Math.imul(l,zt),a=Math.imul(l,Dt),a=a+Math.imul(_,zt)|0,m=Math.imul(_,Dt);var Ur=(M+d|0)+((a&8191)<<13)|0;return M=(m+(a>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,w[0]=mr,w[1]=yr,w[2]=wr,w[3]=br,w[4]=vr,w[5]=xr,w[6]=Sr,w[7]=Mr,w[8]=kr,w[9]=_r,w[10]=Er,w[11]=Br,w[12]=Ar,w[13]=Ir,w[14]=Rr,w[15]=Lr,w[16]=Tr,w[17]=Cr,w[18]=Ur,M!==0&&(w[19]=M,h.length++),h};Math.imul||($=P);function z(v,i,c){c.negative=i.negative^v.negative,c.length=v.length+i.length;for(var h=0,g=0,p=0;p<c.length-1;p++){var w=g;g=0;for(var M=h&67108863,d=Math.min(p,i.length-1),a=Math.max(0,p-v.length+1);a<=d;a++){var m=p-a,N=v.words[m]|0,F=i.words[a]|0,D=N*F,rt=D&67108863;w=w+(D/67108864|0)|0,rt=rt+M|0,M=rt&67108863,w=w+(rt>>>26)|0,g+=w>>>26,w&=67108863}c.words[p]=M,h=w,w=g}return h!==0?c.words[p]=h:c.length--,c._strip()}function V(v,i,c){return z(v,i,c)}n.prototype.mulTo=function(i,c){var h,g=this.length+i.length;return this.length===10&&i.length===10?h=$(this,i,c):g<63?h=P(this,i,c):g<1024?h=z(this,i,c):h=V(this,i,c),h},n.prototype.mul=function(i){var c=new n(null);return c.words=new Array(this.length+i.length),this.mulTo(i,c)},n.prototype.mulf=function(i){var c=new n(null);return c.words=new Array(this.length+i.length),V(this,i,c)},n.prototype.imul=function(i){return this.clone().mulTo(i,this)},n.prototype.imuln=function(i){var c=i<0;c&&(i=-i),r(typeof i=="number"),r(i<67108864);for(var h=0,g=0;g<this.length;g++){var p=(this.words[g]|0)*i,w=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=w>>>26,this.words[g]=w&67108863}return h!==0&&(this.words[g]=h,this.length++),c?this.ineg():this},n.prototype.muln=function(i){return this.clone().imuln(i)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(i){var c=A(i);if(c.length===0)return new n(1);for(var h=this,g=0;g<c.length&&c[g]===0;g++,h=h.sqr());if(++g<c.length)for(var p=h.sqr();g<c.length;g++,p=p.sqr())c[g]!==0&&(h=h.mul(p));return h},n.prototype.iushln=function(i){r(typeof i=="number"&&i>=0);var c=i%26,h=(i-c)/26,g=67108863>>>26-c<<26-c,p;if(c!==0){var w=0;for(p=0;p<this.length;p++){var M=this.words[p]&g,d=(this.words[p]|0)-M<<c;this.words[p]=d|w,w=M>>>26-c}w&&(this.words[p]=w,this.length++)}if(h!==0){for(p=this.length-1;p>=0;p--)this.words[p+h]=this.words[p];for(p=0;p<h;p++)this.words[p]=0;this.length+=h}return this._strip()},n.prototype.ishln=function(i){return r(this.negative===0),this.iushln(i)},n.prototype.iushrn=function(i,c,h){r(typeof i=="number"&&i>=0);var g;c?g=(c-c%26)/26:g=0;var p=i%26,w=Math.min((i-p)/26,this.length),M=67108863^67108863>>>p<<p,d=h;if(g-=w,g=Math.max(0,g),d){for(var a=0;a<w;a++)d.words[a]=this.words[a];d.length=w}if(w!==0)if(this.length>w)for(this.length-=w,a=0;a<this.length;a++)this.words[a]=this.words[a+w];else this.words[0]=0,this.length=1;var m=0;for(a=this.length-1;a>=0&&(m!==0||a>=g);a--){var N=this.words[a]|0;this.words[a]=m<<26-p|N>>>p,m=N&M}return d&&m!==0&&(d.words[d.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(i,c,h){return r(this.negative===0),this.iushrn(i,c,h)},n.prototype.shln=function(i){return this.clone().ishln(i)},n.prototype.ushln=function(i){return this.clone().iushln(i)},n.prototype.shrn=function(i){return this.clone().ishrn(i)},n.prototype.ushrn=function(i){return this.clone().iushrn(i)},n.prototype.testn=function(i){r(typeof i=="number"&&i>=0);var c=i%26,h=(i-c)/26,g=1<<c;if(this.length<=h)return!1;var p=this.words[h];return!!(p&g)},n.prototype.imaskn=function(i){r(typeof i=="number"&&i>=0);var c=i%26,h=(i-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var g=67108863^67108863>>>c<<c;this.words[this.length-1]&=g}return this._strip()},n.prototype.maskn=function(i){return this.clone().imaskn(i)},n.prototype.iaddn=function(i){return r(typeof i=="number"),r(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},n.prototype._iaddn=function(i){this.words[0]+=i;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},n.prototype.isubn=function(i){if(r(typeof i=="number"),r(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},n.prototype.addn=function(i){return this.clone().iaddn(i)},n.prototype.subn=function(i){return this.clone().isubn(i)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(i,c,h){var g=i.length+h,p;this._expand(g);var w,M=0;for(p=0;p<i.length;p++){w=(this.words[p+h]|0)+M;var d=(i.words[p]|0)*c;w-=d&67108863,M=(w>>26)-(d/67108864|0),this.words[p+h]=w&67108863}for(;p<this.length-h;p++)w=(this.words[p+h]|0)+M,M=w>>26,this.words[p+h]=w&67108863;if(M===0)return this._strip();for(r(M===-1),M=0,p=0;p<this.length;p++)w=-(this.words[p]|0)+M,M=w>>26,this.words[p]=w&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(i,c){var h=this.length-i.length,g=this.clone(),p=i,w=p.words[p.length-1]|0,M=this._countBits(w);h=26-M,h!==0&&(p=p.ushln(h),g.iushln(h),w=p.words[p.length-1]|0);var d=g.length-p.length,a;if(c!=="mod"){a=new n(null),a.length=d+1,a.words=new Array(a.length);for(var m=0;m<a.length;m++)a.words[m]=0}var N=g.clone()._ishlnsubmul(p,1,d);N.negative===0&&(g=N,a&&(a.words[d]=1));for(var F=d-1;F>=0;F--){var D=(g.words[p.length+F]|0)*67108864+(g.words[p.length+F-1]|0);for(D=Math.min(D/w|0,67108863),g._ishlnsubmul(p,D,F);g.negative!==0;)D--,g.negative=0,g._ishlnsubmul(p,1,F),g.isZero()||(g.negative^=1);a&&(a.words[F]=D)}return a&&a._strip(),g._strip(),c!=="div"&&h!==0&&g.iushrn(h),{div:a||null,mod:g}},n.prototype.divmod=function(i,c,h){if(r(!i.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var g,p,w;return this.negative!==0&&i.negative===0?(w=this.neg().divmod(i,c),c!=="mod"&&(g=w.div.neg()),c!=="div"&&(p=w.mod.neg(),h&&p.negative!==0&&p.iadd(i)),{div:g,mod:p}):this.negative===0&&i.negative!==0?(w=this.divmod(i.neg(),c),c!=="mod"&&(g=w.div.neg()),{div:g,mod:w.mod}):this.negative&i.negative?(w=this.neg().divmod(i.neg(),c),c!=="div"&&(p=w.mod.neg(),h&&p.negative!==0&&p.isub(i)),{div:w.div,mod:p}):i.length>this.length||this.cmp(i)<0?{div:new n(0),mod:this}:i.length===1?c==="div"?{div:this.divn(i.words[0]),mod:null}:c==="mod"?{div:null,mod:new n(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new n(this.modrn(i.words[0]))}:this._wordDiv(i,c)},n.prototype.div=function(i){return this.divmod(i,"div",!1).div},n.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},n.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},n.prototype.divRound=function(i){var c=this.divmod(i);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(i):c.mod,g=i.ushrn(1),p=i.andln(1),w=h.cmp(g);return w<0||p===1&&w===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},n.prototype.modrn=function(i){var c=i<0;c&&(i=-i),r(i<=67108863);for(var h=(1<<26)%i,g=0,p=this.length-1;p>=0;p--)g=(h*g+(this.words[p]|0))%i;return c?-g:g},n.prototype.modn=function(i){return this.modrn(i)},n.prototype.idivn=function(i){var c=i<0;c&&(i=-i),r(i<=67108863);for(var h=0,g=this.length-1;g>=0;g--){var p=(this.words[g]|0)+h*67108864;this.words[g]=p/i|0,h=p%i}return this._strip(),c?this.ineg():this},n.prototype.divn=function(i){return this.clone().idivn(i)},n.prototype.egcd=function(i){r(i.negative===0),r(!i.isZero());var c=this,h=i.clone();c.negative!==0?c=c.umod(i):c=c.clone();for(var g=new n(1),p=new n(0),w=new n(0),M=new n(1),d=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++d;for(var a=h.clone(),m=c.clone();!c.isZero();){for(var N=0,F=1;!(c.words[0]&F)&&N<26;++N,F<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(g.isOdd()||p.isOdd())&&(g.iadd(a),p.isub(m)),g.iushrn(1),p.iushrn(1);for(var D=0,rt=1;!(h.words[0]&rt)&&D<26;++D,rt<<=1);if(D>0)for(h.iushrn(D);D-- >0;)(w.isOdd()||M.isOdd())&&(w.iadd(a),M.isub(m)),w.iushrn(1),M.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(w),p.isub(M)):(h.isub(c),w.isub(g),M.isub(p))}return{a:w,b:M,gcd:h.iushln(d)}},n.prototype._invmp=function(i){r(i.negative===0),r(!i.isZero());var c=this,h=i.clone();c.negative!==0?c=c.umod(i):c=c.clone();for(var g=new n(1),p=new n(0),w=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var M=0,d=1;!(c.words[0]&d)&&M<26;++M,d<<=1);if(M>0)for(c.iushrn(M);M-- >0;)g.isOdd()&&g.iadd(w),g.iushrn(1);for(var a=0,m=1;!(h.words[0]&m)&&a<26;++a,m<<=1);if(a>0)for(h.iushrn(a);a-- >0;)p.isOdd()&&p.iadd(w),p.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(p)):(h.isub(c),p.isub(g))}var N;return c.cmpn(1)===0?N=g:N=p,N.cmpn(0)<0&&N.iadd(i),N},n.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var c=this.clone(),h=i.clone();c.negative=0,h.negative=0;for(var g=0;c.isEven()&&h.isEven();g++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var p=c.cmp(h);if(p<0){var w=c;c=h,h=w}else if(p===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(g)},n.prototype.invm=function(i){return this.egcd(i).a.umod(i)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(i){return this.words[0]&i},n.prototype.bincn=function(i){r(typeof i=="number");var c=i%26,h=(i-c)/26,g=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=g,this;for(var p=g,w=h;p!==0&&w<this.length;w++){var M=this.words[w]|0;M+=p,p=M>>>26,M&=67108863,this.words[w]=M}return p!==0&&(this.words[w]=p,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(i){var c=i<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(i=-i),r(i<=67108863,"Number is too big");var g=this.words[0]|0;h=g===i?0:g<i?-1:1}return this.negative!==0?-h|0:h},n.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var c=this.ucmp(i);return this.negative!==0?-c|0:c},n.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var g=this.words[h]|0,p=i.words[h]|0;if(g!==p){g<p?c=-1:g>p&&(c=1);break}}return c},n.prototype.gtn=function(i){return this.cmpn(i)===1},n.prototype.gt=function(i){return this.cmp(i)===1},n.prototype.gten=function(i){return this.cmpn(i)>=0},n.prototype.gte=function(i){return this.cmp(i)>=0},n.prototype.ltn=function(i){return this.cmpn(i)===-1},n.prototype.lt=function(i){return this.cmp(i)===-1},n.prototype.lten=function(i){return this.cmpn(i)<=0},n.prototype.lte=function(i){return this.cmp(i)<=0},n.prototype.eqn=function(i){return this.cmpn(i)===0},n.prototype.eq=function(i){return this.cmp(i)===0},n.red=function(i){return new Z(i)},n.prototype.toRed=function(i){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(i){return this.red=i,this},n.prototype.forceRed=function(i){return r(!this.red,"Already a number in reduction context"),this._forceRed(i)},n.prototype.redAdd=function(i){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},n.prototype.redIAdd=function(i){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},n.prototype.redSub=function(i){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},n.prototype.redISub=function(i){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},n.prototype.redShl=function(i){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},n.prototype.redMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},n.prototype.redIMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(i){return r(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var W={k256:null,p224:null,p192:null,p25519:null};function K(v,i){this.name=v,this.p=new n(i,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var i=new n(null);return i.words=new Array(Math.ceil(this.n/13)),i},K.prototype.ireduce=function(i){var c=i,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var g=h<this.n?-1:c.ucmp(this.p);return g===0?(c.words[0]=0,c.length=1):g>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},K.prototype.split=function(i,c){i.iushrn(this.n,0,c)},K.prototype.imulK=function(i){return i.imul(this.k)};function j(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(j,K),j.prototype.split=function(i,c){for(var h=4194303,g=Math.min(i.length,9),p=0;p<g;p++)c.words[p]=i.words[p];if(c.length=g,i.length<=9){i.words[0]=0,i.length=1;return}var w=i.words[9];for(c.words[c.length++]=w&h,p=10;p<i.length;p++){var M=i.words[p]|0;i.words[p-10]=(M&h)<<4|w>>>22,w=M}w>>>=22,i.words[p-10]=w,w===0&&i.length>10?i.length-=10:i.length-=9},j.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var c=0,h=0;h<i.length;h++){var g=i.words[h]|0;c+=g*977,i.words[h]=c&67108863,c=g*64+(c/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function Q(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(Q,K);function Gt(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Gt,K);function kt(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(kt,K),kt.prototype.imulK=function(i){for(var c=0,h=0;h<i.length;h++){var g=(i.words[h]|0)*19+c,p=g&67108863;g>>>=26,i.words[h]=p,c=g}return c!==0&&(i.words[i.length++]=c),i},n._prime=function(i){if(W[i])return W[i];var c;if(i==="k256")c=new j;else if(i==="p224")c=new Q;else if(i==="p192")c=new Gt;else if(i==="p25519")c=new kt;else throw new Error("Unknown prime "+i);return W[i]=c,c};function Z(v){if(typeof v=="string"){var i=n._prime(v);this.m=i.p,this.prime=i}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}Z.prototype._verify1=function(i){r(i.negative===0,"red works only with positives"),r(i.red,"red works only with red numbers")},Z.prototype._verify2=function(i,c){r((i.negative|c.negative)===0,"red works only with positives"),r(i.red&&i.red===c.red,"red works only with red numbers")},Z.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(x(i,i.umod(this.m)._forceRed(this)),i)},Z.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},Z.prototype.add=function(i,c){this._verify2(i,c);var h=i.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},Z.prototype.iadd=function(i,c){this._verify2(i,c);var h=i.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},Z.prototype.sub=function(i,c){this._verify2(i,c);var h=i.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},Z.prototype.isub=function(i,c){this._verify2(i,c);var h=i.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},Z.prototype.shl=function(i,c){return this._verify1(i),this.imod(i.ushln(c))},Z.prototype.imul=function(i,c){return this._verify2(i,c),this.imod(i.imul(c))},Z.prototype.mul=function(i,c){return this._verify2(i,c),this.imod(i.mul(c))},Z.prototype.isqr=function(i){return this.imul(i,i.clone())},Z.prototype.sqr=function(i){return this.mul(i,i)},Z.prototype.sqrt=function(i){if(i.isZero())return i.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new n(1)).iushrn(2);return this.pow(i,h)}for(var g=this.m.subn(1),p=0;!g.isZero()&&g.andln(1)===0;)p++,g.iushrn(1);r(!g.isZero());var w=new n(1).toRed(this),M=w.redNeg(),d=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new n(2*a*a).toRed(this);this.pow(a,d).cmp(M)!==0;)a.redIAdd(M);for(var m=this.pow(a,g),N=this.pow(i,g.addn(1).iushrn(1)),F=this.pow(i,g),D=p;F.cmp(w)!==0;){for(var rt=F,J=0;rt.cmp(w)!==0;J++)rt=rt.redSqr();r(J<D);var et=this.pow(m,new n(1).iushln(D-J-1));N=N.redMul(et),m=et.redSqr(),F=F.redMul(m),D=J}return N},Z.prototype.invm=function(i){var c=i._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},Z.prototype.pow=function(i,c){if(c.isZero())return new n(1).toRed(this);if(c.cmpn(1)===0)return i.clone();var h=4,g=new Array(1<<h);g[0]=new n(1).toRed(this),g[1]=i;for(var p=2;p<g.length;p++)g[p]=this.mul(g[p-1],i);var w=g[0],M=0,d=0,a=c.bitLength()%26;for(a===0&&(a=26),p=c.length-1;p>=0;p--){for(var m=c.words[p],N=a-1;N>=0;N--){var F=m>>N&1;if(w!==g[0]&&(w=this.sqr(w)),F===0&&M===0){d=0;continue}M<<=1,M|=F,d++,!(d!==h&&(p!==0||N!==0))&&(w=this.mul(w,g[M]),d=0,M=0)}a=26}return w},Z.prototype.convertTo=function(i){var c=i.umod(this.m);return c===i?c.clone():c},Z.prototype.convertFrom=function(i){var c=i.clone();return c.red=null,c},n.mont=function(i){return new Wt(i)};function Wt(v){Z.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(Wt,Z),Wt.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},Wt.prototype.convertFrom=function(i){var c=this.imod(i.mul(this.rinv));return c.red=null,c},Wt.prototype.imul=function(i,c){if(i.isZero()||c.isZero())return i.words[0]=0,i.length=1,i;var h=i.imul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(g).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},Wt.prototype.mul=function(i,c){if(i.isZero()||c.isZero())return new n(0)._forceRed(this);var h=i.mul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(g).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},Wt.prototype.invm=function(i){var c=this.imod(i._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(s,Ke)})(Vi);var Qc=Vi.exports,Cn=to.Buffer;function tu(s){if(s.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<s.length;r++){var o=s.charAt(r),n=o.charCodeAt(0);if(t[n]!==255)throw new TypeError(o+" is ambiguous");t[n]=r}var u=s.length,y=s.charAt(0),b=Math.log(u)/Math.log(256),k=Math.log(256)/Math.log(u);function x(R){if((Array.isArray(R)||R instanceof Uint8Array)&&(R=Cn.from(R)),!Cn.isBuffer(R))throw new TypeError("Expected Buffer");if(R.length===0)return"";for(var I=0,B=0,A=0,P=R.length;A!==P&&R[A]===0;)A++,I++;for(var $=(P-A)*k+1>>>0,z=new Uint8Array($);A!==P;){for(var V=R[A],W=0,K=$-1;(V!==0||W<B)&&K!==-1;K--,W++)V+=256*z[K]>>>0,z[K]=V%u>>>0,V=V/u>>>0;if(V!==0)throw new Error("Non-zero carry");B=W,A++}for(var j=$-B;j!==$&&z[j]===0;)j++;for(var Q=y.repeat(I);j<$;++j)Q+=s.charAt(z[j]);return Q}function E(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return Cn.alloc(0);for(var I=0,B=0,A=0;R[I]===y;)B++,I++;for(var P=(R.length-I)*b+1>>>0,$=new Uint8Array(P);I<R.length;){var z=t[R.charCodeAt(I)];if(z===255)return;for(var V=0,W=P-1;(z!==0||V<A)&&W!==-1;W--,V++)z+=u*$[W]>>>0,$[W]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");A=V,I++}for(var K=P-A;K!==P&&$[K]===0;)K++;var j=Cn.allocUnsafe(B+(P-K));j.fill(0,0,B);for(var Q=B;K!==P;)j[Q++]=$[K++];return j}function q(R){var I=E(R);if(I)return I;throw new Error("Non-base"+u+" character")}return{encode:x,decodeUnsafe:E,decode:q}}var eu=tu,ru=eu,nu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",iu=ru(nu);function rr(s,t,e){return t<=s&&s<=e}function Qn(s){if(s===void 0)return{};if(s===Object(s))return s;throw TypeError("Could not convert argument to dictionary")}function su(s){for(var t=String(s),e=t.length,r=0,o=[];r<e;){var n=t.charCodeAt(r);if(n<55296||n>57343)o.push(n);else if(56320<=n&&n<=57343)o.push(65533);else if(55296<=n&&n<=56319)if(r===e-1)o.push(65533);else{var u=s.charCodeAt(r+1);if(56320<=u&&u<=57343){var y=n&1023,b=u&1023;o.push(65536+(y<<10)+b),r+=1}else o.push(65533)}r+=1}return o}function ou(s){for(var t="",e=0;e<s.length;++e){var r=s[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Fn=-1;function Zi(s){this.tokens=[].slice.call(s)}Zi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Fn},prepend:function(s){if(Array.isArray(s))for(var t=s;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(s)},push:function(s){if(Array.isArray(s))for(var t=s;t.length;)this.tokens.push(t.shift());else this.tokens.push(s)}};var nn=-1;function di(s,t){if(s)throw TypeError("Decoder error");return t||65533}var zn="utf-8";function Dn(s,t){if(!(this instanceof Dn))return new Dn(s,t);if(s=s!==void 0?String(s).toLowerCase():zn,s!==zn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Qn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Dn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Qn(e),this._streaming||(this._decoder=new au({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var o=new Zi(r),n=[],u;!o.endOfStream()&&(u=this._decoder.handler(o,o.read()),u!==nn);)u!==null&&(Array.isArray(u)?n.push.apply(n,u):n.push(u));if(!this._streaming){do{if(u=this._decoder.handler(o,o.read()),u===nn)break;u!==null&&(Array.isArray(u)?n.push.apply(n,u):n.push(u))}while(!o.endOfStream());this._decoder=null}return n.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(n[0]===65279?(this._BOMseen=!0,n.shift()):this._BOMseen=!0),ou(n)}};function $n(s,t){if(!(this instanceof $n))return new $n(s,t);if(s=s!==void 0?String(s).toLowerCase():zn,s!==zn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Qn(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}$n.prototype={encode:function(t,e){t=t?String(t):"",e=Qn(e),this._streaming||(this._encoder=new cu(this._options)),this._streaming=!!e.stream;for(var r=[],o=new Zi(su(t)),n;!o.endOfStream()&&(n=this._encoder.handler(o,o.read()),n!==nn);)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;n=this._encoder.handler(o,o.read()),n!==nn;)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}};function au(s){var t=s.fatal,e=0,r=0,o=0,n=128,u=191;this.handler=function(y,b){if(b===Fn&&o!==0)return o=0,di(t);if(b===Fn)return nn;if(o===0){if(rr(b,0,127))return b;if(rr(b,194,223))o=1,e=b-192;else if(rr(b,224,239))b===224&&(n=160),b===237&&(u=159),o=2,e=b-224;else if(rr(b,240,244))b===240&&(n=144),b===244&&(u=143),o=3,e=b-240;else return di(t);return e=e<<6*o,null}if(!rr(b,n,u))return e=o=r=0,n=128,u=191,y.prepend(b),di(t);if(n=128,u=191,r+=1,e+=b-128<<6*(o-r),r!==o)return null;var k=e;return e=o=r=0,k}}function cu(s){s.fatal,this.handler=function(t,e){if(e===Fn)return nn;if(rr(e,0,127))return e;var r,o;rr(e,128,2047)?(r=1,o=192):rr(e,2048,65535)?(r=2,o=224):rr(e,65536,1114111)&&(r=3,o=240);for(var n=[(e>>6*r)+o];r>0;){var u=e>>6*(r-1);n.push(128|u&63),r-=1}return n}}const uu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Dn,TextEncoder:$n},Symbol.toStringTag,{value:"Module"})),hu=Fi(uu);var fu=Ke&&Ke.__createBinding||(Object.create?function(s,t,e,r){r===void 0&&(r=e),Object.defineProperty(s,r,{enumerable:!0,get:function(){return t[e]}})}:function(s,t,e,r){r===void 0&&(r=e),s[r]=t[e]}),lu=Ke&&Ke.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),Je=Ke&&Ke.__decorate||function(s,t,e,r){var o=arguments.length,n=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,t,e,r);else for(var y=s.length-1;y>=0;y--)(u=s[y])&&(n=(o<3?u(n):o>3?u(t,e,n):u(t,e))||n);return o>3&&n&&Object.defineProperty(t,e,n),n},du=Ke&&Ke.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.hasOwnProperty.call(s,e)&&fu(t,s,e);return lu(t,s),t},eo=Ke&&Ke.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xe,"__esModule",{value:!0});var ro=xe.deserializeUnchecked=co=xe.deserialize=ao=xe.serialize=xe.BinaryReader=xe.BinaryWriter=xe.BorshError=xe.baseDecode=xe.baseEncode=void 0;const dr=eo(Qc),no=eo(iu),pu=du(hu),gu=typeof TextDecoder!="function"?pu.TextDecoder:TextDecoder,mu=new gu("utf-8",{fatal:!0});function yu(s){return typeof s=="string"&&(s=fe.from(s,"utf8")),no.default.encode(fe.from(s))}xe.baseEncode=yu;function wu(s){return fe.from(no.default.decode(s))}xe.baseDecode=wu;const pi=1024;class Ae extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}xe.BorshError=Ae;class io{constructor(){this.buf=fe.alloc(pi),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=fe.concat([this.buf,fe.alloc(pi)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(fe.from(new dr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(fe.from(new dr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(fe.from(new dr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(fe.from(new dr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=fe.concat([fe.from(this.buf.subarray(0,this.length)),t,fe.alloc(pi)]),this.length+=t.length}writeString(t){this.maybeResize();const e=fe.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(fe.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}xe.BinaryWriter=io;function Xe(s,t,e){const r=e.value;e.value=function(...o){try{return r.apply(this,o)}catch(n){if(n instanceof RangeError){const u=n.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new Ae("Reached the end of buffer when deserializing")}throw n}}}class Oe{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new dr.default(t,"le")}readU128(){const t=this.readBuffer(16);return new dr.default(t,"le")}readU256(){const t=this.readBuffer(32);return new dr.default(t,"le")}readU512(){const t=this.readBuffer(64);return new dr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Ae(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return mu.decode(e)}catch(r){throw new Ae(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let o=0;o<e;++o)r.push(t());return r}}Je([Xe],Oe.prototype,"readU8",null);Je([Xe],Oe.prototype,"readU16",null);Je([Xe],Oe.prototype,"readU32",null);Je([Xe],Oe.prototype,"readU64",null);Je([Xe],Oe.prototype,"readU128",null);Je([Xe],Oe.prototype,"readU256",null);Je([Xe],Oe.prototype,"readU512",null);Je([Xe],Oe.prototype,"readString",null);Je([Xe],Oe.prototype,"readFixedArray",null);Je([Xe],Oe.prototype,"readArray",null);xe.BinaryReader=Oe;function so(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Nr(s,t,e,r,o){try{if(typeof r=="string")o[`write${so(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new Ae(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);o.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new Ae(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let n=0;n<r[1];n++)Nr(s,null,e[n],r[0],o)}else o.writeArray(e,n=>{Nr(s,t,n,r[0],o)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?o.writeU8(0):(o.writeU8(1),Nr(s,t,e,r.type,o));break}case"map":{o.writeU32(e.size),e.forEach((n,u)=>{Nr(s,t,u,r.key,o),Nr(s,t,n,r.value,o)});break}default:throw new Ae(`FieldType ${r} unrecognized`)}else oo(s,e,o)}catch(n){throw n instanceof Ae&&n.addToFieldPath(t),n}}function oo(s,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=s.get(t.constructor);if(!r)throw new Ae(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([o,n])=>{Nr(s,o,t[o],n,e)});else if(r.kind==="enum"){const o=t[r.field];for(let n=0;n<r.values.length;++n){const[u,y]=r.values[n];if(u===o){e.writeU8(n),Nr(s,u,t[u],y,e);break}}}else throw new Ae(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function bu(s,t,e=io){const r=new e;return oo(s,t,r),r.toArray()}var ao=xe.serialize=bu;function Or(s,t,e,r){try{if(typeof e=="string")return r[`read${so(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const o=[];for(let n=0;n<e[1];n++)o.push(Or(s,null,e[0],r));return o}else return r.readArray(()=>Or(s,t,e[0],r))}if(e.kind==="option")return r.readU8()?Or(s,t,e.type,r):void 0;if(e.kind==="map"){let o=new Map;const n=r.readU32();for(let u=0;u<n;u++){const y=Or(s,t,e.key,r),b=Or(s,t,e.value,r);o.set(y,b)}return o}return ji(s,e,r)}catch(o){throw o instanceof Ae&&o.addToFieldPath(t),o}}function ji(s,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=s.get(t);if(!r)throw new Ae(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const o={};for(const[n,u]of s.get(t).fields)o[n]=Or(s,n,u,e);return new t(o)}if(r.kind==="enum"){const o=e.readU8();if(o>=r.values.length)throw new Ae(`Enum index: ${o} is out of range`);const[n,u]=r.values[o],y=Or(s,n,u,e);return new t({[n]:y})}throw new Ae(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function vu(s,t,e,r=Oe){const o=new r(e),n=ji(s,t,o);if(o.offset<e.length)throw new Ae(`Unexpected ${e.length-o.offset} bytes after deserialized data`);return n}var co=xe.deserialize=vu;function xu(s,t,e,r=Oe){const o=new r(e);return ji(s,t,o)}ro=xe.deserializeUnchecked=xu;var O={};Object.defineProperty(O,"__esModule",{value:!0});O.s16=O.s8=O.nu64be=O.u48be=O.u40be=O.u32be=O.u24be=O.u16be=ve=O.nu64=O.u48=O.u40=ft=O.u32=O.u24=De=O.u16=Zt=O.u8=zr=O.offset=O.greedy=O.Constant=O.UTF8=O.CString=O.Blob=O.Boolean=O.BitField=O.BitStructure=O.VariantLayout=O.Union=O.UnionLayoutDiscriminator=O.UnionDiscriminator=O.Structure=O.Sequence=O.DoubleBE=O.Double=O.FloatBE=O.Float=O.NearInt64BE=O.NearInt64=O.NearUInt64BE=O.NearUInt64=O.IntBE=O.Int=O.UIntBE=O.UInt=O.OffsetLayout=O.GreedyCount=O.ExternalLayout=O.bindConstructorLayout=O.nameWithProperty=O.Layout=O.uint8ArrayToBuffer=O.checkUint8Array=void 0;O.constant=O.utf8=O.cstr=te=O.blob=O.unionLayoutDiscriminator=O.union=Be=O.seq=O.bits=ct=O.struct=O.f64be=O.f64=O.f32be=O.f32=O.ns64be=O.s48be=O.s40be=O.s32be=O.s24be=O.s16be=Ce=O.ns64=O.s48=O.s40=O.s32=O.s24=void 0;const Yi=Xn;function an(s){if(!(s instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}O.checkUint8Array=an;function Vt(s){return an(s),Yi.Buffer.from(s.buffer,s.byteOffset,s.length)}O.uint8ArrayToBuffer=Vt;class Yt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}O.Layout=Yt;function Ji(s,t){return t.property?s+"["+t.property+"]":s}O.nameWithProperty=Ji;function Su(s,t){if(typeof s!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(s,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Yt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");s.layout_=t,t.boundConstructor_=s,t.makeDestinationObject=()=>new s,Object.defineProperty(s.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(s,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}O.bindConstructorLayout=Su;class Re extends Yt{isCount(){throw new Error("ExternalLayout is abstract")}}O.ExternalLayout=Re;class uo extends Re{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){an(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}O.GreedyCount=uo;class Xi extends Re{constructor(t,e=0,r){if(!(t instanceof Yt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof $e||this.layout instanceof He}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}O.OffsetLayout=Xi;class $e extends Yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Vt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Vt(e).writeUIntLE(t,r,this.span),this.span}}O.UInt=$e;class He extends Yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Vt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Vt(e).writeUIntBE(t,r,this.span),this.span}}O.UIntBE=He;class Wr extends Yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Vt(t).readIntLE(e,this.span)}encode(t,e,r=0){return Vt(e).writeIntLE(t,r,this.span),this.span}}O.Int=Wr;class cn extends Yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Vt(t).readIntBE(e,this.span)}encode(t,e,r=0){return Vt(e).writeIntBE(t,r,this.span),this.span}}O.IntBE=cn;const Li=Math.pow(2,32);function ti(s){const t=Math.floor(s/Li),e=s-t*Li;return{hi32:t,lo32:e}}function ei(s,t){return s*Li+t}class ho extends Yt{constructor(t){super(8,t)}decode(t,e=0){const r=Vt(t),o=r.readUInt32LE(e),n=r.readUInt32LE(e+4);return ei(n,o)}encode(t,e,r=0){const o=ti(t),n=Vt(e);return n.writeUInt32LE(o.lo32,r),n.writeUInt32LE(o.hi32,r+4),8}}O.NearUInt64=ho;class fo extends Yt{constructor(t){super(8,t)}decode(t,e=0){const r=Vt(t),o=r.readUInt32BE(e),n=r.readUInt32BE(e+4);return ei(o,n)}encode(t,e,r=0){const o=ti(t),n=Vt(e);return n.writeUInt32BE(o.hi32,r),n.writeUInt32BE(o.lo32,r+4),8}}O.NearUInt64BE=fo;class lo extends Yt{constructor(t){super(8,t)}decode(t,e=0){const r=Vt(t),o=r.readUInt32LE(e),n=r.readInt32LE(e+4);return ei(n,o)}encode(t,e,r=0){const o=ti(t),n=Vt(e);return n.writeUInt32LE(o.lo32,r),n.writeInt32LE(o.hi32,r+4),8}}O.NearInt64=lo;class po extends Yt{constructor(t){super(8,t)}decode(t,e=0){const r=Vt(t),o=r.readInt32BE(e),n=r.readUInt32BE(e+4);return ei(o,n)}encode(t,e,r=0){const o=ti(t),n=Vt(e);return n.writeInt32BE(o.hi32,r),n.writeUInt32BE(o.lo32,r+4),8}}O.NearInt64BE=po;class go extends Yt{constructor(t){super(4,t)}decode(t,e=0){return Vt(t).readFloatLE(e)}encode(t,e,r=0){return Vt(e).writeFloatLE(t,r),4}}O.Float=go;class mo extends Yt{constructor(t){super(4,t)}decode(t,e=0){return Vt(t).readFloatBE(e)}encode(t,e,r=0){return Vt(e).writeFloatBE(t,r),4}}O.FloatBE=mo;class yo extends Yt{constructor(t){super(8,t)}decode(t,e=0){return Vt(t).readDoubleLE(e)}encode(t,e,r=0){return Vt(e).writeDoubleLE(t,r),8}}O.Double=yo;class wo extends Yt{constructor(t){super(8,t)}decode(t,e=0){return Vt(t).readDoubleBE(e)}encode(t,e,r=0){return Vt(e).writeDoubleBE(t,r),8}}O.DoubleBE=wo;class bo extends Yt{constructor(t,e,r){if(!(t instanceof Yt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Re&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let o=-1;!(e instanceof Re)&&0<t.span&&(o=e*t.span),super(o,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,o=this.count;if(o instanceof Re&&(o=o.decode(t,e)),0<this.elementLayout.span)r=o*this.elementLayout.span;else{let n=0;for(;n<o;)r+=this.elementLayout.getSpan(t,e+r),++n}return r}decode(t,e=0){const r=[];let o=0,n=this.count;for(n instanceof Re&&(n=n.decode(t,e));o<n;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),o+=1;return r}encode(t,e,r=0){const o=this.elementLayout,n=t.reduce((u,y)=>u+o.encode(y,e,r+u),0);return this.count instanceof Re&&this.count.encode(t.length,e,r),n}}O.Sequence=bo;class vo extends Yt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((n,u)=>n&&u instanceof Yt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const n of t)if(0>n.span&&n.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=t.reduce((n,u)=>n+u.getSpan(),0)}catch{}super(o,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((o,n)=>{const u=n.getSpan(t,e);return e+=u,o+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){an(t);const r=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(r[o.property]=o.decode(t,e)),e+=o.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const o=r;let n=0,u=0;for(const y of this.fields){let b=y.span;if(u=0<b?b:0,y.property!==void 0){const k=t[y.property];k!==void 0&&(u=y.encode(k,e,r),0>b&&(b=y.getSpan(e,r)))}n=r,r+=b}return n+u-o}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}O.Structure=vo;class Qi{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}O.UnionDiscriminator=Qi;class Kn extends Qi{constructor(t,e){if(!(t instanceof Re&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}O.UnionLayoutDiscriminator=Kn;class ts extends Yt{constructor(t,e,r){let o;if(t instanceof $e||t instanceof He)o=new Kn(new Xi(t));else if(t instanceof Re&&t.isCount())o=new Kn(t);else if(t instanceof Qi)o=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Yt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let n=-1;e&&(n=e.span,0<=n&&(t instanceof $e||t instanceof He)&&(n+=o.layout.span)),super(n,r),this.discriminator=o,this.usesPrefixDiscriminator=t instanceof $e||t instanceof He,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(y){return u(y)},this.configGetSourceVariant=function(y){u=y.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const o=this.discriminator,n=o.decode(t,e),u=this.registry[n];if(u===void 0){const y=this.defaultLayout;let b=0;this.usesPrefixDiscriminator&&(b=o.layout.span),r=this.makeDestinationObject(),r[o.property]=n,r[y.property]=y.decode(t,e+b)}else r=u.decode(t,e);return r}encode(t,e,r=0){const o=this.getSourceVariant(t);if(o===void 0){const n=this.discriminator,u=this.defaultLayout;let y=0;return this.usesPrefixDiscriminator&&(y=n.layout.span),n.encode(t[n.property],e,r),y+u.encode(t[u.property],e,r+y)}return o.encode(t,e,r)}addVariant(t,e,r){const o=new xo(this,t,e,r);return this.registry[t]=o,o}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}O.Union=ts;class xo extends Yt{constructor(t,e,r,o){if(!(t instanceof ts))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&o===void 0&&(o=r,r=null),r){if(!(r instanceof Yt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let n=t.span;0>t.span&&(n=r?r.span:0,0<=n&&t.usesPrefixDiscriminator&&(n+=t.discriminator.layout.span)),super(n,o),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let o=0;return this.layout&&(o=this.layout.getSpan(t,e+r)),r+o}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+o):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let n=o;if(this.layout&&(this.layout.encode(t[this.property],e,r+o),n+=this.layout.getSpan(e,r+o),0<=this.union.span&&n>this.union.span))throw new Error("encoded variant overruns containing union");return n}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}O.VariantLayout=xo;function Yr(s){return 0>s&&(s+=4294967296),s}class es extends Yt{constructor(t,e,r){if(!(t instanceof $e||t instanceof He))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let o=0;this._packedSetValue=function(n){return o=Yr(n),this},this._packedGetValue=function(){return o}}decode(t,e=0){const r=this.makeDestinationObject(),o=this.word.decode(t,e);this._packedSetValue(o);for(const n of this.fields)n.property!==void 0&&(r[n.property]=n.decode(t));return r}encode(t,e,r=0){const o=this.word.decode(e,r);this._packedSetValue(o);for(const n of this.fields)if(n.property!==void 0){const u=t[n.property];u!==void 0&&n.encode(u)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new rs(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new So(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}O.BitStructure=es;class rs{constructor(t,e,r){if(!(t instanceof es))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const o=8*t.span,n=t.fields.reduce((u,y)=>u+y.bits,0);if(e+n>o)throw new Error("bits too long for span remainder ("+(o-n)+" of "+o+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=n,this.container.msb&&(this.start=o-n-e),this.wordMask=Yr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Yr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Yr(t&this.valueMask))throw new TypeError(Ji("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Yr(t<<this.start);this.container._packedSetValue(Yr(e&~this.wordMask)|r)}}O.BitField=rs;let So=class extends rs{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};O.Boolean=So;class Mo extends Yt{constructor(t,e){if(!(t instanceof Re&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Re||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Vt(t).slice(e,e+r)}encode(t,e,r){let o=this.length;if(this.length instanceof Re&&(o=t.length),!(t instanceof Uint8Array&&o===t.length))throw new TypeError(Ji("Blob.encode",this)+" requires (length "+o+") Uint8Array as src");if(r+o>e.length)throw new RangeError("encoding overruns Uint8Array");const n=Vt(t);return Vt(e).write(n.toString("hex"),r,o,"hex"),this.length instanceof Re&&this.length.encode(o,e,r),o}}O.Blob=Mo;class ko extends Yt{constructor(t){super(-1,t)}getSpan(t,e=0){an(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Vt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=Yi.Buffer.from(t,"utf8"),n=o.length;if(r+n>e.length)throw new RangeError("encoding overruns Buffer");const u=Vt(e);return o.copy(u,r),u[r+n]=0,n+1}}O.CString=ko;class _o extends Yt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return an(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Vt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=Yi.Buffer.from(t,"utf8"),n=o.length;if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");if(r+n>e.length)throw new RangeError("encoding overruns Buffer");return o.copy(Vt(e),r),n}}O.UTF8=_o;class Eo extends Yt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}O.Constant=Eo;O.greedy=(s,t)=>new uo(s,t);var zr=O.offset=(s,t,e)=>new Xi(s,t,e),Zt=O.u8=s=>new $e(1,s),De=O.u16=s=>new $e(2,s);O.u24=s=>new $e(3,s);var ft=O.u32=s=>new $e(4,s);O.u40=s=>new $e(5,s);O.u48=s=>new $e(6,s);var ve=O.nu64=s=>new ho(s);O.u16be=s=>new He(2,s);O.u24be=s=>new He(3,s);O.u32be=s=>new He(4,s);O.u40be=s=>new He(5,s);O.u48be=s=>new He(6,s);O.nu64be=s=>new fo(s);O.s8=s=>new Wr(1,s);O.s16=s=>new Wr(2,s);O.s24=s=>new Wr(3,s);O.s32=s=>new Wr(4,s);O.s40=s=>new Wr(5,s);O.s48=s=>new Wr(6,s);var Ce=O.ns64=s=>new lo(s);O.s16be=s=>new cn(2,s);O.s24be=s=>new cn(3,s);O.s32be=s=>new cn(4,s);O.s40be=s=>new cn(5,s);O.s48be=s=>new cn(6,s);O.ns64be=s=>new po(s);O.f32=s=>new go(s);O.f32be=s=>new mo(s);O.f64=s=>new yo(s);O.f64be=s=>new wo(s);var ct=O.struct=(s,t,e)=>new vo(s,t,e);O.bits=(s,t,e)=>new es(s,t,e);var Be=O.seq=(s,t,e)=>new bo(s,t,e);O.union=(s,t,e)=>new ts(s,t,e);O.unionLayoutDiscriminator=(s,t)=>new Kn(s,t);var te=O.blob=(s,t)=>new Mo(s,t);O.cstr=s=>new ko(s);O.utf8=(s,t)=>new _o(s,t);O.constant=(s,t)=>new Eo(s,t);var En={};Object.defineProperty(En,"__esModule",{value:!0});function Mu(s){{const t=fe.from(s);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var ku=En.toBigIntLE=Mu;function _u(s){{const t=s.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}En.toBigIntBE=_u;function Eu(s,t){{const e=s.toString(16),r=fe.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var Bu=En.toBufferLE=Eu;function Au(s,t){{const e=s.toString(16);return fe.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}En.toBufferBE=Au;class Iu extends TypeError{constructor(t,e){let r;const{message:o,explanation:n,...u}=t,{path:y}=t,b=y.length===0?o:`At path: ${y.join(".")} -- ${o}`;super(n??b),n!=null&&(this.cause=b),Object.assign(this,u),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Ru(s){return Bn(s)&&typeof s[Symbol.iterator]=="function"}function Bn(s){return typeof s=="object"&&s!=null}function Wn(s){return Bn(s)&&!Array.isArray(s)}function Ge(s){return typeof s=="symbol"?s.toString():typeof s=="string"?JSON.stringify(s):`${s}`}function Lu(s){const{done:t,value:e}=s.next();return t?void 0:e}function Tu(s,t,e,r){if(s===!0)return;s===!1?s={}:typeof s=="string"&&(s={message:s});const{path:o,branch:n}=t,{type:u}=e,{refinement:y,message:b=`Expected a value of type \`${u}\`${y?` with refinement \`${y}\``:""}, but received: \`${Ge(r)}\``}=s;return{value:r,type:u,refinement:y,key:o[o.length-1],path:o,branch:n,...s,message:b}}function*xs(s,t,e,r){Ru(s)||(s=[s]);for(const o of s){const n=Tu(o,t,e,r);n&&(yield n)}}function*ns(s,t,e={}){const{path:r=[],branch:o=[s],coerce:n=!1,mask:u=!1}=e,y={path:r,branch:o,mask:u};n&&(s=t.coercer(s,y));let b="valid";for(const k of t.validator(s,y))k.explanation=e.message,b="not_valid",yield[k,void 0];for(let[k,x,E]of t.entries(s,y)){const q=ns(x,E,{path:k===void 0?r:[...r,k],branch:k===void 0?o:[...o,x],coerce:n,mask:u,message:e.message});for(const R of q)R[0]?(b=R[0].refinement!=null?"not_refined":"not_valid",yield[R[0],void 0]):n&&(x=R[1],k===void 0?s=x:s instanceof Map?s.set(k,x):s instanceof Set?s.add(x):Bn(s)&&(x!==void 0||k in s)&&(s[k]=x))}if(b!=="not_valid")for(const k of t.refiner(s,y))k.explanation=e.message,b="not_refined",yield[k,void 0];b==="valid"&&(yield[void 0,s])}let Qe=class{constructor(t){const{type:e,schema:r,validator:o,refiner:n,coercer:u=b=>b,entries:y=function*(){}}=t;this.type=e,this.schema=r,this.entries=y,this.coercer=u,o?this.validator=(b,k)=>{const x=o(b,k);return xs(x,k,this,b)}:this.validator=()=>[],n?this.refiner=(b,k)=>{const x=n(b,k);return xs(x,k,this,b)}:this.refiner=()=>[]}assert(t,e){return Cu(t,this,e)}create(t,e){return Y(t,this,e)}is(t){return Bo(t,this)}mask(t,e){return Uu(t,this,e)}validate(t,e={}){return An(t,this,e)}};function Cu(s,t,e){const r=An(s,t,{message:e});if(r[0])throw r[0]}function Y(s,t,e){const r=An(s,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Uu(s,t,e){const r=An(s,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Bo(s,t){return!An(s,t)[0]}function An(s,t,e={}){const r=ns(s,t,e),o=Lu(r);return o[0]?[new Iu(o[0],function*(){for(const u of r)u[0]&&(yield u[0])}),void 0]:[void 0,o[1]]}function Hr(s,t){return new Qe({type:s,schema:null,validator:t})}function Pu(){return Hr("any",()=>!0)}function X(s){return new Qe({type:"array",schema:s,*entries(t){if(s&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,s]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ge(t)}`}})}function Ye(){return Hr("boolean",s=>typeof s=="boolean")}function is(s){return Hr("instance",t=>t instanceof s||`Expected a \`${s.name}\` instance, but received: ${Ge(t)}`)}function ie(s){const t=Ge(s),e=typeof s;return new Qe({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?s:null,validator(r){return r===s||`Expected the literal \`${t}\`, but received: ${Ge(r)}`}})}function Nu(){return Hr("never",()=>!1)}function tt(s){return new Qe({...s,validator:(t,e)=>t===null||s.validator(t,e),refiner:(t,e)=>t===null||s.refiner(t,e)})}function C(){return Hr("number",s=>typeof s=="number"&&!isNaN(s)||`Expected a number, but received: ${Ge(s)}`)}function dt(s){return new Qe({...s,validator:(t,e)=>t===void 0||s.validator(t,e),refiner:(t,e)=>t===void 0||s.refiner(t,e)})}function Ao(s,t){return new Qe({type:"record",schema:null,*entries(e){if(Bn(e))for(const r in e){const o=e[r];yield[r,r,s],yield[r,o,t]}},validator(e){return Wn(e)||`Expected an object, but received: ${Ge(e)}`},coercer(e){return Wn(e)?{...e}:e}})}function G(){return Hr("string",s=>typeof s=="string"||`Expected a string, but received: ${Ge(s)}`)}function ss(s){const t=Nu();return new Qe({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(s.length,e.length);for(let o=0;o<r;o++)yield[o,e[o],s[o]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ge(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function H(s){const t=Object.keys(s);return new Qe({type:"type",schema:s,*entries(e){if(Bn(e))for(const r of t)yield[r,e[r],s[r]]},validator(e){return Wn(e)||`Expected an object, but received: ${Ge(e)}`},coercer(e){return Wn(e)?{...e}:e}})}function Ie(s){const t=s.map(e=>e.type).join(" | ");return new Qe({type:"union",schema:null,coercer(e,r){for(const o of s){const[n,u]=o.validate(e,{coerce:!0,mask:r.mask});if(!n)return u}return e},validator(e,r){const o=[];for(const n of s){const[...u]=ns(e,n,r),[y]=u;if(y[0])for(const[b]of u)b&&o.push(b);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ge(e)}`,...o]}})}function un(){return Hr("unknown",()=>!0)}function In(s,t,e){return new Qe({...s,coercer:(r,o)=>Bo(r,t)?s.coercer(e(r,o),o):s.coercer(r,o)})}var Un,Ou=new Uint8Array(16);function Io(){if(!Un&&(Un=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Un))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Un(Ou)}const qu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ri(s){return typeof s=="string"&&qu.test(s)}var be=[];for(var gi=0;gi<256;++gi)be.push((gi+256).toString(16).substr(1));function ni(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(be[s[t+0]]+be[s[t+1]]+be[s[t+2]]+be[s[t+3]]+"-"+be[s[t+4]]+be[s[t+5]]+"-"+be[s[t+6]]+be[s[t+7]]+"-"+be[s[t+8]]+be[s[t+9]]+"-"+be[s[t+10]]+be[s[t+11]]+be[s[t+12]]+be[s[t+13]]+be[s[t+14]]+be[s[t+15]]).toLowerCase();if(!ri(e))throw TypeError("Stringified UUID is invalid");return e}var Ss,mi,yi=0,wi=0;function Fu(s,t,e){var r=t&&e||0,o=t||new Array(16);s=s||{};var n=s.node||Ss,u=s.clockseq!==void 0?s.clockseq:mi;if(n==null||u==null){var y=s.random||(s.rng||Io)();n==null&&(n=Ss=[y[0]|1,y[1],y[2],y[3],y[4],y[5]]),u==null&&(u=mi=(y[6]<<8|y[7])&16383)}var b=s.msecs!==void 0?s.msecs:Date.now(),k=s.nsecs!==void 0?s.nsecs:wi+1,x=b-yi+(k-wi)/1e4;if(x<0&&s.clockseq===void 0&&(u=u+1&16383),(x<0||b>yi)&&s.nsecs===void 0&&(k=0),k>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");yi=b,wi=k,mi=u,b+=122192928e5;var E=((b&268435455)*1e4+k)%4294967296;o[r++]=E>>>24&255,o[r++]=E>>>16&255,o[r++]=E>>>8&255,o[r++]=E&255;var q=b/4294967296*1e4&268435455;o[r++]=q>>>8&255,o[r++]=q&255,o[r++]=q>>>24&15|16,o[r++]=q>>>16&255,o[r++]=u>>>8|128,o[r++]=u&255;for(var R=0;R<6;++R)o[r+R]=n[R];return t||ni(o)}function Ro(s){if(!ri(s))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(s.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(s.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(s.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(s.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(s.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function zu(s){s=unescape(encodeURIComponent(s));for(var t=[],e=0;e<s.length;++e)t.push(s.charCodeAt(e));return t}var Du="6ba7b810-9dad-11d1-80b4-00c04fd430c8",$u="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Lo(s,t,e){function r(o,n,u,y){if(typeof o=="string"&&(o=zu(o)),typeof n=="string"&&(n=Ro(n)),n.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var b=new Uint8Array(16+o.length);if(b.set(n),b.set(o,n.length),b=e(b),b[6]=b[6]&15|t,b[8]=b[8]&63|128,u){y=y||0;for(var k=0;k<16;++k)u[y+k]=b[k];return u}return ni(b)}try{r.name=s}catch{}return r.DNS=Du,r.URL=$u,r}function Ku(s){if(typeof s=="string"){var t=unescape(encodeURIComponent(s));s=new Uint8Array(t.length);for(var e=0;e<t.length;++e)s[e]=t.charCodeAt(e)}return Wu(Hu(Gu(s),s.length*8))}function Wu(s){for(var t=[],e=s.length*32,r="0123456789abcdef",o=0;o<e;o+=8){var n=s[o>>5]>>>o%32&255,u=parseInt(r.charAt(n>>>4&15)+r.charAt(n&15),16);t.push(u)}return t}function To(s){return(s+64>>>9<<4)+14+1}function Hu(s,t){s[t>>5]|=128<<t%32,s[To(t)-1]=t;for(var e=1732584193,r=-271733879,o=-1732584194,n=271733878,u=0;u<s.length;u+=16){var y=e,b=r,k=o,x=n;e=Me(e,r,o,n,s[u],7,-680876936),n=Me(n,e,r,o,s[u+1],12,-389564586),o=Me(o,n,e,r,s[u+2],17,606105819),r=Me(r,o,n,e,s[u+3],22,-1044525330),e=Me(e,r,o,n,s[u+4],7,-176418897),n=Me(n,e,r,o,s[u+5],12,1200080426),o=Me(o,n,e,r,s[u+6],17,-1473231341),r=Me(r,o,n,e,s[u+7],22,-45705983),e=Me(e,r,o,n,s[u+8],7,1770035416),n=Me(n,e,r,o,s[u+9],12,-1958414417),o=Me(o,n,e,r,s[u+10],17,-42063),r=Me(r,o,n,e,s[u+11],22,-1990404162),e=Me(e,r,o,n,s[u+12],7,1804603682),n=Me(n,e,r,o,s[u+13],12,-40341101),o=Me(o,n,e,r,s[u+14],17,-1502002290),r=Me(r,o,n,e,s[u+15],22,1236535329),e=ke(e,r,o,n,s[u+1],5,-165796510),n=ke(n,e,r,o,s[u+6],9,-1069501632),o=ke(o,n,e,r,s[u+11],14,643717713),r=ke(r,o,n,e,s[u],20,-373897302),e=ke(e,r,o,n,s[u+5],5,-701558691),n=ke(n,e,r,o,s[u+10],9,38016083),o=ke(o,n,e,r,s[u+15],14,-660478335),r=ke(r,o,n,e,s[u+4],20,-405537848),e=ke(e,r,o,n,s[u+9],5,568446438),n=ke(n,e,r,o,s[u+14],9,-1019803690),o=ke(o,n,e,r,s[u+3],14,-187363961),r=ke(r,o,n,e,s[u+8],20,1163531501),e=ke(e,r,o,n,s[u+13],5,-1444681467),n=ke(n,e,r,o,s[u+2],9,-51403784),o=ke(o,n,e,r,s[u+7],14,1735328473),r=ke(r,o,n,e,s[u+12],20,-1926607734),e=_e(e,r,o,n,s[u+5],4,-378558),n=_e(n,e,r,o,s[u+8],11,-2022574463),o=_e(o,n,e,r,s[u+11],16,1839030562),r=_e(r,o,n,e,s[u+14],23,-35309556),e=_e(e,r,o,n,s[u+1],4,-1530992060),n=_e(n,e,r,o,s[u+4],11,1272893353),o=_e(o,n,e,r,s[u+7],16,-155497632),r=_e(r,o,n,e,s[u+10],23,-1094730640),e=_e(e,r,o,n,s[u+13],4,681279174),n=_e(n,e,r,o,s[u],11,-358537222),o=_e(o,n,e,r,s[u+3],16,-722521979),r=_e(r,o,n,e,s[u+6],23,76029189),e=_e(e,r,o,n,s[u+9],4,-640364487),n=_e(n,e,r,o,s[u+12],11,-421815835),o=_e(o,n,e,r,s[u+15],16,530742520),r=_e(r,o,n,e,s[u+2],23,-995338651),e=Ee(e,r,o,n,s[u],6,-198630844),n=Ee(n,e,r,o,s[u+7],10,1126891415),o=Ee(o,n,e,r,s[u+14],15,-1416354905),r=Ee(r,o,n,e,s[u+5],21,-57434055),e=Ee(e,r,o,n,s[u+12],6,1700485571),n=Ee(n,e,r,o,s[u+3],10,-1894986606),o=Ee(o,n,e,r,s[u+10],15,-1051523),r=Ee(r,o,n,e,s[u+1],21,-2054922799),e=Ee(e,r,o,n,s[u+8],6,1873313359),n=Ee(n,e,r,o,s[u+15],10,-30611744),o=Ee(o,n,e,r,s[u+6],15,-1560198380),r=Ee(r,o,n,e,s[u+13],21,1309151649),e=Ee(e,r,o,n,s[u+4],6,-145523070),n=Ee(n,e,r,o,s[u+11],10,-1120210379),o=Ee(o,n,e,r,s[u+2],15,718787259),r=Ee(r,o,n,e,s[u+9],21,-343485551),e=pr(e,y),r=pr(r,b),o=pr(o,k),n=pr(n,x)}return[e,r,o,n]}function Gu(s){if(s.length===0)return[];for(var t=s.length*8,e=new Uint32Array(To(t)),r=0;r<t;r+=8)e[r>>5]|=(s[r/8]&255)<<r%32;return e}function pr(s,t){var e=(s&65535)+(t&65535),r=(s>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Vu(s,t){return s<<t|s>>>32-t}function ii(s,t,e,r,o,n){return pr(Vu(pr(pr(t,s),pr(r,n)),o),e)}function Me(s,t,e,r,o,n,u){return ii(t&e|~t&r,s,t,o,n,u)}function ke(s,t,e,r,o,n,u){return ii(t&r|e&~r,s,t,o,n,u)}function _e(s,t,e,r,o,n,u){return ii(t^e^r,s,t,o,n,u)}function Ee(s,t,e,r,o,n,u){return ii(e^(t|~r),s,t,o,n,u)}var Zu=Lo("v3",48,Ku);function ju(s,t,e){s=s||{};var r=s.random||(s.rng||Io)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=r[o];return t}return ni(r)}function Yu(s,t,e,r){switch(s){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function bi(s,t){return s<<t|s>>>32-t}function Ju(s){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){var r=unescape(encodeURIComponent(s));s=[];for(var o=0;o<r.length;++o)s.push(r.charCodeAt(o))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);for(var n=s.length/4+2,u=Math.ceil(n/16),y=new Array(u),b=0;b<u;++b){for(var k=new Uint32Array(16),x=0;x<16;++x)k[x]=s[b*64+x*4]<<24|s[b*64+x*4+1]<<16|s[b*64+x*4+2]<<8|s[b*64+x*4+3];y[b]=k}y[u-1][14]=(s.length-1)*8/Math.pow(2,32),y[u-1][14]=Math.floor(y[u-1][14]),y[u-1][15]=(s.length-1)*8&4294967295;for(var E=0;E<u;++E){for(var q=new Uint32Array(80),R=0;R<16;++R)q[R]=y[E][R];for(var I=16;I<80;++I)q[I]=bi(q[I-3]^q[I-8]^q[I-14]^q[I-16],1);for(var B=e[0],A=e[1],P=e[2],$=e[3],z=e[4],V=0;V<80;++V){var W=Math.floor(V/20),K=bi(B,5)+Yu(W,A,P,$)+z+t[W]+q[V]>>>0;z=$,$=P,P=bi(A,30)>>>0,A=B,B=K}e[0]=e[0]+B>>>0,e[1]=e[1]+A>>>0,e[2]=e[2]+P>>>0,e[3]=e[3]+$>>>0,e[4]=e[4]+z>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Xu=Lo("v5",80,Ju);const Qu="00000000-0000-0000-0000-000000000000";function th(s){if(!ri(s))throw TypeError("Invalid UUID");return parseInt(s.substr(14,1),16)}const eh=Object.freeze(Object.defineProperty({__proto__:null,NIL:Qu,parse:Ro,stringify:ni,v1:Fu,v3:Zu,v4:ju,v5:Xu,validate:ri,version:th},Symbol.toStringTag,{value:"Module"})),Co=Fi(eh),rh=Co.v4,nh=function(s,t,e,r){if(typeof s!="string")throw new TypeError(s+" must be a string");r=r||{};const o=typeof r.version=="number"?r.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const n={method:s};if(o===2&&(n.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");n.params=t}if(typeof e>"u"){const u=typeof r.generator=="function"?r.generator:function(){return rh()};n.id=u(n,r)}else o===2&&e===null?r.notificationIdNull&&(n.id=null):n.id=e;return n};var ih=nh;const sh=Co.v4,oh=ih,xn=function(s,t){if(!(this instanceof xn))return new xn(s,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return sh()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=s};var ah=xn;xn.prototype.request=function(s,t,e,r){const o=this;let n=null;const u=Array.isArray(s)&&typeof t=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&s&&typeof s=="object"&&typeof t=="function")r=t,n=s;else{typeof e=="function"&&(r=e,e=void 0);const k=typeof r=="function";try{n=oh(s,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(x){if(k)return r(x);throw x}if(!k)return n}let b;try{b=JSON.stringify(n,this.options.replacer)}catch(k){return r(k)}return this.callServer(b,function(k,x){o._parseResponse(k,x,r)}),n};xn.prototype._parseResponse=function(s,t,e){if(s){e(s);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(o){return e(o)}if(e.length===3)if(Array.isArray(r)){const o=function(u){return typeof u.error<"u"},n=function(u){return!o(u)};return e(null,r.filter(o),r.filter(n))}else return e(null,r.error,r.result);e(null,r)};const ch=Zn(ah);var Uo={exports:{}};(function(s){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(b,k,x){this.fn=b,this.context=k,this.once=x||!1}function n(b,k,x,E,q){if(typeof x!="function")throw new TypeError("The listener must be a function");var R=new o(x,E||b,q),I=e?e+k:k;return b._events[I]?b._events[I].fn?b._events[I]=[b._events[I],R]:b._events[I].push(R):(b._events[I]=R,b._eventsCount++),b}function u(b,k){--b._eventsCount===0?b._events=new r:delete b._events[k]}function y(){this._events=new r,this._eventsCount=0}y.prototype.eventNames=function(){var k=[],x,E;if(this._eventsCount===0)return k;for(E in x=this._events)t.call(x,E)&&k.push(e?E.slice(1):E);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(x)):k},y.prototype.listeners=function(k){var x=e?e+k:k,E=this._events[x];if(!E)return[];if(E.fn)return[E.fn];for(var q=0,R=E.length,I=new Array(R);q<R;q++)I[q]=E[q].fn;return I},y.prototype.listenerCount=function(k){var x=e?e+k:k,E=this._events[x];return E?E.fn?1:E.length:0},y.prototype.emit=function(k,x,E,q,R,I){var B=e?e+k:k;if(!this._events[B])return!1;var A=this._events[B],P=arguments.length,$,z;if(A.fn){switch(A.once&&this.removeListener(k,A.fn,void 0,!0),P){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,x),!0;case 3:return A.fn.call(A.context,x,E),!0;case 4:return A.fn.call(A.context,x,E,q),!0;case 5:return A.fn.call(A.context,x,E,q,R),!0;case 6:return A.fn.call(A.context,x,E,q,R,I),!0}for(z=1,$=new Array(P-1);z<P;z++)$[z-1]=arguments[z];A.fn.apply(A.context,$)}else{var V=A.length,W;for(z=0;z<V;z++)switch(A[z].once&&this.removeListener(k,A[z].fn,void 0,!0),P){case 1:A[z].fn.call(A[z].context);break;case 2:A[z].fn.call(A[z].context,x);break;case 3:A[z].fn.call(A[z].context,x,E);break;case 4:A[z].fn.call(A[z].context,x,E,q);break;default:if(!$)for(W=1,$=new Array(P-1);W<P;W++)$[W-1]=arguments[W];A[z].fn.apply(A[z].context,$)}}return!0},y.prototype.on=function(k,x,E){return n(this,k,x,E,!1)},y.prototype.once=function(k,x,E){return n(this,k,x,E,!0)},y.prototype.removeListener=function(k,x,E,q){var R=e?e+k:k;if(!this._events[R])return this;if(!x)return u(this,R),this;var I=this._events[R];if(I.fn)I.fn===x&&(!q||I.once)&&(!E||I.context===E)&&u(this,R);else{for(var B=0,A=[],P=I.length;B<P;B++)(I[B].fn!==x||q&&!I[B].once||E&&I[B].context!==E)&&A.push(I[B]);A.length?this._events[R]=A.length===1?A[0]:A:u(this,R)}return this},y.prototype.removeAllListeners=function(k){var x;return k?(x=e?e+k:k,this._events[x]&&u(this,x)):(this._events=new r,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=e,y.EventEmitter=y,s.exports=y})(Uo);var uh=Uo.exports;const Po=Zn(uh);var hh=class extends Po{constructor(t,e,r){super();me(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=o=>this.emit("message",o.data),this.socket.onerror=o=>this.emit("error",o),this.socket.onclose=o=>{this.emit("close",o.code,o.reason)}}send(t,e,r){const o=r||e;try{this.socket.send(t),o()}catch(n){o(n)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function fh(s,t){return new hh(s,t)}var lh=class{encode(s){return JSON.stringify(s)}decode(s){return JSON.parse(s)}},dh=class extends Po{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:o=!0,reconnect_interval:n=1e3,max_reconnects:u=5,...y}={},b,k){super();me(this,"address");me(this,"rpc_id");me(this,"queue");me(this,"options");me(this,"autoconnect");me(this,"ready");me(this,"reconnect");me(this,"reconnect_timer_id");me(this,"reconnect_interval");me(this,"max_reconnects");me(this,"rest_options");me(this,"current_reconnects");me(this,"generate_request_id");me(this,"socket");me(this,"webSocketFactory");me(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=o,this.reconnect_timer_id=void 0,this.reconnect_interval=n,this.max_reconnects=u,this.rest_options=y,this.current_reconnects=0,this.generate_request_id=b||(()=>++this.rpc_id),k?this.dataPack=k:this.dataPack=new lh,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,o){return!o&&typeof r=="object"&&(o=r,r=null),new Promise((n,u)=>{if(!this.ready)return u(new Error("socket not ready"));const y=this.generate_request_id(t,e),b={jsonrpc:"2.0",method:t,params:e||void 0,id:y};this.socket.send(this.dataPack.encode(b),o,k=>{if(k)return u(k);this.queue[y]={promise:[n,u]},r&&(this.queue[y].timeout=setTimeout(()=>{delete this.queue[y],u(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,o)=>{if(!this.ready)return o(new Error("socket not ready"));const n={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(n),u=>{if(u)return o(u);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=Et.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const o=[r.notification];if(r.params.constructor===Object)o.push(r.params);else for(let n=0;n<r.params.length;n++)o.push(r.params[n]);return Promise.resolve().then(()=>{this.emit.apply(this,o)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:o})=>{this.ready&&setTimeout(()=>this.emit("close",r,o),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class No extends Ds{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ua(t);const r=Di(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,n=new Uint8Array(o);n.set(r.length>o?t.create().update(r).digest():r);for(let u=0;u<n.length;u++)n[u]^=54;this.iHash.update(n),this.oHash=t.create();for(let u=0;u<n.length;u++)n[u]^=106;this.oHash.update(n),n.fill(0)}update(t){return qn(this),this.iHash.update(t),this}digestInto(t){qn(this),Yn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:o,destroyed:n,blockLen:u,outputLen:y}=this;return t=t,t.finished=o,t.destroyed=n,t.blockLen=u,t.outputLen=y,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Oo=(s,t,e)=>new No(s,t).update(e).digest();Oo.create=(s,t)=>new No(s,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ph(s){const t=Wi(s);on(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:o}=t;if(e){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:gh,hexToBytes:mh}=xc,qr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(s){const{Err:t}=qr;if(s.length<2||s[0]!==2)throw new t("Invalid signature integer tag");const e=s[1],r=s.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:gh(r),l:s.subarray(e+2)}},toSig(s){const{Err:t}=qr,e=typeof s=="string"?mh(s):s;kn(e);let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:n}=qr._parseInt(e.subarray(2)),{d:u,l:y}=qr._parseInt(n);if(y.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:u}},hexFromSig(s){const t=k=>Number.parseInt(k[0],16)&8?"00"+k:k,e=k=>{const x=k.toString(16);return x.length&1?`0${x}`:x},r=t(e(s.s)),o=t(e(s.r)),n=r.length/2,u=o.length/2,y=e(n),b=e(u);return`30${e(u+n+4)}02${b}${o}02${y}${r}`}},nr=BigInt(0),ze=BigInt(1);BigInt(2);const Ms=BigInt(3);BigInt(4);function yh(s){const t=ph(s),{Fp:e}=t,r=t.toBytes||((I,B,A)=>{const P=B.toAffine();return Kr(Uint8Array.from([4]),e.toBytes(P.x),e.toBytes(P.y))}),o=t.fromBytes||(I=>{const B=I.subarray(1),A=e.fromBytes(B.subarray(0,e.BYTES)),P=e.fromBytes(B.subarray(e.BYTES,2*e.BYTES));return{x:A,y:P}});function n(I){const{a:B,b:A}=t,P=e.sqr(I),$=e.mul(P,I);return e.add(e.add($,e.mul(I,B)),A)}if(!e.eql(e.sqr(t.Gy),n(t.Gx)))throw new Error("bad generator point: equation left != right");function u(I){return typeof I=="bigint"&&nr<I&&I<t.n}function y(I){if(!u(I))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function b(I){const{allowedPrivateKeyLengths:B,nByteLength:A,wrapPrivateKey:P,n:$}=t;if(B&&typeof I!="bigint"){if(Dr(I)&&(I=$r(I)),typeof I!="string"||!B.includes(I.length))throw new Error("Invalid key");I=I.padStart(A*2,"0")}let z;try{z=typeof I=="bigint"?I:Fr(de("private key",I,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof I}`)}return P&&(z=re(z,$)),y(z),z}const k=new Map;function x(I){if(!(I instanceof E))throw new Error("ProjectivePoint expected")}class E{constructor(B,A,P){if(this.px=B,this.py=A,this.pz=P,B==null||!e.isValid(B))throw new Error("x required");if(A==null||!e.isValid(A))throw new Error("y required");if(P==null||!e.isValid(P))throw new Error("z required")}static fromAffine(B){const{x:A,y:P}=B||{};if(!B||!e.isValid(A)||!e.isValid(P))throw new Error("invalid affine point");if(B instanceof E)throw new Error("projective point not allowed");const $=z=>e.eql(z,e.ZERO);return $(A)&&$(P)?E.ZERO:new E(A,P,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(B){const A=e.invertBatch(B.map(P=>P.pz));return B.map((P,$)=>P.toAffine(A[$])).map(E.fromAffine)}static fromHex(B){const A=E.fromAffine(o(de("pointHex",B)));return A.assertValidity(),A}static fromPrivateKey(B){return E.BASE.multiply(b(B))}_setWindowSize(B){this._WINDOW_SIZE=B,k.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:B,y:A}=this.toAffine();if(!e.isValid(B)||!e.isValid(A))throw new Error("bad point: x or y not FE");const P=e.sqr(A),$=n(B);if(!e.eql(P,$))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:B}=this.toAffine();if(e.isOdd)return!e.isOdd(B);throw new Error("Field doesn't support isOdd")}equals(B){x(B);const{px:A,py:P,pz:$}=this,{px:z,py:V,pz:W}=B,K=e.eql(e.mul(A,W),e.mul(z,$)),j=e.eql(e.mul(P,W),e.mul(V,$));return K&&j}negate(){return new E(this.px,e.neg(this.py),this.pz)}double(){const{a:B,b:A}=t,P=e.mul(A,Ms),{px:$,py:z,pz:V}=this;let W=e.ZERO,K=e.ZERO,j=e.ZERO,Q=e.mul($,$),Gt=e.mul(z,z),kt=e.mul(V,V),Z=e.mul($,z);return Z=e.add(Z,Z),j=e.mul($,V),j=e.add(j,j),W=e.mul(B,j),K=e.mul(P,kt),K=e.add(W,K),W=e.sub(Gt,K),K=e.add(Gt,K),K=e.mul(W,K),W=e.mul(Z,W),j=e.mul(P,j),kt=e.mul(B,kt),Z=e.sub(Q,kt),Z=e.mul(B,Z),Z=e.add(Z,j),j=e.add(Q,Q),Q=e.add(j,Q),Q=e.add(Q,kt),Q=e.mul(Q,Z),K=e.add(K,Q),kt=e.mul(z,V),kt=e.add(kt,kt),Q=e.mul(kt,Z),W=e.sub(W,Q),j=e.mul(kt,Gt),j=e.add(j,j),j=e.add(j,j),new E(W,K,j)}add(B){x(B);const{px:A,py:P,pz:$}=this,{px:z,py:V,pz:W}=B;let K=e.ZERO,j=e.ZERO,Q=e.ZERO;const Gt=t.a,kt=e.mul(t.b,Ms);let Z=e.mul(A,z),Wt=e.mul(P,V),v=e.mul($,W),i=e.add(A,P),c=e.add(z,V);i=e.mul(i,c),c=e.add(Z,Wt),i=e.sub(i,c),c=e.add(A,$);let h=e.add(z,W);return c=e.mul(c,h),h=e.add(Z,v),c=e.sub(c,h),h=e.add(P,$),K=e.add(V,W),h=e.mul(h,K),K=e.add(Wt,v),h=e.sub(h,K),Q=e.mul(Gt,c),K=e.mul(kt,v),Q=e.add(K,Q),K=e.sub(Wt,Q),Q=e.add(Wt,Q),j=e.mul(K,Q),Wt=e.add(Z,Z),Wt=e.add(Wt,Z),v=e.mul(Gt,v),c=e.mul(kt,c),Wt=e.add(Wt,v),v=e.sub(Z,v),v=e.mul(Gt,v),c=e.add(c,v),Z=e.mul(Wt,c),j=e.add(j,Z),Z=e.mul(h,c),K=e.mul(i,K),K=e.sub(K,Z),Z=e.mul(i,Wt),Q=e.mul(h,Q),Q=e.add(Q,Z),new E(K,j,Q)}subtract(B){return this.add(B.negate())}is0(){return this.equals(E.ZERO)}wNAF(B){return R.wNAFCached(this,k,B,A=>{const P=e.invertBatch(A.map($=>$.pz));return A.map(($,z)=>$.toAffine(P[z])).map(E.fromAffine)})}multiplyUnsafe(B){const A=E.ZERO;if(B===nr)return A;if(y(B),B===ze)return this;const{endo:P}=t;if(!P)return R.unsafeLadder(this,B);let{k1neg:$,k1:z,k2neg:V,k2:W}=P.splitScalar(B),K=A,j=A,Q=this;for(;z>nr||W>nr;)z&ze&&(K=K.add(Q)),W&ze&&(j=j.add(Q)),Q=Q.double(),z>>=ze,W>>=ze;return $&&(K=K.negate()),V&&(j=j.negate()),j=new E(e.mul(j.px,P.beta),j.py,j.pz),K.add(j)}multiply(B){y(B);let A=B,P,$;const{endo:z}=t;if(z){const{k1neg:V,k1:W,k2neg:K,k2:j}=z.splitScalar(A);let{p:Q,f:Gt}=this.wNAF(W),{p:kt,f:Z}=this.wNAF(j);Q=R.constTimeNegate(V,Q),kt=R.constTimeNegate(K,kt),kt=new E(e.mul(kt.px,z.beta),kt.py,kt.pz),P=Q.add(kt),$=Gt.add(Z)}else{const{p:V,f:W}=this.wNAF(A);P=V,$=W}return E.normalizeZ([P,$])[0]}multiplyAndAddUnsafe(B,A,P){const $=E.BASE,z=(W,K)=>K===nr||K===ze||!W.equals($)?W.multiplyUnsafe(K):W.multiply(K),V=z(this,A).add(z(B,P));return V.is0()?void 0:V}toAffine(B){const{px:A,py:P,pz:$}=this,z=this.is0();B==null&&(B=z?e.ONE:e.inv($));const V=e.mul(A,B),W=e.mul(P,B),K=e.mul($,B);if(z)return{x:e.ZERO,y:e.ZERO};if(!e.eql(K,e.ONE))throw new Error("invZ was invalid");return{x:V,y:W}}isTorsionFree(){const{h:B,isTorsionFree:A}=t;if(B===ze)return!0;if(A)return A(E,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:B,clearCofactor:A}=t;return B===ze?this:A?A(E,this):this.multiplyUnsafe(t.h)}toRawBytes(B=!0){return this.assertValidity(),r(E,this,B)}toHex(B=!0){return $r(this.toRawBytes(B))}}E.BASE=new E(t.Gx,t.Gy,e.ONE),E.ZERO=new E(e.ZERO,e.ONE,e.ZERO);const q=t.nBitLength,R=Qs(E,t.endo?Math.ceil(q/2):q);return{CURVE:t,ProjectivePoint:E,normPrivateKeyToScalar:b,weierstrassEquation:n,isWithinCurveOrder:u}}function wh(s){const t=Wi(s);return on(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function bh(s){const t=wh(s),{Fp:e,n:r}=t,o=e.BYTES+1,n=2*e.BYTES+1;function u(c){return nr<c&&c<e.ORDER}function y(c){return re(c,r)}function b(c){return Ai(c,r)}const{ProjectivePoint:k,normPrivateKeyToScalar:x,weierstrassEquation:E,isWithinCurveOrder:q}=yh({...t,toBytes(c,h,g){const p=h.toAffine(),w=e.toBytes(p.x),M=Kr;return g?M(Uint8Array.from([h.hasEvenY()?2:3]),w):M(Uint8Array.from([4]),w,e.toBytes(p.y))},fromBytes(c){const h=c.length,g=c[0],p=c.subarray(1);if(h===o&&(g===2||g===3)){const w=Fr(p);if(!u(w))throw new Error("Point is not on curve");const M=E(w);let d;try{d=e.sqrt(M)}catch(N){const F=N instanceof Error?": "+N.message:"";throw new Error("Point is not on curve"+F)}const a=(d&ze)===ze;return(g&1)===1!==a&&(d=e.neg(d)),{x:w,y:d}}else if(h===n&&g===4){const w=e.fromBytes(p.subarray(0,e.BYTES)),M=e.fromBytes(p.subarray(e.BYTES,2*e.BYTES));return{x:w,y:M}}else throw new Error(`Point of length ${h} was invalid. Expected ${o} compressed bytes or ${n} uncompressed bytes`)}}),R=c=>$r(rn(c,t.nByteLength));function I(c){const h=r>>ze;return c>h}function B(c){return I(c)?y(-c):c}const A=(c,h,g)=>Fr(c.slice(h,g));class P{constructor(h,g,p){this.r=h,this.s=g,this.recovery=p,this.assertValidity()}static fromCompact(h){const g=t.nByteLength;return h=de("compactSignature",h,g*2),new P(A(h,0,g),A(h,g,2*g))}static fromDER(h){const{r:g,s:p}=qr.toSig(de("DER",h));return new P(g,p)}assertValidity(){if(!q(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!q(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(h){return new P(this.r,this.s,h)}recoverPublicKey(h){const{r:g,s:p,recovery:w}=this,M=j(de("msgHash",h));if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");const d=w===2||w===3?g+t.n:g;if(d>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const a=w&1?"03":"02",m=k.fromHex(a+R(d)),N=b(d),F=y(-M*N),D=y(p*N),rt=k.BASE.multiplyAndAddUnsafe(m,F,D);if(!rt)throw new Error("point at infinify");return rt.assertValidity(),rt}hasHighS(){return I(this.s)}normalizeS(){return this.hasHighS()?new P(this.r,y(-this.s),this.recovery):this}toDERRawBytes(){return en(this.toDERHex())}toDERHex(){return qr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return en(this.toCompactHex())}toCompactHex(){return R(this.r)+R(this.s)}}const $={isValidPrivateKey(c){try{return x(c),!0}catch{return!1}},normPrivateKeyToScalar:x,randomPrivateKey:()=>{const c=Xs(t.n);return Lc(t.randomBytes(c),t.n)},precompute(c=8,h=k.BASE){return h._setWindowSize(c),h.multiply(BigInt(3)),h}};function z(c,h=!0){return k.fromPrivateKey(c).toRawBytes(h)}function V(c){const h=Dr(c),g=typeof c=="string",p=(h||g)&&c.length;return h?p===o||p===n:g?p===2*o||p===2*n:c instanceof k}function W(c,h,g=!0){if(V(c))throw new Error("first arg must be private key");if(!V(h))throw new Error("second arg must be public key");return k.fromHex(h).multiply(x(c)).toRawBytes(g)}const K=t.bits2int||function(c){const h=Fr(c),g=c.length*8-t.nBitLength;return g>0?h>>BigInt(g):h},j=t.bits2int_modN||function(c){return y(K(c))},Q=Ki(t.nBitLength);function Gt(c){if(typeof c!="bigint")throw new Error("bigint expected");if(!(nr<=c&&c<Q))throw new Error(`bigint expected < 2^${t.nBitLength}`);return rn(c,t.nByteLength)}function kt(c,h,g=Z){if(["recovered","canonical"].some(et=>et in g))throw new Error("sign() legacy options not supported");const{hash:p,randomBytes:w}=t;let{lowS:M,prehash:d,extraEntropy:a}=g;M==null&&(M=!0),c=de("msgHash",c),d&&(c=de("prehashed msgHash",p(c)));const m=j(c),N=x(h),F=[Gt(N),Gt(m)];if(a!=null&&a!==!1){const et=a===!0?w(e.BYTES):a;F.push(de("extraEntropy",et))}const D=Kr(...F),rt=m;function J(et){const Xt=K(et);if(!q(Xt))return;const it=b(Xt),at=k.BASE.multiply(Xt).toAffine(),jt=y(at.x);if(jt===nr)return;const ht=y(it*y(rt+jt*N));if(ht===nr)return;let lt=(at.x===jt?0:2)|Number(at.y&ze),ge=ht;return M&&I(ht)&&(ge=B(ht),lt^=1),new P(jt,ge,lt)}return{seed:D,k2sig:J}}const Z={lowS:t.lowS,prehash:!1},Wt={lowS:t.lowS,prehash:!1};function v(c,h,g=Z){const{seed:p,k2sig:w}=kt(c,h,g),M=t;return Zs(M.hash.outputLen,M.nByteLength,M.hmac)(p,w)}k.BASE._setWindowSize(8);function i(c,h,g,p=Wt){var at;const w=c;if(h=de("msgHash",h),g=de("publicKey",g),"strict"in p)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:d}=p;let a,m;try{if(typeof w=="string"||Dr(w))try{a=P.fromDER(w)}catch(jt){if(!(jt instanceof qr.Err))throw jt;a=P.fromCompact(w)}else if(typeof w=="object"&&typeof w.r=="bigint"&&typeof w.s=="bigint"){const{r:jt,s:ht}=w;a=new P(jt,ht)}else throw new Error("PARSE");m=k.fromHex(g)}catch(jt){if(jt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&a.hasHighS())return!1;d&&(h=t.hash(h));const{r:N,s:F}=a,D=j(h),rt=b(F),J=y(D*rt),et=y(N*rt),Xt=(at=k.BASE.multiplyAndAddUnsafe(m,J,et))==null?void 0:at.toAffine();return Xt?y(Xt.x)===N:!1}return{CURVE:t,getPublicKey:z,getSharedSecret:W,sign:v,verify:i,ProjectivePoint:k,Signature:P,utils:$}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vh(s){return{hash:s,hmac:(t,...e)=>Oo(s,t,Oa(...e)),randomBytes:Ks}}function xh(s,t){const e=r=>bh({...s,...vh(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ks=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Sh=BigInt(1),Ti=BigInt(2),_s=(s,t)=>(s+t/Ti)/t;function Mh(s){const t=qo,e=BigInt(3),r=BigInt(6),o=BigInt(11),n=BigInt(22),u=BigInt(23),y=BigInt(44),b=BigInt(88),k=s*s*s%t,x=k*k*s%t,E=ae(x,e,t)*x%t,q=ae(E,e,t)*x%t,R=ae(q,Ti,t)*k%t,I=ae(R,o,t)*R%t,B=ae(I,n,t)*I%t,A=ae(B,y,t)*B%t,P=ae(A,b,t)*A%t,$=ae(P,y,t)*B%t,z=ae($,e,t)*x%t,V=ae(z,u,t)*I%t,W=ae(V,r,t)*k%t,K=ae(W,Ti,t);if(!Ci.eql(Ci.sqr(K),s))throw new Error("Cannot find square root");return K}const Ci=Ys(qo,void 0,void 0,{sqrt:Mh}),os=xh({a:BigInt(0),b:BigInt(7),Fp:Ci,n:ks,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:s=>{const t=ks,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Sh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=e,u=BigInt("0x100000000000000000000000000000000"),y=_s(n*s,t),b=_s(-r*s,t);let k=re(s-y*e-b*o,t),x=re(-y*r-b*n,t);const E=k>u,q=x>u;if(E&&(k=t-k),q&&(x=t-x),k>u||x>u)throw new Error("splitScalar: Endomorphism failed, k="+s);return{k1neg:E,k1:k,k2neg:q,k2:x}}}},Ri);BigInt(0);os.ProjectivePoint;const Es=()=>{const s=_n.utils.randomPrivateKey(),t=Ui(s),e=new Uint8Array(64);return e.set(s),e.set(t,32),{publicKey:t,secretKey:e}},Ui=_n.getPublicKey;function Bs(s){try{return _n.ExtendedPoint.fromHex(s),!0}catch{return!1}}const Fo=(s,t)=>_n.sign(s,t.slice(0,32)),kh=_n.verify,ne=s=>Et.isBuffer(s)?s:s instanceof Uint8Array?Et.from(s.buffer,s.byteOffset,s.byteLength):Et.from(s);class _h{constructor(t){Object.assign(this,t)}encode(){return Et.from(ao(Nn,this))}static decode(t){return co(Nn,this,t)}static decodeUnchecked(t){return ro(Nn,this,t)}}const Nn=new Map;var zo;const Eh=32,gr=32;function Bh(s){return s._bn!==void 0}let As=1;class mt extends _h{constructor(t){if(super({}),this._bn=void 0,Bh(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Se.decode(t);if(e.length!=gr)throw new Error("Invalid public key input");this._bn=new vs(e)}else this._bn=new vs(t);if(this._bn.byteLength()>gr)throw new Error("Invalid public key input")}}static unique(){const t=new mt(As);return As+=1,new mt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Se.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(Et);if(t.length===gr)return t;const e=Et.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const o=Et.concat([t.toBuffer(),Et.from(e),r.toBuffer()]),n=Ri(o);return new mt(n)}static createProgramAddressSync(t,e){let r=Et.alloc(0);t.forEach(function(n){if(n.length>Eh)throw new TypeError("Max seed length exceeded");r=Et.concat([r,ne(n)])}),r=Et.concat([r,e.toBuffer(),Et.from("ProgramDerivedAddress")]);const o=Ri(r);if(Bs(o))throw new Error("Invalid seeds, address must fall off the curve");return new mt(o)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,o;for(;r!=0;){try{const n=t.concat(Et.from([r]));o=this.createProgramAddressSync(n,e)}catch(n){if(n instanceof TypeError)throw n;r--;continue}return[o,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new mt(t);return Bs(e.toBytes())}}zo=mt;mt.default=new zo("11111111111111111111111111111111");Nn.set(mt,{kind:"struct",fields:[["_bn","u256"]]});new mt("BPFLoader1111111111111111111111111111111111");const tn=1232,as=127,Hn=64;class Do extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Do.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class $o extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty($o.prototype,"name",{value:"TransactionExpiredTimeoutError"});class bn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(bn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Gn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((n,u)=>{r.set(n.toBase58(),u)});const o=n=>{const u=r.get(n.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return t.map(n=>({programIdIndex:o(n.programId),accountKeyIndexes:n.keys.map(u=>o(u.pubkey)),data:n.data}))}}const Ht=(s="publicKey")=>te(32,s),Ah=(s="signature")=>te(64,s),Xr=(s="string")=>{const t=ct([ft("length"),ft("lengthPadding"),te(zr(ft(),-8),"chars")],s),e=t.decode.bind(t),r=t.encode.bind(t),o=t;return o.decode=(n,u)=>e(n,u).chars.toString(),o.encode=(n,u,y)=>{const b={chars:Et.from(n,"utf8")};return r(b,u,y)},o.alloc=n=>ft().span+ft().span+Et.from(n,"utf8").length,o},Ih=(s="authorized")=>ct([Ht("staker"),Ht("withdrawer")],s),Rh=(s="lockup")=>ct([Ce("unixTimestamp"),Ce("epoch"),Ht("custodian")],s),Lh=(s="voteInit")=>ct([Ht("nodePubkey"),Ht("authorizedVoter"),Ht("authorizedWithdrawer"),Zt("commission")],s),Th=(s="voteAuthorizeWithSeedArgs")=>ct([ft("voteAuthorizationType"),Ht("currentAuthorityDerivedKeyOwnerPubkey"),Xr("currentAuthorityDerivedKeySeed"),Ht("newAuthorized")],s);function Ko(s,t){const e=o=>{if(o.span>=0)return o.span;if(typeof o.alloc=="function")return o.alloc(t[o.property]);if("count"in o&&"elementLayout"in o){const n=t[o.property];if(Array.isArray(n))return n.length*e(o.elementLayout)}else if("fields"in o)return Ko({layout:o},t[o.property]);return 0};let r=0;return s.layout.fields.forEach(o=>{r+=e(o)}),r}function Ue(s){let t=0,e=0;for(;;){let r=s.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Pe(s,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){s.push(r);break}else r|=128,s.push(r)}}function ee(s,t){if(!s)throw new Error(t||"Assertion failed")}class si{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,o=u=>{const y=u.toBase58();let b=r.get(y);return b===void 0&&(b={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(y,b)),b},n=o(e);n.isSigner=!0,n.isWritable=!0;for(const u of t){o(u.programId).isInvoked=!0;for(const y of u.keys){const b=o(y.pubkey);b.isSigner||(b.isSigner=y.isSigner),b.isWritable||(b.isWritable=y.isWritable)}}return new si(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ee(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,b])=>b.isSigner&&b.isWritable),r=t.filter(([,b])=>b.isSigner&&!b.isWritable),o=t.filter(([,b])=>!b.isSigner&&b.isWritable),n=t.filter(([,b])=>!b.isSigner&&!b.isWritable),u={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:n.length};{ee(e.length>0,"Expected at least one writable signer key");const[b]=e[0];ee(b===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const y=[...e.map(([b])=>new mt(b)),...r.map(([b])=>new mt(b)),...o.map(([b])=>new mt(b)),...n.map(([b])=>new mt(b))];return[u,y]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[o,n]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(e.length===0&&o.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:o},{writable:r,readonly:n}]}drainKeysFoundInLookupTable(t,e){const r=new Array,o=new Array;for(const[n,u]of this.keyMetaMap.entries())if(e(u)){const y=new mt(n),b=t.findIndex(k=>k.equals(y));b>=0&&(ee(b<256,"Max lookup table index exceeded"),r.push(b),o.push(y),this.keyMetaMap.delete(n))}return[r,o]}}const Wo="Reached end of buffer unexpectedly";function ir(s){if(s.length===0)throw new Error(Wo);return s.shift()}function Ne(s,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>s.length:e>=s.length)throw new Error(Wo);return s.splice(...t)}class or{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new mt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Se.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Gn(this.staticAccountKeys)}static compile(t){const e=si.compile(t.instructions,t.payerKey),[r,o]=e.getMessageComponents(),u=new Gn(o).compileInstructions(t.instructions).map(y=>({programIdIndex:y.programIdIndex,accounts:y.accountKeyIndexes,data:Se.encode(y.data)}));return new or({header:r,accountKeys:o,recentBlockhash:t.recentBlockhash,instructions:u})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,n=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<n}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Pe(e,t);const r=this.instructions.map(E=>{const{accounts:q,programIdIndex:R}=E,I=Array.from(Se.decode(E.data));let B=[];Pe(B,q.length);let A=[];return Pe(A,I.length),{programIdIndex:R,keyIndicesCount:Et.from(B),keyIndices:q,dataLength:Et.from(A),data:I}});let o=[];Pe(o,r.length);let n=Et.alloc(tn);Et.from(o).copy(n);let u=o.length;r.forEach(E=>{const R=ct([Zt("programIdIndex"),te(E.keyIndicesCount.length,"keyIndicesCount"),Be(Zt("keyIndex"),E.keyIndices.length,"keyIndices"),te(E.dataLength.length,"dataLength"),Be(Zt("userdatum"),E.data.length,"data")]).encode(E,n,u);u+=R}),n=n.slice(0,u);const y=ct([te(1,"numRequiredSignatures"),te(1,"numReadonlySignedAccounts"),te(1,"numReadonlyUnsignedAccounts"),te(e.length,"keyCount"),Be(Ht("key"),t,"keys"),Ht("recentBlockhash")]),b={numRequiredSignatures:Et.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Et.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Et.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Et.from(e),keys:this.accountKeys.map(E=>ne(E.toBytes())),recentBlockhash:Se.decode(this.recentBlockhash)};let k=Et.alloc(2048);const x=y.encode(b,k);return n.copy(k,x),k.slice(0,x+n.length)}static from(t){let e=[...t];const r=ir(e);if(r!==(r&as))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const o=ir(e),n=ir(e),u=Ue(e);let y=[];for(let q=0;q<u;q++){const R=Ne(e,0,gr);y.push(new mt(Et.from(R)))}const b=Ne(e,0,gr),k=Ue(e);let x=[];for(let q=0;q<k;q++){const R=ir(e),I=Ue(e),B=Ne(e,0,I),A=Ue(e),P=Ne(e,0,A),$=Se.encode(Et.from(P));x.push({programIdIndex:R,accounts:B,data:$})}const E={header:{numRequiredSignatures:r,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:n},recentBlockhash:Se.encode(Et.from(b)),accountKeys:y,instructions:x};return new or(E)}}class Sn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Gn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const o=t-r,n=this.addressTableLookups.reduce((u,y)=>u+y.writableIndexes.length,0);return o<n}else if(t>=this.header.numRequiredSignatures){const o=t-e,u=r-e-this.header.numReadonlyUnsignedAccounts;return o<u}else{const o=e-this.header.numReadonlySignedAccounts;return t<o}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const o=t.find(n=>n.key.equals(r.accountKey));if(!o)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const n of r.writableIndexes)if(n<o.state.addresses.length)e.writable.push(o.state.addresses[n]);else throw new Error(`Failed to find address for index ${n} in address lookup table ${r.accountKey.toBase58()}`);for(const n of r.readonlyIndexes)if(n<o.state.addresses.length)e.readonly.push(o.state.addresses[n]);else throw new Error(`Failed to find address for index ${n} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=si.compile(t.instructions,t.payerKey),r=new Array,o={writable:new Array,readonly:new Array},n=t.addressLookupTableAccounts||[];for(const x of n){const E=e.extractTableLookup(x);if(E!==void 0){const[q,{writable:R,readonly:I}]=E;r.push(q),o.writable.push(...R),o.readonly.push(...I)}}const[u,y]=e.getMessageComponents(),k=new Gn(y,o).compileInstructions(t.instructions);return new Sn({header:u,staticAccountKeys:y,recentBlockhash:t.recentBlockhash,compiledInstructions:k,addressTableLookups:r})}serialize(){const t=Array();Pe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Pe(r,this.compiledInstructions.length);const o=this.serializeAddressTableLookups(),n=Array();Pe(n,this.addressTableLookups.length);const u=ct([Zt("prefix"),ct([Zt("numRequiredSignatures"),Zt("numReadonlySignedAccounts"),Zt("numReadonlyUnsignedAccounts")],"header"),te(t.length,"staticAccountKeysLength"),Be(Ht(),this.staticAccountKeys.length,"staticAccountKeys"),Ht("recentBlockhash"),te(r.length,"instructionsLength"),te(e.length,"serializedInstructions"),te(n.length,"addressTableLookupsLength"),te(o.length,"serializedAddressTableLookups")]),y=new Uint8Array(tn),k=u.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(x=>x.toBytes()),recentBlockhash:Se.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(n),serializedAddressTableLookups:o},y);return y.slice(0,k)}serializeInstructions(){let t=0;const e=new Uint8Array(tn);for(const r of this.compiledInstructions){const o=Array();Pe(o,r.accountKeyIndexes.length);const n=Array();Pe(n,r.data.length);const u=ct([Zt("programIdIndex"),te(o.length,"encodedAccountKeyIndexesLength"),Be(Zt(),r.accountKeyIndexes.length,"accountKeyIndexes"),te(n.length,"encodedDataLength"),te(r.data.length,"data")]);t+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(n),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(tn);for(const r of this.addressTableLookups){const o=Array();Pe(o,r.writableIndexes.length);const n=Array();Pe(n,r.readonlyIndexes.length);const u=ct([Ht("accountKey"),te(o.length,"encodedWritableIndexesLength"),Be(Zt(),r.writableIndexes.length,"writableIndexes"),te(n.length,"encodedReadonlyIndexesLength"),Be(Zt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(n),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=ir(e),o=r&as;ee(r!==o,"Expected versioned message but received legacy message");const n=o;ee(n===0,`Expected versioned message with version 0 but found version ${n}`);const u={numRequiredSignatures:ir(e),numReadonlySignedAccounts:ir(e),numReadonlyUnsignedAccounts:ir(e)},y=[],b=Ue(e);for(let I=0;I<b;I++)y.push(new mt(Ne(e,0,gr)));const k=Se.encode(Ne(e,0,gr)),x=Ue(e),E=[];for(let I=0;I<x;I++){const B=ir(e),A=Ue(e),P=Ne(e,0,A),$=Ue(e),z=new Uint8Array(Ne(e,0,$));E.push({programIdIndex:B,accountKeyIndexes:P,data:z})}const q=Ue(e),R=[];for(let I=0;I<q;I++){const B=new mt(Ne(e,0,gr)),A=Ue(e),P=Ne(e,0,A),$=Ue(e),z=Ne(e,0,$);R.push({accountKey:B,writableIndexes:P,readonlyIndexes:z})}return new Sn({header:u,staticAccountKeys:y,recentBlockhash:k,compiledInstructions:E,addressTableLookups:R})}}const Ho={deserializeMessageVersion(s){const t=s[0],e=t&as;return e===t?"legacy":e},deserialize:s=>{const t=Ho.deserializeMessageVersion(s);if(t==="legacy")return or.from(s);if(t===0)return Sn.deserialize(s);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let fr=function(s){return s[s.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",s[s.PROCESSED=1]="PROCESSED",s[s.TIMED_OUT=2]="TIMED_OUT",s[s.NONCE_INVALID=3]="NONCE_INVALID",s}({});const Ch=Et.alloc(Hn).fill(0);class Te{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Et.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class le{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Te(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let B=0;B<e.length;B++)if(e[B].programId===void 0)throw new Error(`Transaction instruction index ${B} has undefined program id`);const o=[],n=[];e.forEach(B=>{B.keys.forEach(P=>{n.push({...P})});const A=B.programId.toString();o.includes(A)||o.push(A)}),o.forEach(B=>{n.push({pubkey:new mt(B),isSigner:!1,isWritable:!1})});const u=[];n.forEach(B=>{const A=B.pubkey.toString(),P=u.findIndex($=>$.pubkey.toString()===A);P>-1?(u[P].isWritable=u[P].isWritable||B.isWritable,u[P].isSigner=u[P].isSigner||B.isSigner):u.push(B)}),u.sort(function(B,A){if(B.isSigner!==A.isSigner)return B.isSigner?-1:1;if(B.isWritable!==A.isWritable)return B.isWritable?-1:1;const P={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return B.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",P)});const y=u.findIndex(B=>B.pubkey.equals(r));if(y>-1){const[B]=u.splice(y,1);B.isSigner=!0,B.isWritable=!0,u.unshift(B)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const B of this.signatures){const A=u.findIndex(P=>P.pubkey.equals(B.publicKey));if(A>-1)u[A].isSigner||(u[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${B.publicKey.toString()}`)}let b=0,k=0,x=0;const E=[],q=[];u.forEach(({pubkey:B,isSigner:A,isWritable:P})=>{A?(E.push(B.toString()),b+=1,P||(k+=1)):(q.push(B.toString()),P||(x+=1))});const R=E.concat(q),I=e.map(B=>{const{data:A,programId:P}=B;return{programIdIndex:R.indexOf(P.toString()),accounts:B.keys.map($=>R.indexOf($.pubkey.toString())),data:Se.encode(A)}});return I.forEach(B=>{ee(B.programIdIndex>=0),B.accounts.forEach(A=>ee(A>=0))}),new or({header:{numRequiredSignatures:b,numReadonlySignedAccounts:k,numReadonlyUnsignedAccounts:x},accountKeys:R,recentBlockhash:t,instructions:I})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((o,n)=>e[n].equals(o.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const o=r.toString();return e.has(o)?!1:(e.add(o),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const u=n.publicKey.toString();e.has(u)||(e.add(u),r.push(n))}this.signatures=r.map(n=>({signature:null,publicKey:n.publicKey}));const o=this._compile();this._partialSign(o,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const u=n.publicKey.toString();e.has(u)||(e.add(u),r.push(n))}const o=this._compile();this._partialSign(o,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(o=>{const n=Fo(r,o.secretKey);this._addSignature(o.publicKey,ne(n))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ee(e.length===64);const r=this.signatures.findIndex(o=>t.equals(o.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=Et.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:o,publicKey:n}of this.signatures)o===null?e&&(r.missing||(r.missing=[])).push(n):kh(o,t,n.toBytes())||(r.invalid||(r.invalid=[])).push(n);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),o=this.serializeMessage();if(r){const n=this._getMessageSignednessErrors(o,e);if(n){let u="Signature verification failed.";throw n.invalid&&(u+=`
Invalid signature for public key${n.invalid.length===1?"":"(s)"} [\`${n.invalid.map(y=>y.toBase58()).join("`, `")}\`].`),n.missing&&(u+=`
Missing signature for public key${n.missing.length===1?"":"(s)"} [\`${n.missing.map(y=>y.toBase58()).join("`, `")}\`].`),new Error(u)}}return this._serialize(o)}_serialize(t){const{signatures:e}=this,r=[];Pe(r,e.length);const o=r.length+e.length*64+t.length,n=Et.alloc(o);return ee(e.length<256),Et.from(r).copy(n,0),e.forEach(({signature:u},y)=>{u!==null&&(ee(u.length===64,"signature has invalid length"),Et.from(u).copy(n,r.length+y*64))}),t.copy(n,r.length+e.length*64),ee(n.length<=tn,`Transaction too large: ${n.length} > ${tn}`),n}get keys(){return ee(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ee(this.instructions.length===1),this.instructions[0].programId}get data(){return ee(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Ue(e);let o=[];for(let n=0;n<r;n++){const u=Ne(e,0,Hn);o.push(Se.encode(Et.from(u)))}return le.populate(or.from(e),o)}static populate(t,e=[]){const r=new le;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((o,n)=>{const u={signature:o==Se.encode(Ch)?null:Se.decode(o),publicKey:t.accountKeys[n]};r.signatures.push(u)}),t.instructions.forEach(o=>{const n=o.accounts.map(u=>{const y=t.accountKeys[u];return{pubkey:y,isSigner:r.signatures.some(b=>b.publicKey.toString()===y.toString())||t.isAccountSigner(u),isWritable:t.isAccountWritable(u)}});r.instructions.push(new Te({keys:n,programId:t.accountKeys[o.programIdIndex],data:Se.decode(o.data)}))}),r._message=t,r._json=r.toJSON(),r}}class Go{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)ee(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let o=0;o<t.header.numRequiredSignatures;o++)r.push(new Uint8Array(Hn));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Pe(e,this.signatures.length);const r=ct([te(e.length,"encodedSignaturesLength"),Be(Ah(),this.signatures.length,"signatures"),te(t.length,"serializedMessage")]),o=new Uint8Array(2048),n=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},o);return o.slice(0,n)}static deserialize(t){let e=[...t];const r=[],o=Ue(e);for(let u=0;u<o;u++)r.push(new Uint8Array(Ne(e,0,Hn)));const n=Ho.deserialize(new Uint8Array(e));return new Go(n,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const o of t){const n=r.findIndex(u=>u.equals(o.publicKey));ee(n>=0,`Cannot sign with non signer key ${o.publicKey.toBase58()}`),this.signatures[n]=Fo(e,o.secretKey)}}addSignature(t,e){ee(e.byteLength===64,"Signature must be 64 bytes long");const o=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(n=>n.equals(t));ee(o>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[o]=e}}const Uh=160,Ph=64,Nh=Uh/Ph,Oh=1e3/Nh,jr=new mt("SysvarC1ock11111111111111111111111111111111");new mt("SysvarEpochSchedu1e111111111111111111111111");new mt("Sysvar1nstructions1111111111111111111111111");const vi=new mt("SysvarRecentB1ockHashes11111111111111111111"),Pi=new mt("SysvarRent111111111111111111111111111111111");new mt("SysvarRewards111111111111111111111111111111");new mt("SysvarS1otHashes111111111111111111111111111");new mt("SysvarS1otHistory11111111111111111111111111");const xi=new mt("SysvarStakeHistory1111111111111111111111111");class Is extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:o}){const n=o?`Logs: 
${JSON.stringify(o.slice(-10),null,2)}. `:"",u="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let y;switch(t){case"send":y=`Transaction ${e} resulted in an error. 
${r}. `+n+u;break;case"simulate":y=`Simulation failed. 
Message: ${r}. 
`+n+u;break;default:y=`Unknown action '${(b=>b)(t)}'`}super(y),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=o||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(o=>{if(o&&o.meta&&o.meta.logMessages){const n=o.meta.logMessages;this.transactionLogs=n,e(n)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class ut extends Error{constructor({code:t,message:e,data:r},o){super(o!=null?`${o}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function Jr(s){return new Promise(t=>setTimeout(t,s))}function ue(s,t){const e=s.layout.span>=0?s.layout.span:Ko(s,t),r=Et.alloc(e),o=Object.assign({instruction:s.index},t);return s.layout.encode(o,r),r}const qh=ve("lamportsPerSignature"),Vo=ct([ft("version"),ft("state"),Ht("authorizedPubkey"),Ht("nonce"),ct([qh],"feeCalculator")]),Rs=Vo.span;class cs{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Vo.decode(ne(t),0);return new cs({authorizedPubkey:new mt(e.authorizedPubkey),nonce:new mt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Fh=s=>{const t=s.decode.bind(s),e=s.encode.bind(s);return{decode:t,encode:e}},zh=s=>t=>{const e=te(s,t),{encode:r,decode:o}=Fh(e),n=e;return n.decode=(u,y)=>{const b=o(u,y);return ku(Et.from(b))},n.encode=(u,y,b)=>{const k=Bu(u,s);return r(k,y,b)},n},sn=zh(8),qe=Object.freeze({Create:{index:0,layout:ct([ft("instruction"),Ce("lamports"),Ce("space"),Ht("programId")])},Assign:{index:1,layout:ct([ft("instruction"),Ht("programId")])},Transfer:{index:2,layout:ct([ft("instruction"),sn("lamports")])},CreateWithSeed:{index:3,layout:ct([ft("instruction"),Ht("base"),Xr("seed"),Ce("lamports"),Ce("space"),Ht("programId")])},AdvanceNonceAccount:{index:4,layout:ct([ft("instruction")])},WithdrawNonceAccount:{index:5,layout:ct([ft("instruction"),Ce("lamports")])},InitializeNonceAccount:{index:6,layout:ct([ft("instruction"),Ht("authorized")])},AuthorizeNonceAccount:{index:7,layout:ct([ft("instruction"),Ht("authorized")])},Allocate:{index:8,layout:ct([ft("instruction"),Ce("space")])},AllocateWithSeed:{index:9,layout:ct([ft("instruction"),Ht("base"),Xr("seed"),Ce("space"),Ht("programId")])},AssignWithSeed:{index:10,layout:ct([ft("instruction"),Ht("base"),Xr("seed"),Ht("programId")])},TransferWithSeed:{index:11,layout:ct([ft("instruction"),sn("lamports"),Xr("seed"),Ht("programId")])},UpgradeNonceAccount:{index:12,layout:ct([ft("instruction")])}});class sr{constructor(){}static createAccount(t){const e=qe.Create,r=ue(e,{lamports:t.lamports,space:t.space,programId:ne(t.programId.toBuffer())});return new Te({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const o=qe.TransferWithSeed;e=ue(o,{lamports:BigInt(t.lamports),seed:t.seed,programId:ne(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const o=qe.Transfer;e=ue(o,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Te({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const o=qe.AssignWithSeed;e=ue(o,{base:ne(t.basePubkey.toBuffer()),seed:t.seed,programId:ne(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=qe.Assign;e=ue(o,{programId:ne(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Te({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=qe.CreateWithSeed,r=ue(e,{base:ne(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:ne(t.programId.toBuffer())});let o=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||o.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Te({keys:o,programId:this.programId,data:r})}static createNonceAccount(t){const e=new le;"basePubkey"in t&&"seed"in t?e.add(sr.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Rs,programId:this.programId})):e.add(sr.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Rs,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=qe.InitializeNonceAccount,r=ue(e,{authorized:ne(t.authorizedPubkey.toBuffer())}),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:vi,isSigner:!1,isWritable:!1},{pubkey:Pi,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Te(o)}static nonceAdvance(t){const e=qe.AdvanceNonceAccount,r=ue(e),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:vi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Te(o)}static nonceWithdraw(t){const e=qe.WithdrawNonceAccount,r=ue(e,{lamports:t.lamports});return new Te({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:vi,isSigner:!1,isWritable:!1},{pubkey:Pi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=qe.AuthorizeNonceAccount,r=ue(e,{authorized:ne(t.newAuthorizedPubkey.toBuffer())});return new Te({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const o=qe.AllocateWithSeed;e=ue(o,{base:ne(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:ne(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=qe.Allocate;e=ue(o,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Te({keys:r,programId:this.programId,data:e})}}sr.programId=new mt("11111111111111111111111111111111");new mt("BPFLoader2111111111111111111111111111111111");function Dh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Si,Ls;function $h(){if(Ls)return Si;Ls=1;var s=Object.prototype.toString,t=Object.keys||function(r){var o=[];for(var n in r)o.push(n);return o};function e(r,o){var n,u,y,b,k,x,E;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),o);if(E=s.call(r),E==="[object Array]"){for(y="[",u=r.length-1,n=0;n<u;n++)y+=e(r[n],!0)+",";return u>-1&&(y+=e(r[n],!0)),y+"]"}else if(E==="[object Object]"){for(b=t(r).sort(),u=b.length,y="",n=0;n<u;)k=b[n],x=e(r[k],!1),x!==void 0&&(y&&(y+=","),y+=JSON.stringify(k)+":"+x),n++;return"{"+y+"}"}else return JSON.stringify(r);case"function":case"undefined":return o?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Si=function(r){var o=e(r,!1);if(o!==void 0)return""+o},Si}var Kh=$h(),Ts=Dh(Kh);const wn=32;function Mi(s){let t=0;for(;s>1;)s/=2,t++;return t}function Wh(s){return s===0?1:(s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s|=s>>16,s|=s>>32,s+1)}class Hh{constructor(t,e,r,o,n){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=o,this.firstNormalSlot=n}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Mi(Wh(t+wn+1))-Mi(wn)-1,r=this.getSlotsInEpoch(e),o=t-(r-wn);return[e,o]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),o=this.firstNormalEpoch+r,n=e%this.slotsPerEpoch;return[o,n]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*wn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Mi(wn)):this.slotsPerEpoch}}var Gh=globalThis.fetch;class Vh extends dh{constructor(t,e,r){const o=n=>{const u=fh(n,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in u?this.underlyingSocket=u.socket:this.underlyingSocket=u,u};super(o,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Zh(s,t){let e;try{e=s.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==s.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${s.index}`);return e}const Cs=56;class Us{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Zh(jh,t),r=t.length-Cs;ee(r>=0,"lookup table is invalid"),ee(r%32===0,"lookup table is invalid");const o=r/32,{addresses:n}=ct([Be(Ht(),o,"addresses")]).decode(t.slice(Cs));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new mt(e.authority[0]):void 0,addresses:n.map(u=>new mt(u))}}}const jh={index:1,layout:ct([ft("typeIndex"),sn("deactivationSlot"),ve("lastExtendedSlot"),Zt("lastExtendedStartIndex"),Zt(),Be(Ht(),zr(Zt(),-1),"authority")])},Yh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Jh(s){const t=s.match(Yh);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${s}\``);const[e,r,o,n]=t,u=s.startsWith("https:")?"wss:":"ws:",y=o==null?null:parseInt(o.slice(1),10),b=y==null?"":`:${y+1}`;return`${u}//${r}${b}${n}`}const oe=In(is(mt),G(),s=>new mt(s)),Zo=ss([G(),ie("base64")]),us=In(is(Et),Zo,s=>Et.from(s[0],"base64")),Xh=30*1e3;function Qh(s){if(/^https?:/.test(s)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return s}function Qt(s){let t,e;if(typeof s=="string")t=s;else if(s){const{commitment:r,...o}=s;t=r,e=o}return{commitment:t,config:e}}function Ps(s){return s.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function jo(s){return Ie([H({jsonrpc:ie("2.0"),id:G(),result:s}),H({jsonrpc:ie("2.0"),id:G(),error:H({code:un(),message:G(),data:dt(Pu())})})])}const tf=jo(un());function Kt(s){return In(jo(s),tf,t=>"error"in t?t:{...t,result:Y(t.result,s)})}function ce(s){return Kt(H({context:H({slot:C()}),value:s}))}function oi(s){return H({context:H({slot:C()}),value:s})}function ki(s,t){return s===0?new Sn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new mt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Se.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new or(t)}const ef=H({foundation:C(),foundationTerm:C(),initial:C(),taper:C(),terminal:C()}),rf=Kt(X(tt(H({epoch:C(),effectiveSlot:C(),amount:C(),postBalance:C(),commission:dt(tt(C()))})))),nf=X(H({slot:C(),prioritizationFee:C()})),sf=H({total:C(),validator:C(),foundation:C(),epoch:C()}),of=H({epoch:C(),slotIndex:C(),slotsInEpoch:C(),absoluteSlot:C(),blockHeight:dt(C()),transactionCount:dt(C())}),af=H({slotsPerEpoch:C(),leaderScheduleSlotOffset:C(),warmup:Ye(),firstNormalEpoch:C(),firstNormalSlot:C()}),cf=Ao(G(),X(C())),Gr=tt(Ie([H({}),G()])),uf=H({err:Gr}),hf=ie("receivedSignature"),ff=H({"solana-core":G(),"feature-set":dt(C())}),lf=H({program:G(),programId:oe,parsed:un()}),df=H({programId:oe,accounts:X(oe),data:G()}),Ns=ce(H({err:tt(Ie([H({}),G()])),logs:tt(X(G())),accounts:dt(tt(X(tt(H({executable:Ye(),owner:G(),lamports:C(),data:X(G()),rentEpoch:dt(C())}))))),unitsConsumed:dt(C()),returnData:dt(tt(H({programId:G(),data:ss([G(),ie("base64")])}))),innerInstructions:dt(tt(X(H({index:C(),instructions:X(Ie([lf,df]))}))))})),pf=ce(H({byIdentity:Ao(G(),X(C())),range:H({firstSlot:C(),lastSlot:C()})}));function gf(s,t,e,r,o,n){const u=e||Gh;let y;n!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let b;return r&&(b=async(x,E)=>{const q=await new Promise((R,I)=>{try{r(x,E,(B,A)=>R([B,A]))}catch(B){I(B)}});return await u(...q)}),new ch(async(x,E)=>{const q={method:"POST",body:x,agent:y,headers:Object.assign({"Content-Type":"application/json"},t||{},ml)};try{let R=5,I,B=500;for(;b?I=await b(s,q):I=await u(s,q),!(I.status!==429||o===!0||(R-=1,R===0));)console.error(`Server responded with ${I.status} ${I.statusText}.  Retrying after ${B}ms delay...`),await Jr(B),B*=2;const A=await I.text();I.ok?E(null,A):E(new Error(`${I.status} ${I.statusText}: ${A}`))}catch(R){R instanceof Error&&E(R)}},{})}function mf(s){return(t,e)=>new Promise((r,o)=>{s.request(t,e,(n,u)=>{if(n){o(n);return}r(u)})})}function yf(s){return t=>new Promise((e,r)=>{t.length===0&&e([]);const o=t.map(n=>s.request(n.methodName,n.args));s.request(o,(n,u)=>{if(n){r(n);return}e(u)})})}const wf=Kt(ef),bf=Kt(sf),vf=Kt(nf),xf=Kt(of),Sf=Kt(af),Mf=Kt(cf),kf=Kt(C()),_f=ce(H({total:C(),circulating:C(),nonCirculating:C(),nonCirculatingAccounts:X(oe)})),Ni=H({amount:G(),uiAmount:tt(C()),decimals:C(),uiAmountString:dt(G())}),Ef=ce(X(H({address:oe,amount:G(),uiAmount:tt(C()),decimals:C(),uiAmountString:dt(G())}))),Bf=ce(X(H({pubkey:oe,account:H({executable:Ye(),owner:oe,lamports:C(),data:us,rentEpoch:C()})}))),Oi=H({program:G(),parsed:un(),space:C()}),Af=ce(X(H({pubkey:oe,account:H({executable:Ye(),owner:oe,lamports:C(),data:Oi,rentEpoch:C()})}))),If=ce(X(H({lamports:C(),address:oe}))),Mn=H({executable:Ye(),owner:oe,lamports:C(),data:us,rentEpoch:C()}),Rf=H({pubkey:oe,account:Mn}),Lf=In(Ie([is(Et),Oi]),Ie([Zo,Oi]),s=>Array.isArray(s)?Y(s,us):s),qi=H({executable:Ye(),owner:oe,lamports:C(),data:Lf,rentEpoch:C()}),Tf=H({pubkey:oe,account:qi}),Cf=H({state:Ie([ie("active"),ie("inactive"),ie("activating"),ie("deactivating")]),active:C(),inactive:C()}),Uf=Kt(X(H({signature:G(),slot:C(),err:Gr,memo:tt(G()),blockTime:dt(tt(C()))}))),Pf=Kt(X(H({signature:G(),slot:C(),err:Gr,memo:tt(G()),blockTime:dt(tt(C()))}))),Nf=H({subscription:C(),result:oi(Mn)}),Of=H({pubkey:oe,account:Mn}),qf=H({subscription:C(),result:oi(Of)}),Ff=H({parent:C(),slot:C(),root:C()}),zf=H({subscription:C(),result:Ff}),Df=Ie([H({type:Ie([ie("firstShredReceived"),ie("completed"),ie("optimisticConfirmation"),ie("root")]),slot:C(),timestamp:C()}),H({type:ie("createdBank"),parent:C(),slot:C(),timestamp:C()}),H({type:ie("frozen"),slot:C(),timestamp:C(),stats:H({numTransactionEntries:C(),numSuccessfulTransactions:C(),numFailedTransactions:C(),maxTransactionsPerEntry:C()})}),H({type:ie("dead"),slot:C(),timestamp:C(),err:G()})]),$f=H({subscription:C(),result:Df}),Kf=H({subscription:C(),result:oi(Ie([uf,hf]))}),Wf=H({subscription:C(),result:C()}),Hf=H({pubkey:G(),gossip:tt(G()),tpu:tt(G()),rpc:tt(G()),version:tt(G())}),Os=H({votePubkey:G(),nodePubkey:G(),activatedStake:C(),epochVoteAccount:Ye(),epochCredits:X(ss([C(),C(),C()])),commission:C(),lastVote:C(),rootSlot:tt(C())}),Gf=Kt(H({current:X(Os),delinquent:X(Os)})),Vf=Ie([ie("processed"),ie("confirmed"),ie("finalized")]),Zf=H({slot:C(),confirmations:tt(C()),err:Gr,confirmationStatus:dt(Vf)}),jf=ce(X(tt(Zf))),Yf=Kt(C()),Yo=H({accountKey:oe,writableIndexes:X(C()),readonlyIndexes:X(C())}),hs=H({signatures:X(G()),message:H({accountKeys:X(G()),header:H({numRequiredSignatures:C(),numReadonlySignedAccounts:C(),numReadonlyUnsignedAccounts:C()}),instructions:X(H({accounts:X(C()),data:G(),programIdIndex:C()})),recentBlockhash:G(),addressTableLookups:dt(X(Yo))})}),Jo=H({pubkey:oe,signer:Ye(),writable:Ye(),source:dt(Ie([ie("transaction"),ie("lookupTable")]))}),Xo=H({accountKeys:X(Jo),signatures:X(G())}),Qo=H({parsed:un(),program:G(),programId:oe}),ta=H({accounts:X(oe),data:G(),programId:oe}),Jf=Ie([ta,Qo]),Xf=Ie([H({parsed:un(),program:G(),programId:G()}),H({accounts:X(G()),data:G(),programId:G()})]),ea=In(Jf,Xf,s=>"accounts"in s?Y(s,ta):Y(s,Qo)),ra=H({signatures:X(G()),message:H({accountKeys:X(Jo),instructions:X(ea),recentBlockhash:G(),addressTableLookups:dt(tt(X(Yo)))})}),Vn=H({accountIndex:C(),mint:G(),owner:dt(G()),uiTokenAmount:Ni}),na=H({writable:X(oe),readonly:X(oe)}),ai=H({err:Gr,fee:C(),innerInstructions:dt(tt(X(H({index:C(),instructions:X(H({accounts:X(C()),data:G(),programIdIndex:C()}))})))),preBalances:X(C()),postBalances:X(C()),logMessages:dt(tt(X(G()))),preTokenBalances:dt(tt(X(Vn))),postTokenBalances:dt(tt(X(Vn))),loadedAddresses:dt(na),computeUnitsConsumed:dt(C())}),fs=H({err:Gr,fee:C(),innerInstructions:dt(tt(X(H({index:C(),instructions:X(ea)})))),preBalances:X(C()),postBalances:X(C()),logMessages:dt(tt(X(G()))),preTokenBalances:dt(tt(X(Vn))),postTokenBalances:dt(tt(X(Vn))),loadedAddresses:dt(na),computeUnitsConsumed:dt(C())}),hn=Ie([ie(0),ie("legacy")]),Vr=H({pubkey:G(),lamports:C(),postBalance:tt(C()),rewardType:tt(G()),commission:dt(tt(C()))}),Qf=Kt(tt(H({blockhash:G(),previousBlockhash:G(),parentSlot:C(),transactions:X(H({transaction:hs,meta:tt(ai),version:dt(hn)})),rewards:dt(X(Vr)),blockTime:tt(C()),blockHeight:tt(C())}))),tl=Kt(tt(H({blockhash:G(),previousBlockhash:G(),parentSlot:C(),rewards:dt(X(Vr)),blockTime:tt(C()),blockHeight:tt(C())}))),el=Kt(tt(H({blockhash:G(),previousBlockhash:G(),parentSlot:C(),transactions:X(H({transaction:Xo,meta:tt(ai),version:dt(hn)})),rewards:dt(X(Vr)),blockTime:tt(C()),blockHeight:tt(C())}))),rl=Kt(tt(H({blockhash:G(),previousBlockhash:G(),parentSlot:C(),transactions:X(H({transaction:ra,meta:tt(fs),version:dt(hn)})),rewards:dt(X(Vr)),blockTime:tt(C()),blockHeight:tt(C())}))),nl=Kt(tt(H({blockhash:G(),previousBlockhash:G(),parentSlot:C(),transactions:X(H({transaction:Xo,meta:tt(fs),version:dt(hn)})),rewards:dt(X(Vr)),blockTime:tt(C()),blockHeight:tt(C())}))),il=Kt(tt(H({blockhash:G(),previousBlockhash:G(),parentSlot:C(),rewards:dt(X(Vr)),blockTime:tt(C()),blockHeight:tt(C())}))),sl=Kt(tt(H({blockhash:G(),previousBlockhash:G(),parentSlot:C(),transactions:X(H({transaction:hs,meta:tt(ai)})),rewards:dt(X(Vr)),blockTime:tt(C())}))),qs=Kt(tt(H({blockhash:G(),previousBlockhash:G(),parentSlot:C(),signatures:X(G()),blockTime:tt(C())}))),_i=Kt(tt(H({slot:C(),meta:tt(ai),blockTime:dt(tt(C())),transaction:hs,version:dt(hn)}))),Pn=Kt(tt(H({slot:C(),transaction:ra,meta:tt(fs),blockTime:dt(tt(C())),version:dt(hn)}))),ol=ce(H({blockhash:G(),feeCalculator:H({lamportsPerSignature:C()})})),al=ce(H({blockhash:G(),lastValidBlockHeight:C()})),cl=ce(Ye()),ul=H({slot:C(),numTransactions:C(),numSlots:C(),samplePeriodSecs:C()}),hl=Kt(X(ul)),fl=ce(tt(H({feeCalculator:H({lamportsPerSignature:C()})}))),ll=Kt(G()),dl=Kt(G()),pl=H({err:Gr,logs:X(G()),signature:G()}),gl=H({result:oi(pl),subscription:C()}),ml={"solana-client":"js/1.0.0-maintenance"};class kl{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const k={};return async x=>{const{commitment:E,config:q}=Qt(x),R=this._buildArgs([],E,void 0,q),I=Ts(R);return k[I]=k[I]??(async()=>{try{const B=await this._rpcRequest("getBlockHeight",R),A=Y(B,Kt(C()));if("error"in A)throw new ut(A.error,"failed to get block height information");return A.result}finally{delete k[I]}})(),await k[I]}})();let r,o,n,u,y,b;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,o=e.httpHeaders,n=e.fetch,u=e.fetchMiddleware,y=e.disableRetryOnRateLimit,b=e.httpAgent),this._rpcEndpoint=Qh(t),this._rpcWsEndpoint=r||Jh(t),this._rpcClient=gf(t,o,n,u,y,b),this._rpcRequest=mf(this._rpcClient),this._rpcBatchRequest=yf(this._rpcClient),this._rpcWebSocket=new Vh(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:o}=Qt(e),n=this._buildArgs([t.toBase58()],r,void 0,o),u=await this._rpcRequest("getBalance",n),y=Y(u,ce(C()));if("error"in y)throw new ut(y.error,`failed to get balance for ${t.toBase58()}`);return y.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Y(e,Kt(tt(C())));if("error"in r)throw new ut(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Y(t,Kt(C()));if("error"in e)throw new ut(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Y(t,kf);if("error"in e)throw new ut(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),o=Y(r,_f);if("error"in o)throw new ut(o.error,"failed to get supply");return o.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenSupply",r),n=Y(o,ce(Ni));if("error"in n)throw new ut(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenAccountBalance",r),n=Y(o,ce(Ni));if("error"in n)throw new ut(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(t,e,r){const{commitment:o,config:n}=Qt(r);let u=[t.toBase58()];"mint"in e?u.push({mint:e.mint.toBase58()}):u.push({programId:e.programId.toBase58()});const y=this._buildArgs(u,o,"base64",n),b=await this._rpcRequest("getTokenAccountsByOwner",y),k=Y(b,Bf);if("error"in k)throw new ut(k.error,`failed to get token accounts owned by account ${t.toBase58()}`);return k.result}async getParsedTokenAccountsByOwner(t,e,r){let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const n=this._buildArgs(o,r,"jsonParsed"),u=await this._rpcRequest("getTokenAccountsByOwner",n),y=Y(u,Af);if("error"in y)throw new ut(y.error,`failed to get token accounts owned by account ${t.toBase58()}`);return y.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],o=await this._rpcRequest("getLargestAccounts",r),n=Y(o,If);if("error"in n)throw new ut(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenLargestAccounts",r),n=Y(o,Ef);if("error"in n)throw new ut(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:o}=Qt(e),n=this._buildArgs([t.toBase58()],r,"base64",o),u=await this._rpcRequest("getAccountInfo",n),y=Y(u,ce(tt(Mn)));if("error"in y)throw new ut(y.error,`failed to get info about account ${t.toBase58()}`);return y.result}async getParsedAccountInfo(t,e){const{commitment:r,config:o}=Qt(e),n=this._buildArgs([t.toBase58()],r,"jsonParsed",o),u=await this._rpcRequest("getAccountInfo",n),y=Y(u,ce(tt(qi)));if("error"in y)throw new ut(y.error,`failed to get info about account ${t.toBase58()}`);return y.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:o}=Qt(e),n=t.map(k=>k.toBase58()),u=this._buildArgs([n],r,"jsonParsed",o),y=await this._rpcRequest("getMultipleAccounts",u),b=Y(y,ce(X(tt(qi))));if("error"in b)throw new ut(b.error,`failed to get info for accounts ${n}`);return b.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:o}=Qt(e),n=t.map(k=>k.toBase58()),u=this._buildArgs([n],r,"base64",o),y=await this._rpcRequest("getMultipleAccounts",u),b=Y(y,ce(X(tt(Mn))));if("error"in b)throw new ut(b.error,`failed to get info for accounts ${n}`);return b.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:o,config:n}=Qt(e),u=this._buildArgs([t.toBase58()],o,void 0,{...n,epoch:r??(n==null?void 0:n.epoch)}),y=await this._rpcRequest("getStakeActivation",u),b=Y(y,Kt(Cf));if("error"in b)throw new ut(b.error,`failed to get Stake Activation ${t.toBase58()}`);return b.result}async getProgramAccounts(t,e){const{commitment:r,config:o}=Qt(e),{encoding:n,...u}=o||{},y=this._buildArgs([t.toBase58()],r,n||"base64",{...u,...u.filters?{filters:Ps(u.filters)}:null}),b=await this._rpcRequest("getProgramAccounts",y),k=X(Rf),x=u.withContext===!0?Y(b,ce(k)):Y(b,Kt(k));if("error"in x)throw new ut(x.error,`failed to get accounts owned by program ${t.toBase58()}`);return x.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:o}=Qt(e),n=this._buildArgs([t.toBase58()],r,"jsonParsed",o),u=await this._rpcRequest("getProgramAccounts",n),y=Y(u,Kt(X(Tf)));if("error"in y)throw new ut(y.error,`failed to get accounts owned by program ${t.toBase58()}`);return y.result}async confirmTransaction(t,e){var n;let r;if(typeof t=="string")r=t;else{const u=t;if((n=u.abortSignal)!=null&&n.aborted)return Promise.reject(u.abortSignal.reason);r=u.signature}let o;try{o=Se.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ee(o.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,o,n=!1;const u=new Promise((b,k)=>{try{r=this.onSignature(e,(E,q)=>{r=void 0;const R={context:q,value:E};b({__type:fr.PROCESSED,response:R})},t);const x=new Promise(E=>{r==null?E():o=this._onSubscriptionStateChange(r,q=>{q==="subscribed"&&E()})});(async()=>{if(await x,n)return;const E=await this.getSignatureStatus(e);if(n||E==null)return;const{context:q,value:R}=E;if(R!=null)if(R!=null&&R.err)k(R.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(R.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(R.confirmationStatus==="processed"||R.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}n=!0,b({__type:fr.PROCESSED,response:{context:q,value:R}})}})()}catch(x){k(x)}});return{abortConfirmation:()=>{o&&(o(),o=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:u}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:o}}){let n=!1;const u=new Promise(E=>{const q=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let R=await q();if(!n){for(;R<=r;)if(await Jr(1e3),n||(R=await q(),n))return;E({__type:fr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:y,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),k=this.getCancellationPromise(e);let x;try{const E=await Promise.race([k,b,u]);if(E.__type===fr.PROCESSED)x=E.response;else throw new Do(o)}finally{n=!0,y()}return x}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:o,nonceValue:n,signature:u}}){let y=!1;const b=new Promise(R=>{let I=n,B=null;const A=async()=>{try{const{context:P,value:$}=await this.getNonceAndContext(o,{commitment:t,minContextSlot:r});return B=P.slot,$==null?void 0:$.nonce}catch{return I}};(async()=>{if(I=await A(),!y)for(;;){if(n!==I){R({__type:fr.NONCE_INVALID,slotInWhichNonceDidAdvance:B});return}if(await Jr(2e3),y||(I=await A(),y))return}})()}),{abortConfirmation:k,confirmationPromise:x}=this.getTransactionConfirmationPromise({commitment:t,signature:u}),E=this.getCancellationPromise(e);let q;try{const R=await Promise.race([E,x,b]);if(R.__type===fr.PROCESSED)q=R.response;else{let I;for(;;){const B=await this.getSignatureStatus(u);if(B==null)break;if(B.context.slot<(R.slotInWhichNonceDidAdvance??r)){await Jr(400);continue}I=B;break}if(I!=null&&I.value){const B=t||"finalized",{confirmationStatus:A}=I.value;switch(B){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new bn(u);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new bn(u);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new bn(u);break;default:}q={context:I.context,value:{err:I.value.err}}}else throw new bn(u)}}finally{y=!0,k()}return q}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const o=new Promise(b=>{let k=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{k=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>b({__type:fr.TIMED_OUT,timeoutMs:k}),k)}),{abortConfirmation:n,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let y;try{const b=await Promise.race([u,o]);if(b.__type===fr.PROCESSED)y=b.response;else throw new $o(e,b.timeoutMs/1e3)}finally{clearTimeout(r),n()}return y}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Y(t,Kt(X(Hf)));if("error"in e)throw new ut(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),o=Y(r,Gf);if("error"in o)throw new ut(o.error,"failed to get vote accounts");return o.result}async getSlot(t){const{commitment:e,config:r}=Qt(t),o=this._buildArgs([],e,void 0,r),n=await this._rpcRequest("getSlot",o),u=Y(n,Kt(C()));if("error"in u)throw new ut(u.error,"failed to get slot");return u.result}async getSlotLeader(t){const{commitment:e,config:r}=Qt(t),o=this._buildArgs([],e,void 0,r),n=await this._rpcRequest("getSlotLeader",o),u=Y(n,Kt(G()));if("error"in u)throw new ut(u.error,"failed to get slot leader");return u.result}async getSlotLeaders(t,e){const r=[t,e],o=await this._rpcRequest("getSlotLeaders",r),n=Y(o,Kt(X(oe)));if("error"in n)throw new ut(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(t,e){const{context:r,value:o}=await this.getSignatureStatuses([t],e);ee(o.length===1);const n=o[0];return{context:r,value:n}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const o=await this._rpcRequest("getSignatureStatuses",r),n=Y(o,jf);if("error"in n)throw new ut(n.error,"failed to get signature status");return n.result}async getTransactionCount(t){const{commitment:e,config:r}=Qt(t),o=this._buildArgs([],e,void 0,r),n=await this._rpcRequest("getTransactionCount",o),u=Y(n,Kt(C()));if("error"in u)throw new ut(u.error,"failed to get transaction count");return u.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),o=Y(r,wf);if("error"in o)throw new ut(o.error,"failed to get inflation");return o.result}async getInflationReward(t,e,r){const{commitment:o,config:n}=Qt(r),u=this._buildArgs([t.map(k=>k.toBase58())],o,void 0,{...n,epoch:e??(n==null?void 0:n.epoch)}),y=await this._rpcRequest("getInflationReward",u),b=Y(y,rf);if("error"in b)throw new ut(b.error,"failed to get inflation reward");return b.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Y(t,bf);if("error"in e)throw new ut(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Qt(t),o=this._buildArgs([],e,void 0,r),n=await this._rpcRequest("getEpochInfo",o),u=Y(n,xf);if("error"in u)throw new ut(u.error,"failed to get epoch info");return u.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Y(t,Sf);if("error"in e)throw new ut(e.error,"failed to get epoch schedule");const r=e.result;return new Hh(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Y(t,Mf);if("error"in e)throw new ut(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getMinimumBalanceForRentExemption",r),n=Y(o,Yf);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),o=Y(r,ol);if("error"in o)throw new ut(o.error,"failed to get recent blockhash");return o.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=Y(e,hl);if("error"in r)throw new ut(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getFeeCalculatorForBlockhash",r),n=Y(o,fl);if("error"in n)throw new ut(n.error,"failed to get fee calculator");const{context:u,value:y}=n.result;return{context:u,value:y!==null?y.feeCalculator:null}}async getFeeForMessage(t,e){const r=ne(t.serialize()).toString("base64"),o=this._buildArgs([r],e),n=await this._rpcRequest("getFeeForMessage",o),u=Y(n,ce(tt(C())));if("error"in u)throw new ut(u.error,"failed to get fee for message");if(u.result===null)throw new Error("invalid blockhash");return u.result}async getRecentPrioritizationFees(t){var u;const e=(u=t==null?void 0:t.lockedWritableAccounts)==null?void 0:u.map(y=>y.toBase58()),r=e!=null&&e.length?[e]:[],o=await this._rpcRequest("getRecentPrioritizationFees",r),n=Y(o,vf);if("error"in n)throw new ut(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Qt(t),o=this._buildArgs([],e,void 0,r),n=await this._rpcRequest("getLatestBlockhash",o),u=Y(n,al);if("error"in u)throw new ut(u.error,"failed to get latest blockhash");return u.result}async isBlockhashValid(t,e){const{commitment:r,config:o}=Qt(e),n=this._buildArgs([t],r,void 0,o),u=await this._rpcRequest("isBlockhashValid",n),y=Y(u,cl);if("error"in y)throw new ut(y.error,"failed to determine if the blockhash `"+t+"`is valid");return y.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Y(t,Kt(ff));if("error"in e)throw new ut(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Y(t,Kt(G()));if("error"in e)throw new ut(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:o}=Qt(e),n=this._buildArgsAtLeastConfirmed([t],r,void 0,o),u=await this._rpcRequest("getBlock",n);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const y=Y(u,el);if("error"in y)throw y.error;return y.result}case"none":{const y=Y(u,tl);if("error"in y)throw y.error;return y.result}default:{const y=Y(u,Qf);if("error"in y)throw y.error;const{result:b}=y;return b?{...b,transactions:b.transactions.map(({transaction:k,meta:x,version:E})=>({meta:x,transaction:{...k,message:ki(E,k.message)},version:E}))}:null}}}catch(y){throw new ut(y,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:o}=Qt(e),n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),u=await this._rpcRequest("getBlock",n);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const y=Y(u,nl);if("error"in y)throw y.error;return y.result}case"none":{const y=Y(u,il);if("error"in y)throw y.error;return y.result}default:{const y=Y(u,rl);if("error"in y)throw y.error;return y.result}}}catch(y){throw new ut(y,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:y,...b}=t;r=y,e=b}const o=this._buildArgs([],r,"base64",e),n=await this._rpcRequest("getBlockProduction",o),u=Y(n,pf);if("error"in u)throw new ut(u.error,"failed to get block production information");return u.result}async getTransaction(t,e){const{commitment:r,config:o}=Qt(e),n=this._buildArgsAtLeastConfirmed([t],r,void 0,o),u=await this._rpcRequest("getTransaction",n),y=Y(u,_i);if("error"in y)throw new ut(y.error,"failed to get transaction");const b=y.result;return b&&{...b,transaction:{...b.transaction,message:ki(b.version,b.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:o}=Qt(e),n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),u=await this._rpcRequest("getTransaction",n),y=Y(u,Pn);if("error"in y)throw new ut(y.error,"failed to get transaction");return y.result}async getParsedTransactions(t,e){const{commitment:r,config:o}=Qt(e),n=t.map(b=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([b],r,"jsonParsed",o)}));return(await this._rpcBatchRequest(n)).map(b=>{const k=Y(b,Pn);if("error"in k)throw new ut(k.error,"failed to get transactions");return k.result})}async getTransactions(t,e){const{commitment:r,config:o}=Qt(e),n=t.map(b=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([b],r,void 0,o)}));return(await this._rpcBatchRequest(n)).map(b=>{const k=Y(b,_i);if("error"in k)throw new ut(k.error,"failed to get transactions");const x=k.result;return x&&{...x,transaction:{...x.transaction,message:ki(x.version,x.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedBlock",r),n=Y(o,sl);if("error"in n)throw new ut(n.error,"failed to get confirmed block");const u=n.result;if(!u)throw new Error("Confirmed block "+t+" not found");const y={...u,transactions:u.transactions.map(({transaction:b,meta:k})=>{const x=new or(b.message);return{meta:k,transaction:{...b,message:x}}})};return{...y,transactions:y.transactions.map(({transaction:b,meta:k})=>({meta:k,transaction:le.populate(b.message,b.signatures)}))}}async getBlocks(t,e,r){const o=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),n=await this._rpcRequest("getBlocks",o),u=Y(n,Kt(X(C())));if("error"in u)throw new ut(u.error,"failed to get blocks");return u.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",r),n=Y(o,qs);if("error"in n)throw new ut(n.error,"failed to get block");const u=n.result;if(!u)throw new Error("Block "+t+" not found");return u}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getConfirmedBlock",r),n=Y(o,qs);if("error"in n)throw new ut(n.error,"failed to get confirmed block");const u=n.result;if(!u)throw new Error("Confirmed block "+t+" not found");return u}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedTransaction",r),n=Y(o,_i);if("error"in n)throw new ut(n.error,"failed to get transaction");const u=n.result;if(!u)return u;const y=new or(u.transaction.message),b=u.transaction.signatures;return{...u,transaction:le.populate(y,b)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),o=await this._rpcRequest("getConfirmedTransaction",r),n=Y(o,Pn);if("error"in n)throw new ut(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(t,e){const r=t.map(u=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([u],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(u=>{const y=Y(u,Pn);if("error"in y)throw new ut(y.error,"failed to get confirmed transactions");return y.result})}async getConfirmedSignaturesForAddress(t,e,r){let o={},n=await this.getFirstAvailableBlock();for(;!("until"in o)&&(e--,!(e<=0||e<n));)try{const b=await this.getConfirmedBlockSignatures(e,"finalized");b.signatures.length>0&&(o.until=b.signatures[b.signatures.length-1].toString())}catch(b){if(b instanceof Error&&b.message.includes("skipped"))continue;throw b}let u=await this.getSlot("finalized");for(;!("before"in o)&&(r++,!(r>u));)try{const b=await this.getConfirmedBlockSignatures(r);b.signatures.length>0&&(o.before=b.signatures[b.signatures.length-1].toString())}catch(b){if(b instanceof Error&&b.message.includes("skipped"))continue;throw b}return(await this.getConfirmedSignaturesForAddress2(t,o)).map(b=>b.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),n=await this._rpcRequest("getConfirmedSignaturesForAddress2",o),u=Y(n,Uf);if("error"in u)throw new ut(u.error,"failed to get confirmed signatures for address");return u.result}async getSignaturesForAddress(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),n=await this._rpcRequest("getSignaturesForAddress",o),u=Y(n,Pf);if("error"in u)throw new ut(u.error,"failed to get signatures for address");return u.result}async getAddressLookupTable(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let n=null;return o!==null&&(n=new Us({key:t,state:Us.deserialize(o.data)})),{context:r,value:n}}async getNonceAndContext(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let n=null;return o!==null&&(n=cs.fromAccountData(o.data)),{context:r,value:n}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),o=Y(r,ll);if("error"in o)throw new ut(o.error,`airdrop to ${t.toBase58()} failed`);return o.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Jr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Xh;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let o=0;o<50;o++){const n=await this.getLatestBlockhash("finalized");if(r!==n.blockhash)return this._blockhashInfo={latestBlockhash:n,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},n;await Jr(Oh/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Qt(t),o=this._buildArgs([],e,"base64",r),n=await this._rpcRequest("getStakeMinimumDelegation",o),u=Y(n,ce(C()));if("error"in u)throw new ut(u.error,"failed to get stake minimum delegation");return u.result}async simulateTransaction(t,e,r){if("message"in t){const B=t.serialize(),A=Et.from(B).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const P=e||{};P.encoding="base64","commitment"in P||(P.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(P.innerInstructions=e.innerInstructions);const $=[A,P],z=await this._rpcRequest("simulateTransaction",$),V=Y(z,Ns);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let o;if(t instanceof le){let I=t;o=new le,o.feePayer=I.feePayer,o.instructions=t.instructions,o.nonceInfo=I.nonceInfo,o.signatures=I.signatures}else o=le.populate(t),o._message=o._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(o.nonceInfo&&n)o.sign(...n);else{let I=this._disableBlockhashCaching;for(;;){const B=await this._blockhashWithExpiryBlockHeight(I);if(o.lastValidBlockHeight=B.lastValidBlockHeight,o.recentBlockhash=B.blockhash,!n)break;if(o.sign(...n),!o.signature)throw new Error("!signature");const A=o.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else I=!0}}const u=o._compile(),y=u.serialize(),k=o._serialize(y).toString("base64"),x={encoding:"base64",commitment:this.commitment};if(r){const I=(Array.isArray(r)?r:u.nonProgramIds()).map(B=>B.toBase58());x.accounts={encoding:"base64",addresses:I}}n&&(x.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(x.innerInstructions=e.innerInstructions);const E=[k,x],q=await this._rpcRequest("simulateTransaction",E),R=Y(q,Ns);if("error"in R){let I;if("data"in R.error&&(I=R.error.data.logs,I&&Array.isArray(I))){const B=`
    `,A=B+I.join(B);console.error(R.error.message,A)}throw new Is({action:"simulate",signature:"",transactionMessage:R.error.message,logs:I})}return R.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const u=t.serialize();return await this.sendRawTransaction(u,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const o=e;if(t.nonceInfo)t.sign(...o);else{let u=this._disableBlockhashCaching;for(;;){const y=await this._blockhashWithExpiryBlockHeight(u);if(t.lastValidBlockHeight=y.lastValidBlockHeight,t.recentBlockhash=y.blockhash,t.sign(...o),!t.signature)throw new Error("!signature");const b=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(b))u=!0;else{this._blockhashInfo.transactionSignatures.push(b);break}}}const n=t.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(t,e){const r=ne(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},o=e&&e.skipPreflight,n=o===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),o&&(r.skipPreflight=o),n&&(r.preflightCommitment=n);const u=[t,r],y=await this._rpcRequest("sendTransaction",u),b=Y(y,dl);if("error"in b){let k;throw"data"in b.error&&(k=b.error.data.logs),new Is({action:o?"send":"simulate",signature:"",transactionMessage:b.error.message,logs:k})}return b.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var o;const r=(o=this._subscriptionsByHash[t])==null?void 0:o.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const n=this._subscriptionStateChangeCallbacksByHash[t];n&&n.forEach(u=>{try{u(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var n;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const o=(n=this._subscriptionStateChangeCallbacksByHash)[r]||(n[r]=new Set);return o.add(e),()=>{o.delete(e),o.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const o=this._subscriptionsByHash[r];if(o!==void 0)switch(o.state){case"pending":case"unsubscribed":if(o.callbacks.size===0){delete this._subscriptionsByHash[r],o.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[o.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:n,method:u}=o;try{this._setSubscription(r,{...o,state:"subscribing"});const y=await this._rpcWebSocket.call(u,n);this._setSubscription(r,{...o,serverSubscriptionId:y,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[y]=o.callbacks,await this._updateSubscriptions()}catch(y){if(console.error(`Received ${y instanceof Error?"":"JSON-RPC "}error calling \`${u}\``,{args:n,error:y}),!e())return;this._setSubscription(r,{...o,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":o.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:u}=o;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(r,{...o,state:"unsubscribing"}),this._setSubscription(r,{...o,state:"unsubscribing"});try{await this._rpcWebSocket.call(u,[n])}catch(y){if(y instanceof Error&&console.error(`${u} error:`,y.message),!e())return;this._setSubscription(r,{...o,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...o,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(o=>{try{o(...e)}catch(n){console.error(n)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=Y(t,Nf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,o=Ts([t.method,e]),n=this._subscriptionsByHash[o];return n===void 0?this._subscriptionsByHash[o]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:n.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=o,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const u=this._subscriptionsByHash[o];ee(u!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),u.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:o,config:n}=Qt(r),u=this._buildArgs([t.toBase58()],o||this._commitment||"finalized","base64",n);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},u)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=Y(t,qf);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,o){const{commitment:n,config:u}=Qt(r),y=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",u||(o?{filters:Ps(o)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},y)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const o=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},o)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=Y(t,gl);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=Y(t,zf);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=Y(t,$f);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,o){const n=e||this._commitment;if(n||r||o){let u={};r&&(u.encoding=r),n&&(u.commitment=n),o&&(u=Object.assign(u,o)),t.push(u)}return t}_buildArgsAtLeastConfirmed(t,e,r,o){const n=e||this._commitment;if(n&&!["confirmed","finalized"].includes(n))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,o)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=Y(t,Kf);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const o=this._buildArgs([t],r||this._commitment||"finalized"),n=this._makeSubscription({callback:(u,y)=>{if(u.type==="status"){e(u.result,y);try{this.removeSignatureListener(n)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return n}onSignatureWithOptions(t,e,r){const{commitment:o,...n}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},u=this._buildArgs([t],o,void 0,n),y=this._makeSubscription({callback:(b,k)=>{e(b,k);try{this.removeSignatureListener(y)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return y}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=Y(t,Wf);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class On{constructor(t){this._keypair=void 0,this._keypair=t??Es()}static generate(){return new On(Es())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const o=t.slice(0,32),n=Ui(o);for(let u=0;u<32;u++)if(r[u]!==n[u])throw new Error("provided secretKey is invalid")}return new On({publicKey:r,secretKey:t})}static fromSeed(t){const e=Ui(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new On({publicKey:e,secretKey:r})}get publicKey(){return new mt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ct([ft("instruction"),sn("recentSlot"),Zt("bumpSeed")])},FreezeLookupTable:{index:1,layout:ct([ft("instruction")])},ExtendLookupTable:{index:2,layout:ct([ft("instruction"),sn(),Be(Ht(),zr(ft(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ct([ft("instruction")])},CloseLookupTable:{index:4,layout:ct([ft("instruction")])}});new mt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ct([Zt("instruction"),ft("units"),ft("additionalFee")])},RequestHeapFrame:{index:1,layout:ct([Zt("instruction"),ft("bytes")])},SetComputeUnitLimit:{index:2,layout:ct([Zt("instruction"),ft("units")])},SetComputeUnitPrice:{index:3,layout:ct([Zt("instruction"),sn("microLamports")])}});new mt("ComputeBudget111111111111111111111111111111");ct([Zt("numSignatures"),Zt("padding"),De("signatureOffset"),De("signatureInstructionIndex"),De("publicKeyOffset"),De("publicKeyInstructionIndex"),De("messageDataOffset"),De("messageDataSize"),De("messageInstructionIndex")]);new mt("Ed25519SigVerify111111111111111111111111111");os.utils.isValidPrivateKey;os.getPublicKey;ct([Zt("numSignatures"),De("signatureOffset"),Zt("signatureInstructionIndex"),De("ethAddressOffset"),Zt("ethAddressInstructionIndex"),De("messageDataOffset"),De("messageDataSize"),Zt("messageInstructionIndex"),te(20,"ethAddress"),te(64,"signature"),Zt("recoveryId")]);new mt("KeccakSecp256k11111111111111111111111111111");var ia;const yl=new mt("StakeConfig11111111111111111111111111111111");class ls{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}ia=ls;ls.default=new ia(0,0,mt.default);const lr=Object.freeze({Initialize:{index:0,layout:ct([ft("instruction"),Ih(),Rh()])},Authorize:{index:1,layout:ct([ft("instruction"),Ht("newAuthorized"),ft("stakeAuthorizationType")])},Delegate:{index:2,layout:ct([ft("instruction")])},Split:{index:3,layout:ct([ft("instruction"),Ce("lamports")])},Withdraw:{index:4,layout:ct([ft("instruction"),Ce("lamports")])},Deactivate:{index:5,layout:ct([ft("instruction")])},Merge:{index:7,layout:ct([ft("instruction")])},AuthorizeWithSeed:{index:8,layout:ct([ft("instruction"),Ht("newAuthorized"),ft("stakeAuthorizationType"),Xr("authoritySeed"),Ht("authorityOwner")])}});class sa{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:o}=t,n=o||ls.default,u=lr.Initialize,y=ue(u,{authorized:{staker:ne(r.staker.toBuffer()),withdrawer:ne(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:ne(n.custodian.toBuffer())}}),b={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Pi,isSigner:!1,isWritable:!1}],programId:this.programId,data:y};return new Te(b)}static createAccountWithSeed(t){const e=new le;e.add(sr.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:n}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:n}))}static createAccount(t){const e=new le;e.add(sr.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:n}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:n}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:o}=t,n=lr.Delegate,u=ue(n);return new le().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:jr,isSigner:!1,isWritable:!1},{pubkey:xi,isSigner:!1,isWritable:!1},{pubkey:yl,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:o,stakeAuthorizationType:n,custodianPubkey:u}=t,y=lr.Authorize,b=ue(y,{newAuthorized:ne(o.toBuffer()),stakeAuthorizationType:n.index}),k=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:jr,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&k.push({pubkey:u,isSigner:!0,isWritable:!1}),new le().add({keys:k,programId:this.programId,data:b})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:o,authorityOwner:n,newAuthorizedPubkey:u,stakeAuthorizationType:y,custodianPubkey:b}=t,k=lr.AuthorizeWithSeed,x=ue(k,{newAuthorized:ne(u.toBuffer()),stakeAuthorizationType:y.index,authoritySeed:o,authorityOwner:ne(n.toBuffer())}),E=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:jr,isSigner:!1,isWritable:!1}];return b&&E.push({pubkey:b,isSigner:!0,isWritable:!1}),new le().add({keys:E,programId:this.programId,data:x})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:o,lamports:n}=t,u=lr.Split,y=ue(u,{lamports:n});return new Te({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:y})}static split(t,e){const r=new le;return r.add(sr.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:o,splitStakePubkey:n,basePubkey:u,seed:y,lamports:b}=t,k=new le;return k.add(sr.allocate({accountPubkey:n,basePubkey:u,seed:y,space:this.space,programId:this.programId})),e&&e>0&&k.add(sr.transfer({fromPubkey:t.authorizedPubkey,toPubkey:n,lamports:e})),k.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:o,splitStakePubkey:n,lamports:b}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:o}=t,n=lr.Merge,u=ue(n);return new le().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:jr,isSigner:!1,isWritable:!1},{pubkey:xi,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:o,lamports:n,custodianPubkey:u}=t,y=lr.Withdraw,b=ue(y,{lamports:n}),k=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:jr,isSigner:!1,isWritable:!1},{pubkey:xi,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&k.push({pubkey:u,isSigner:!0,isWritable:!1}),new le().add({keys:k,programId:this.programId,data:b})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,o=lr.Deactivate,n=ue(o);return new le().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:jr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}sa.programId=new mt("Stake11111111111111111111111111111111111111");sa.space=200;Object.freeze({InitializeAccount:{index:0,layout:ct([ft("instruction"),Lh()])},Authorize:{index:1,layout:ct([ft("instruction"),Ht("newAuthorized"),ft("voteAuthorizationType")])},Withdraw:{index:3,layout:ct([ft("instruction"),Ce("lamports")])},UpdateValidatorIdentity:{index:4,layout:ct([ft("instruction")])},AuthorizeWithSeed:{index:10,layout:ct([ft("instruction"),Th()])}});new mt("Vote111111111111111111111111111111111111111");new mt("Va1idator1nfo111111111111111111111111111111");H({name:G(),website:dt(G()),details:dt(G()),iconUrl:dt(G()),keybaseUsername:dt(G())});new mt("Vote111111111111111111111111111111111111111");ct([Ht("nodePubkey"),Ht("authorizedWithdrawer"),Zt("commission"),ve(),Be(ct([ve("slot"),ft("confirmationCount")]),zr(ft(),-8),"votes"),Zt("rootSlotValid"),ve("rootSlot"),ve(),Be(ct([ve("epoch"),Ht("authorizedVoter")]),zr(ft(),-8),"authorizedVoters"),ct([Be(ct([Ht("authorizedPubkey"),ve("epochOfLastAuthorizedSwitch"),ve("targetEpoch")]),32,"buf"),ve("idx"),Zt("isEmpty")],"priorVoters"),ve(),Be(ct([ve("epoch"),ve("credits"),ve("prevCredits")]),zr(ft(),-8),"epochCredits"),ct([ve("slot"),ve("timestamp")],"lastTimestamp")]);const Fs={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function _l(s,t){const e="https";if(!s)return Fs[e].devnet;const r=Fs[e][s];if(!r)throw new Error(`Unknown ${e} cluster: ${s}`);return r}const El=1e9;export{fe as B,kl as C,On as K,El as L,mt as P,Hn as S,le as T,Ho as V,Go as a,te as b,_l as c,Bu as d,ct as e,Te as f,ft as g,sr as h,Et as i,jr as j,xi as k,sa as l,Pi as m,Ce as n,yl as o,Xn as r,to as s,ku as t,Zt as u};
