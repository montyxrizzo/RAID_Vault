import{C as Un,V as kn,T as ft,a as ht,S as xn,P as Qt,s as zn}from"./solanaWeb3-DJ-PYoxv.js";import{r as b,t as E,a as Ct}from"./jotai-DjeRa5Ps.js";import{r as Fn}from"./react-CxEt3Z_u.js";const Zt=b.createContext({});function Kn(){return b.useContext(Zt)}const Ss=({children:e,endpoint:t,config:n={commitment:"confirmed"}})=>{const r=b.useMemo(()=>new Un(t,n),[t,n]);return E.createElement(Zt.Provider,{value:{connection:r}},e)};var Xt={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(a,u,c){this.fn=a,this.context=u,this.once=c||!1}function s(a,u,c,f,m){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new o(c,f||a,m),w=n?n+u:u;return a._events[w]?a._events[w].fn?a._events[w]=[a._events[w],d]:a._events[w].push(d):(a._events[w]=d,a._eventsCount++),a}function i(a,u){--a._eventsCount===0?a._events=new r:delete a._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)t.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},l.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,d=f.length,w=new Array(d);m<d;m++)w[m]=f[m].fn;return w},l.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,c,f,m,d,w){var _=n?n+u:u;if(!this._events[_])return!1;var g=this._events[_],v=arguments.length,p,h;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,f),!0;case 4:return g.fn.call(g.context,c,f,m),!0;case 5:return g.fn.call(g.context,c,f,m,d),!0;case 6:return g.fn.call(g.context,c,f,m,d,w),!0}for(h=1,p=new Array(v-1);h<v;h++)p[h-1]=arguments[h];g.fn.apply(g.context,p)}else{var y=g.length,C;for(h=0;h<y;h++)switch(g[h].once&&this.removeListener(u,g[h].fn,void 0,!0),v){case 1:g[h].fn.call(g[h].context);break;case 2:g[h].fn.call(g[h].context,c);break;case 3:g[h].fn.call(g[h].context,c,f);break;case 4:g[h].fn.call(g[h].context,c,f,m);break;default:if(!p)for(C=1,p=new Array(v-1);C<v;C++)p[C-1]=arguments[C];g[h].fn.apply(g[h].context,p)}}return!0},l.prototype.on=function(u,c,f){return s(this,u,c,f,!1)},l.prototype.once=function(u,c,f){return s(this,u,c,f,!0)},l.prototype.removeListener=function(u,c,f,m){var d=n?n+u:u;if(!this._events[d])return this;if(!c)return i(this,d),this;var w=this._events[d];if(w.fn)w.fn===c&&(!m||w.once)&&(!f||w.context===f)&&i(this,d);else{for(var _=0,g=[],v=w.length;_<v;_++)(w[_].fn!==c||m&&!w[_].once||f&&w[_].context!==f)&&g.push(w[_]);g.length?this._events[d]=g.length===1?g[0]:g:i(this,d)}return this},l.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&i(this,c)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(Xt);var jn=Xt.exports;const Vn=Ct(jn);class F extends Error{constructor(t,n){super(t),this.error=n}}class he extends F{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class As extends F{constructor(){super(...arguments),this.name="WalletLoadError"}}class _e extends F{constructor(){super(...arguments),this.name="WalletConfigError"}}class be extends F{constructor(){super(...arguments),this.name="WalletConnectionError"}}class en extends F{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class $n extends F{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class de extends F{constructor(){super(...arguments),this.name="WalletAccountError"}}class tn extends F{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class q extends F{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class se extends F{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class ie extends F{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class nn extends F{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class Mt extends F{constructor(){super(...arguments),this.name="WalletSignInError"}}var P;(function(e){e.Installed="Installed",e.NotDetected="NotDetected",e.Loadable="Loadable",e.Unsupported="Unsupported"})(P||(P={}));class rn extends Vn{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,n,r={}){const o=this.publicKey;if(!o)throw new q;return t.feePayer=t.feePayer||o,t.recentBlockhash=t.recentBlockhash||(await n.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,t}}function Ts(e){if(typeof window>"u"||typeof document>"u")return;const t=[];function n(){if(e())for(const s of t)s()}const r=setInterval(n,1e3);t.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",n,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",n))),document.readyState!=="complete"&&(window.addEventListener("load",n,{once:!0}),t.push(()=>window.removeEventListener("load",n))),n()}function Rs(){if(!navigator)return!1;const e=navigator.userAgent.toLowerCase(),t=e.includes("iphone")||e.includes("ipad"),n=e.includes("safari");return t&&n}function ae(e){return"version"in e}class Hn extends rn{async sendTransaction(t,n,r={}){let o=!0;try{if(ae(t)){if(!this.supportedTransactionVersions)throw new se("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new se(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const s=t.serialize();return await n.sendRawTransaction(s,r)}catch(s){throw s instanceof ie?(o=!1,s):new se(s==null?void 0:s.message,s)}}else try{const{signers:s,...i}=r;t=await this.prepareTransaction(t,n,i),s!=null&&s.length&&t.partialSign(...s),t=await this.signTransaction(t);const l=t.serialize();return await n.sendRawTransaction(l,i)}catch(s){throw s instanceof ie?(o=!1,s):new se(s==null?void 0:s.message,s)}}catch(s){throw o&&this.emit("error",s),s}}async signAllTransactions(t){for(const r of t)if(ae(r)){if(!this.supportedTransactionVersions)throw new ie("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new ie(`Signing transaction version ${r.version} isn't supported by this wallet`)}const n=[];for(const r of t)n.push(await this.signTransaction(r));return n}}class Gn extends Hn{}class Yn extends Gn{}const te="solana:signAndSendTransaction",Qe="solana:signIn",Ee="solana:signMessage",x="solana:signTransaction",on="standard:connect",Nt="standard:disconnect",sn="standard:events";function qn(e){return on in e.features&&sn in e.features&&(te in e.features||x in e.features)}var Lt;(function(e){e.Mainnet="mainnet-beta",e.Testnet="testnet",e.Devnet="devnet"})(Lt||(Lt={}));class Pt extends F{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const Jn=[],Ve={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Y("call","select")},connect(){return Promise.reject(Y("call","connect"))},disconnect(){return Promise.reject(Y("call","disconnect"))},sendTransaction(){return Promise.reject(Y("call","sendTransaction"))},signTransaction(){return Promise.reject(Y("call","signTransaction"))},signAllTransactions(){return Promise.reject(Y("call","signAllTransactions"))},signMessage(){return Promise.reject(Y("call","signMessage"))},signIn(){return Promise.reject(Y("call","signIn"))}};Object.defineProperty(Ve,"wallets",{get(){return Y("read","wallets"),Jn}});Object.defineProperty(Ve,"wallet",{get(){return Y("read","wallet"),null}});Object.defineProperty(Ve,"publicKey",{get(){return Y("read","publicKey"),null}});function Y(e,t){const n=new Error(`You have tried to ${e} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(n),n}const an=b.createContext(Ve);function ln(){return b.useContext(an)}function Qn(e,t){const n=b.useState(()=>{try{const s=localStorage.getItem(e);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return t}),r=n[0],o=b.useRef(!0);return b.useEffect(()=>{if(o.current){o.current=!1;return}try{r===null?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(r))}catch(s){typeof window<"u"&&console.error(s)}},[r,e]),n}function Ze(e){switch(e){case"processed":case"confirmed":case"finalized":case void 0:return e;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Ot="solana:mainnet",Zn="solana:devnet",Xn="solana:testnet",er="solana:localnet",tr="https://api.mainnet-beta.solana.com";function nr(e){return e.includes(tr)?Ot:/\bdevnet\b/i.test(e)?Zn:/\btestnet\b/i.test(e)?Xn:/\blocalhost\b/i.test(e)||/\b127\.0\.0\.1\b/.test(e)?er:Ot}function rr(e){let t=`${e.domain} wants you to sign in with your Solana account:
`;t+=`${e.address}`,e.statement&&(t+=`

${e.statement}`);const n=[];if(e.uri&&n.push(`URI: ${e.uri}`),e.version&&n.push(`Version: ${e.version}`),e.chainId&&n.push(`Chain ID: ${e.chainId}`),e.nonce&&n.push(`Nonce: ${e.nonce}`),e.issuedAt&&n.push(`Issued At: ${e.issuedAt}`),e.expirationTime&&n.push(`Expiration Time: ${e.expirationTime}`),e.notBefore&&n.push(`Not Before: ${e.notBefore}`),e.requestId&&n.push(`Request ID: ${e.requestId}`),e.resources){n.push("Resources:");for(const r of e.resources)n.push(`- ${r}`)}return n.length&&(t+=`

${n.join(`
`)}`),t}const Q={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Z extends Error{constructor(...t){const[n,r,o]=t;super(r),this.code=n,this.data=o,this.name="SolanaMobileWalletAdapterError"}}class cn extends Error{constructor(...t){const[n,r,o,s]=t;super(o),this.code=r,this.data=s,this.jsonRpcMessageId=n,this.name="SolanaMobileWalletAdapterProtocolError"}}function W(e,t,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(c){try{u(r.next(c))}catch(f){i(f)}}function a(c){try{u(r.throw(c))}catch(f){i(f)}}function u(c){c.done?s(c.value):o(c.value).then(l,a)}u((r=r.apply(e,[])).next())})}function Xe(e,t){return W(this,void 0,void 0,function*(){const n=yield crypto.subtle.exportKey("raw",e),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,n),o=new Uint8Array(n.byteLength+r.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(r),n.byteLength),o})}function or(e){return window.btoa(e)}function sr(e){return rr(e)}function ir(e){return or(sr(e))}const ar="solana:signTransactions",Bt="solana:cloneAuthorization";function lr(e,t){return new Proxy({},{get(n,r){return n[r]==null&&(n[r]=function(o){return W(this,void 0,void 0,function*(){const{method:s,params:i}=cr(r,o,e),l=yield t(s,i);return s==="authorize"&&i.sign_in_payload&&!l.sign_in_result&&(l.sign_in_result=yield dr(i.sign_in_payload,l,t)),ur(r,l,e)})}),n[r]},defineProperty(){return!1},deleteProperty(){return!1}})}function cr(e,t,n){let r=t,o=e.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(e){case"authorize":{let{chain:s}=r;if(n==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=r.cluster}r.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}r.chain=s}}case"reauthorize":{const{auth_token:s,identity:i}=r;if(s)switch(n){case"legacy":{o="reauthorize",r={auth_token:s,identity:i};break}default:{o="authorize";break}}break}}return{method:o,params:r}}function ur(e,t,n){switch(e){case"getCapabilities":{const r=t;switch(n){case"legacy":{const o=[ar];return r.supports_clone_authorization===!0&&o.push(Bt),Object.assign(Object.assign({},r),{features:o})}case"v1":return Object.assign(Object.assign({},r),{supports_sign_and_send_transactions:!0,supports_clone_authorization:r.features.includes(Bt)})}}}return t}function dr(e,t,n){var r;return W(this,void 0,void 0,function*(){const o=(r=e.domain)!==null&&r!==void 0?r:window.location.host,s=t.accounts[0].address,i=ir(Object.assign(Object.assign({},e),{domain:o,address:s})),l=yield n("sign_messages",{addresses:[s],payloads:[i]});return{address:s,signed_message:i,signature:l.signed_payloads[0].slice(i.length)}})}const le=4;function fr(e){if(e>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const t=new ArrayBuffer(le);return new DataView(t).setUint32(0,e,!1),new Uint8Array(t)}const gt=12,un=65;function hr(e,t,n){return W(this,void 0,void 0,function*(){const r=fr(t),o=new Uint8Array(gt);crypto.getRandomValues(o);const s=yield crypto.subtle.encrypt(fn(r,o),n,new TextEncoder().encode(e)),i=new Uint8Array(r.byteLength+o.byteLength+s.byteLength);return i.set(new Uint8Array(r),0),i.set(new Uint8Array(o),r.byteLength),i.set(new Uint8Array(s),r.byteLength+o.byteLength),i})}function dn(e,t){return W(this,void 0,void 0,function*(){const n=e.slice(0,le),r=e.slice(le,le+gt),o=e.slice(le+gt),s=yield crypto.subtle.decrypt(fn(n,r),t,o);return gr().decode(s)})}function fn(e,t){return{additionalData:e,iv:t,name:"AES-GCM",tagLength:128}}let et;function gr(){return et===void 0&&(et=new TextDecoder("utf-8")),et}function mr(){return W(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function tt(){return W(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function wr(e,t){return W(this,void 0,void 0,function*(){const n=JSON.stringify(e),r=e.id;return hr(n,r,t)})}function pr(e,t){return W(this,void 0,void 0,function*(){const n=yield dn(e,t),r=JSON.parse(n);if(Object.hasOwnProperty.call(r,"error"))throw new cn(r.id,r.error.code,r.error.message);return r})}function yr(e,t,n){return W(this,void 0,void 0,function*(){const[r,o]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",e.slice(0,un),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:o},n,256),i=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},i,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function Er(e,t){return W(this,void 0,void 0,function*(){const n=yield dn(e,t),r=JSON.parse(n);let o="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":o="v1";break;case"legacy":o="legacy";break;default:throw new Z(Q.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:o}})}function vr(){return hn(49152+Math.floor(Math.random()*16384))}function hn(e){if(e<49152||e>65535)throw new Z(Q.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${e} given.`,{port:e});return e}function _r(e){let t="";const n=new Uint8Array(e),r=n.byteLength;for(let o=0;o<r;o++)t+=String.fromCharCode(n[o]);return window.btoa(t)}function br(e){return e.replace(/[/+=]/g,t=>({"/":"_","+":"-","=":"."})[t])}const Cr="solana-wallet";function Wt(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Sr(e,t){let n=null;if(t){try{n=new URL(t)}catch{}if((n==null?void 0:n.protocol)!=="https:")throw new Z(Q.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL(`${Cr}:/`));const r=e.startsWith("/")?e:[...Wt(n.pathname),...Wt(e)].join("/");return new URL(r,n)}function Ar(e,t,n,r=["v1"]){return W(this,void 0,void 0,function*(){const o=hn(t),s=yield crypto.subtle.exportKey("raw",e),i=_r(s),l=Sr("v1/associate/local",n);return l.searchParams.set("association",br(i)),l.searchParams.set("port",`${o}`),r.forEach(a=>{l.searchParams.set("v",a)}),l})}const xe={Firefox:0,Other:1};function Tr(){return navigator.userAgent.indexOf("Firefox/")!==-1?xe.Firefox:xe.Other}function Rr(){return new Promise((e,t)=>{function n(){clearTimeout(o),window.removeEventListener("blur",r)}function r(){n(),e()}window.addEventListener("blur",r);const o=setTimeout(()=>{n(),t()},2e3)})}let ve=null;function Ir(e){ve==null&&(ve=document.createElement("iframe"),ve.style.display="none",document.body.appendChild(ve)),ve.contentWindow.location.href=e.toString()}function Mr(e){return W(this,void 0,void 0,function*(){if(e.protocol==="https:")window.location.assign(e);else try{const t=Tr();switch(t){case xe.Firefox:Ir(e);break;case xe.Other:{const n=Rr();window.location.assign(e),yield n;break}default:}}catch{throw new Z(Q.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Nr(e,t){return W(this,void 0,void 0,function*(){const n=vr(),r=yield Ar(e,n,t);return yield Mr(r),n})}const Dt={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},Lr="com.solana.mobilewalletadapter.v1";function Pr(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Z(Q.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function Or(e){let t;try{t=new URL(e)}catch{throw new Z(Q.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(t.protocol!=="https:")throw new Z(Q.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function Ut(e){return new DataView(e).getUint32(0,!1)}function Br(e,t){return W(this,void 0,void 0,function*(){Pr();const n=yield mr(),o=`ws://localhost:${yield Nr(n.publicKey,t==null?void 0:t.baseUri)}/solana-wallet`;let s;const i=(()=>{const c=[...Dt.retryDelayScheduleMs];return()=>c.length>1?c.shift():c[0]})();let l=1,a=0,u={__type:"disconnected"};return new Promise((c,f)=>{let m;const d={},w=()=>W(this,void 0,void 0,function*(){if(u.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${u.__type}\`.`);return}m.removeEventListener("open",w);const{associationKeypair:C}=u,S=yield tt();m.send(yield Xe(S.publicKey,C.privateKey)),u={__type:"hello_req_sent",associationPublicKey:C.publicKey,ecdhPrivateKey:S.privateKey}}),_=C=>{C.wasClean?u={__type:"disconnected"}:f(new Z(Q.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${C.code}: ${C.reason}).`,{closeEvent:C})),p()},g=C=>W(this,void 0,void 0,function*(){p(),Date.now()-s>=Dt.timeoutMs?f(new Z(Q.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${o}.`)):(yield new Promise(S=>{const T=i();h=window.setTimeout(S,T)}),y())}),v=C=>W(this,void 0,void 0,function*(){const S=yield C.data.arrayBuffer();switch(u.__type){case"connecting":if(S.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const T=yield tt();m.send(yield Xe(T.publicKey,n.privateKey)),u={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:T.privateKey};break;case"connected":try{const R=S.slice(0,le),D=Ut(R);if(D!==a+1)throw new Error("Encrypted message has invalid sequence number");a=D;const U=yield pr(S,u.sharedSecret),G=d[U.id];delete d[U.id],G.resolve(U.result)}catch(R){if(R instanceof cn){const D=d[R.jsonRpcMessageId];delete d[R.jsonRpcMessageId],D.reject(R)}else throw R}break;case"hello_req_sent":{if(S.byteLength===0){const K=yield tt();m.send(yield Xe(K.publicKey,n.privateKey)),u={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:K.privateKey};break}const R=yield yr(S,u.associationPublicKey,u.ecdhPrivateKey),D=S.slice(un),U=D.byteLength!==0?yield W(this,void 0,void 0,function*(){const K=D.slice(0,le),k=Ut(K);if(k!==a+1)throw new Error("Encrypted message has invalid sequence number");return a=k,Er(D,R)}):{protocol_version:"legacy"};u={__type:"connected",sharedSecret:R,sessionProperties:U};const G=lr(U.protocol_version,(K,k)=>W(this,void 0,void 0,function*(){const Me=l++;return m.send(yield wr({id:Me,jsonrpc:"2.0",method:K,params:k??{}},R)),new Promise((I,L)=>{d[Me]={resolve(O){switch(K){case"authorize":case"reauthorize":{const{wallet_uri_base:V}=O;if(V!=null)try{Or(V)}catch(X){L(X);return}break}}I(O)},reject:L}})}));try{c(yield e(G))}catch(K){f(K)}finally{p(),m.close()}break}}});let p,h;const y=()=>{p&&p(),u={__type:"connecting",associationKeypair:n},s===void 0&&(s=Date.now()),m=new WebSocket(o,[Lr]),m.addEventListener("open",w),m.addEventListener("close",_),m.addEventListener("error",g),m.addEventListener("message",v),p=()=>{window.clearTimeout(h),m.removeEventListener("open",w),m.removeEventListener("close",_),m.removeEventListener("error",g),m.removeEventListener("message",v)}};y()})})}function Wr(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var o=e.charAt(r),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=r}var i=e.length,l=e.charAt(0),a=Math.log(i)/Math.log(256),u=Math.log(256)/Math.log(i);function c(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var w=0,_=0,g=0,v=d.length;g!==v&&d[g]===0;)g++,w++;for(var p=(v-g)*u+1>>>0,h=new Uint8Array(p);g!==v;){for(var y=d[g],C=0,S=p-1;(y!==0||C<_)&&S!==-1;S--,C++)y+=256*h[S]>>>0,h[S]=y%i>>>0,y=y/i>>>0;if(y!==0)throw new Error("Non-zero carry");_=C,g++}for(var T=p-_;T!==p&&h[T]===0;)T++;for(var R=l.repeat(w);T<p;++T)R+=e.charAt(h[T]);return R}function f(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;for(var w=0,_=0,g=0;d[w]===l;)_++,w++;for(var v=(d.length-w)*a+1>>>0,p=new Uint8Array(v);d[w];){var h=t[d.charCodeAt(w)];if(h===255)return;for(var y=0,C=v-1;(h!==0||y<g)&&C!==-1;C--,y++)h+=i*p[C]>>>0,p[C]=h%256>>>0,h=h/256>>>0;if(h!==0)throw new Error("Non-zero carry");g=y,w++}for(var S=v-g;S!==v&&p[S]===0;)S++;for(var T=new Uint8Array(_+(v-S)),R=_;S!==v;)T[R++]=p[S++];return T}function m(d){var w=f(d);if(w)return w;throw new Error("Non-base"+i+" character")}return{encode:c,decodeUnsafe:f,decode:m}}var Dr=Wr;const Ur=Dr,kr="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var xr=Ur(kr);const zr=Ct(xr);function nt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function Ne(e,t,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(c){try{u(r.next(c))}catch(f){i(f)}}function a(c){try{u(r.throw(c))}catch(f){i(f)}}function u(c){c.done?s(c.value):o(c.value).then(l,a)}u((r=r.apply(e,[])).next())})}function gn(e){return window.btoa(String.fromCharCode.call(null,...e))}function rt(e){return new Uint8Array(window.atob(e).split("").map(t=>t.charCodeAt(0)))}function kt(e){const t="version"in e?e.serialize():e.serialize({requireAllSignatures:!1,verifySignatures:!1});return gn(t)}function Fr(e){const n=e[0]*xn+1;return kn.deserializeMessageVersion(e.slice(n,e.length))==="legacy"?ft.from(e):ht.deserialize(e)}function Kr(e,t){return Ne(this,void 0,void 0,function*(){return yield Br(r=>{const o=new Proxy({},{get(s,i){if(s[i]==null)switch(i){case"signAndSendTransactions":s[i]=function(l){var{minContextSlot:a,commitment:u,skipPreflight:c,maxRetries:f,waitForCommitmentToSendNextTransaction:m,transactions:d}=l,w=nt(l,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return Ne(this,void 0,void 0,function*(){const _=d.map(kt),g={min_context_slot:a,commitment:u,skip_preflight:c,max_retries:f,wait_for_commitment_to_send_next_transaction:m},{signatures:v}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},w),Object.values(g).some(h=>h!=null)?{options:g}:null),{payloads:_}));return v.map(rt).map(zr.encode)})};break;case"signMessages":s[i]=function(l){var{payloads:a}=l,u=nt(l,["payloads"]);return Ne(this,void 0,void 0,function*(){const c=a.map(gn),{signed_payloads:f}=yield r.signMessages(Object.assign(Object.assign({},u),{payloads:c}));return f.map(rt)})};break;case"signTransactions":s[i]=function(l){var{transactions:a}=l,u=nt(l,["transactions"]);return Ne(this,void 0,void 0,function*(){const c=a.map(kt),{signed_payloads:f}=yield r.signTransactions(Object.assign(Object.assign({},u),{payloads:c}));return f.map(rt).map(Fr)})};break;default:{s[i]=r[i];break}}return s[i]},defineProperty(){return!1},deleteProperty(){return!1}});return e(o)},t)})}var jr=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},mn={},H={};let St;const Vr=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];H.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};H.getSymbolTotalCodewords=function(t){return Vr[t]};H.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};H.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');St=t};H.isKanjiModeEnabled=function(){return typeof St<"u"};H.toSJIS=function(t){return St(t)};var $e={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,o){if(e.isValid(r))return r;try{return t(r)}catch{return o}}})($e);function wn(){this.buffer=[],this.length=0}wn.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var $r=wn;function Ie(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Ie.prototype.set=function(e,t,n,r){const o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)};Ie.prototype.get=function(e,t){return this.data[e*this.size+t]};Ie.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Ie.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Hr=Ie,pn={};(function(e){const t=H.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const o=Math.floor(r/7)+2,s=t(r),i=s===145?26:Math.ceil((s-13)/(2*o-2))*2,l=[s-7];for(let a=1;a<o-1;a++)l[a]=l[a-1]-i;return l.push(6),l.reverse()},e.getPositions=function(r){const o=[],s=e.getRowColCoords(r),i=s.length;for(let l=0;l<i;l++)for(let a=0;a<i;a++)l===0&&a===0||l===0&&a===i-1||l===i-1&&a===0||o.push([s[l],s[a]]);return o}})(pn);var yn={};const Gr=H.getSymbolSize,xt=7;yn.getPositions=function(t){const n=Gr(t);return[[0,0],[n-xt,0],[0,n-xt]]};var En={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},e.from=function(o){return e.isValid(o)?parseInt(o,10):void 0},e.getPenaltyN1=function(o){const s=o.size;let i=0,l=0,a=0,u=null,c=null;for(let f=0;f<s;f++){l=a=0,u=c=null;for(let m=0;m<s;m++){let d=o.get(f,m);d===u?l++:(l>=5&&(i+=t.N1+(l-5)),u=d,l=1),d=o.get(m,f),d===c?a++:(a>=5&&(i+=t.N1+(a-5)),c=d,a=1)}l>=5&&(i+=t.N1+(l-5)),a>=5&&(i+=t.N1+(a-5))}return i},e.getPenaltyN2=function(o){const s=o.size;let i=0;for(let l=0;l<s-1;l++)for(let a=0;a<s-1;a++){const u=o.get(l,a)+o.get(l,a+1)+o.get(l+1,a)+o.get(l+1,a+1);(u===4||u===0)&&i++}return i*t.N2},e.getPenaltyN3=function(o){const s=o.size;let i=0,l=0,a=0;for(let u=0;u<s;u++){l=a=0;for(let c=0;c<s;c++)l=l<<1&2047|o.get(u,c),c>=10&&(l===1488||l===93)&&i++,a=a<<1&2047|o.get(c,u),c>=10&&(a===1488||a===93)&&i++}return i*t.N3},e.getPenaltyN4=function(o){let s=0;const i=o.data.length;for(let a=0;a<i;a++)s+=o.data[a];return Math.abs(Math.ceil(s*100/i/5)-10)*t.N4};function n(r,o,s){switch(r){case e.Patterns.PATTERN000:return(o+s)%2===0;case e.Patterns.PATTERN001:return o%2===0;case e.Patterns.PATTERN010:return s%3===0;case e.Patterns.PATTERN011:return(o+s)%3===0;case e.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(s/3))%2===0;case e.Patterns.PATTERN101:return o*s%2+o*s%3===0;case e.Patterns.PATTERN110:return(o*s%2+o*s%3)%2===0;case e.Patterns.PATTERN111:return(o*s%3+(o+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(o,s){const i=s.size;for(let l=0;l<i;l++)for(let a=0;a<i;a++)s.isReserved(a,l)||s.xor(a,l,n(o,a,l))},e.getBestMask=function(o,s){const i=Object.keys(e.Patterns).length;let l=0,a=1/0;for(let u=0;u<i;u++){s(u),e.applyMask(u,o);const c=e.getPenaltyN1(o)+e.getPenaltyN2(o)+e.getPenaltyN3(o)+e.getPenaltyN4(o);e.applyMask(u,o),c<a&&(a=c,l=u)}return l}})(En);var He={};const ne=$e,Le=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Pe=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];He.getBlocksCount=function(t,n){switch(n){case ne.L:return Le[(t-1)*4+0];case ne.M:return Le[(t-1)*4+1];case ne.Q:return Le[(t-1)*4+2];case ne.H:return Le[(t-1)*4+3];default:return}};He.getTotalCodewordsCount=function(t,n){switch(n){case ne.L:return Pe[(t-1)*4+0];case ne.M:return Pe[(t-1)*4+1];case ne.Q:return Pe[(t-1)*4+2];case ne.H:return Pe[(t-1)*4+3];default:return}};var vn={},Ge={};const Se=new Uint8Array(512),ze=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Se[n]=t,ze[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Se[n]=Se[n-255]})();Ge.log=function(t){if(t<1)throw new Error("log("+t+")");return ze[t]};Ge.exp=function(t){return Se[t]};Ge.mul=function(t,n){return t===0||n===0?0:Se[ze[t]+ze[n]]};(function(e){const t=Ge;e.mul=function(r,o){const s=new Uint8Array(r.length+o.length-1);for(let i=0;i<r.length;i++)for(let l=0;l<o.length;l++)s[i+l]^=t.mul(r[i],o[l]);return s},e.mod=function(r,o){let s=new Uint8Array(r);for(;s.length-o.length>=0;){const i=s[0];for(let a=0;a<o.length;a++)s[a]^=t.mul(o[a],i);let l=0;for(;l<s.length&&s[l]===0;)l++;s=s.slice(l)}return s},e.generateECPolynomial=function(r){let o=new Uint8Array([1]);for(let s=0;s<r;s++)o=e.mul(o,new Uint8Array([1,t.exp(s)]));return o}})(vn);const _n=vn;function At(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}At.prototype.initialize=function(t){this.degree=t,this.genPoly=_n.generateECPolynomial(this.degree)};At.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=_n.mod(n,this.genPoly),o=this.degree-r.length;if(o>0){const s=new Uint8Array(this.degree);return s.set(r,o),s}return r};var Yr=At,bn={},re={},Tt={};Tt.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var J={};const Cn="[0-9]+",qr="[A-Z $%*+\\-./:]+";let Re="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Re=Re.replace(/u/g,"\\u");const Jr="(?:(?![A-Z0-9 $%*+\\-./:]|"+Re+`)(?:.|[\r
]))+`;J.KANJI=new RegExp(Re,"g");J.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");J.BYTE=new RegExp(Jr,"g");J.NUMERIC=new RegExp(Cn,"g");J.ALPHANUMERIC=new RegExp(qr,"g");const Qr=new RegExp("^"+Re+"$"),Zr=new RegExp("^"+Cn+"$"),Xr=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");J.testKanji=function(t){return Qr.test(t)};J.testNumeric=function(t){return Zr.test(t)};J.testAlphanumeric=function(t){return Xr.test(t)};(function(e){const t=Tt,n=J;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(s,i){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!t.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?s.ccBits[0]:i<27?s.ccBits[1]:s.ccBits[2]},e.getBestModeForData=function(s){return n.testNumeric(s)?e.NUMERIC:n.testAlphanumeric(s)?e.ALPHANUMERIC:n.testKanji(s)?e.KANJI:e.BYTE},e.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},e.isValid=function(s){return s&&s.bit&&s.ccBits};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+o)}}e.from=function(s,i){if(e.isValid(s))return s;try{return r(s)}catch{return i}}})(re);(function(e){const t=H,n=He,r=$e,o=re,s=Tt,i=7973,l=t.getBCHDigit(i);function a(m,d,w){for(let _=1;_<=40;_++)if(d<=e.getCapacity(_,w,m))return _}function u(m,d){return o.getCharCountIndicator(m,d)+4}function c(m,d){let w=0;return m.forEach(function(_){const g=u(_.mode,d);w+=g+_.getBitsLength()}),w}function f(m,d){for(let w=1;w<=40;w++)if(c(m,w)<=e.getCapacity(w,d,o.MIXED))return w}e.from=function(d,w){return s.isValid(d)?parseInt(d,10):w},e.getCapacity=function(d,w,_){if(!s.isValid(d))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=o.BYTE);const g=t.getSymbolTotalCodewords(d),v=n.getTotalCodewordsCount(d,w),p=(g-v)*8;if(_===o.MIXED)return p;const h=p-u(_,d);switch(_){case o.NUMERIC:return Math.floor(h/10*3);case o.ALPHANUMERIC:return Math.floor(h/11*2);case o.KANJI:return Math.floor(h/13);case o.BYTE:default:return Math.floor(h/8)}},e.getBestVersionForData=function(d,w){let _;const g=r.from(w,r.M);if(Array.isArray(d)){if(d.length>1)return f(d,g);if(d.length===0)return 1;_=d[0]}else _=d;return a(_.mode,_.getLength(),g)},e.getEncodedBits=function(d){if(!s.isValid(d)||d<7)throw new Error("Invalid QR Code version");let w=d<<12;for(;t.getBCHDigit(w)-l>=0;)w^=i<<t.getBCHDigit(w)-l;return d<<12|w}})(bn);var Sn={};const mt=H,An=1335,eo=21522,zt=mt.getBCHDigit(An);Sn.getEncodedBits=function(t,n){const r=t.bit<<3|n;let o=r<<10;for(;mt.getBCHDigit(o)-zt>=0;)o^=An<<mt.getBCHDigit(o)-zt;return(r<<10|o)^eo};var Tn={};const to=re;function me(e){this.mode=to.NUMERIC,this.data=e.toString()}me.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};me.prototype.getLength=function(){return this.data.length};me.prototype.getBitsLength=function(){return me.getBitsLength(this.data.length)};me.prototype.write=function(t){let n,r,o;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),o=parseInt(r,10),t.put(o,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),o=parseInt(r,10),t.put(o,s*3+1))};var no=me;const ro=re,ot=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function we(e){this.mode=ro.ALPHANUMERIC,this.data=e}we.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};we.prototype.getLength=function(){return this.data.length};we.prototype.getBitsLength=function(){return we.getBitsLength(this.data.length)};we.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=ot.indexOf(this.data[n])*45;r+=ot.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(ot.indexOf(this.data[n]),6)};var oo=we;const so=re;function pe(e){this.mode=so.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}pe.getBitsLength=function(t){return t*8};pe.prototype.getLength=function(){return this.data.length};pe.prototype.getBitsLength=function(){return pe.getBitsLength(this.data.length)};pe.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var io=pe;const ao=re,lo=H;function ye(e){this.mode=ao.KANJI,this.data=e}ye.getBitsLength=function(t){return t*13};ye.prototype.getLength=function(){return this.data.length};ye.prototype.getBitsLength=function(){return ye.getBitsLength(this.data.length)};ye.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=lo.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var co=ye,Rn={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,o){var s={},i={};i[r]=0;var l=t.PriorityQueue.make();l.push(r,0);for(var a,u,c,f,m,d,w,_,g;!l.empty();){a=l.pop(),u=a.value,f=a.cost,m=n[u]||{};for(c in m)m.hasOwnProperty(c)&&(d=m[c],w=f+d,_=i[c],g=typeof i[c]>"u",(g||_>w)&&(i[c]=w,l.push(c,w),s[c]=u))}if(typeof o<"u"&&typeof i[o]>"u"){var v=["Could not find a path from ",r," to ",o,"."].join("");throw new Error(v)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var o=[],s=r;s;)o.push(s),n[s],s=n[s];return o.reverse(),o},find_path:function(n,r,o){var s=t.single_source_shortest_paths(n,r,o);return t.extract_shortest_path_from_predecessor_list(s,o)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,o={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);return o.queue=[],o.sorter=n.sorter||r.default_sorter,o},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var o={value:n,cost:r};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Rn);var uo=Rn.exports;(function(e){const t=re,n=no,r=oo,o=io,s=co,i=J,l=H,a=uo;function u(v){return unescape(encodeURIComponent(v)).length}function c(v,p,h){const y=[];let C;for(;(C=v.exec(h))!==null;)y.push({data:C[0],index:C.index,mode:p,length:C[0].length});return y}function f(v){const p=c(i.NUMERIC,t.NUMERIC,v),h=c(i.ALPHANUMERIC,t.ALPHANUMERIC,v);let y,C;return l.isKanjiModeEnabled()?(y=c(i.BYTE,t.BYTE,v),C=c(i.KANJI,t.KANJI,v)):(y=c(i.BYTE_KANJI,t.BYTE,v),C=[]),p.concat(h,y,C).sort(function(T,R){return T.index-R.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function m(v,p){switch(p){case t.NUMERIC:return n.getBitsLength(v);case t.ALPHANUMERIC:return r.getBitsLength(v);case t.KANJI:return s.getBitsLength(v);case t.BYTE:return o.getBitsLength(v)}}function d(v){return v.reduce(function(p,h){const y=p.length-1>=0?p[p.length-1]:null;return y&&y.mode===h.mode?(p[p.length-1].data+=h.data,p):(p.push(h),p)},[])}function w(v){const p=[];for(let h=0;h<v.length;h++){const y=v[h];switch(y.mode){case t.NUMERIC:p.push([y,{data:y.data,mode:t.ALPHANUMERIC,length:y.length},{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.ALPHANUMERIC:p.push([y,{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.KANJI:p.push([y,{data:y.data,mode:t.BYTE,length:u(y.data)}]);break;case t.BYTE:p.push([{data:y.data,mode:t.BYTE,length:u(y.data)}])}}return p}function _(v,p){const h={},y={start:{}};let C=["start"];for(let S=0;S<v.length;S++){const T=v[S],R=[];for(let D=0;D<T.length;D++){const U=T[D],G=""+S+D;R.push(G),h[G]={node:U,lastCount:0},y[G]={};for(let K=0;K<C.length;K++){const k=C[K];h[k]&&h[k].node.mode===U.mode?(y[k][G]=m(h[k].lastCount+U.length,U.mode)-m(h[k].lastCount,U.mode),h[k].lastCount+=U.length):(h[k]&&(h[k].lastCount=U.length),y[k][G]=m(U.length,U.mode)+4+t.getCharCountIndicator(U.mode,p))}}C=R}for(let S=0;S<C.length;S++)y[C[S]].end=0;return{map:y,table:h}}function g(v,p){let h;const y=t.getBestModeForData(v);if(h=t.from(p,y),h!==t.BYTE&&h.bit<y.bit)throw new Error('"'+v+'" cannot be encoded with mode '+t.toString(h)+`.
 Suggested mode is: `+t.toString(y));switch(h===t.KANJI&&!l.isKanjiModeEnabled()&&(h=t.BYTE),h){case t.NUMERIC:return new n(v);case t.ALPHANUMERIC:return new r(v);case t.KANJI:return new s(v);case t.BYTE:return new o(v)}}e.fromArray=function(p){return p.reduce(function(h,y){return typeof y=="string"?h.push(g(y,null)):y.data&&h.push(g(y.data,y.mode)),h},[])},e.fromString=function(p,h){const y=f(p,l.isKanjiModeEnabled()),C=w(y),S=_(C,h),T=a.find_path(S.map,"start","end"),R=[];for(let D=1;D<T.length-1;D++)R.push(S.table[T[D]].node);return e.fromArray(d(R))},e.rawSplit=function(p){return e.fromArray(f(p,l.isKanjiModeEnabled()))}})(Tn);const Ye=H,st=$e,fo=$r,ho=Hr,go=pn,mo=yn,wt=En,pt=He,wo=Yr,Fe=bn,po=Sn,yo=re,it=Tn;function Eo(e,t){const n=e.size,r=mo.getPositions(t);for(let o=0;o<r.length;o++){const s=r[o][0],i=r[o][1];for(let l=-1;l<=7;l++)if(!(s+l<=-1||n<=s+l))for(let a=-1;a<=7;a++)i+a<=-1||n<=i+a||(l>=0&&l<=6&&(a===0||a===6)||a>=0&&a<=6&&(l===0||l===6)||l>=2&&l<=4&&a>=2&&a<=4?e.set(s+l,i+a,!0,!0):e.set(s+l,i+a,!1,!0))}}function vo(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function _o(e,t){const n=go.getPositions(t);for(let r=0;r<n.length;r++){const o=n[r][0],s=n[r][1];for(let i=-2;i<=2;i++)for(let l=-2;l<=2;l++)i===-2||i===2||l===-2||l===2||i===0&&l===0?e.set(o+i,s+l,!0,!0):e.set(o+i,s+l,!1,!0)}}function bo(e,t){const n=e.size,r=Fe.getEncodedBits(t);let o,s,i;for(let l=0;l<18;l++)o=Math.floor(l/3),s=l%3+n-8-3,i=(r>>l&1)===1,e.set(o,s,i,!0),e.set(s,o,i,!0)}function at(e,t,n){const r=e.size,o=po.getEncodedBits(t,n);let s,i;for(s=0;s<15;s++)i=(o>>s&1)===1,s<6?e.set(s,8,i,!0):s<8?e.set(s+1,8,i,!0):e.set(r-15+s,8,i,!0),s<8?e.set(8,r-s-1,i,!0):s<9?e.set(8,15-s-1+1,i,!0):e.set(8,15-s-1,i,!0);e.set(r-8,8,1,!0)}function Co(e,t){const n=e.size;let r=-1,o=n-1,s=7,i=0;for(let l=n-1;l>0;l-=2)for(l===6&&l--;;){for(let a=0;a<2;a++)if(!e.isReserved(o,l-a)){let u=!1;i<t.length&&(u=(t[i]>>>s&1)===1),e.set(o,l-a,u),s--,s===-1&&(i++,s=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}function So(e,t,n){const r=new fo;n.forEach(function(a){r.put(a.mode.bit,4),r.put(a.getLength(),yo.getCharCountIndicator(a.mode,e)),a.write(r)});const o=Ye.getSymbolTotalCodewords(e),s=pt.getTotalCodewordsCount(e,t),i=(o-s)*8;for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(i-r.getLengthInBits())/8;for(let a=0;a<l;a++)r.put(a%2?17:236,8);return Ao(r,e,t)}function Ao(e,t,n){const r=Ye.getSymbolTotalCodewords(t),o=pt.getTotalCodewordsCount(t,n),s=r-o,i=pt.getBlocksCount(t,n),l=r%i,a=i-l,u=Math.floor(r/i),c=Math.floor(s/i),f=c+1,m=u-c,d=new wo(m);let w=0;const _=new Array(i),g=new Array(i);let v=0;const p=new Uint8Array(e.buffer);for(let T=0;T<i;T++){const R=T<a?c:f;_[T]=p.slice(w,w+R),g[T]=d.encode(_[T]),w+=R,v=Math.max(v,R)}const h=new Uint8Array(r);let y=0,C,S;for(C=0;C<v;C++)for(S=0;S<i;S++)C<_[S].length&&(h[y++]=_[S][C]);for(C=0;C<m;C++)for(S=0;S<i;S++)h[y++]=g[S][C];return h}function To(e,t,n,r){let o;if(Array.isArray(e))o=it.fromArray(e);else if(typeof e=="string"){let u=t;if(!u){const c=it.rawSplit(e);u=Fe.getBestVersionForData(c,n)}o=it.fromString(e,u||40)}else throw new Error("Invalid data");const s=Fe.getBestVersionForData(o,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=s;else if(t<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const i=So(t,n,o),l=Ye.getSymbolSize(t),a=new ho(l);return Eo(a,t),vo(a),_o(a,t),at(a,n,0),t>=7&&bo(a,t),Co(a,i),isNaN(r)&&(r=wt.getBestMask(a,at.bind(null,a,n))),wt.applyMask(r,a),at(a,n,r),{modules:a,version:t,errorCorrectionLevel:n,maskPattern:r,segments:o}}mn.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=st.M,o,s;return typeof n<"u"&&(r=st.from(n.errorCorrectionLevel,st.M),o=Fe.from(n.version),s=wt.from(n.maskPattern),n.toSJISFunc&&Ye.setToSJISFunction(n.toSJISFunc)),To(t,o,r,s)};var In={},Rt={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const o=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,i=r.scale||4;return{width:s,scale:s?4:i,margin:o,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,o){return o.width&&o.width>=r+o.margin*2?o.width/(r+o.margin*2):o.scale},e.getImageWidth=function(r,o){const s=e.getScale(r,o);return Math.floor((r+o.margin*2)*s)},e.qrToImageData=function(r,o,s){const i=o.modules.size,l=o.modules.data,a=e.getScale(i,s),u=Math.floor((i+s.margin*2)*a),c=s.margin*a,f=[s.color.light,s.color.dark];for(let m=0;m<u;m++)for(let d=0;d<u;d++){let w=(m*u+d)*4,_=s.color.light;if(m>=c&&d>=c&&m<u-c&&d<u-c){const g=Math.floor((m-c)/a),v=Math.floor((d-c)/a);_=f[l[g*i+v]?1:0]}r[w++]=_.r,r[w++]=_.g,r[w++]=_.b,r[w]=_.a}}})(Rt);(function(e){const t=Rt;function n(o,s,i){o.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=i,s.width=i,s.style.height=i+"px",s.style.width=i+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(s,i,l){let a=l,u=i;typeof a>"u"&&(!i||!i.getContext)&&(a=i,i=void 0),i||(u=r()),a=t.getOptions(a);const c=t.getImageWidth(s.modules.size,a),f=u.getContext("2d"),m=f.createImageData(c,c);return t.qrToImageData(m.data,s,a),n(f,u,c),f.putImageData(m,0,0),u},e.renderToDataURL=function(s,i,l){let a=l;typeof a>"u"&&(!i||!i.getContext)&&(a=i,i=void 0),a||(a={});const u=e.render(s,i,a),c=a.type||"image/png",f=a.rendererOpts||{};return u.toDataURL(c,f.quality)}})(In);var Mn={};const Ro=Rt;function Ft(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function lt(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function Io(e,t,n){let r="",o=0,s=!1,i=0;for(let l=0;l<e.length;l++){const a=Math.floor(l%t),u=Math.floor(l/t);!a&&!s&&(s=!0),e[l]?(i++,l>0&&a>0&&e[l-1]||(r+=s?lt("M",a+n,.5+u+n):lt("m",o,0),o=0,s=!1),a+1<t&&e[l+1]||(r+=lt("h",i),i=0)):o++}return r}Mn.render=function(t,n,r){const o=Ro.getOptions(n),s=t.modules.size,i=t.modules.data,l=s+o.margin*2,a=o.color.light.a?"<path "+Ft(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+Ft(o.color.dark,"stroke")+' d="'+Io(i,s,o.margin)+'"/>',c='viewBox="0 0 '+l+" "+l+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+c+' shape-rendering="crispEdges">'+a+u+`</svg>
`;return typeof r=="function"&&r(null,m),m};const Mo=jr,yt=mn,Nn=In,No=Mn;function It(e,t,n,r,o){const s=[].slice.call(arguments,1),i=s.length,l=typeof s[i-1]=="function";if(!l&&!Mo())throw new Error("Callback required as last argument");if(l){if(i<2)throw new Error("Too few arguments provided");i===2?(o=n,n=t,t=r=void 0):i===3&&(t.getContext&&typeof o>"u"?(o=r,r=void 0):(o=r,r=n,n=t,t=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(n=t,t=r=void 0):i===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(a,u){try{const c=yt.create(n,r);a(e(c,t,r))}catch(c){u(c)}})}try{const a=yt.create(n,r);o(null,e(a,t,r))}catch(a){o(a)}}yt.create;It.bind(null,Nn.render);It.bind(null,Nn.renderToDataURL);It.bind(null,function(e,t,n){return No.render(e,n)});function M(e,t,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(c){try{u(r.next(c))}catch(f){i(f)}}function a(c){try{u(r.throw(c))}catch(f){i(f)}}function u(c){c.done?s(c.value):o(c.value).then(l,a)}u((r=r.apply(e,[])).next())})}function We(e){return new Uint8Array(window.atob(e).split("").map(t=>t.charCodeAt(0)))}function Lo(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const ee="Mobile Wallet Adapter",Po=64;function Oo(e){const t=We(e);return new Qt(t)}function Kt(e){return"version"in e}function Bo(e){switch(e){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class Wo extends Yn{constructor(t){var n;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=ee,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=Lo()?P.Loadable:P.Unsupported,this._authorizationResultCache=t.authorizationResultCache,this._addressSelector=t.addressSelector,this._appIdentity=t.appIdentity,this._chain=(n=t.chain)!==null&&n!==void 0?n:Bo(t.cluster),this._hostAuthority=t.remoteHostAuthority,this._onWalletNotFound=t.onWalletNotFound,this._readyState!==P.Unsupported&&this._authorizationResultCache.get().then(r=>{r&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=Oo(this._selectedAddress)}catch(t){throw new tn(t instanceof Error&&(t==null?void 0:t.message)||"Unknown error",t)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==P.Installed&&this.emit("readyStateChange",this._readyState=P.Installed)}runWithGuard(t){return M(this,void 0,void 0,function*(){try{return yield t()}catch(n){throw this.emit("error",n),n}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return M(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return M(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>M(this,void 0,void 0,function*(){if(this._readyState!==P.Installed&&this._readyState!==P.Loadable)throw new he;this._connecting=!0;try{const t=yield this._authorizationResultCache.get();t&&this.handleAuthorizationResult(t)}catch(t){throw new be(t instanceof Error&&t.message||"Unknown error",t)}finally{this._connecting=!1}}))})}connect(){return M(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>M(this,void 0,void 0,function*(){if(this._readyState!==P.Installed&&this._readyState!==P.Loadable)throw new he;this._connecting=!0;try{yield this.performAuthorization()}catch(t){throw new be(t instanceof Error&&t.message||"Unknown error",t)}finally{this._connecting=!1}}))})}performAuthorization(t){return M(this,void 0,void 0,function*(){try{const n=yield this._authorizationResultCache.get();return n?(this.handleAuthorizationResult(n),n):yield this.transact(r=>M(this,void 0,void 0,function*(){const o=yield r.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:t});return Promise.all([this._authorizationResultCache.set(o),this.handleAuthorizationResult(o)]),o}))}catch(n){throw new be(n instanceof Error&&n.message||"Unknown error",n)}})}handleAuthorizationResult(t){var n;return M(this,void 0,void 0,function*(){const r=this._authorizationResult==null||((n=this._authorizationResult)===null||n===void 0?void 0:n.accounts.length)!==t.accounts.length||this._authorizationResult.accounts.some((o,s)=>o.address!==t.accounts[s].address);if(this._authorizationResult=t,this.declareWalletAsInstalled(),r){const o=yield this._addressSelector.select(t.accounts.map(({address:s})=>s));o!==this._selectedAddress&&(this._selectedAddress=o,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(t,n){return M(this,void 0,void 0,function*(){try{const r=yield t.authorize({auth_token:n,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(r),this.handleAuthorizationResult(r)])}catch(r){throw this.disconnect(),new en(r instanceof Error&&(r==null?void 0:r.message)||"Unknown error",r)}})}disconnect(){return M(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(t){var n;return M(this,void 0,void 0,function*(){const r=(n=this._authorizationResult)===null||n===void 0?void 0:n.wallet_uri_base,o=r?{baseUri:r}:void 0,s=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,i=this._connectionGeneration;try{return yield Kr(t,Object.assign(Object.assign({},o),s))}catch(l){throw this._connectionGeneration!==i&&(yield new Promise(()=>{})),l instanceof Error&&l.name==="SolanaMobileWalletAdapterError"&&l.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),l}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new q;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(t){return M(this,void 0,void 0,function*(){const{authToken:n}=this.assertIsAuthorized();try{return yield this.transact(r=>M(this,void 0,void 0,function*(){return yield this.performReauthorization(r,n),yield r.signTransactions({transactions:t})}))}catch(r){throw new ie(r==null?void 0:r.message,r)}})}sendTransaction(t,n,r){return M(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>M(this,void 0,void 0,function*(){const{authToken:o}=this.assertIsAuthorized(),s=r==null?void 0:r.minContextSlot;try{return yield this.transact(i=>M(this,void 0,void 0,function*(){function l(){let f;switch(n.commitment){case"confirmed":case"finalized":case"processed":f=n.commitment;break;default:f="finalized"}let m;switch(r==null?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":m=r.preflightCommitment;break;case void 0:m=f;break;default:m="finalized"}return(m==="finalized"?2:m==="confirmed"?1:0)<(f==="finalized"?2:f==="confirmed"?1:0)?m:f}const[a,u,c]=yield Promise.all([i.getCapabilities(),this.performReauthorization(i,o),Kt(t)?null:M(this,void 0,void 0,function*(){var f;if(t.feePayer||(t.feePayer=(f=this.publicKey)!==null&&f!==void 0?f:void 0),t.recentBlockhash==null){const{blockhash:m}=yield n.getLatestBlockhash({commitment:l()});t.recentBlockhash=m}})]);if(a.supports_sign_and_send_transactions)return(yield i.signAndSendTransactions({minContextSlot:s,transactions:[t]}))[0];{const[f]=yield i.signTransactions({transactions:[t]});if(Kt(f))return yield n.sendTransaction(f);{const m=f.serialize();return yield n.sendRawTransaction(m,Object.assign(Object.assign({},r),{preflightCommitment:l()}))}}}))}catch(i){throw new se(i==null?void 0:i.message,i)}}))})}signTransaction(t){return M(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>M(this,void 0,void 0,function*(){const[n]=yield this.performSignTransactions([t]);return n}))})}signAllTransactions(t){return M(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>M(this,void 0,void 0,function*(){return yield this.performSignTransactions(t)}))})}signMessage(t){return M(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>M(this,void 0,void 0,function*(){const{authToken:n,selectedAddress:r}=this.assertIsAuthorized();try{return yield this.transact(o=>M(this,void 0,void 0,function*(){yield this.performReauthorization(o,n);const[s]=yield o.signMessages({addresses:[r],payloads:[t]});return s.slice(-Po)}))}catch(o){throw new nn(o==null?void 0:o.message,o)}}))})}signIn(t){return M(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>M(this,void 0,void 0,function*(){var n,r;if(this._readyState!==P.Installed&&this._readyState!==P.Loadable)throw new he;this._connecting=!0;try{const o=yield this.performAuthorization(Object.assign(Object.assign({},t),{domain:(n=t==null?void 0:t.domain)!==null&&n!==void 0?n:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=o.sign_in_result.address;return{account:Object.assign(Object.assign({},(r=o.accounts.find(l=>l.address==s))!==null&&r!==void 0?r:{address:s}),{publicKey:We(s)}),signedMessage:We(o.sign_in_result.signed_message),signature:We(o.sign_in_result.signature)}}catch(o){throw new be(o instanceof Error&&o.message||"Unknown error",o)}finally{this._connecting=!1}}))})}}function Do(){return{select(e){return M(this,void 0,void 0,function*(){return e[0]})}}}const ct="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Uo(){let e;try{e=window.localStorage}catch{}return{clear(){return M(this,void 0,void 0,function*(){if(e)try{e.removeItem(ct)}catch{}})},get(){return M(this,void 0,void 0,function*(){if(e)try{return JSON.parse(e.getItem(ct))||void 0}catch{}})},set(t){return M(this,void 0,void 0,function*(){if(e)try{e.setItem(ct,JSON.stringify(t))}catch{}})}}}function ko(e){return M(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(e.url)})}function xo(){return ko}var zo=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Fo=function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},De;function Is(e){const t=({register:n})=>n(e);try{window.dispatchEvent(new Ko(t))}catch(n){console.error(`wallet-standard:register-wallet event could not be dispatched
`,n)}try{window.addEventListener("wallet-standard:app-ready",({detail:n})=>t(n))}catch(n){console.error(`wallet-standard:app-ready event listener could not be added
`,n)}}class Ko extends Event{get detail(){return zo(this,De,"f")}get type(){return"wallet-standard:register-wallet"}constructor(t){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),De.set(this,void 0),Fo(this,De,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}De=new WeakMap;function jo(e,t){if(e===t)return!0;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var Oe=zn.Buffer;function Vo(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var o=e.charAt(r),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=r}var i=e.length,l=e.charAt(0),a=Math.log(i)/Math.log(256),u=Math.log(256)/Math.log(i);function c(d){if((Array.isArray(d)||d instanceof Uint8Array)&&(d=Oe.from(d)),!Oe.isBuffer(d))throw new TypeError("Expected Buffer");if(d.length===0)return"";for(var w=0,_=0,g=0,v=d.length;g!==v&&d[g]===0;)g++,w++;for(var p=(v-g)*u+1>>>0,h=new Uint8Array(p);g!==v;){for(var y=d[g],C=0,S=p-1;(y!==0||C<_)&&S!==-1;S--,C++)y+=256*h[S]>>>0,h[S]=y%i>>>0,y=y/i>>>0;if(y!==0)throw new Error("Non-zero carry");_=C,g++}for(var T=p-_;T!==p&&h[T]===0;)T++;for(var R=l.repeat(w);T<p;++T)R+=e.charAt(h[T]);return R}function f(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return Oe.alloc(0);for(var w=0,_=0,g=0;d[w]===l;)_++,w++;for(var v=(d.length-w)*a+1>>>0,p=new Uint8Array(v);w<d.length;){var h=t[d.charCodeAt(w)];if(h===255)return;for(var y=0,C=v-1;(h!==0||y<g)&&C!==-1;C--,y++)h+=i*p[C]>>>0,p[C]=h%256>>>0,h=h/256>>>0;if(h!==0)throw new Error("Non-zero carry");g=y,w++}for(var S=v-g;S!==v&&p[S]===0;)S++;var T=Oe.allocUnsafe(_+(v-S));T.fill(0,0,_);for(var R=_;S!==v;)T[R++]=p[S++];return T}function m(d){var w=f(d);if(w)return w;throw new Error("Non-base"+i+" character")}return{encode:c,decodeUnsafe:f,decode:m}}var $o=Vo,Ho=$o,Go="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Yo=Ho(Go);const qo=Ct(Yo);var B=function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},A=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},z,j,ce,ue,oe,Ce,Ke,N,je,Et,Ue,vt,Ae,_t,jt,Vt,$t,Ht;class Jo extends rn{constructor({wallet:t}){super(),z.add(this),j.set(this,void 0),ce.set(this,void 0),ue.set(this,void 0),oe.set(this,void 0),Ce.set(this,void 0),Ke.set(this,void 0),N.set(this,void 0),je.set(this,typeof window>"u"||typeof document>"u"?P.Unsupported:P.Installed),_t.set(this,n=>{if("accounts"in n){const r=A(this,N,"f").accounts[0];A(this,j,"f")&&!A(this,oe,"f")&&r!==A(this,j,"f")&&(r?A(this,z,"m",Ue).call(this,r):(this.emit("error",new en),A(this,z,"m",vt).call(this)))}"features"in n&&A(this,z,"m",Ae).call(this)}),B(this,N,t,"f"),B(this,j,null,"f"),B(this,ce,null,"f"),B(this,ue,!1,"f"),B(this,oe,!1,"f"),B(this,Ce,A(this,N,"f").features[sn].on("change",A(this,_t,"f")),"f"),A(this,z,"m",Ae).call(this)}get name(){return A(this,N,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return A(this,N,"f").icon}get readyState(){return A(this,je,"f")}get publicKey(){return A(this,ce,"f")}get connecting(){return A(this,ue,"f")}get supportedTransactionVersions(){return A(this,Ke,"f")}get wallet(){return A(this,N,"f")}get standard(){return!0}destroy(){B(this,j,null,"f"),B(this,ce,null,"f"),B(this,ue,!1,"f"),B(this,oe,!1,"f");const t=A(this,Ce,"f");t&&(B(this,Ce,null,"f"),t())}async autoConnect(){return A(this,z,"m",Et).call(this,{silent:!0})}async connect(){return A(this,z,"m",Et).call(this)}async disconnect(){if(Nt in A(this,N,"f").features)try{B(this,oe,!0,"f"),await A(this,N,"f").features[Nt].disconnect()}catch(t){this.emit("error",new $n(t==null?void 0:t.message,t))}finally{B(this,oe,!1,"f")}A(this,z,"m",vt).call(this)}async sendTransaction(t,n,r={}){try{const o=A(this,j,"f");if(!o)throw new q;let s;if(te in A(this,N,"f").features)if(o.features.includes(te))s=te;else if(x in A(this,N,"f").features&&o.features.includes(x))s=x;else throw new de;else if(x in A(this,N,"f").features){if(!o.features.includes(x))throw new de;s=x}else throw new _e;const i=nr(n.rpcEndpoint);if(!o.chains.includes(i))throw new se;try{const{signers:l,...a}=r;let u;if(ae(t)?(l!=null&&l.length&&t.sign(l),u=t.serialize()):(t=await this.prepareTransaction(t,n,a),l!=null&&l.length&&t.partialSign(...l),u=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===te){const[c]=await A(this,N,"f").features[te].signAndSendTransaction({account:o,chain:i,transaction:u,options:{preflightCommitment:Ze(a.preflightCommitment||n.commitment),skipPreflight:a.skipPreflight,maxRetries:a.maxRetries,minContextSlot:a.minContextSlot}});return qo.encode(c.signature)}else{const[c]=await A(this,N,"f").features[x].signTransaction({account:o,chain:i,transaction:u,options:{preflightCommitment:Ze(a.preflightCommitment||n.commitment),minContextSlot:a.minContextSlot}});return await n.sendRawTransaction(c.signedTransaction,{...a,preflightCommitment:Ze(a.preflightCommitment||n.commitment)})}}catch(l){throw l instanceof F?l:new se(l==null?void 0:l.message,l)}}catch(o){throw this.emit("error",o),o}}}j=new WeakMap,ce=new WeakMap,ue=new WeakMap,oe=new WeakMap,Ce=new WeakMap,Ke=new WeakMap,N=new WeakMap,je=new WeakMap,_t=new WeakMap,z=new WeakSet,Et=async function(t){try{if(this.connected||this.connecting)return;if(A(this,je,"f")!==P.Installed)throw new he;if(B(this,ue,!0,"f"),!A(this,N,"f").accounts.length)try{await A(this,N,"f").features[on].connect(t)}catch(r){throw new be(r==null?void 0:r.message,r)}const n=A(this,N,"f").accounts[0];if(!n)throw new de;A(this,z,"m",Ue).call(this,n)}catch(n){throw this.emit("error",n),n}finally{B(this,ue,!1,"f")}},Ue=function(t){let n;try{n=new Qt(t.address)}catch(r){throw new tn(r==null?void 0:r.message,r)}B(this,j,t,"f"),B(this,ce,n,"f"),A(this,z,"m",Ae).call(this),this.emit("connect",n)},vt=function(){B(this,j,null,"f"),B(this,ce,null,"f"),A(this,z,"m",Ae).call(this),this.emit("disconnect")},Ae=function(){var n,r;const t=te in A(this,N,"f").features?A(this,N,"f").features[te].supportedTransactionVersions:A(this,N,"f").features[x].supportedTransactionVersions;B(this,Ke,jo(t,["legacy"])?null:new Set(t),"f"),x in A(this,N,"f").features&&((n=A(this,j,"f"))!=null&&n.features.includes(x))?(this.signTransaction=A(this,z,"m",jt),this.signAllTransactions=A(this,z,"m",Vt)):(delete this.signTransaction,delete this.signAllTransactions),Ee in A(this,N,"f").features&&((r=A(this,j,"f"))!=null&&r.features.includes(Ee))?this.signMessage=A(this,z,"m",$t):delete this.signMessage,Qe in A(this,N,"f").features?this.signIn=A(this,z,"m",Ht):delete this.signIn},jt=async function(t){try{const n=A(this,j,"f");if(!n)throw new q;if(!(x in A(this,N,"f").features))throw new _e;if(!n.features.includes(x))throw new de;try{const o=(await A(this,N,"f").features[x].signTransaction({account:n,transaction:ae(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return ae(t)?ht.deserialize(o):ft.from(o)}catch(r){throw r instanceof F?r:new ie(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},Vt=async function(t){try{const n=A(this,j,"f");if(!n)throw new q;if(!(x in A(this,N,"f").features))throw new _e;if(!n.features.includes(x))throw new de;try{const r=await A(this,N,"f").features[x].signTransaction(...t.map(o=>({account:n,transaction:ae(o)?o.serialize():new Uint8Array(o.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return t.map((o,s)=>{const i=r[s].signedTransaction;return ae(o)?ht.deserialize(i):ft.from(i)})}catch(r){throw new ie(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},$t=async function(t){try{const n=A(this,j,"f");if(!n)throw new q;if(!(Ee in A(this,N,"f").features))throw new _e;if(!n.features.includes(Ee))throw new de;try{return(await A(this,N,"f").features[Ee].signMessage({account:n,message:t}))[0].signature}catch(r){throw new nn(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},Ht=async function(t={}){try{if(!(Qe in A(this,N,"f").features))throw new _e;let n;try{[n]=await A(this,N,"f").features[Qe].signIn(t)}catch(r){throw new Mt(r==null?void 0:r.message,r)}if(!n)throw new Mt;return A(this,z,"m",Ue).call(this,n.account),n}catch(n){throw this.emit("error",n),n}};const Qo=qn;var Zo=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Xo=function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},ke;let $;const qe=new Set;function es(e){Te=void 0,qe.add(e)}function ts(e){Te=void 0,qe.delete(e)}const fe={};function ns(){if($||($=Object.freeze({register:Gt,get:rs,on:os}),typeof window>"u"))return $;const e=Object.freeze({register:Gt});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(e))}catch(t){console.error(`wallet-standard:register-wallet event listener could not be added
`,t)}try{window.dispatchEvent(new ss(e))}catch(t){console.error(`wallet-standard:app-ready event could not be dispatched
`,t)}return $}function Gt(...e){var t;return e=e.filter(n=>!qe.has(n)),e.length?(e.forEach(n=>es(n)),(t=fe.register)==null||t.forEach(n=>bt(()=>n(...e))),function(){var r;e.forEach(o=>ts(o)),(r=fe.unregister)==null||r.forEach(o=>bt(()=>o(...e)))}):()=>{}}let Te;function rs(){return Te||(Te=[...qe]),Te}function os(e,t){var n;return(n=fe[e])!=null&&n.push(t)||(fe[e]=[t]),function(){var o;fe[e]=(o=fe[e])==null?void 0:o.filter(s=>t!==s)}}function bt(e){try{e()}catch(t){console.error(t)}}class ss extends Event{get detail(){return Zo(this,ke,"f")}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),ke.set(this,void 0),Xo(this,ke,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}ke=new WeakMap;function is(){if($||($=ns(),typeof window>"u"))return $;const e=window.navigator.wallets||[];if(!Array.isArray(e))return console.error("window.navigator.wallets is not an array"),$;const{register:t}=$,n=(...r)=>r.forEach(o=>bt(()=>o({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch{return console.error("window.navigator.wallets could not be set"),$}return n(...e),$}function as(e){const t=Yt(()=>new Set),{get:n,on:r}=Yt(()=>is()),[o,s]=b.useState(()=>qt(n()));b.useEffect(()=>{const l=[r("register",(...a)=>s(u=>[...u,...qt(a)])),r("unregister",(...a)=>s(u=>u.filter(c=>a.some(f=>f===c.wallet))))];return()=>l.forEach(a=>a())},[r]);const i=ls(o);return b.useEffect(()=>{if(!i)return;const l=new Set(o);new Set(i.filter(u=>!l.has(u))).forEach(u=>u.destroy())},[i,o]),b.useEffect(()=>()=>o.forEach(l=>l.destroy()),[]),b.useMemo(()=>[...o,...e.filter(({name:l})=>o.some(a=>a.name===l)?(t.has(l)||(t.add(l),console.warn(`${l} was registered as a Standard Wallet. The Wallet Adapter for ${l} can be removed from your app.`)),!1):!0)],[o,e,t])}function Yt(e){const t=b.useRef();return t.current||(t.current={value:e()}),t.current.value}function ls(e){const t=b.useRef();return b.useEffect(()=>{t.current=e}),t.current}function qt(e){return e.filter(Qo).map(t=>new Jo({wallet:t}))}var ge;(function(e){e[e.DESKTOP_WEB=0]="DESKTOP_WEB",e[e.MOBILE_WEB=1]="MOBILE_WEB"})(ge||(ge={}));function cs(e){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(e)}function us({adapters:e,userAgentString:t}){return e.some(n=>n.name!==ee&&n.readyState===P.Installed)?ge.DESKTOP_WEB:t&&/android/i.test(t)&&!cs(t)?ge.MOBILE_WEB:ge.DESKTOP_WEB}function ds(e){return e?/devnet/i.test(e)?"devnet":/testnet/i.test(e)?"testnet":"mainnet-beta":"mainnet-beta"}function fs({children:e,wallets:t,adapter:n,isUnloadingRef:r,onAutoConnectRequest:o,onConnectError:s,onError:i,onSelectWallet:l}){const a=b.useRef(!1),[u,c]=b.useState(!1),f=b.useRef(!1),[m,d]=b.useState(!1),[w,_]=b.useState(()=>(n==null?void 0:n.publicKey)??null),[g,v]=b.useState(()=>(n==null?void 0:n.connected)??!1),p=b.useRef(i);b.useEffect(()=>(p.current=i,()=>{p.current=void 0}),[i]);const h=b.useRef((I,L)=>(r.current||(p.current?p.current(I,L):(console.error(I,L),I instanceof he&&typeof window<"u"&&L&&window.open(L.url,"_blank"))),I)),[y,C]=b.useState(()=>t.map(I=>({adapter:I,readyState:I.readyState})).filter(({readyState:I})=>I!==P.Unsupported));b.useEffect(()=>{C(L=>t.map((O,V)=>{const X=L[V];return X&&X.adapter===O&&X.readyState===O.readyState?X:{adapter:O,readyState:O.readyState}}).filter(({readyState:O})=>O!==P.Unsupported));function I(L){C(O=>{const V=O.findIndex(({adapter:Je})=>Je===this);if(V===-1)return O;const{adapter:X}=O[V];return[...O.slice(0,V),{adapter:X,readyState:L},...O.slice(V+1)].filter(({readyState:Je})=>Je!==P.Unsupported)})}return t.forEach(L=>L.on("readyStateChange",I,L)),()=>{t.forEach(L=>L.off("readyStateChange",I,L))}},[n,t]);const S=b.useMemo(()=>y.find(I=>I.adapter===n)??null,[n,y]);b.useEffect(()=>{if(!n)return;const I=V=>{_(V),a.current=!1,c(!1),v(!0),f.current=!1,d(!1)},L=()=>{r.current||(_(null),a.current=!1,c(!1),v(!1),f.current=!1,d(!1))},O=V=>{h.current(V,n)};return n.on("connect",I),n.on("disconnect",L),n.on("error",O),()=>{n.off("connect",I),n.off("disconnect",L),n.off("error",O),L()}},[n,r]);const T=b.useRef(!1);b.useEffect(()=>()=>{T.current=!1},[n]),b.useEffect(()=>{T.current||a.current||g||!o||!((S==null?void 0:S.readyState)===P.Installed||(S==null?void 0:S.readyState)===P.Loadable)||(a.current=!0,c(!0),T.current=!0,async function(){try{await o()}catch{s()}finally{c(!1),a.current=!1}}())},[g,o,s,S]);const R=b.useCallback(async(I,L,O)=>{if(!n)throw h.current(new Pt);if(!g)throw h.current(new q,n);return await n.sendTransaction(I,L,O)},[n,g]),D=b.useMemo(()=>n&&"signTransaction"in n?async I=>{if(!g)throw h.current(new q,n);return await n.signTransaction(I)}:void 0,[n,g]),U=b.useMemo(()=>n&&"signAllTransactions"in n?async I=>{if(!g)throw h.current(new q,n);return await n.signAllTransactions(I)}:void 0,[n,g]),G=b.useMemo(()=>n&&"signMessage"in n?async I=>{if(!g)throw h.current(new q,n);return await n.signMessage(I)}:void 0,[n,g]),K=b.useMemo(()=>n&&"signIn"in n?async I=>await n.signIn(I):void 0,[n]),k=b.useCallback(async()=>{if(a.current||f.current||S!=null&&S.adapter.connected)return;if(!S)throw h.current(new Pt);const{adapter:I,readyState:L}=S;if(!(L===P.Installed||L===P.Loadable))throw h.current(new he,I);a.current=!0,c(!0);try{await I.connect()}catch(O){throw s(),O}finally{c(!1),a.current=!1}},[s,S]),Me=b.useCallback(async()=>{if(!f.current&&n){f.current=!0,d(!0);try{await n.disconnect()}finally{d(!1),f.current=!1}}},[n]);return E.createElement(an.Provider,{value:{autoConnect:!!o,wallets:y,wallet:S,publicKey:w,connected:g,connecting:u,disconnecting:m,select:l,connect:k,disconnect:Me,sendTransaction:R,signTransaction:D,signAllTransactions:U,signMessage:G,signIn:K}},e)}let ut;function hs(){var e;return ut===void 0&&(ut=((e=globalThis.navigator)==null?void 0:e.userAgent)??null),ut}function Be(e){const t=hs();return us({adapters:e,userAgentString:t})===ge.MOBILE_WEB}function gs(){const e=globalThis.location;if(e)return`${e.protocol}//${e.host}`}function Ms({children:e,wallets:t,autoConnect:n,localStorageKey:r="walletName",onError:o}){const{connection:s}=Kn(),i=as(t),l=b.useMemo(()=>{if(!Be(i))return null;const p=i.find(h=>h.name===ee);return p||new Wo({addressSelector:Do(),appIdentity:{uri:gs()},authorizationResultCache:Uo(),cluster:ds(s==null?void 0:s.rpcEndpoint),onWalletNotFound:xo()})},[i,s==null?void 0:s.rpcEndpoint]),a=b.useMemo(()=>l==null||i.indexOf(l)!==-1?i:[l,...i],[i,l]),[u,c]=Qn(r,Be(i)?ee:null),f=b.useMemo(()=>a.find(p=>p.name===u)??null,[a,u]),m=b.useCallback(p=>{u!==p&&(f&&f.name!==ee&&f.disconnect(),c(p))},[f,c,u]);b.useEffect(()=>{if(!f)return;function p(){_.current||u===ee&&Be(i)||c(null)}return f.on("disconnect",p),()=>{f.off("disconnect",p)}},[f,i,c,u]);const d=b.useRef(!1),w=b.useMemo(()=>{if(!(!n||!f))return async()=>{(n===!0||await n(f))&&(d.current?await f.connect():await f.autoConnect())}},[n,f]),_=b.useRef(!1);b.useEffect(()=>{if(u===ee&&Be(i)){_.current=!1;return}function p(){_.current=!0}return window.addEventListener("beforeunload",p),()=>{window.removeEventListener("beforeunload",p)}},[i,u]);const g=b.useCallback(()=>{f&&f.name!==ee&&m(null)},[f,m]),v=b.useCallback(p=>{d.current=!0,m(p)},[m]);return E.createElement(fs,{wallets:a,adapter:f,isUnloadingRef:_,onAutoConnectRequest:w,onConnectError:g,onError:o,onSelectWallet:v},e)}const Ln={setVisible(e){console.error(Pn("call","setVisible"))},visible:!1};Object.defineProperty(Ln,"visible",{get(){return console.error(Pn("read","visible")),!1}});function Pn(e,t){return`You have tried to  ${e} "${t}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const On=b.createContext(Ln);function Bn(){return b.useContext(On)}function ms({onSelectWallet:e}){const{connect:t,connected:n,connecting:r,disconnect:o,disconnecting:s,publicKey:i,select:l,wallet:a,wallets:u}=ln();let c;r?c="connecting":n?c="connected":s?c="disconnecting":a?c="has-wallet":c="no-wallet";const f=b.useCallback(()=>{t().catch(()=>{})},[t]),m=b.useCallback(()=>{o().catch(()=>{})},[o]),d=b.useCallback(()=>{e({onSelectWallet:l,wallets:u})},[e,l,u]);return{buttonState:c,onConnect:c==="has-wallet"?f:void 0,onDisconnect:c!=="disconnecting"&&c!=="no-wallet"?m:void 0,onSelectWallet:d,publicKey:i??void 0,walletIcon:a==null?void 0:a.adapter.icon,walletName:a==null?void 0:a.adapter.name}}const Wn=e=>E.createElement("button",{className:`wallet-adapter-button ${e.className||""}`,disabled:e.disabled,style:e.style,onClick:e.onClick,tabIndex:e.tabIndex||0,type:"button"},e.startIcon&&E.createElement("i",{className:"wallet-adapter-button-start-icon"},e.startIcon),e.children,e.endIcon&&E.createElement("i",{className:"wallet-adapter-button-end-icon"},e.endIcon)),Dn=({wallet:e,...t})=>e&&E.createElement("img",{src:e.adapter.icon,alt:`${e.adapter.name} icon`,...t});function ws({walletIcon:e,walletName:t,...n}){return E.createElement(Wn,{...n,className:"wallet-adapter-button-trigger",startIcon:e&&t?E.createElement(Dn,{wallet:{adapter:{icon:e,name:t}}}):void 0})}function ps({children:e,labels:t,...n}){const{setVisible:r}=Bn(),{buttonState:o,onConnect:s,onDisconnect:i,publicKey:l,walletIcon:a,walletName:u}=ms({onSelectWallet(){r(!0)}}),[c,f]=b.useState(!1),[m,d]=b.useState(!1),w=b.useRef(null);b.useEffect(()=>{const g=v=>{const p=w.current;!p||p.contains(v.target)||d(!1)};return document.addEventListener("mousedown",g),document.addEventListener("touchstart",g),()=>{document.removeEventListener("mousedown",g),document.removeEventListener("touchstart",g)}},[]);const _=b.useMemo(()=>{if(e)return e;if(l){const g=l.toBase58();return g.slice(0,4)+".."+g.slice(-4)}else return o==="connecting"||o==="has-wallet"?t[o]:t["no-wallet"]},[o,e,t,l]);return E.createElement("div",{className:"wallet-adapter-dropdown"},E.createElement(ws,{...n,"aria-expanded":m,style:{pointerEvents:m?"none":"auto",...n.style},onClick:()=>{switch(o){case"no-wallet":r(!0);break;case"has-wallet":s&&s();break;case"connected":d(!0);break}},walletIcon:a,walletName:u},_),E.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${m&&"wallet-adapter-dropdown-list-active"}`,ref:w,role:"menu"},l?E.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(l.toBase58()),f(!0),setTimeout(()=>f(!1),400)},role:"menuitem"},c?t.copied:t["copy-address"]):null,E.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{r(!0),d(!1)},role:"menuitem"},t["change-wallet"]),i?E.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{i(),d(!1)},role:"menuitem"},t.disconnect):null))}const Jt=({id:e,children:t,expanded:n=!1})=>{const r=b.useRef(null),o=b.useRef(!0),s="height 250ms ease-out",i=()=>{const a=r.current;a&&requestAnimationFrame(()=>{a.style.height=a.scrollHeight+"px"})},l=()=>{const a=r.current;a&&requestAnimationFrame(()=>{a.style.height=a.offsetHeight+"px",a.style.overflow="hidden",requestAnimationFrame(()=>{a.style.height="0"})})};return b.useLayoutEffect(()=>{n?i():l()},[n]),b.useLayoutEffect(()=>{const a=r.current;if(!a)return;function u(){a&&(a.style.overflow=n?"initial":"hidden",n&&(a.style.height="auto"))}function c(f){a&&f.target===a&&f.propertyName==="height"&&u()}return o.current&&(u(),o.current=!1),a.addEventListener("transitionend",c),()=>a.removeEventListener("transitionend",c)},[n]),E.createElement("div",{className:"wallet-adapter-collapse",id:e,ref:r,role:"region",style:{height:0,transition:o.current?void 0:s}},t)},dt=({handleClick:e,tabIndex:t,wallet:n})=>E.createElement("li",null,E.createElement(Wn,{onClick:e,startIcon:E.createElement(Dn,{wallet:n}),tabIndex:t},n.adapter.name,n.readyState===P.Installed&&E.createElement("span",null,"Detected"))),ys=()=>E.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},E.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),E.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),E.createElement("g",{clipPath:"url(#clip0_880_5115)"},E.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),E.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),E.createElement("defs",null,E.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},E.createElement("stop",{stopColor:"#9945FF"}),E.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),E.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),E.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),E.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),E.createElement("stop",{offset:"1",stopColor:"#00D18C"})),E.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},E.createElement("stop",{stopColor:"#9945FF"}),E.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),E.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),E.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),E.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),E.createElement("stop",{offset:"1",stopColor:"#00D18C"})),E.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},E.createElement("stop",{stopColor:"#9945FF"}),E.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),E.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),E.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),E.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),E.createElement("stop",{offset:"1",stopColor:"#00D18C"})),E.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},E.createElement("stop",{stopColor:"#9945FF"}),E.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),E.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),E.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),E.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),E.createElement("stop",{offset:"1",stopColor:"#00D18C"})),E.createElement("clipPath",{id:"clip0_880_5115"},E.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),Es=({className:e="",container:t="body"})=>{const n=b.useRef(null),{wallets:r,select:o}=ln(),{setVisible:s}=Bn(),[i,l]=b.useState(!1),[a,u]=b.useState(!1),[c,f]=b.useState(null),[m,d]=b.useMemo(()=>{const h=[],y=[];for(const C of r)C.readyState===P.Installed?h.push(C):y.push(C);return h.length?[h,y]:[y,[]]},[r]),w=b.useCallback(()=>{u(!1),setTimeout(()=>s(!1),150)},[s]),_=b.useCallback(h=>{h.preventDefault(),w()},[w]),g=b.useCallback((h,y)=>{o(y),_(h)},[o,_]),v=b.useCallback(()=>l(!i),[i]),p=b.useCallback(h=>{const y=n.current;if(!y)return;const C=y.querySelectorAll("button"),S=C[0],T=C[C.length-1];h.shiftKey?document.activeElement===S&&(T.focus(),h.preventDefault()):document.activeElement===T&&(S.focus(),h.preventDefault())},[n]);return b.useLayoutEffect(()=>{const h=C=>{C.key==="Escape"?w():C.key==="Tab"&&p(C)},{overflow:y}=window.getComputedStyle(document.body);return setTimeout(()=>u(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",h,!1),()=>{document.body.style.overflow=y,window.removeEventListener("keydown",h,!1)}},[w,p]),b.useLayoutEffect(()=>f(document.querySelector(t)),[t]),c&&Fn.createPortal(E.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${a&&"wallet-adapter-modal-fade-in"} ${e}`,ref:n,role:"dialog"},E.createElement("div",{className:"wallet-adapter-modal-container"},E.createElement("div",{className:"wallet-adapter-modal-wrapper"},E.createElement("button",{onClick:_,className:"wallet-adapter-modal-button-close"},E.createElement("svg",{width:"14",height:"14"},E.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),m.length?E.createElement(E.Fragment,null,E.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),E.createElement("ul",{className:"wallet-adapter-modal-list"},m.map(h=>E.createElement(dt,{key:h.adapter.name,handleClick:y=>g(y,h.adapter.name),wallet:h})),d.length?E.createElement(Jt,{expanded:i,id:"wallet-adapter-modal-collapse"},d.map(h=>E.createElement(dt,{key:h.adapter.name,handleClick:y=>g(y,h.adapter.name),tabIndex:i?0:-1,wallet:h}))):null),d.length?E.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:v,tabIndex:0},E.createElement("span",null,i?"Less ":"More ","options"),E.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${i?"wallet-adapter-modal-list-more-icon-rotate":""}`},E.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):E.createElement(E.Fragment,null,E.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),E.createElement("div",{className:"wallet-adapter-modal-middle"},E.createElement(ys,null)),d.length?E.createElement(E.Fragment,null,E.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:v,tabIndex:0},E.createElement("span",null,i?"Hide ":"Already have a wallet? View ","options"),E.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${i?"wallet-adapter-modal-list-more-icon-rotate":""}`},E.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),E.createElement(Jt,{expanded:i,id:"wallet-adapter-modal-collapse"},E.createElement("ul",{className:"wallet-adapter-modal-list"},d.map(h=>E.createElement(dt,{key:h.adapter.name,handleClick:y=>g(y,h.adapter.name),tabIndex:i?0:-1,wallet:h}))))):null))),E.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:_})),c)},Ns=({children:e,...t})=>{const[n,r]=b.useState(!1);return E.createElement(On.Provider,{value:{visible:n,setVisible:r}},e,n&&E.createElement(Es,{...t}))},vs={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function Ls(e){return E.createElement(ps,{...e,labels:vs})}export{Ms as A,Gn as B,Ss as C,Ns as D,ln as E,Ls as F,Kn as G,Ot as S,P as W,en as a,tn as b,he as c,be as d,de as e,$n as f,q as g,ae as h,Rs as i,F as j,se as k,ie as l,nn as m,Zn as n,Xn as o,on as p,Nt as q,sn as r,Ts as s,te as t,x as u,Ee as v,Is as w,As as x,_e as y,Lt as z};
